var vt=Object.defineProperty;var gt=(e,i,t)=>i in e?vt(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t;var ht=(e,i,t)=>(gt(e,typeof i!="symbol"?i+"":i,t),t);import{E as ENCODE_TXT,D as DECODE_TXT}from"./consts-a14090c0.js";function waitfor(e){return new Promise(i=>{setTimeout(()=>{i("")},e)})}function appendLog(...e){console.log(...e);const i=document.createElement("p");i.innerText=e.map(t=>JSON.stringify(t)).join(" | "),document.body.appendChild(i)}function getWebsocketURL(e,i=!1){return e.replace("http","ws")}function _mergeNamespaces(e,i){return i.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if(n!=="default"&&!(n in e)){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(e)}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var loglevel={exports:{}};(function(e){(function(i,t){e.exports?e.exports=t():i.log=t()})(commonjsGlobal,function(){var i=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"];function o(m,w){var _=m[w];if(typeof _.bind=="function")return _.bind(m);try{return Function.prototype.bind.call(_,m)}catch{return function(){return Function.prototype.apply.apply(_,[m,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(m){return m==="debug"&&(m="log"),typeof console===t?!1:m==="trace"&&n?d:console[m]!==void 0?o(console,m):console.log!==void 0?o(console,"log"):i}function f(m,w){for(var _=0;_<a.length;_++){var C=a[_];this[C]=_<m?i:this.methodFactory(C,m,w)}this.log=this.debug}function c(m,w,_){return function(){typeof console!==t&&(f.call(this,w,_),this[m].apply(this,arguments))}}function h(m,w,_){return s(m)||c.apply(this,arguments)}function v(m,w,_){var C=this,N;w=w??"WARN";var P="loglevel";typeof m=="string"?P+=":"+m:typeof m=="symbol"&&(P=void 0);function M(Z){var re=(a[Z]||"silent").toUpperCase();if(!(typeof window===t||!P)){try{window.localStorage[P]=re;return}catch{}try{window.document.cookie=encodeURIComponent(P)+"="+re+";"}catch{}}}function U(){var Z;if(!(typeof window===t||!P)){try{Z=window.localStorage[P]}catch{}if(typeof Z===t)try{var re=window.document.cookie,Y=re.indexOf(encodeURIComponent(P)+"=");Y!==-1&&(Z=/^([^;]+)/.exec(re.slice(Y))[1])}catch{}return C.levels[Z]===void 0&&(Z=void 0),Z}}function W(){if(!(typeof window===t||!P)){try{window.localStorage.removeItem(P);return}catch{}try{window.document.cookie=encodeURIComponent(P)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}C.name=m,C.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},C.methodFactory=_||h,C.getLevel=function(){return N},C.setLevel=function(Z,re){if(typeof Z=="string"&&C.levels[Z.toUpperCase()]!==void 0&&(Z=C.levels[Z.toUpperCase()]),typeof Z=="number"&&Z>=0&&Z<=C.levels.SILENT){if(N=Z,re!==!1&&M(Z),f.call(C,Z,m),typeof console===t&&Z<C.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+Z},C.setDefaultLevel=function(Z){w=Z,U()||C.setLevel(Z,!1)},C.resetLevel=function(){C.setLevel(w,!1),W()},C.enableAll=function(Z){C.setLevel(C.levels.TRACE,Z)},C.disableAll=function(Z){C.setLevel(C.levels.SILENT,Z)};var q=U();q==null&&(q=w),C.setLevel(q,!1)}var l=new v,u={};l.getLogger=function(w){if(typeof w!="symbol"&&typeof w!="string"||w==="")throw new TypeError("You must supply a name when creating a logger.");var _=u[w];return _||(_=u[w]=new v(w,l.getLevel(),l.methodFactory)),_};var p=typeof window!==t?window.log:void 0;return l.noConflict=function(){return typeof window!==t&&window.log===l&&(window.log=p),l},l.getLoggers=function(){return u},l.default=l,l})})(loglevel);var loglevelExports=loglevel.exports,LogLevel;(function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"})(LogLevel||(LogLevel={}));const livekitLogger=loglevelExports.getLogger("livekit");livekitLogger.setLevel(LogLevel.info);var long=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Long(e,i,t){this.low=e|0,this.high=i|0,this.unsigned=!!t}Long.prototype.__isLong__;Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong(e){return(e&&e.__isLong__)===!0}Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,i){var t,n,a;return i?(e>>>=0,(a=0<=e&&e<256)&&(n=UINT_CACHE[e],n)?n:(t=fromBits(e,(e|0)<0?-1:0,!0),a&&(UINT_CACHE[e]=t),t)):(e|=0,(a=-128<=e&&e<128)&&(n=INT_CACHE[e],n)?n:(t=fromBits(e,e<0?-1:0,!1),a&&(INT_CACHE[e]=t),t))}Long.fromInt=fromInt;function fromNumber(e,i){if(isNaN(e))return i?UZERO:ZERO;if(i){if(e<0)return UZERO;if(e>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(e+1>=TWO_PWR_63_DBL)return MAX_VALUE}return e<0?fromNumber(-e,i).neg():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,i)}Long.fromNumber=fromNumber;function fromBits(e,i,t){return new Long(e,i,t)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(e,i,t){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return ZERO;if(typeof i=="number"?(t=i,i=!1):i=!!i,t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return fromString(e.substring(1),i,t).neg();for(var a=fromNumber(pow_dbl(t,8)),o=ZERO,d=0;d<e.length;d+=8){var s=Math.min(8,e.length-d),f=parseInt(e.substring(d,d+s),t);if(s<8){var c=fromNumber(pow_dbl(t,s));o=o.mul(c).add(fromNumber(f))}else o=o.mul(a),o=o.add(fromNumber(f))}return o.unsigned=i,o}Long.fromString=fromString;function fromValue(e,i){return typeof e=="number"?fromNumber(e,i):typeof e=="string"?fromString(e,i):fromBits(e.low,e.high,typeof i=="boolean"?i:e.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=1<<16,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low};LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)};LongPrototype.toString=function(i){if(i=i||10,i<2||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var t=fromNumber(i),n=this.div(t),a=n.mul(t).sub(this);return n.toString(i)+a.toInt().toString(i)}else return"-"+this.neg().toString(i);for(var o=fromNumber(pow_dbl(i,6),this.unsigned),d=this,s="";;){var f=d.div(o),c=d.sub(f.mul(o)).toInt()>>>0,h=c.toString(i);if(d=f,d.isZero())return h+s;for(;h.length<6;)h="0"+h;s=""+h+s}};LongPrototype.getHighBits=function(){return this.high};LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0};LongPrototype.getLowBits=function(){return this.low};LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0};LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var i=this.high!=0?this.high:this.low,t=31;t>0&&!(i&1<<t);t--);return this.high!=0?t+33:t+1};LongPrototype.isZero=function(){return this.high===0&&this.low===0};LongPrototype.eqz=LongPrototype.isZero;LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0};LongPrototype.isPositive=function(){return this.unsigned||this.high>=0};LongPrototype.isOdd=function(){return(this.low&1)===1};LongPrototype.isEven=function(){return(this.low&1)===0};LongPrototype.equals=function(i){return isLong(i)||(i=fromValue(i)),this.unsigned!==i.unsigned&&this.high>>>31===1&&i.high>>>31===1?!1:this.high===i.high&&this.low===i.low};LongPrototype.eq=LongPrototype.equals;LongPrototype.notEquals=function(i){return!this.eq(i)};LongPrototype.neq=LongPrototype.notEquals;LongPrototype.ne=LongPrototype.notEquals;LongPrototype.lessThan=function(i){return this.comp(i)<0};LongPrototype.lt=LongPrototype.lessThan;LongPrototype.lessThanOrEqual=function(i){return this.comp(i)<=0};LongPrototype.lte=LongPrototype.lessThanOrEqual;LongPrototype.le=LongPrototype.lessThanOrEqual;LongPrototype.greaterThan=function(i){return this.comp(i)>0};LongPrototype.gt=LongPrototype.greaterThan;LongPrototype.greaterThanOrEqual=function(i){return this.comp(i)>=0};LongPrototype.gte=LongPrototype.greaterThanOrEqual;LongPrototype.ge=LongPrototype.greaterThanOrEqual;LongPrototype.compare=function(i){if(isLong(i)||(i=fromValue(i)),this.eq(i))return 0;var t=this.isNegative(),n=i.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1};LongPrototype.comp=LongPrototype.compare;LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)};LongPrototype.neg=LongPrototype.negate;LongPrototype.add=function(i){isLong(i)||(i=fromValue(i));var t=this.high>>>16,n=this.high&65535,a=this.low>>>16,o=this.low&65535,d=i.high>>>16,s=i.high&65535,f=i.low>>>16,c=i.low&65535,h=0,v=0,l=0,u=0;return u+=o+c,l+=u>>>16,u&=65535,l+=a+f,v+=l>>>16,l&=65535,v+=n+s,h+=v>>>16,v&=65535,h+=t+d,h&=65535,fromBits(l<<16|u,h<<16|v,this.unsigned)};LongPrototype.subtract=function(i){return isLong(i)||(i=fromValue(i)),this.add(i.neg())};LongPrototype.sub=LongPrototype.subtract;LongPrototype.multiply=function(i){if(this.isZero())return ZERO;if(isLong(i)||(i=fromValue(i)),wasm){var t=wasm.mul(this.low,this.high,i.low,i.high);return fromBits(t,wasm.get_high(),this.unsigned)}if(i.isZero())return ZERO;if(this.eq(MIN_VALUE))return i.isOdd()?MIN_VALUE:ZERO;if(i.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return i.isNegative()?this.neg().mul(i.neg()):this.neg().mul(i).neg();if(i.isNegative())return this.mul(i.neg()).neg();if(this.lt(TWO_PWR_24)&&i.lt(TWO_PWR_24))return fromNumber(this.toNumber()*i.toNumber(),this.unsigned);var n=this.high>>>16,a=this.high&65535,o=this.low>>>16,d=this.low&65535,s=i.high>>>16,f=i.high&65535,c=i.low>>>16,h=i.low&65535,v=0,l=0,u=0,p=0;return p+=d*h,u+=p>>>16,p&=65535,u+=o*h,l+=u>>>16,u&=65535,u+=d*c,l+=u>>>16,u&=65535,l+=a*h,v+=l>>>16,l&=65535,l+=o*c,v+=l>>>16,l&=65535,l+=d*f,v+=l>>>16,l&=65535,v+=n*h+a*c+o*f+d*s,v&=65535,fromBits(u<<16|p,v<<16|l,this.unsigned)};LongPrototype.mul=LongPrototype.multiply;LongPrototype.divide=function(i){if(isLong(i)||(i=fromValue(i)),i.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&i.low===-1&&i.high===-1)return this;var t=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,i.low,i.high);return fromBits(t,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var n,a,o;if(this.unsigned){if(i.unsigned||(i=i.toUnsigned()),i.gt(this))return UZERO;if(i.gt(this.shru(1)))return UONE;o=UZERO}else{if(this.eq(MIN_VALUE)){if(i.eq(ONE)||i.eq(NEG_ONE))return MIN_VALUE;if(i.eq(MIN_VALUE))return ONE;var d=this.shr(1);return n=d.div(i).shl(1),n.eq(ZERO)?i.isNegative()?ONE:NEG_ONE:(a=this.sub(i.mul(n)),o=n.add(a.div(i)),o)}else if(i.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return i.isNegative()?this.neg().div(i.neg()):this.neg().div(i).neg();if(i.isNegative())return this.div(i.neg()).neg();o=ZERO}for(a=this;a.gte(i);){n=Math.max(1,Math.floor(a.toNumber()/i.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),f=s<=48?1:pow_dbl(2,s-48),c=fromNumber(n),h=c.mul(i);h.isNegative()||h.gt(a);)n-=f,c=fromNumber(n,this.unsigned),h=c.mul(i);c.isZero()&&(c=ONE),o=o.add(c),a=a.sub(h)}return o};LongPrototype.div=LongPrototype.divide;LongPrototype.modulo=function(i){if(isLong(i)||(i=fromValue(i)),wasm){var t=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,i.low,i.high);return fromBits(t,wasm.get_high(),this.unsigned)}return this.sub(this.div(i).mul(i))};LongPrototype.mod=LongPrototype.modulo;LongPrototype.rem=LongPrototype.modulo;LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)};LongPrototype.and=function(i){return isLong(i)||(i=fromValue(i)),fromBits(this.low&i.low,this.high&i.high,this.unsigned)};LongPrototype.or=function(i){return isLong(i)||(i=fromValue(i)),fromBits(this.low|i.low,this.high|i.high,this.unsigned)};LongPrototype.xor=function(i){return isLong(i)||(i=fromValue(i)),fromBits(this.low^i.low,this.high^i.high,this.unsigned)};LongPrototype.shiftLeft=function(i){return isLong(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?fromBits(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):fromBits(0,this.low<<i-32,this.unsigned)};LongPrototype.shl=LongPrototype.shiftLeft;LongPrototype.shiftRight=function(i){return isLong(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?fromBits(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):fromBits(this.high>>i-32,this.high>=0?0:-1,this.unsigned)};LongPrototype.shr=LongPrototype.shiftRight;LongPrototype.shiftRightUnsigned=function(i){if(isLong(i)&&(i=i.toInt()),i&=63,i===0)return this;var t=this.high;if(i<32){var n=this.low;return fromBits(n>>>i|t<<32-i,t>>>i,this.unsigned)}else return i===32?fromBits(t,0,this.unsigned):fromBits(t>>>i-32,0,this.unsigned)};LongPrototype.shru=LongPrototype.shiftRightUnsigned;LongPrototype.shr_u=LongPrototype.shiftRightUnsigned;LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this};LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)};LongPrototype.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()};LongPrototype.toBytesLE=function(){var i=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,i&255,i>>>8&255,i>>>16&255,i>>>24]};LongPrototype.toBytesBE=function(){var i=this.high,t=this.low;return[i>>>24,i>>>16&255,i>>>8&255,i&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};Long.fromBytes=function(i,t,n){return n?Long.fromBytesLE(i,t):Long.fromBytesBE(i,t)};Long.fromBytesLE=function(i,t){return new Long(i[0]|i[1]<<8|i[2]<<16|i[3]<<24,i[4]|i[5]<<8|i[6]<<16|i[7]<<24,t)};Long.fromBytesBE=function(i,t){return new Long(i[4]<<24|i[5]<<16|i[6]<<8|i[7],i[0]<<24|i[1]<<16|i[2]<<8|i[3],t)};var Long$1=getDefaultExportFromCjs(long),indexMinimal={},minimal$1={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=e;function e(i,t){for(var n=new Array(arguments.length-1),a=0,o=2,d=!0;o<arguments.length;)n[a++]=arguments[o++];return new Promise(function(f,c){n[a]=function(v){if(d)if(d=!1,v)c(v);else{for(var l=new Array(arguments.length-1),u=0;u<l.length;)l[u++]=arguments[u];f.apply(null,l)}};try{i.apply(t||null,n)}catch(h){d&&(d=!1,c(h))}})}return aspromise}var base64$1={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(e){var i=e;i.length=function(s){var f=s.length;if(!f)return 0;for(var c=0;--f%4>1&&s.charAt(f)==="=";)++c;return Math.ceil(s.length*3)/4-c};for(var t=new Array(64),n=new Array(123),a=0;a<64;)n[t[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;i.encode=function(s,f,c){for(var h=null,v=[],l=0,u=0,p;f<c;){var m=s[f++];switch(u){case 0:v[l++]=t[m>>2],p=(m&3)<<4,u=1;break;case 1:v[l++]=t[p|m>>4],p=(m&15)<<2,u=2;break;case 2:v[l++]=t[p|m>>6],v[l++]=t[m&63],u=0;break}l>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,v)),l=0)}return u&&(v[l++]=t[p],v[l++]=61,u===1&&(v[l++]=61)),h?(l&&h.push(String.fromCharCode.apply(String,v.slice(0,l))),h.join("")):String.fromCharCode.apply(String,v.slice(0,l))};var o="invalid encoding";i.decode=function(s,f,c){for(var h=c,v=0,l,u=0;u<s.length;){var p=s.charCodeAt(u++);if(p===61&&v>1)break;if((p=n[p])===void 0)throw Error(o);switch(v){case 0:l=p,v=1;break;case 1:f[c++]=l<<2|(p&48)>>4,l=p,v=2;break;case 2:f[c++]=(l&15)<<4|(p&60)>>2,l=p,v=3;break;case 3:f[c++]=(l&3)<<6|p,v=0;break}}if(v===1)throw Error(o);return c-h},i.test=function(s){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(s)}}(base64$1)),base64$1}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=e;function e(){this._listeners={}}return e.prototype.on=function(t,n,a){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:n,ctx:a||this}),this},e.prototype.off=function(t,n){if(t===void 0)this._listeners={};else if(n===void 0)this._listeners[t]=[];else for(var a=this._listeners[t],o=0;o<a.length;)a[o].fn===n?a.splice(o,1):++o;return this},e.prototype.emit=function(t){var n=this._listeners[t];if(n){for(var a=[],o=1;o<arguments.length;)a.push(arguments[o++]);for(o=0;o<n.length;)n[o].fn.apply(n[o++].ctx,a)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=e(e);function e(o){return typeof Float32Array<"u"?function(){var d=new Float32Array([-0]),s=new Uint8Array(d.buffer),f=s[3]===128;function c(u,p,m){d[0]=u,p[m]=s[0],p[m+1]=s[1],p[m+2]=s[2],p[m+3]=s[3]}function h(u,p,m){d[0]=u,p[m]=s[3],p[m+1]=s[2],p[m+2]=s[1],p[m+3]=s[0]}o.writeFloatLE=f?c:h,o.writeFloatBE=f?h:c;function v(u,p){return s[0]=u[p],s[1]=u[p+1],s[2]=u[p+2],s[3]=u[p+3],d[0]}function l(u,p){return s[3]=u[p],s[2]=u[p+1],s[1]=u[p+2],s[0]=u[p+3],d[0]}o.readFloatLE=f?v:l,o.readFloatBE=f?l:v}():function(){function d(f,c,h,v){var l=c<0?1:0;if(l&&(c=-c),c===0)f(1/c>0?0:2147483648,h,v);else if(isNaN(c))f(2143289344,h,v);else if(c>34028234663852886e22)f((l<<31|2139095040)>>>0,h,v);else if(c<11754943508222875e-54)f((l<<31|Math.round(c/1401298464324817e-60))>>>0,h,v);else{var u=Math.floor(Math.log(c)/Math.LN2),p=Math.round(c*Math.pow(2,-u)*8388608)&8388607;f((l<<31|u+127<<23|p)>>>0,h,v)}}o.writeFloatLE=d.bind(null,i),o.writeFloatBE=d.bind(null,t);function s(f,c,h){var v=f(c,h),l=(v>>31)*2+1,u=v>>>23&255,p=v&8388607;return u===255?p?NaN:l*(1/0):u===0?l*1401298464324817e-60*p:l*Math.pow(2,u-150)*(p+8388608)}o.readFloatLE=s.bind(null,n),o.readFloatBE=s.bind(null,a)}(),typeof Float64Array<"u"?function(){var d=new Float64Array([-0]),s=new Uint8Array(d.buffer),f=s[7]===128;function c(u,p,m){d[0]=u,p[m]=s[0],p[m+1]=s[1],p[m+2]=s[2],p[m+3]=s[3],p[m+4]=s[4],p[m+5]=s[5],p[m+6]=s[6],p[m+7]=s[7]}function h(u,p,m){d[0]=u,p[m]=s[7],p[m+1]=s[6],p[m+2]=s[5],p[m+3]=s[4],p[m+4]=s[3],p[m+5]=s[2],p[m+6]=s[1],p[m+7]=s[0]}o.writeDoubleLE=f?c:h,o.writeDoubleBE=f?h:c;function v(u,p){return s[0]=u[p],s[1]=u[p+1],s[2]=u[p+2],s[3]=u[p+3],s[4]=u[p+4],s[5]=u[p+5],s[6]=u[p+6],s[7]=u[p+7],d[0]}function l(u,p){return s[7]=u[p],s[6]=u[p+1],s[5]=u[p+2],s[4]=u[p+3],s[3]=u[p+4],s[2]=u[p+5],s[1]=u[p+6],s[0]=u[p+7],d[0]}o.readDoubleLE=f?v:l,o.readDoubleBE=f?l:v}():function(){function d(f,c,h,v,l,u){var p=v<0?1:0;if(p&&(v=-v),v===0)f(0,l,u+c),f(1/v>0?0:2147483648,l,u+h);else if(isNaN(v))f(0,l,u+c),f(2146959360,l,u+h);else if(v>17976931348623157e292)f(0,l,u+c),f((p<<31|2146435072)>>>0,l,u+h);else{var m;if(v<22250738585072014e-324)m=v/5e-324,f(m>>>0,l,u+c),f((p<<31|m/4294967296)>>>0,l,u+h);else{var w=Math.floor(Math.log(v)/Math.LN2);w===1024&&(w=1023),m=v*Math.pow(2,-w),f(m*4503599627370496>>>0,l,u+c),f((p<<31|w+1023<<20|m*1048576&1048575)>>>0,l,u+h)}}}o.writeDoubleLE=d.bind(null,i,0,4),o.writeDoubleBE=d.bind(null,t,4,0);function s(f,c,h,v,l){var u=f(v,l+c),p=f(v,l+h),m=(p>>31)*2+1,w=p>>>20&2047,_=4294967296*(p&1048575)+u;return w===2047?_?NaN:m*(1/0):w===0?m*5e-324*_:m*Math.pow(2,w-1075)*(_+4503599627370496)}o.readDoubleLE=s.bind(null,n,0,4),o.readDoubleBE=s.bind(null,a,4,0)}(),o}function i(o,d,s){d[s]=o&255,d[s+1]=o>>>8&255,d[s+2]=o>>>16&255,d[s+3]=o>>>24}function t(o,d,s){d[s]=o>>>24,d[s+1]=o>>>16&255,d[s+2]=o>>>8&255,d[s+3]=o&255}function n(o,d){return(o[d]|o[d+1]<<8|o[d+2]<<16|o[d+3]<<24)>>>0}function a(o,d){return(o[d]<<24|o[d+1]<<16|o[d+2]<<8|o[d+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=e;function e(i){try{var t=void 0;if(t&&(t.length||Object.keys(t).length))return t}catch{}return null}return inquire_1}var utf8$2={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(e){var i=e;i.length=function(n){for(var a=0,o=0,d=0;d<n.length;++d)o=n.charCodeAt(d),o<128?a+=1:o<2048?a+=2:(o&64512)===55296&&(n.charCodeAt(d+1)&64512)===56320?(++d,a+=4):a+=3;return a},i.read=function(n,a,o){var d=o-a;if(d<1)return"";for(var s=null,f=[],c=0,h;a<o;)h=n[a++],h<128?f[c++]=h:h>191&&h<224?f[c++]=(h&31)<<6|n[a++]&63:h>239&&h<365?(h=((h&7)<<18|(n[a++]&63)<<12|(n[a++]&63)<<6|n[a++]&63)-65536,f[c++]=55296+(h>>10),f[c++]=56320+(h&1023)):f[c++]=(h&15)<<12|(n[a++]&63)<<6|n[a++]&63,c>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,f)),c=0);return s?(c&&s.push(String.fromCharCode.apply(String,f.slice(0,c))),s.join("")):String.fromCharCode.apply(String,f.slice(0,c))},i.write=function(n,a,o){for(var d=o,s,f,c=0;c<n.length;++c)s=n.charCodeAt(c),s<128?a[o++]=s:s<2048?(a[o++]=s>>6|192,a[o++]=s&63|128):(s&64512)===55296&&((f=n.charCodeAt(c+1))&64512)===56320?(s=65536+((s&1023)<<10)+(f&1023),++c,a[o++]=s>>18|240,a[o++]=s>>12&63|128,a[o++]=s>>6&63|128,a[o++]=s&63|128):(a[o++]=s>>12|224,a[o++]=s>>6&63|128,a[o++]=s&63|128);return o-d}}(utf8$2)),utf8$2}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=e;function e(i,t,n){var a=n||8192,o=a>>>1,d=null,s=a;return function(c){if(c<1||c>o)return i(c);s+c>a&&(d=i(a),s=0);var h=t.call(d,s,s+=c);return s&7&&(s=(s|7)+1),h}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=i;var e=requireMinimal();function i(o,d){this.lo=o>>>0,this.hi=d>>>0}var t=i.zero=new i(0,0);t.toNumber=function(){return 0},t.zzEncode=t.zzDecode=function(){return this},t.length=function(){return 1};var n=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(d){if(d===0)return t;var s=d<0;s&&(d=-d);var f=d>>>0,c=(d-f)/4294967296>>>0;return s&&(c=~c>>>0,f=~f>>>0,++f>4294967295&&(f=0,++c>4294967295&&(c=0))),new i(f,c)},i.from=function(d){if(typeof d=="number")return i.fromNumber(d);if(e.isString(d))if(e.Long)d=e.Long.fromString(d);else return i.fromNumber(parseInt(d,10));return d.low||d.high?new i(d.low>>>0,d.high>>>0):t},i.prototype.toNumber=function(d){if(!d&&this.hi>>>31){var s=~this.lo+1>>>0,f=~this.hi>>>0;return s||(f=f+1>>>0),-(s+f*4294967296)}return this.lo+this.hi*4294967296},i.prototype.toLong=function(d){return e.Long?new e.Long(this.lo|0,this.hi|0,!!d):{low:this.lo|0,high:this.hi|0,unsigned:!!d}};var a=String.prototype.charCodeAt;return i.fromHash=function(d){return d===n?t:new i((a.call(d,0)|a.call(d,1)<<8|a.call(d,2)<<16|a.call(d,3)<<24)>>>0,(a.call(d,4)|a.call(d,5)<<8|a.call(d,6)<<16|a.call(d,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var d=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^d)>>>0,this.lo=(this.lo<<1^d)>>>0,this},i.prototype.zzDecode=function(){var d=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^d)>>>0,this.hi=(this.hi>>>1^d)>>>0,this},i.prototype.length=function(){var d=this.lo,s=(this.lo>>>28|this.hi<<4)>>>0,f=this.hi>>>24;return f===0?s===0?d<16384?d<128?1:2:d<2097152?3:4:s<16384?s<128?5:6:s<2097152?7:8:f<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(e){var i=e;i.asPromise=requireAspromise(),i.base64=requireBase64(),i.EventEmitter=requireEventemitter(),i.float=requireFloat(),i.inquire=requireInquire(),i.utf8=requireUtf8(),i.pool=requirePool(),i.LongBits=requireLongbits(),i.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),i.global=i.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isInteger=Number.isInteger||function(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o},i.isString=function(o){return typeof o=="string"||o instanceof String},i.isObject=function(o){return o&&typeof o=="object"},i.isset=i.isSet=function(o,d){var s=o[d];return s!=null&&o.hasOwnProperty(d)?typeof s!="object"||(Array.isArray(s)?s.length:Object.keys(s).length)>0:!1},i.Buffer=function(){try{var a=i.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch{return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(o){return typeof o=="number"?i.Buffer?i._Buffer_allocUnsafe(o):new i.Array(o):i.Buffer?i._Buffer_from(o):typeof Uint8Array>"u"?o:new Uint8Array(o)},i.Array=typeof Uint8Array<"u"?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(o){return o?i.LongBits.from(o).toHash():i.LongBits.zeroHash},i.longFromHash=function(o,d){var s=i.LongBits.fromHash(o);return i.Long?i.Long.fromBits(s.lo,s.hi,d):s.toNumber(!!d)};function t(a,o,d){for(var s=Object.keys(o),f=0;f<s.length;++f)(a[s[f]]===void 0||!d)&&(a[s[f]]=o[s[f]]);return a}i.merge=t,i.lcFirst=function(o){return o.charAt(0).toLowerCase()+o.substring(1)};function n(a){function o(d,s){if(!(this instanceof o))return new o(d,s);Object.defineProperty(this,"message",{get:function(){return d}}),Error.captureStackTrace?Error.captureStackTrace(this,o):Object.defineProperty(this,"stack",{value:new Error().stack||""}),s&&t(this,s)}return o.prototype=Object.create(Error.prototype,{constructor:{value:o,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return a},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),o}i.newError=n,i.ProtocolError=n("ProtocolError"),i.oneOfGetter=function(o){for(var d={},s=0;s<o.length;++s)d[o[s]]=1;return function(){for(var f=Object.keys(this),c=f.length-1;c>-1;--c)if(d[f[c]]===1&&this[f[c]]!==void 0&&this[f[c]]!==null)return f[c]}},i.oneOfSetter=function(o){return function(d){for(var s=0;s<o.length;++s)o[s]!==d&&delete this[o[s]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var a=i.Buffer;if(!a){i._Buffer_from=i._Buffer_allocUnsafe=null;return}i._Buffer_from=a.from!==Uint8Array.from&&a.from||function(d,s){return new a(d,s)},i._Buffer_allocUnsafe=a.allocUnsafe||function(d){return new a(d)}}}(minimal$1)),minimal$1}var writer$2=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,i,t){this.fn=e,this.len=i,this.next=void 0,this.val=t}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function(i){return new util$4.Array(i)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function(i,t,n){return this.tail=this.tail.next=new Op(i,t,n),this.len+=t,this};function writeByte(e,i,t){i[t]=e&255}function writeVarint32(e,i,t){for(;e>127;)i[t++]=e&127|128,e>>>=7;i[t]=e}function VarintOp(e,i){this.len=e,this.next=void 0,this.val=i}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function(i){return this.len+=(this.tail=this.tail.next=new VarintOp((i=i>>>0)<128?1:i<16384?2:i<2097152?3:i<268435456?4:5,i)).len,this};Writer$1.prototype.int32=function(i){return i<0?this._push(writeVarint64,10,LongBits$1.fromNumber(i)):this.uint32(i)};Writer$1.prototype.sint32=function(i){return this.uint32((i<<1^i>>31)>>>0)};function writeVarint64(e,i,t){for(;e.hi;)i[t++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)i[t++]=e.lo&127|128,e.lo=e.lo>>>7;i[t++]=e.lo}Writer$1.prototype.uint64=function(i){var t=LongBits$1.from(i);return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function(i){var t=LongBits$1.from(i).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.bool=function(i){return this._push(writeByte,1,i?1:0)};function writeFixed32(e,i,t){i[t]=e&255,i[t+1]=e>>>8&255,i[t+2]=e>>>16&255,i[t+3]=e>>>24}Writer$1.prototype.fixed32=function(i){return this._push(writeFixed32,4,i>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function(i){var t=LongBits$1.from(i);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function(i){return this._push(util$4.float.writeFloatLE,4,i)};Writer$1.prototype.double=function(i){return this._push(util$4.float.writeDoubleLE,8,i)};var writeBytes=util$4.Array.prototype.set?function(i,t,n){t.set(i,n)}:function(i,t,n){for(var a=0;a<i.length;++a)t[n+a]=i[a]};Writer$1.prototype.bytes=function(i){var t=i.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(i)){var n=Writer$1.alloc(t=base64.length(i));base64.decode(i,n,0),i=n}return this.uint32(t)._push(writeBytes,t,i)};Writer$1.prototype.string=function(i){var t=utf8$1.length(i);return t?this.uint32(t)._push(utf8$1.write,t,i):this._push(writeByte,1,0)};Writer$1.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function(){var i=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=i.next,this.tail=t,this.len+=n),this};Writer$1.prototype.finish=function(){for(var i=this.head.next,t=this.constructor.alloc(this.len),n=0;i;)i.fn(i.val,t,n),n+=i.len,i=i.next;return t};Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer$2;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(i,t,n){t.set(i,n)}:function(i,t,n){if(i.copy)i.copy(t,n,0,i.length);else for(var a=0;a<i.length;)t[n++]=i[a++]}};BufferWriter.prototype.bytes=function(i){util$3.isString(i)&&(i=util$3._Buffer_from(i,"base64"));var t=i.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,i),this};function writeStringBuffer(e,i,t){e.length<40?util$3.utf8.write(e,i,t):i.utf8Write?i.utf8Write(e,t):i.write(e,t)}BufferWriter.prototype.string=function(i){var t=util$3.Buffer.byteLength(i);return this.uint32(t),t&&this._push(writeStringBuffer,t,i),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,i){return RangeError("index out of range: "+e.pos+" + "+(i||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array=typeof Uint8Array<"u"?function(i){if(i instanceof Uint8Array||Array.isArray(i))return new Reader$1(i);throw Error("illegal buffer")}:function(i){if(Array.isArray(i))return new Reader$1(i);throw Error("illegal buffer")},create=function(){return util$2.Buffer?function(t){return(Reader$1.create=function(a){return util$2.Buffer.isBuffer(a)?new BufferReader$1(a):create_array(a)})(t)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function(){var i=4294967295;return function(){if(i=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(i=(i|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(i=(i|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(i=(i|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(i=(i|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return i;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return i}}();Reader$1.prototype.int32=function(){return this.uint32()|0};Reader$1.prototype.sint32=function(){var i=this.uint32();return i>>>1^-(i&1)|0};function readLongVarint(){var e=new LongBits(0,0),i=0;if(this.len-this.pos>4){for(;i<4;++i)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<i*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;i=0}else{for(;i<3;++i){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<i*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<i*7)>>>0,e}if(this.len-this.pos>4){for(;i<5;++i)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<i*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;i<5;++i){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<i*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function(){return this.uint32()!==0};function readFixed32_end(e,i){return(e[i-4]|e[i-3]<<8|e[i-2]<<16|e[i-1]<<24)>>>0}Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var i=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,i};Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var i=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,i};Reader$1.prototype.bytes=function(){var i=this.uint32(),t=this.pos,n=this.pos+i;if(n>this.len)throw indexOutOfRange(this,i);return this.pos+=i,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};Reader$1.prototype.string=function(){var i=this.bytes();return utf8.read(i,0,i.length)};Reader$1.prototype.skip=function(i){if(typeof i=="number"){if(this.pos+i>this.len)throw indexOutOfRange(this,i);this.pos+=i}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create(),BufferReader$1._configure();var i=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[i](!1)},uint64:function(){return readLongVarint.call(this)[i](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[i](!1)},fixed64:function(){return readFixed64.call(this)[i](!0)},sfixed64:function(){return readFixed64.call(this)[i](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function(){var i=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+i,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+i,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(e,i,t){if(typeof e!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!i,this.responseDelimited=!!t}Service.prototype.rpcCall=function e(i,t,n,a,o){if(!a)throw TypeError("request must be specified");var d=this;if(!o)return util.asPromise(e,d,i,t,n,a);if(!d.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return d.rpcImpl(i,t[d.requestDelimited?"encodeDelimited":"encode"](a).finish(),function(f,c){if(f)return d.emit("error",f,i),o(f);if(c===null){d.end(!0);return}if(!(c instanceof n))try{c=n[d.responseDelimited?"decodeDelimited":"decode"](c)}catch(h){return d.emit("error",h,i),o(h)}return d.emit("data",c,i),o(null,c)})}catch(s){d.emit("error",s,i),setTimeout(function(){o(s)},0);return}};Service.prototype.end=function(i){return this.rpcImpl&&(i||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(e){var i=e;i.Service=service})(rpc);var roots={};(function(e){var i=e;i.build="minimal",i.Writer=writer$2,i.BufferWriter=writer_buffer,i.Reader=reader,i.BufferReader=reader_buffer,i.util=requireMinimal(),i.rpc=rpc,i.roots=roots,i.configure=t;function t(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}t()})(indexMinimal);var minimal=indexMinimal,_m0=getDefaultExportFromCjs(minimal);(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw"Unable to locate global object"})();_m0.util.Long!==Long$1&&(_m0.util.Long=Long$1,_m0.configure());var AudioCodec;(function(e){e[e.DEFAULT_AC=0]="DEFAULT_AC",e[e.OPUS=1]="OPUS",e[e.AAC=2]="AAC",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(AudioCodec||(AudioCodec={}));var VideoCodec;(function(e){e[e.DEFAULT_VC=0]="DEFAULT_VC",e[e.H264_BASELINE=1]="H264_BASELINE",e[e.H264_MAIN=2]="H264_MAIN",e[e.H264_HIGH=3]="H264_HIGH",e[e.VP8=4]="VP8",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(VideoCodec||(VideoCodec={}));var TrackType;(function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO",e[e.DATA=2]="DATA",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(TrackType||(TrackType={}));function trackTypeFromJSON(e){switch(e){case 0:case"AUDIO":return TrackType.AUDIO;case 1:case"VIDEO":return TrackType.VIDEO;case 2:case"DATA":return TrackType.DATA;case-1:case"UNRECOGNIZED":default:return TrackType.UNRECOGNIZED}}function trackTypeToJSON(e){switch(e){case TrackType.AUDIO:return"AUDIO";case TrackType.VIDEO:return"VIDEO";case TrackType.DATA:return"DATA";case TrackType.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var TrackSource;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CAMERA=1]="CAMERA",e[e.MICROPHONE=2]="MICROPHONE",e[e.SCREEN_SHARE=3]="SCREEN_SHARE",e[e.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(TrackSource||(TrackSource={}));function trackSourceFromJSON(e){switch(e){case 0:case"UNKNOWN":return TrackSource.UNKNOWN;case 1:case"CAMERA":return TrackSource.CAMERA;case 2:case"MICROPHONE":return TrackSource.MICROPHONE;case 3:case"SCREEN_SHARE":return TrackSource.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return TrackSource.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return TrackSource.UNRECOGNIZED}}function trackSourceToJSON(e){switch(e){case TrackSource.UNKNOWN:return"UNKNOWN";case TrackSource.CAMERA:return"CAMERA";case TrackSource.MICROPHONE:return"MICROPHONE";case TrackSource.SCREEN_SHARE:return"SCREEN_SHARE";case TrackSource.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";case TrackSource.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var VideoQuality;(function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e[e.OFF=3]="OFF",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(VideoQuality||(VideoQuality={}));function videoQualityFromJSON(e){switch(e){case 0:case"LOW":return VideoQuality.LOW;case 1:case"MEDIUM":return VideoQuality.MEDIUM;case 2:case"HIGH":return VideoQuality.HIGH;case 3:case"OFF":return VideoQuality.OFF;case-1:case"UNRECOGNIZED":default:return VideoQuality.UNRECOGNIZED}}function videoQualityToJSON(e){switch(e){case VideoQuality.LOW:return"LOW";case VideoQuality.MEDIUM:return"MEDIUM";case VideoQuality.HIGH:return"HIGH";case VideoQuality.OFF:return"OFF";case VideoQuality.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ConnectionQuality$1;(function(e){e[e.POOR=0]="POOR",e[e.GOOD=1]="GOOD",e[e.EXCELLENT=2]="EXCELLENT",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ConnectionQuality$1||(ConnectionQuality$1={}));function connectionQualityFromJSON(e){switch(e){case 0:case"POOR":return ConnectionQuality$1.POOR;case 1:case"GOOD":return ConnectionQuality$1.GOOD;case 2:case"EXCELLENT":return ConnectionQuality$1.EXCELLENT;case-1:case"UNRECOGNIZED":default:return ConnectionQuality$1.UNRECOGNIZED}}function connectionQualityToJSON(e){switch(e){case ConnectionQuality$1.POOR:return"POOR";case ConnectionQuality$1.GOOD:return"GOOD";case ConnectionQuality$1.EXCELLENT:return"EXCELLENT";case ConnectionQuality$1.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ClientConfigSetting;(function(e){e[e.UNSET=0]="UNSET",e[e.DISABLED=1]="DISABLED",e[e.ENABLED=2]="ENABLED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ClientConfigSetting||(ClientConfigSetting={}));function clientConfigSettingFromJSON(e){switch(e){case 0:case"UNSET":return ClientConfigSetting.UNSET;case 1:case"DISABLED":return ClientConfigSetting.DISABLED;case 2:case"ENABLED":return ClientConfigSetting.ENABLED;case-1:case"UNRECOGNIZED":default:return ClientConfigSetting.UNRECOGNIZED}}function clientConfigSettingToJSON(e){switch(e){case ClientConfigSetting.UNSET:return"UNSET";case ClientConfigSetting.DISABLED:return"DISABLED";case ClientConfigSetting.ENABLED:return"ENABLED";case ClientConfigSetting.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var DisconnectReason;(function(e){e[e.UNKNOWN_REASON=0]="UNKNOWN_REASON",e[e.CLIENT_INITIATED=1]="CLIENT_INITIATED",e[e.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",e[e.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",e[e.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",e[e.ROOM_DELETED=5]="ROOM_DELETED",e[e.STATE_MISMATCH=6]="STATE_MISMATCH",e[e.JOIN_FAILURE=7]="JOIN_FAILURE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(DisconnectReason||(DisconnectReason={}));function disconnectReasonFromJSON(e){switch(e){case 0:case"UNKNOWN_REASON":return DisconnectReason.UNKNOWN_REASON;case 1:case"CLIENT_INITIATED":return DisconnectReason.CLIENT_INITIATED;case 2:case"DUPLICATE_IDENTITY":return DisconnectReason.DUPLICATE_IDENTITY;case 3:case"SERVER_SHUTDOWN":return DisconnectReason.SERVER_SHUTDOWN;case 4:case"PARTICIPANT_REMOVED":return DisconnectReason.PARTICIPANT_REMOVED;case 5:case"ROOM_DELETED":return DisconnectReason.ROOM_DELETED;case 6:case"STATE_MISMATCH":return DisconnectReason.STATE_MISMATCH;case 7:case"JOIN_FAILURE":return DisconnectReason.JOIN_FAILURE;case-1:case"UNRECOGNIZED":default:return DisconnectReason.UNRECOGNIZED}}function disconnectReasonToJSON(e){switch(e){case DisconnectReason.UNKNOWN_REASON:return"UNKNOWN_REASON";case DisconnectReason.CLIENT_INITIATED:return"CLIENT_INITIATED";case DisconnectReason.DUPLICATE_IDENTITY:return"DUPLICATE_IDENTITY";case DisconnectReason.SERVER_SHUTDOWN:return"SERVER_SHUTDOWN";case DisconnectReason.PARTICIPANT_REMOVED:return"PARTICIPANT_REMOVED";case DisconnectReason.ROOM_DELETED:return"ROOM_DELETED";case DisconnectReason.STATE_MISMATCH:return"STATE_MISMATCH";case DisconnectReason.JOIN_FAILURE:return"JOIN_FAILURE";case DisconnectReason.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ReconnectReason;(function(e){e[e.RR_UNKOWN=0]="RR_UNKOWN",e[e.RR_SIGNAL_DISCONNECTED=1]="RR_SIGNAL_DISCONNECTED",e[e.RR_PUBLISHER_FAILED=2]="RR_PUBLISHER_FAILED",e[e.RR_SUBSCRIBER_FAILED=3]="RR_SUBSCRIBER_FAILED",e[e.RR_SWITCH_CANDIDATE=4]="RR_SWITCH_CANDIDATE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ReconnectReason||(ReconnectReason={}));var ParticipantInfo_State;(function(e){e[e.JOINING=0]="JOINING",e[e.JOINED=1]="JOINED",e[e.ACTIVE=2]="ACTIVE",e[e.DISCONNECTED=3]="DISCONNECTED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ParticipantInfo_State||(ParticipantInfo_State={}));function participantInfo_StateFromJSON(e){switch(e){case 0:case"JOINING":return ParticipantInfo_State.JOINING;case 1:case"JOINED":return ParticipantInfo_State.JOINED;case 2:case"ACTIVE":return ParticipantInfo_State.ACTIVE;case 3:case"DISCONNECTED":return ParticipantInfo_State.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return ParticipantInfo_State.UNRECOGNIZED}}function participantInfo_StateToJSON(e){switch(e){case ParticipantInfo_State.JOINING:return"JOINING";case ParticipantInfo_State.JOINED:return"JOINED";case ParticipantInfo_State.ACTIVE:return"ACTIVE";case ParticipantInfo_State.DISCONNECTED:return"DISCONNECTED";case ParticipantInfo_State.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Encryption_Type;(function(e){e[e.NONE=0]="NONE",e[e.GCM=1]="GCM",e[e.CUSTOM=2]="CUSTOM",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Encryption_Type||(Encryption_Type={}));function encryption_TypeFromJSON(e){switch(e){case 0:case"NONE":return Encryption_Type.NONE;case 1:case"GCM":return Encryption_Type.GCM;case 2:case"CUSTOM":return Encryption_Type.CUSTOM;case-1:case"UNRECOGNIZED":default:return Encryption_Type.UNRECOGNIZED}}function encryption_TypeToJSON(e){switch(e){case Encryption_Type.NONE:return"NONE";case Encryption_Type.GCM:return"GCM";case Encryption_Type.CUSTOM:return"CUSTOM";case Encryption_Type.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var DataPacket_Kind;(function(e){e[e.RELIABLE=0]="RELIABLE",e[e.LOSSY=1]="LOSSY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(DataPacket_Kind||(DataPacket_Kind={}));function dataPacket_KindFromJSON(e){switch(e){case 0:case"RELIABLE":return DataPacket_Kind.RELIABLE;case 1:case"LOSSY":return DataPacket_Kind.LOSSY;case-1:case"UNRECOGNIZED":default:return DataPacket_Kind.UNRECOGNIZED}}function dataPacket_KindToJSON(e){switch(e){case DataPacket_Kind.RELIABLE:return"RELIABLE";case DataPacket_Kind.LOSSY:return"LOSSY";case DataPacket_Kind.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ServerInfo_Edition;(function(e){e[e.Standard=0]="Standard",e[e.Cloud=1]="Cloud",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ServerInfo_Edition||(ServerInfo_Edition={}));function serverInfo_EditionFromJSON(e){switch(e){case 0:case"Standard":return ServerInfo_Edition.Standard;case 1:case"Cloud":return ServerInfo_Edition.Cloud;case-1:case"UNRECOGNIZED":default:return ServerInfo_Edition.UNRECOGNIZED}}function serverInfo_EditionToJSON(e){switch(e){case ServerInfo_Edition.Standard:return"Standard";case ServerInfo_Edition.Cloud:return"Cloud";case ServerInfo_Edition.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ClientInfo_SDK;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JS=1]="JS",e[e.SWIFT=2]="SWIFT",e[e.ANDROID=3]="ANDROID",e[e.FLUTTER=4]="FLUTTER",e[e.GO=5]="GO",e[e.UNITY=6]="UNITY",e[e.REACT_NATIVE=7]="REACT_NATIVE",e[e.RUST=8]="RUST",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ClientInfo_SDK||(ClientInfo_SDK={}));function clientInfo_SDKFromJSON(e){switch(e){case 0:case"UNKNOWN":return ClientInfo_SDK.UNKNOWN;case 1:case"JS":return ClientInfo_SDK.JS;case 2:case"SWIFT":return ClientInfo_SDK.SWIFT;case 3:case"ANDROID":return ClientInfo_SDK.ANDROID;case 4:case"FLUTTER":return ClientInfo_SDK.FLUTTER;case 5:case"GO":return ClientInfo_SDK.GO;case 6:case"UNITY":return ClientInfo_SDK.UNITY;case 7:case"REACT_NATIVE":return ClientInfo_SDK.REACT_NATIVE;case 8:case"RUST":return ClientInfo_SDK.RUST;case-1:case"UNRECOGNIZED":default:return ClientInfo_SDK.UNRECOGNIZED}}function clientInfo_SDKToJSON(e){switch(e){case ClientInfo_SDK.UNKNOWN:return"UNKNOWN";case ClientInfo_SDK.JS:return"JS";case ClientInfo_SDK.SWIFT:return"SWIFT";case ClientInfo_SDK.ANDROID:return"ANDROID";case ClientInfo_SDK.FLUTTER:return"FLUTTER";case ClientInfo_SDK.GO:return"GO";case ClientInfo_SDK.UNITY:return"UNITY";case ClientInfo_SDK.REACT_NATIVE:return"REACT_NATIVE";case ClientInfo_SDK.RUST:return"RUST";case ClientInfo_SDK.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseRoom(){return{sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,numPublishers:0,activeRecording:!1}}const Room$1={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.sid!==""&&i.uint32(10).string(e.sid),e.name!==""&&i.uint32(18).string(e.name),e.emptyTimeout!==0&&i.uint32(24).uint32(e.emptyTimeout),e.maxParticipants!==0&&i.uint32(32).uint32(e.maxParticipants),e.creationTime!==0&&i.uint32(40).int64(e.creationTime),e.turnPassword!==""&&i.uint32(50).string(e.turnPassword);for(const t of e.enabledCodecs)Codec.encode(t,i.uint32(58).fork()).ldelim();return e.metadata!==""&&i.uint32(66).string(e.metadata),e.numParticipants!==0&&i.uint32(72).uint32(e.numParticipants),e.numPublishers!==0&&i.uint32(88).uint32(e.numPublishers),e.activeRecording===!0&&i.uint32(80).bool(e.activeRecording),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseRoom();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.sid=t.string();continue;case 2:if(o!=18)break;a.name=t.string();continue;case 3:if(o!=24)break;a.emptyTimeout=t.uint32();continue;case 4:if(o!=32)break;a.maxParticipants=t.uint32();continue;case 5:if(o!=40)break;a.creationTime=longToNumber$1(t.int64());continue;case 6:if(o!=50)break;a.turnPassword=t.string();continue;case 7:if(o!=58)break;a.enabledCodecs.push(Codec.decode(t,t.uint32()));continue;case 8:if(o!=66)break;a.metadata=t.string();continue;case 9:if(o!=72)break;a.numParticipants=t.uint32();continue;case 11:if(o!=88)break;a.numPublishers=t.uint32();continue;case 10:if(o!=80)break;a.activeRecording=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",name:isSet$1(e.name)?String(e.name):"",emptyTimeout:isSet$1(e.emptyTimeout)?Number(e.emptyTimeout):0,maxParticipants:isSet$1(e.maxParticipants)?Number(e.maxParticipants):0,creationTime:isSet$1(e.creationTime)?Number(e.creationTime):0,turnPassword:isSet$1(e.turnPassword)?String(e.turnPassword):"",enabledCodecs:Array.isArray(e==null?void 0:e.enabledCodecs)?e.enabledCodecs.map(i=>Codec.fromJSON(i)):[],metadata:isSet$1(e.metadata)?String(e.metadata):"",numParticipants:isSet$1(e.numParticipants)?Number(e.numParticipants):0,numPublishers:isSet$1(e.numPublishers)?Number(e.numPublishers):0,activeRecording:isSet$1(e.activeRecording)?!!e.activeRecording:!1}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.name!==void 0&&(i.name=e.name),e.emptyTimeout!==void 0&&(i.emptyTimeout=Math.round(e.emptyTimeout)),e.maxParticipants!==void 0&&(i.maxParticipants=Math.round(e.maxParticipants)),e.creationTime!==void 0&&(i.creationTime=Math.round(e.creationTime)),e.turnPassword!==void 0&&(i.turnPassword=e.turnPassword),e.enabledCodecs?i.enabledCodecs=e.enabledCodecs.map(t=>t?Codec.toJSON(t):void 0):i.enabledCodecs=[],e.metadata!==void 0&&(i.metadata=e.metadata),e.numParticipants!==void 0&&(i.numParticipants=Math.round(e.numParticipants)),e.numPublishers!==void 0&&(i.numPublishers=Math.round(e.numPublishers)),e.activeRecording!==void 0&&(i.activeRecording=e.activeRecording),i},create(e){return Room$1.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,f,c,h,v;const l=createBaseRoom();return l.sid=(i=e.sid)!==null&&i!==void 0?i:"",l.name=(t=e.name)!==null&&t!==void 0?t:"",l.emptyTimeout=(n=e.emptyTimeout)!==null&&n!==void 0?n:0,l.maxParticipants=(a=e.maxParticipants)!==null&&a!==void 0?a:0,l.creationTime=(o=e.creationTime)!==null&&o!==void 0?o:0,l.turnPassword=(d=e.turnPassword)!==null&&d!==void 0?d:"",l.enabledCodecs=((s=e.enabledCodecs)===null||s===void 0?void 0:s.map(u=>Codec.fromPartial(u)))||[],l.metadata=(f=e.metadata)!==null&&f!==void 0?f:"",l.numParticipants=(c=e.numParticipants)!==null&&c!==void 0?c:0,l.numPublishers=(h=e.numPublishers)!==null&&h!==void 0?h:0,l.activeRecording=(v=e.activeRecording)!==null&&v!==void 0?v:!1,l}};function createBaseCodec(){return{mime:"",fmtpLine:""}}const Codec={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.mime!==""&&i.uint32(10).string(e.mime),e.fmtpLine!==""&&i.uint32(18).string(e.fmtpLine),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseCodec();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.mime=t.string();continue;case 2:if(o!=18)break;a.fmtpLine=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{mime:isSet$1(e.mime)?String(e.mime):"",fmtpLine:isSet$1(e.fmtpLine)?String(e.fmtpLine):""}},toJSON(e){const i={};return e.mime!==void 0&&(i.mime=e.mime),e.fmtpLine!==void 0&&(i.fmtpLine=e.fmtpLine),i},create(e){return Codec.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseCodec();return n.mime=(i=e.mime)!==null&&i!==void 0?i:"",n.fmtpLine=(t=e.fmtpLine)!==null&&t!==void 0?t:"",n}};function createBaseParticipantPermission(){return{canSubscribe:!1,canPublish:!1,canPublishData:!1,canPublishSources:[],hidden:!1,recorder:!1,canUpdateMetadata:!1}}const ParticipantPermission={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.canSubscribe===!0&&i.uint32(8).bool(e.canSubscribe),e.canPublish===!0&&i.uint32(16).bool(e.canPublish),e.canPublishData===!0&&i.uint32(24).bool(e.canPublishData),i.uint32(74).fork();for(const t of e.canPublishSources)i.int32(t);return i.ldelim(),e.hidden===!0&&i.uint32(56).bool(e.hidden),e.recorder===!0&&i.uint32(64).bool(e.recorder),e.canUpdateMetadata===!0&&i.uint32(80).bool(e.canUpdateMetadata),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseParticipantPermission();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.canSubscribe=t.bool();continue;case 2:if(o!=16)break;a.canPublish=t.bool();continue;case 3:if(o!=24)break;a.canPublishData=t.bool();continue;case 9:if(o==72){a.canPublishSources.push(t.int32());continue}if(o==74){const d=t.uint32()+t.pos;for(;t.pos<d;)a.canPublishSources.push(t.int32());continue}break;case 7:if(o!=56)break;a.hidden=t.bool();continue;case 8:if(o!=64)break;a.recorder=t.bool();continue;case 10:if(o!=80)break;a.canUpdateMetadata=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{canSubscribe:isSet$1(e.canSubscribe)?!!e.canSubscribe:!1,canPublish:isSet$1(e.canPublish)?!!e.canPublish:!1,canPublishData:isSet$1(e.canPublishData)?!!e.canPublishData:!1,canPublishSources:Array.isArray(e==null?void 0:e.canPublishSources)?e.canPublishSources.map(i=>trackSourceFromJSON(i)):[],hidden:isSet$1(e.hidden)?!!e.hidden:!1,recorder:isSet$1(e.recorder)?!!e.recorder:!1,canUpdateMetadata:isSet$1(e.canUpdateMetadata)?!!e.canUpdateMetadata:!1}},toJSON(e){const i={};return e.canSubscribe!==void 0&&(i.canSubscribe=e.canSubscribe),e.canPublish!==void 0&&(i.canPublish=e.canPublish),e.canPublishData!==void 0&&(i.canPublishData=e.canPublishData),e.canPublishSources?i.canPublishSources=e.canPublishSources.map(t=>trackSourceToJSON(t)):i.canPublishSources=[],e.hidden!==void 0&&(i.hidden=e.hidden),e.recorder!==void 0&&(i.recorder=e.recorder),e.canUpdateMetadata!==void 0&&(i.canUpdateMetadata=e.canUpdateMetadata),i},create(e){return ParticipantPermission.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s;const f=createBaseParticipantPermission();return f.canSubscribe=(i=e.canSubscribe)!==null&&i!==void 0?i:!1,f.canPublish=(t=e.canPublish)!==null&&t!==void 0?t:!1,f.canPublishData=(n=e.canPublishData)!==null&&n!==void 0?n:!1,f.canPublishSources=((a=e.canPublishSources)===null||a===void 0?void 0:a.map(c=>c))||[],f.hidden=(o=e.hidden)!==null&&o!==void 0?o:!1,f.recorder=(d=e.recorder)!==null&&d!==void 0?d:!1,f.canUpdateMetadata=(s=e.canUpdateMetadata)!==null&&s!==void 0?s:!1,f}};function createBaseParticipantInfo(){return{sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1}}const ParticipantInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.sid!==""&&i.uint32(10).string(e.sid),e.identity!==""&&i.uint32(18).string(e.identity),e.state!==0&&i.uint32(24).int32(e.state);for(const t of e.tracks)TrackInfo.encode(t,i.uint32(34).fork()).ldelim();return e.metadata!==""&&i.uint32(42).string(e.metadata),e.joinedAt!==0&&i.uint32(48).int64(e.joinedAt),e.name!==""&&i.uint32(74).string(e.name),e.version!==0&&i.uint32(80).uint32(e.version),e.permission!==void 0&&ParticipantPermission.encode(e.permission,i.uint32(90).fork()).ldelim(),e.region!==""&&i.uint32(98).string(e.region),e.isPublisher===!0&&i.uint32(104).bool(e.isPublisher),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseParticipantInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.sid=t.string();continue;case 2:if(o!=18)break;a.identity=t.string();continue;case 3:if(o!=24)break;a.state=t.int32();continue;case 4:if(o!=34)break;a.tracks.push(TrackInfo.decode(t,t.uint32()));continue;case 5:if(o!=42)break;a.metadata=t.string();continue;case 6:if(o!=48)break;a.joinedAt=longToNumber$1(t.int64());continue;case 9:if(o!=74)break;a.name=t.string();continue;case 10:if(o!=80)break;a.version=t.uint32();continue;case 11:if(o!=90)break;a.permission=ParticipantPermission.decode(t,t.uint32());continue;case 12:if(o!=98)break;a.region=t.string();continue;case 13:if(o!=104)break;a.isPublisher=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",identity:isSet$1(e.identity)?String(e.identity):"",state:isSet$1(e.state)?participantInfo_StateFromJSON(e.state):0,tracks:Array.isArray(e==null?void 0:e.tracks)?e.tracks.map(i=>TrackInfo.fromJSON(i)):[],metadata:isSet$1(e.metadata)?String(e.metadata):"",joinedAt:isSet$1(e.joinedAt)?Number(e.joinedAt):0,name:isSet$1(e.name)?String(e.name):"",version:isSet$1(e.version)?Number(e.version):0,permission:isSet$1(e.permission)?ParticipantPermission.fromJSON(e.permission):void 0,region:isSet$1(e.region)?String(e.region):"",isPublisher:isSet$1(e.isPublisher)?!!e.isPublisher:!1}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.identity!==void 0&&(i.identity=e.identity),e.state!==void 0&&(i.state=participantInfo_StateToJSON(e.state)),e.tracks?i.tracks=e.tracks.map(t=>t?TrackInfo.toJSON(t):void 0):i.tracks=[],e.metadata!==void 0&&(i.metadata=e.metadata),e.joinedAt!==void 0&&(i.joinedAt=Math.round(e.joinedAt)),e.name!==void 0&&(i.name=e.name),e.version!==void 0&&(i.version=Math.round(e.version)),e.permission!==void 0&&(i.permission=e.permission?ParticipantPermission.toJSON(e.permission):void 0),e.region!==void 0&&(i.region=e.region),e.isPublisher!==void 0&&(i.isPublisher=e.isPublisher),i},create(e){return ParticipantInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,f,c,h;const v=createBaseParticipantInfo();return v.sid=(i=e.sid)!==null&&i!==void 0?i:"",v.identity=(t=e.identity)!==null&&t!==void 0?t:"",v.state=(n=e.state)!==null&&n!==void 0?n:0,v.tracks=((a=e.tracks)===null||a===void 0?void 0:a.map(l=>TrackInfo.fromPartial(l)))||[],v.metadata=(o=e.metadata)!==null&&o!==void 0?o:"",v.joinedAt=(d=e.joinedAt)!==null&&d!==void 0?d:0,v.name=(s=e.name)!==null&&s!==void 0?s:"",v.version=(f=e.version)!==null&&f!==void 0?f:0,v.permission=e.permission!==void 0&&e.permission!==null?ParticipantPermission.fromPartial(e.permission):void 0,v.region=(c=e.region)!==null&&c!==void 0?c:"",v.isPublisher=(h=e.isPublisher)!==null&&h!==void 0?h:!1,v}};function createBaseSimulcastCodecInfo(){return{mimeType:"",mid:"",cid:"",layers:[]}}const SimulcastCodecInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.mimeType!==""&&i.uint32(10).string(e.mimeType),e.mid!==""&&i.uint32(18).string(e.mid),e.cid!==""&&i.uint32(26).string(e.cid);for(const t of e.layers)VideoLayer.encode(t,i.uint32(34).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSimulcastCodecInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.mimeType=t.string();continue;case 2:if(o!=18)break;a.mid=t.string();continue;case 3:if(o!=26)break;a.cid=t.string();continue;case 4:if(o!=34)break;a.layers.push(VideoLayer.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{mimeType:isSet$1(e.mimeType)?String(e.mimeType):"",mid:isSet$1(e.mid)?String(e.mid):"",cid:isSet$1(e.cid)?String(e.cid):"",layers:Array.isArray(e==null?void 0:e.layers)?e.layers.map(i=>VideoLayer.fromJSON(i)):[]}},toJSON(e){const i={};return e.mimeType!==void 0&&(i.mimeType=e.mimeType),e.mid!==void 0&&(i.mid=e.mid),e.cid!==void 0&&(i.cid=e.cid),e.layers?i.layers=e.layers.map(t=>t?VideoLayer.toJSON(t):void 0):i.layers=[],i},create(e){return SimulcastCodecInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a;const o=createBaseSimulcastCodecInfo();return o.mimeType=(i=e.mimeType)!==null&&i!==void 0?i:"",o.mid=(t=e.mid)!==null&&t!==void 0?t:"",o.cid=(n=e.cid)!==null&&n!==void 0?n:"",o.layers=((a=e.layers)===null||a===void 0?void 0:a.map(d=>VideoLayer.fromPartial(d)))||[],o}};function createBaseTrackInfo(){return{sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:"",codecs:[],stereo:!1,disableRed:!1,encryption:0}}const TrackInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.sid!==""&&i.uint32(10).string(e.sid),e.type!==0&&i.uint32(16).int32(e.type),e.name!==""&&i.uint32(26).string(e.name),e.muted===!0&&i.uint32(32).bool(e.muted),e.width!==0&&i.uint32(40).uint32(e.width),e.height!==0&&i.uint32(48).uint32(e.height),e.simulcast===!0&&i.uint32(56).bool(e.simulcast),e.disableDtx===!0&&i.uint32(64).bool(e.disableDtx),e.source!==0&&i.uint32(72).int32(e.source);for(const t of e.layers)VideoLayer.encode(t,i.uint32(82).fork()).ldelim();e.mimeType!==""&&i.uint32(90).string(e.mimeType),e.mid!==""&&i.uint32(98).string(e.mid);for(const t of e.codecs)SimulcastCodecInfo.encode(t,i.uint32(106).fork()).ldelim();return e.stereo===!0&&i.uint32(112).bool(e.stereo),e.disableRed===!0&&i.uint32(120).bool(e.disableRed),e.encryption!==0&&i.uint32(128).int32(e.encryption),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrackInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.sid=t.string();continue;case 2:if(o!=16)break;a.type=t.int32();continue;case 3:if(o!=26)break;a.name=t.string();continue;case 4:if(o!=32)break;a.muted=t.bool();continue;case 5:if(o!=40)break;a.width=t.uint32();continue;case 6:if(o!=48)break;a.height=t.uint32();continue;case 7:if(o!=56)break;a.simulcast=t.bool();continue;case 8:if(o!=64)break;a.disableDtx=t.bool();continue;case 9:if(o!=72)break;a.source=t.int32();continue;case 10:if(o!=82)break;a.layers.push(VideoLayer.decode(t,t.uint32()));continue;case 11:if(o!=90)break;a.mimeType=t.string();continue;case 12:if(o!=98)break;a.mid=t.string();continue;case 13:if(o!=106)break;a.codecs.push(SimulcastCodecInfo.decode(t,t.uint32()));continue;case 14:if(o!=112)break;a.stereo=t.bool();continue;case 15:if(o!=120)break;a.disableRed=t.bool();continue;case 16:if(o!=128)break;a.encryption=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",type:isSet$1(e.type)?trackTypeFromJSON(e.type):0,name:isSet$1(e.name)?String(e.name):"",muted:isSet$1(e.muted)?!!e.muted:!1,width:isSet$1(e.width)?Number(e.width):0,height:isSet$1(e.height)?Number(e.height):0,simulcast:isSet$1(e.simulcast)?!!e.simulcast:!1,disableDtx:isSet$1(e.disableDtx)?!!e.disableDtx:!1,source:isSet$1(e.source)?trackSourceFromJSON(e.source):0,layers:Array.isArray(e==null?void 0:e.layers)?e.layers.map(i=>VideoLayer.fromJSON(i)):[],mimeType:isSet$1(e.mimeType)?String(e.mimeType):"",mid:isSet$1(e.mid)?String(e.mid):"",codecs:Array.isArray(e==null?void 0:e.codecs)?e.codecs.map(i=>SimulcastCodecInfo.fromJSON(i)):[],stereo:isSet$1(e.stereo)?!!e.stereo:!1,disableRed:isSet$1(e.disableRed)?!!e.disableRed:!1,encryption:isSet$1(e.encryption)?encryption_TypeFromJSON(e.encryption):0}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.type!==void 0&&(i.type=trackTypeToJSON(e.type)),e.name!==void 0&&(i.name=e.name),e.muted!==void 0&&(i.muted=e.muted),e.width!==void 0&&(i.width=Math.round(e.width)),e.height!==void 0&&(i.height=Math.round(e.height)),e.simulcast!==void 0&&(i.simulcast=e.simulcast),e.disableDtx!==void 0&&(i.disableDtx=e.disableDtx),e.source!==void 0&&(i.source=trackSourceToJSON(e.source)),e.layers?i.layers=e.layers.map(t=>t?VideoLayer.toJSON(t):void 0):i.layers=[],e.mimeType!==void 0&&(i.mimeType=e.mimeType),e.mid!==void 0&&(i.mid=e.mid),e.codecs?i.codecs=e.codecs.map(t=>t?SimulcastCodecInfo.toJSON(t):void 0):i.codecs=[],e.stereo!==void 0&&(i.stereo=e.stereo),e.disableRed!==void 0&&(i.disableRed=e.disableRed),e.encryption!==void 0&&(i.encryption=encryption_TypeToJSON(e.encryption)),i},create(e){return TrackInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,f,c,h,v,l,u,p,m,w;const _=createBaseTrackInfo();return _.sid=(i=e.sid)!==null&&i!==void 0?i:"",_.type=(t=e.type)!==null&&t!==void 0?t:0,_.name=(n=e.name)!==null&&n!==void 0?n:"",_.muted=(a=e.muted)!==null&&a!==void 0?a:!1,_.width=(o=e.width)!==null&&o!==void 0?o:0,_.height=(d=e.height)!==null&&d!==void 0?d:0,_.simulcast=(s=e.simulcast)!==null&&s!==void 0?s:!1,_.disableDtx=(f=e.disableDtx)!==null&&f!==void 0?f:!1,_.source=(c=e.source)!==null&&c!==void 0?c:0,_.layers=((h=e.layers)===null||h===void 0?void 0:h.map(C=>VideoLayer.fromPartial(C)))||[],_.mimeType=(v=e.mimeType)!==null&&v!==void 0?v:"",_.mid=(l=e.mid)!==null&&l!==void 0?l:"",_.codecs=((u=e.codecs)===null||u===void 0?void 0:u.map(C=>SimulcastCodecInfo.fromPartial(C)))||[],_.stereo=(p=e.stereo)!==null&&p!==void 0?p:!1,_.disableRed=(m=e.disableRed)!==null&&m!==void 0?m:!1,_.encryption=(w=e.encryption)!==null&&w!==void 0?w:0,_}};function createBaseVideoLayer(){return{quality:0,width:0,height:0,bitrate:0,ssrc:0}}const VideoLayer={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.quality!==0&&i.uint32(8).int32(e.quality),e.width!==0&&i.uint32(16).uint32(e.width),e.height!==0&&i.uint32(24).uint32(e.height),e.bitrate!==0&&i.uint32(32).uint32(e.bitrate),e.ssrc!==0&&i.uint32(40).uint32(e.ssrc),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseVideoLayer();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.quality=t.int32();continue;case 2:if(o!=16)break;a.width=t.uint32();continue;case 3:if(o!=24)break;a.height=t.uint32();continue;case 4:if(o!=32)break;a.bitrate=t.uint32();continue;case 5:if(o!=40)break;a.ssrc=t.uint32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{quality:isSet$1(e.quality)?videoQualityFromJSON(e.quality):0,width:isSet$1(e.width)?Number(e.width):0,height:isSet$1(e.height)?Number(e.height):0,bitrate:isSet$1(e.bitrate)?Number(e.bitrate):0,ssrc:isSet$1(e.ssrc)?Number(e.ssrc):0}},toJSON(e){const i={};return e.quality!==void 0&&(i.quality=videoQualityToJSON(e.quality)),e.width!==void 0&&(i.width=Math.round(e.width)),e.height!==void 0&&(i.height=Math.round(e.height)),e.bitrate!==void 0&&(i.bitrate=Math.round(e.bitrate)),e.ssrc!==void 0&&(i.ssrc=Math.round(e.ssrc)),i},create(e){return VideoLayer.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o;const d=createBaseVideoLayer();return d.quality=(i=e.quality)!==null&&i!==void 0?i:0,d.width=(t=e.width)!==null&&t!==void 0?t:0,d.height=(n=e.height)!==null&&n!==void 0?n:0,d.bitrate=(a=e.bitrate)!==null&&a!==void 0?a:0,d.ssrc=(o=e.ssrc)!==null&&o!==void 0?o:0,d}};function createBaseDataPacket(){return{kind:0,value:void 0}}const DataPacket={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var t;switch(e.kind!==0&&i.uint32(8).int32(e.kind),(t=e.value)===null||t===void 0?void 0:t.$case){case"user":UserPacket.encode(e.value.user,i.uint32(18).fork()).ldelim();break;case"speaker":ActiveSpeakerUpdate.encode(e.value.speaker,i.uint32(26).fork()).ldelim();break}return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseDataPacket();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.kind=t.int32();continue;case 2:if(o!=18)break;a.value={$case:"user",user:UserPacket.decode(t,t.uint32())};continue;case 3:if(o!=26)break;a.value={$case:"speaker",speaker:ActiveSpeakerUpdate.decode(t,t.uint32())};continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{kind:isSet$1(e.kind)?dataPacket_KindFromJSON(e.kind):0,value:isSet$1(e.user)?{$case:"user",user:UserPacket.fromJSON(e.user)}:isSet$1(e.speaker)?{$case:"speaker",speaker:ActiveSpeakerUpdate.fromJSON(e.speaker)}:void 0}},toJSON(e){var i,t,n,a,o,d;const s={};return e.kind!==void 0&&(s.kind=dataPacket_KindToJSON(e.kind)),((i=e.value)===null||i===void 0?void 0:i.$case)==="user"&&(s.user=!((t=e.value)===null||t===void 0)&&t.user?UserPacket.toJSON((n=e.value)===null||n===void 0?void 0:n.user):void 0),((a=e.value)===null||a===void 0?void 0:a.$case)==="speaker"&&(s.speaker=!((o=e.value)===null||o===void 0)&&o.speaker?ActiveSpeakerUpdate.toJSON((d=e.value)===null||d===void 0?void 0:d.speaker):void 0),s},create(e){return DataPacket.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s;const f=createBaseDataPacket();return f.kind=(i=e.kind)!==null&&i!==void 0?i:0,((t=e.value)===null||t===void 0?void 0:t.$case)==="user"&&((n=e.value)===null||n===void 0?void 0:n.user)!==void 0&&((a=e.value)===null||a===void 0?void 0:a.user)!==null&&(f.value={$case:"user",user:UserPacket.fromPartial(e.value.user)}),((o=e.value)===null||o===void 0?void 0:o.$case)==="speaker"&&((d=e.value)===null||d===void 0?void 0:d.speaker)!==void 0&&((s=e.value)===null||s===void 0?void 0:s.speaker)!==null&&(f.value={$case:"speaker",speaker:ActiveSpeakerUpdate.fromPartial(e.value.speaker)}),f}};function createBaseActiveSpeakerUpdate(){return{speakers:[]}}const ActiveSpeakerUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.speakers)SpeakerInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseActiveSpeakerUpdate();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.speakers.push(SpeakerInfo.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{speakers:Array.isArray(e==null?void 0:e.speakers)?e.speakers.map(i=>SpeakerInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.speakers?i.speakers=e.speakers.map(t=>t?SpeakerInfo.toJSON(t):void 0):i.speakers=[],i},create(e){return ActiveSpeakerUpdate.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseActiveSpeakerUpdate();return t.speakers=((i=e.speakers)===null||i===void 0?void 0:i.map(n=>SpeakerInfo.fromPartial(n)))||[],t}};function createBaseSpeakerInfo(){return{sid:"",level:0,active:!1}}const SpeakerInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.sid!==""&&i.uint32(10).string(e.sid),e.level!==0&&i.uint32(21).float(e.level),e.active===!0&&i.uint32(24).bool(e.active),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSpeakerInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.sid=t.string();continue;case 2:if(o!=21)break;a.level=t.float();continue;case 3:if(o!=24)break;a.active=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",level:isSet$1(e.level)?Number(e.level):0,active:isSet$1(e.active)?!!e.active:!1}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.level!==void 0&&(i.level=e.level),e.active!==void 0&&(i.active=e.active),i},create(e){return SpeakerInfo.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseSpeakerInfo();return a.sid=(i=e.sid)!==null&&i!==void 0?i:"",a.level=(t=e.level)!==null&&t!==void 0?t:0,a.active=(n=e.active)!==null&&n!==void 0?n:!1,a}};function createBaseUserPacket(){return{participantSid:"",payload:new Uint8Array,destinationSids:[],topic:void 0}}const UserPacket={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.payload.length!==0&&i.uint32(18).bytes(e.payload);for(const t of e.destinationSids)i.uint32(26).string(t);return e.topic!==void 0&&i.uint32(34).string(e.topic),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUserPacket();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.participantSid=t.string();continue;case 2:if(o!=18)break;a.payload=t.bytes();continue;case 3:if(o!=26)break;a.destinationSids.push(t.string());continue;case 4:if(o!=34)break;a.topic=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{participantSid:isSet$1(e.participantSid)?String(e.participantSid):"",payload:isSet$1(e.payload)?bytesFromBase64(e.payload):new Uint8Array,destinationSids:Array.isArray(e==null?void 0:e.destinationSids)?e.destinationSids.map(i=>String(i)):[],topic:isSet$1(e.topic)?String(e.topic):void 0}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.payload!==void 0&&(i.payload=base64FromBytes(e.payload!==void 0?e.payload:new Uint8Array)),e.destinationSids?i.destinationSids=e.destinationSids.map(t=>t):i.destinationSids=[],e.topic!==void 0&&(i.topic=e.topic),i},create(e){return UserPacket.fromPartial(e??{})},fromPartial(e){var i,t,n,a;const o=createBaseUserPacket();return o.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",o.payload=(t=e.payload)!==null&&t!==void 0?t:new Uint8Array,o.destinationSids=((n=e.destinationSids)===null||n===void 0?void 0:n.map(d=>d))||[],o.topic=(a=e.topic)!==null&&a!==void 0?a:void 0,o}};function createBaseParticipantTracks(){return{participantSid:"",trackSids:[]}}const ParticipantTracks={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.participantSid!==""&&i.uint32(10).string(e.participantSid);for(const t of e.trackSids)i.uint32(18).string(t);return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseParticipantTracks();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.participantSid=t.string();continue;case 2:if(o!=18)break;a.trackSids.push(t.string());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{participantSid:isSet$1(e.participantSid)?String(e.participantSid):"",trackSids:Array.isArray(e==null?void 0:e.trackSids)?e.trackSids.map(i=>String(i)):[]}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.trackSids?i.trackSids=e.trackSids.map(t=>t):i.trackSids=[],i},create(e){return ParticipantTracks.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseParticipantTracks();return n.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",n.trackSids=((t=e.trackSids)===null||t===void 0?void 0:t.map(a=>a))||[],n}};function createBaseServerInfo(){return{edition:0,version:"",protocol:0,region:"",nodeId:"",debugInfo:""}}const ServerInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.edition!==0&&i.uint32(8).int32(e.edition),e.version!==""&&i.uint32(18).string(e.version),e.protocol!==0&&i.uint32(24).int32(e.protocol),e.region!==""&&i.uint32(34).string(e.region),e.nodeId!==""&&i.uint32(42).string(e.nodeId),e.debugInfo!==""&&i.uint32(50).string(e.debugInfo),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseServerInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.edition=t.int32();continue;case 2:if(o!=18)break;a.version=t.string();continue;case 3:if(o!=24)break;a.protocol=t.int32();continue;case 4:if(o!=34)break;a.region=t.string();continue;case 5:if(o!=42)break;a.nodeId=t.string();continue;case 6:if(o!=50)break;a.debugInfo=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{edition:isSet$1(e.edition)?serverInfo_EditionFromJSON(e.edition):0,version:isSet$1(e.version)?String(e.version):"",protocol:isSet$1(e.protocol)?Number(e.protocol):0,region:isSet$1(e.region)?String(e.region):"",nodeId:isSet$1(e.nodeId)?String(e.nodeId):"",debugInfo:isSet$1(e.debugInfo)?String(e.debugInfo):""}},toJSON(e){const i={};return e.edition!==void 0&&(i.edition=serverInfo_EditionToJSON(e.edition)),e.version!==void 0&&(i.version=e.version),e.protocol!==void 0&&(i.protocol=Math.round(e.protocol)),e.region!==void 0&&(i.region=e.region),e.nodeId!==void 0&&(i.nodeId=e.nodeId),e.debugInfo!==void 0&&(i.debugInfo=e.debugInfo),i},create(e){return ServerInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d;const s=createBaseServerInfo();return s.edition=(i=e.edition)!==null&&i!==void 0?i:0,s.version=(t=e.version)!==null&&t!==void 0?t:"",s.protocol=(n=e.protocol)!==null&&n!==void 0?n:0,s.region=(a=e.region)!==null&&a!==void 0?a:"",s.nodeId=(o=e.nodeId)!==null&&o!==void 0?o:"",s.debugInfo=(d=e.debugInfo)!==null&&d!==void 0?d:"",s}};function createBaseClientInfo(){return{sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:"",network:""}}const ClientInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.sdk!==0&&i.uint32(8).int32(e.sdk),e.version!==""&&i.uint32(18).string(e.version),e.protocol!==0&&i.uint32(24).int32(e.protocol),e.os!==""&&i.uint32(34).string(e.os),e.osVersion!==""&&i.uint32(42).string(e.osVersion),e.deviceModel!==""&&i.uint32(50).string(e.deviceModel),e.browser!==""&&i.uint32(58).string(e.browser),e.browserVersion!==""&&i.uint32(66).string(e.browserVersion),e.address!==""&&i.uint32(74).string(e.address),e.network!==""&&i.uint32(82).string(e.network),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseClientInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.sdk=t.int32();continue;case 2:if(o!=18)break;a.version=t.string();continue;case 3:if(o!=24)break;a.protocol=t.int32();continue;case 4:if(o!=34)break;a.os=t.string();continue;case 5:if(o!=42)break;a.osVersion=t.string();continue;case 6:if(o!=50)break;a.deviceModel=t.string();continue;case 7:if(o!=58)break;a.browser=t.string();continue;case 8:if(o!=66)break;a.browserVersion=t.string();continue;case 9:if(o!=74)break;a.address=t.string();continue;case 10:if(o!=82)break;a.network=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{sdk:isSet$1(e.sdk)?clientInfo_SDKFromJSON(e.sdk):0,version:isSet$1(e.version)?String(e.version):"",protocol:isSet$1(e.protocol)?Number(e.protocol):0,os:isSet$1(e.os)?String(e.os):"",osVersion:isSet$1(e.osVersion)?String(e.osVersion):"",deviceModel:isSet$1(e.deviceModel)?String(e.deviceModel):"",browser:isSet$1(e.browser)?String(e.browser):"",browserVersion:isSet$1(e.browserVersion)?String(e.browserVersion):"",address:isSet$1(e.address)?String(e.address):"",network:isSet$1(e.network)?String(e.network):""}},toJSON(e){const i={};return e.sdk!==void 0&&(i.sdk=clientInfo_SDKToJSON(e.sdk)),e.version!==void 0&&(i.version=e.version),e.protocol!==void 0&&(i.protocol=Math.round(e.protocol)),e.os!==void 0&&(i.os=e.os),e.osVersion!==void 0&&(i.osVersion=e.osVersion),e.deviceModel!==void 0&&(i.deviceModel=e.deviceModel),e.browser!==void 0&&(i.browser=e.browser),e.browserVersion!==void 0&&(i.browserVersion=e.browserVersion),e.address!==void 0&&(i.address=e.address),e.network!==void 0&&(i.network=e.network),i},create(e){return ClientInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,f,c,h;const v=createBaseClientInfo();return v.sdk=(i=e.sdk)!==null&&i!==void 0?i:0,v.version=(t=e.version)!==null&&t!==void 0?t:"",v.protocol=(n=e.protocol)!==null&&n!==void 0?n:0,v.os=(a=e.os)!==null&&a!==void 0?a:"",v.osVersion=(o=e.osVersion)!==null&&o!==void 0?o:"",v.deviceModel=(d=e.deviceModel)!==null&&d!==void 0?d:"",v.browser=(s=e.browser)!==null&&s!==void 0?s:"",v.browserVersion=(f=e.browserVersion)!==null&&f!==void 0?f:"",v.address=(c=e.address)!==null&&c!==void 0?c:"",v.network=(h=e.network)!==null&&h!==void 0?h:"",v}};function createBaseClientConfiguration(){return{video:void 0,screen:void 0,resumeConnection:0,disabledCodecs:void 0,forceRelay:0}}const ClientConfiguration={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.video!==void 0&&VideoConfiguration.encode(e.video,i.uint32(10).fork()).ldelim(),e.screen!==void 0&&VideoConfiguration.encode(e.screen,i.uint32(18).fork()).ldelim(),e.resumeConnection!==0&&i.uint32(24).int32(e.resumeConnection),e.disabledCodecs!==void 0&&DisabledCodecs.encode(e.disabledCodecs,i.uint32(34).fork()).ldelim(),e.forceRelay!==0&&i.uint32(40).int32(e.forceRelay),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseClientConfiguration();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.video=VideoConfiguration.decode(t,t.uint32());continue;case 2:if(o!=18)break;a.screen=VideoConfiguration.decode(t,t.uint32());continue;case 3:if(o!=24)break;a.resumeConnection=t.int32();continue;case 4:if(o!=34)break;a.disabledCodecs=DisabledCodecs.decode(t,t.uint32());continue;case 5:if(o!=40)break;a.forceRelay=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{video:isSet$1(e.video)?VideoConfiguration.fromJSON(e.video):void 0,screen:isSet$1(e.screen)?VideoConfiguration.fromJSON(e.screen):void 0,resumeConnection:isSet$1(e.resumeConnection)?clientConfigSettingFromJSON(e.resumeConnection):0,disabledCodecs:isSet$1(e.disabledCodecs)?DisabledCodecs.fromJSON(e.disabledCodecs):void 0,forceRelay:isSet$1(e.forceRelay)?clientConfigSettingFromJSON(e.forceRelay):0}},toJSON(e){const i={};return e.video!==void 0&&(i.video=e.video?VideoConfiguration.toJSON(e.video):void 0),e.screen!==void 0&&(i.screen=e.screen?VideoConfiguration.toJSON(e.screen):void 0),e.resumeConnection!==void 0&&(i.resumeConnection=clientConfigSettingToJSON(e.resumeConnection)),e.disabledCodecs!==void 0&&(i.disabledCodecs=e.disabledCodecs?DisabledCodecs.toJSON(e.disabledCodecs):void 0),e.forceRelay!==void 0&&(i.forceRelay=clientConfigSettingToJSON(e.forceRelay)),i},create(e){return ClientConfiguration.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseClientConfiguration();return n.video=e.video!==void 0&&e.video!==null?VideoConfiguration.fromPartial(e.video):void 0,n.screen=e.screen!==void 0&&e.screen!==null?VideoConfiguration.fromPartial(e.screen):void 0,n.resumeConnection=(i=e.resumeConnection)!==null&&i!==void 0?i:0,n.disabledCodecs=e.disabledCodecs!==void 0&&e.disabledCodecs!==null?DisabledCodecs.fromPartial(e.disabledCodecs):void 0,n.forceRelay=(t=e.forceRelay)!==null&&t!==void 0?t:0,n}};function createBaseVideoConfiguration(){return{hardwareEncoder:0}}const VideoConfiguration={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.hardwareEncoder!==0&&i.uint32(8).int32(e.hardwareEncoder),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseVideoConfiguration();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.hardwareEncoder=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{hardwareEncoder:isSet$1(e.hardwareEncoder)?clientConfigSettingFromJSON(e.hardwareEncoder):0}},toJSON(e){const i={};return e.hardwareEncoder!==void 0&&(i.hardwareEncoder=clientConfigSettingToJSON(e.hardwareEncoder)),i},create(e){return VideoConfiguration.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseVideoConfiguration();return t.hardwareEncoder=(i=e.hardwareEncoder)!==null&&i!==void 0?i:0,t}};function createBaseDisabledCodecs(){return{codecs:[]}}const DisabledCodecs={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.codecs)Codec.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseDisabledCodecs();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.codecs.push(Codec.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{codecs:Array.isArray(e==null?void 0:e.codecs)?e.codecs.map(i=>Codec.fromJSON(i)):[]}},toJSON(e){const i={};return e.codecs?i.codecs=e.codecs.map(t=>t?Codec.toJSON(t):void 0):i.codecs=[],i},create(e){return DisabledCodecs.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseDisabledCodecs();return t.codecs=((i=e.codecs)===null||i===void 0?void 0:i.map(n=>Codec.fromPartial(n)))||[],t}};var tsProtoGlobalThis$1=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw"Unable to locate global object"})();function bytesFromBase64(e){if(tsProtoGlobalThis$1.Buffer)return Uint8Array.from(tsProtoGlobalThis$1.Buffer.from(e,"base64"));{const i=tsProtoGlobalThis$1.atob(e),t=new Uint8Array(i.length);for(let n=0;n<i.length;++n)t[n]=i.charCodeAt(n);return t}}function base64FromBytes(e){if(tsProtoGlobalThis$1.Buffer)return tsProtoGlobalThis$1.Buffer.from(e).toString("base64");{const i=[];return e.forEach(t=>{i.push(String.fromCharCode(t))}),tsProtoGlobalThis$1.btoa(i.join(""))}}function longToNumber$1(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new tsProtoGlobalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}_m0.util.Long!==Long$1&&(_m0.util.Long=Long$1,_m0.configure());function isSet$1(e){return e!=null}const maxRetryDelay=7e3,DEFAULT_RETRY_DELAYS_IN_MS=[0,300,2*2*300,3*3*300,4*4*300,maxRetryDelay,maxRetryDelay,maxRetryDelay,maxRetryDelay,maxRetryDelay];class DefaultReconnectPolicy{constructor(i){this._retryDelays=i!==void 0?[...i]:DEFAULT_RETRY_DELAYS_IN_MS}nextRetryDelayInMs(i){if(i.retryCount>=this._retryDelays.length)return null;const t=this._retryDelays[i.retryCount];return i.retryCount<=1?t:t+Math.random()*1e3}}function _asyncIterator(e){var i,t,n,a=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(t&&(i=e[t])!=null)return i.call(e);if(n&&(i=e[n])!=null)return new AsyncFromSyncIterator(i.call(e));t="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator(e){function i(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var n=t.done;return Promise.resolve(t.value).then(function(a){return{value:a,done:n}})}return AsyncFromSyncIterator=function(t){this.s=t,this.n=t.next},AsyncFromSyncIterator.prototype={s:null,n:null,next:function(){return i(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return n===void 0?Promise.resolve({value:t,done:!0}):i(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return n===void 0?Promise.reject(t):i(n.apply(this.s,arguments))}},new AsyncFromSyncIterator(e)}function ownKeys(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function _objectSpread2(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?ownKeys(Object(t),!0).forEach(function(n){_defineProperty(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function _defineProperty(e,i,t){return i=_toPropertyKey(i),i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function _toPrimitive(e,i){if(typeof e!="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,i||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function _toPropertyKey(e){var i=_toPrimitive(e,"string");return typeof i=="symbol"?i:String(i)}var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(i,t,n){return Function.prototype.apply.call(i,t,n)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:ReflectOwnKeys=function(i){return Object.getOwnPropertyNames(i)};function ProcessEmitWarning(e){console&&console.warn&&console.warn(e)}var NumberIsNaN=Number.isNaN||function(i){return i!==i};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");defaultMaxListeners=e}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(i){if(typeof i!="number"||i<0||NumberIsNaN(i))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+i+".");return this._maxListeners=i,this};function _getMaxListeners(e){return e._maxListeners===void 0?EventEmitter.defaultMaxListeners:e._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function(i){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a=i==="error",o=this._events;if(o!==void 0)a=a&&o.error===void 0;else if(!a)return!1;if(a){var d;if(t.length>0&&(d=t[0]),d instanceof Error)throw d;var s=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw s.context=d,s}var f=o[i];if(f===void 0)return!1;if(typeof f=="function")ReflectApply(f,this,t);else for(var c=f.length,h=arrayClone(f,c),n=0;n<c;++n)ReflectApply(h[n],this,t);return!0};function _addListener(e,i,t,n){var a,o,d;if(checkListener(t),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",i,t.listener?t.listener:t),o=e._events),d=o[i]),d===void 0)d=o[i]=t,++e._eventsCount;else if(typeof d=="function"?d=o[i]=n?[t,d]:[d,t]:n?d.unshift(t):d.push(t),a=_getMaxListeners(e),a>0&&d.length>a&&!d.warned){d.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=i,s.count=d.length,ProcessEmitWarning(s)}return e}EventEmitter.prototype.addListener=function(i,t){return _addListener(this,i,t,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(i,t){return _addListener(this,i,t,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(e,i,t){var n={fired:!1,wrapFn:void 0,target:e,type:i,listener:t},a=onceWrapper.bind(n);return a.listener=t,n.wrapFn=a,a}EventEmitter.prototype.once=function(i,t){return checkListener(t),this.on(i,_onceWrap(this,i,t)),this};EventEmitter.prototype.prependOnceListener=function(i,t){return checkListener(t),this.prependListener(i,_onceWrap(this,i,t)),this};EventEmitter.prototype.removeListener=function(i,t){var n,a,o,d,s;if(checkListener(t),a=this._events,a===void 0)return this;if(n=a[i],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete a[i],a.removeListener&&this.emit("removeListener",i,n.listener||t));else if(typeof n!="function"){for(o=-1,d=n.length-1;d>=0;d--)if(n[d]===t||n[d].listener===t){s=n[d].listener,o=d;break}if(o<0)return this;o===0?n.shift():spliceOne(n,o),n.length===1&&(a[i]=n[0]),a.removeListener!==void 0&&this.emit("removeListener",i,s||t)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function(i){var t,n,a;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[i]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[i]),this;if(arguments.length===0){var o=Object.keys(n),d;for(a=0;a<o.length;++a)d=o[a],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[i],typeof t=="function")this.removeListener(i,t);else if(t!==void 0)for(a=t.length-1;a>=0;a--)this.removeListener(i,t[a]);return this};function _listeners(e,i,t){var n=e._events;if(n===void 0)return[];var a=n[i];return a===void 0?[]:typeof a=="function"?t?[a.listener||a]:[a]:t?unwrapListeners(a):arrayClone(a,a.length)}EventEmitter.prototype.listeners=function(i){return _listeners(this,i,!0)};EventEmitter.prototype.rawListeners=function(i){return _listeners(this,i,!1)};EventEmitter.listenerCount=function(e,i){return typeof e.listenerCount=="function"?e.listenerCount(i):listenerCount.call(e,i)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(e){var i=this._events;if(i!==void 0){var t=i[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(e,i){for(var t=new Array(i),n=0;n<i;++n)t[n]=e[n];return t}function spliceOne(e,i){for(;i+1<e.length;i++)e[i]=e[i+1];e.pop()}function unwrapListeners(e){for(var i=new Array(e.length),t=0;t<i.length;++t)i[t]=e[t].listener||e[t];return i}function once(e,i){return new Promise(function(t,n){function a(d){e.removeListener(i,o),n(d)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",a),t([].slice.call(arguments))}eventTargetAgnosticAddListener(e,i,o,{once:!0}),i!=="error"&&addErrorHandlerIfEventEmitter(e,a,{once:!0})})}function addErrorHandlerIfEventEmitter(e,i,t){typeof e.on=="function"&&eventTargetAgnosticAddListener(e,"error",i,t)}function eventTargetAgnosticAddListener(e,i,t,n){if(typeof e.on=="function")n.once?e.once(i,t):e.on(i,t);else if(typeof e.addEventListener=="function")e.addEventListener(i,function a(o){n.once&&e.removeEventListener(i,a),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var eventsExports=events.exports,EventEmitter$1=getDefaultExportFromCjs(eventsExports);class Queue{constructor(i,t){this.maxConcurrent=i||1,this.minCycle=t||0,this.queueRunning=[],this.queueWaiting={},this.lastRun=0}dequeue(i){const t=this.queueRunning,n=t.findIndex(o=>o.hash===i);if(n==-1)throw"queue desync";const a=t[n];return t.splice(n,1),a}getFirstWaiting(){for(let i of Object.keys(this.queueWaiting).sort((t,n)=>t-n))if(this.queueWaiting[i]!==void 0&&this.queueWaiting[i].length>0)return this.queueWaiting[i]}end(i){this.dequeue(i).resolve();const n=this.getFirstWaiting();n!==void 0&&n.shift().resolve()}async wait(i,t){const n=t===void 0?0:t;let a={hash:i,priority:n};for(this.queueWaiting[n]==null&&(this.queueWaiting[n]=[]),this.queueRunning.length>=this.maxConcurrent&&(a.promise=new Promise(o=>{a.resolve=o}),this.queueWaiting[n].push(a),await a.promise),this.queueRunning.push(a),a.promise=new Promise(o=>{a.resolve=o});Date.now()-this.lastRun<this.minCycle;)await new Promise(o=>setTimeout(o,this.minCycle-Date.now()+this.lastRun));this.lastRun=Date.now()}run(i,t){const n=t===void 0?0:t,a=Symbol();return this.wait(a,n).then(()=>i()).finally(()=>{this.end(a)})}stat(){return{running:this.queueRunning.length,waiting:Object.keys(this.queueWaiting).reduce((i,t)=>i+=this.queueWaiting[t].length,0),last:this.lastRun}}async flush(){for(;this.stat().waiting>0;)for(let i of Object.keys(this.queueWaiting).sort((t,n)=>n-t)){const t=this.queueWaiting[i];t!==void 0&&t.length>0&&await t[t.length-1].promise}for(;this.queueRunning.length>0;)await Promise.allSettled(this.queueRunning.map(i=>i.promise))}}let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(e,i,t){const n=e.match(i);return n&&n.length>=t&&parseInt(n[t],10)}function wrapPeerConnectionEvent(e,i,t){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,a=n.addEventListener;n.addEventListener=function(d,s){if(d!==i)return a.apply(this,arguments);const f=c=>{const h=t(c);h&&(s.handleEvent?s.handleEvent(h):s(h))};return this._eventMap=this._eventMap||{},this._eventMap[i]||(this._eventMap[i]=new Map),this._eventMap[i].set(s,f),a.apply(this,[d,f])};const o=n.removeEventListener;n.removeEventListener=function(d,s){if(d!==i||!this._eventMap||!this._eventMap[i])return o.apply(this,arguments);if(!this._eventMap[i].has(s))return o.apply(this,arguments);const f=this._eventMap[i].get(s);return this._eventMap[i].delete(s),this._eventMap[i].size===0&&delete this._eventMap[i],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[d,f])},Object.defineProperty(n,"on"+i,{get(){return this["_on"+i]},set(d){this["_on"+i]&&(this.removeEventListener(i,this["_on"+i]),delete this["_on"+i]),d&&this.addEventListener(i,this["_on"+i]=d)},enumerable:!0,configurable:!0})}function disableLog(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(logDisabled_=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(deprecationWarnings_=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(e,i){deprecationWarnings_&&console.warn(e+" is deprecated, please use "+i+" instead.")}function detectBrowser(e){const i={browser:null,version:null};if(typeof e>"u"||!e.navigator)return i.browser="Not a browser.",i;const{navigator:t}=e;if(t.mozGetUserMedia)i.browser="firefox",i.version=extractVersion(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)i.browser="chrome",i.version=extractVersion(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))i.browser="safari",i.version=extractVersion(t.userAgent,/AppleWebKit\/(\d+)\./,1),i.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return i.browser="Not a supported browser.",i;return i}function isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}function compactObject(e){return isObject(e)?Object.keys(e).reduce(function(i,t){const n=isObject(e[t]),a=n?compactObject(e[t]):e[t],o=n&&!Object.keys(a).length;return a===void 0||o?i:Object.assign(i,{[t]:a})},{}):e}function walkStats(e,i,t){!i||t.has(i.id)||(t.set(i.id,i),Object.keys(i).forEach(n=>{n.endsWith("Id")?walkStats(e,e.get(i[n]),t):n.endsWith("Ids")&&i[n].forEach(a=>{walkStats(e,e.get(a),t)})}))}function filterStats(e,i,t){const n=t?"outbound-rtp":"inbound-rtp",a=new Map;if(i===null)return a;const o=[];return e.forEach(d=>{d.type==="track"&&d.trackIdentifier===i.id&&o.push(d)}),o.forEach(d=>{e.forEach(s=>{s.type===n&&s.trackId===d.id&&walkStats(e,s,a)})}),a}const logging=log;function shimGetUserMedia$2(e,i){const t=e&&e.navigator;if(!t.mediaDevices)return;const n=function(s){if(typeof s!="object"||s.mandatory||s.optional)return s;const f={};return Object.keys(s).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const h=typeof s[c]=="object"?s[c]:{ideal:s[c]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const v=function(l,u){return l?l+u.charAt(0).toUpperCase()+u.slice(1):u==="deviceId"?"sourceId":u};if(h.ideal!==void 0){f.optional=f.optional||[];let l={};typeof h.ideal=="number"?(l[v("min",c)]=h.ideal,f.optional.push(l),l={},l[v("max",c)]=h.ideal,f.optional.push(l)):(l[v("",c)]=h.ideal,f.optional.push(l))}h.exact!==void 0&&typeof h.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[v("",c)]=h.exact):["min","max"].forEach(l=>{h[l]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[v(l,c)]=h[l])})}),s.advanced&&(f.optional=(f.optional||[]).concat(s.advanced)),f},a=function(s,f){if(i.version>=61)return f(s);if(s=JSON.parse(JSON.stringify(s)),s&&typeof s.audio=="object"){const c=function(h,v,l){v in h&&!(l in h)&&(h[l]=h[v],delete h[v])};s=JSON.parse(JSON.stringify(s)),c(s.audio,"autoGainControl","googAutoGainControl"),c(s.audio,"noiseSuppression","googNoiseSuppression"),s.audio=n(s.audio)}if(s&&typeof s.video=="object"){let c=s.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const h=i.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete s.video.facingMode;let v;if(c.exact==="environment"||c.ideal==="environment"?v=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(v=["front"]),v)return t.mediaDevices.enumerateDevices().then(l=>{l=l.filter(p=>p.kind==="videoinput");let u=l.find(p=>v.some(m=>p.label.toLowerCase().includes(m)));return!u&&l.length&&v.includes("back")&&(u=l[l.length-1]),u&&(s.video.deviceId=c.exact?{exact:u.deviceId}:{ideal:u.deviceId}),s.video=n(s.video),logging("chrome: "+JSON.stringify(s)),f(s)})}s.video=n(s.video)}return logging("chrome: "+JSON.stringify(s)),f(s)},o=function(s){return i.version>=64?s:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[s.name]||s.name,message:s.message,constraint:s.constraint||s.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},d=function(s,f,c){a(s,h=>{t.webkitGetUserMedia(h,f,v=>{c&&c(o(v))})})};if(t.getUserMedia=d.bind(t),t.mediaDevices.getUserMedia){const s=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(f){return a(f,c=>s(c).then(h=>{if(c.audio&&!h.getAudioTracks().length||c.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(v=>{v.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(o(h))))}}}function shimGetDisplayMedia$1(e,i){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices){if(typeof i!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(n){return i(n).then(a=>{const o=n.video&&n.video.width,d=n.video&&n.video.height,s=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a,maxFrameRate:s||3}},o&&(n.video.mandatory.maxWidth=o),d&&(n.video.mandatory.maxHeight=d),e.navigator.mediaDevices.getUserMedia(n)})}}}function shimMediaStream(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function shimOnTrack$1(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",a=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(s=>s.track&&s.track.id===a.track.id):o={track:a.track};const d=new Event("track");d.track=a.track,d.receiver=o,d.transceiver={receiver:o},d.streams=[n.stream],this.dispatchEvent(d)}),n.stream.getTracks().forEach(a=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(s=>s.track&&s.track.id===a.id):o={track:a};const d=new Event("track");d.track=a,d.receiver=o,d.transceiver={receiver:o},d.streams=[n.stream],this.dispatchEvent(d)})},this.addEventListener("addstream",this._ontrackpoly)),i.apply(this,arguments)}}else wrapPeerConnectionEvent(e,"track",i=>(i.transceiver||Object.defineProperty(i,"transceiver",{value:{receiver:i.receiver}}),i))}function shimGetSendersWithDtmf(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const i=function(a,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=a.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:a}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(s,f){let c=a.apply(this,arguments);return c||(c=i(this,s),this._senders.push(c)),c};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(s){o.apply(this,arguments);const f=this._senders.indexOf(s);f!==-1&&this._senders.splice(f,1)}}const t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],t.apply(this,[o]),o.getTracks().forEach(d=>{this._senders.push(i(this,d))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(d=>{const s=this._senders.find(f=>f.track===d);s&&this._senders.splice(this._senders.indexOf(s),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const i=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const n=i.apply(this,[]);return n.forEach(a=>a._pc=this),n},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(e){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[n,a,o]=arguments;if(arguments.length>0&&typeof n=="function")return i.apply(this,arguments);if(i.length===0&&(arguments.length===0||typeof n!="function"))return i.apply(this,[]);const d=function(f){const c={};return f.result().forEach(v=>{const l={id:v.id,timestamp:v.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[v.type]||v.type};v.names().forEach(u=>{l[u]=v.stat(u)}),c[l.id]=l}),c},s=function(f){return new Map(Object.keys(f).map(c=>[c,f[c]]))};if(arguments.length>=2){const f=function(c){a(s(d(c)))};return i.apply(this,[f,n])}return new Promise((f,c)=>{i.apply(this,[function(h){f(s(d(h)))},c])}).then(a,o)}}function shimSenderReceiverGetStats(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=t.apply(this,[]);return o.forEach(d=>d._pc=this),o});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(d=>filterStats(d,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const a=t.apply(this,[]);return a.forEach(o=>o._pc=this),a}),wrapPeerConnectionEvent(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(o=>filterStats(o,a.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const n=arguments[0];let a,o,d;return this.getSenders().forEach(s=>{s.track===n&&(a?d=!0:a=s)}),this.getReceivers().forEach(s=>(s.track===n&&(o?d=!0:o=s),s.track===n)),d||a&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(d=>this._shimmedLocalStreams[d][0])};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(d,s){if(!s)return i.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const f=i.apply(this,arguments);return this._shimmedLocalStreams[s.id]?this._shimmedLocalStreams[s.id].indexOf(f)===-1&&this._shimmedLocalStreams[s.id].push(f):this._shimmedLocalStreams[s.id]=[s,f],f};const t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(d){this._shimmedLocalStreams=this._shimmedLocalStreams||{},d.getTracks().forEach(c=>{if(this.getSenders().find(v=>v.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const s=this.getSenders();t.apply(this,arguments);const f=this.getSenders().filter(c=>s.indexOf(c)===-1);this._shimmedLocalStreams[d.id]=[d].concat(f)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[d.id],n.apply(this,arguments)};const a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},d&&Object.keys(this._shimmedLocalStreams).forEach(s=>{const f=this._shimmedLocalStreams[s].indexOf(d);f!==-1&&this._shimmedLocalStreams[s].splice(f,1),this._shimmedLocalStreams[s].length===1&&delete this._shimmedLocalStreams[s]}),a.apply(this,arguments)}}function shimAddTrackRemoveTrack(e,i){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&i.version>=65)return shimAddTrackRemoveTrackWithNative(e);const t=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const h=t.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(v=>this._reverseStreams[v.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(v=>{if(this.getSenders().find(u=>u.track===v))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const v=new e.MediaStream(h.getTracks());this._streams[h.id]=v,this._reverseStreams[v.id]=h,h=v}n.apply(this,[h])};const a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},e.RTCPeerConnection.prototype.addTrack=function(h,v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const l=[].slice.call(arguments,1);if(l.length!==1||!l[0].getTracks().find(m=>m===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[v.id];if(p)p.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new e.MediaStream([h]);this._streams[v.id]=m,this._reverseStreams[m.id]=v,this.addStream(m)}return this.getSenders().find(m=>m.track===h)};function o(c,h){let v=h.sdp;return Object.keys(c._reverseStreams||[]).forEach(l=>{const u=c._reverseStreams[l],p=c._streams[u.id];v=v.replace(new RegExp(p.id,"g"),u.id)}),new RTCSessionDescription({type:h.type,sdp:v})}function d(c,h){let v=h.sdp;return Object.keys(c._reverseStreams||[]).forEach(l=>{const u=c._reverseStreams[l],p=c._streams[u.id];v=v.replace(new RegExp(u.id,"g"),p.id)}),new RTCSessionDescription({type:h.type,sdp:v})}["createOffer","createAnswer"].forEach(function(c){const h=e.RTCPeerConnection.prototype[c],v={[c](){const l=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[p=>{const m=o(this,p);l[0].apply(null,[m])},p=>{l[1]&&l[1].apply(null,p)},arguments[2]]):h.apply(this,arguments).then(p=>o(this,p))}};e.RTCPeerConnection.prototype[c]=v[c]});const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?s.apply(this,arguments):(arguments[0]=d(this,arguments[0]),s.apply(this,arguments))};const f=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=f.get.apply(this);return c.type===""?c:o(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let l;Object.keys(this._streams).forEach(u=>{this._streams[u].getTracks().find(m=>h.track===m)&&(l=this._streams[u])}),l&&(l.getTracks().length===1?this.removeStream(this._reverseStreams[l.id]):l.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$1(e,i){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],a={[t](){return arguments[0]=new(t==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=a[t]})}function fixNegotiationNeeded(e,i){wrapPeerConnectionEvent(e,"negotiationneeded",t=>{const n=t.target;if(!((i.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return t})}var chromeShim=Object.freeze({__proto__:null,fixNegotiationNeeded,shimAddTrackRemoveTrack,shimAddTrackRemoveTrackWithNative,shimGetDisplayMedia:shimGetDisplayMedia$1,shimGetSendersWithDtmf,shimGetStats,shimGetUserMedia:shimGetUserMedia$2,shimMediaStream,shimOnTrack:shimOnTrack$1,shimPeerConnection:shimPeerConnection$1,shimSenderReceiverGetStats});function shimGetUserMedia$1(e,i){const t=e&&e.navigator,n=e&&e.MediaStreamTrack;if(t.getUserMedia=function(a,o,d){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(a).then(o,d)},!(i.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const a=function(d,s,f){s in d&&!(f in d)&&(d[f]=d[s],delete d[s])},o=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(d){return typeof d=="object"&&typeof d.audio=="object"&&(d=JSON.parse(JSON.stringify(d)),a(d.audio,"autoGainControl","mozAutoGainControl"),a(d.audio,"noiseSuppression","mozNoiseSuppression")),o(d)},n&&n.prototype.getSettings){const d=n.prototype.getSettings;n.prototype.getSettings=function(){const s=d.apply(this,arguments);return a(s,"mozAutoGainControl","autoGainControl"),a(s,"mozNoiseSuppression","noiseSuppression"),s}}if(n&&n.prototype.applyConstraints){const d=n.prototype.applyConstraints;n.prototype.applyConstraints=function(s){return this.kind==="audio"&&typeof s=="object"&&(s=JSON.parse(JSON.stringify(s)),a(s,"autoGainControl","mozAutoGainControl"),a(s,"noiseSuppression","mozNoiseSuppression")),d.apply(this,[s])}}}}function shimGetDisplayMedia(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return n.video===!0?n.video={mediaSource:i}:n.video.mediaSource=i,e.navigator.mediaDevices.getUserMedia(n)})}function shimOnTrack(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(e,i){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const o=e.RTCPeerConnection.prototype[a],d={[a](){return arguments[0]=new(a==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[a]=d[a]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,d,s]=arguments;return n.apply(this,[o||null]).then(f=>{if(i.version<53&&!d)try{f.forEach(c=>{c.type=t[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;f.forEach((h,v)=>{f.set(v,Object.assign({},h,{type:t[h.type]||h.type}))})}return f}).then(d,s)}}function shimSenderGetStats(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const i=e.RTCPeerConnection.prototype.getSenders;i&&(e.RTCPeerConnection.prototype.getSenders=function(){const a=i.apply(this,[]);return a.forEach(o=>o._pc=this),a});const t=e.RTCPeerConnection.prototype.addTrack;t&&(e.RTCPeerConnection.prototype.addTrack=function(){const a=t.apply(this,arguments);return a._pc=this,a}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){const n=i.apply(this,[]);return n.forEach(a=>a._pc=this),n}),wrapPeerConnectionEvent(e,"track",t=>(t.receiver._pc=t.srcElement,t)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){deprecated("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&t.getTracks().includes(n.track)&&this.removeTrack(n)})})}function shimRTCDataChannel(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function shimAddTransceiver(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const i=e.RTCPeerConnection.prototype.addTransceiver;i&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const a=n.length>0;a&&n.forEach(d=>{if("rid"in d&&!/^[a-z0-9]{0,16}$/i.test(d.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in d&&!(parseFloat(d.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in d&&!(parseFloat(d.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=i.apply(this,arguments);if(a){const{sender:d}=o,s=d.getParameters();(!("encodings"in s)||s.encodings.length===1&&Object.keys(s.encodings[0]).length===0)&&(s.encodings=n,d.sendEncodings=n,this.setParametersPromises.push(d.setParameters(s).then(()=>{delete d.sendEncodings}).catch(()=>{delete d.sendEncodings})))}return o})}function shimGetParameters(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const i=e.RTCRtpSender.prototype.getParameters;i&&(e.RTCRtpSender.prototype.getParameters=function(){const n=i.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function shimCreateOffer(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const i=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>i.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):i.apply(this,arguments)}}function shimCreateAnswer(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const i=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>i.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):i.apply(this,arguments)}}var firefoxShim=Object.freeze({__proto__:null,shimAddTransceiver,shimCreateAnswer,shimCreateOffer,shimGetDisplayMedia,shimGetParameters,shimGetUserMedia:shimGetUserMedia$1,shimOnTrack,shimPeerConnection,shimRTCDataChannel,shimReceiverGetStats,shimRemoveStream,shimSenderGetStats});function shimLocalStreamsAPI(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(a=>i.call(this,a,n)),n.getVideoTracks().forEach(a=>i.call(this,a,n))},e.RTCPeerConnection.prototype.addTrack=function(n){for(var a=arguments.length,o=new Array(a>1?a-1:0),d=1;d<a;d++)o[d-1]=arguments[d];return o&&o.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),i.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(t);if(n===-1)return;this._localStreams.splice(n,1);const a=t.getTracks();this.getSenders().forEach(o=>{a.includes(o.track)&&this.removeTrack(o)})})}}function shimRemoteStreamsAPI(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const o=new Event("addstream");o.stream=a,this.dispatchEvent(o)})})}});const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(o=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(o)>=0)return;n._remoteStreams.push(o);const d=new Event("addstream");d.stream=o,n.dispatchEvent(d)})}),i.apply(n,arguments)}}}function shimCallbacksAPI(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,t=i.createOffer,n=i.createAnswer,a=i.setLocalDescription,o=i.setRemoteDescription,d=i.addIceCandidate;i.createOffer=function(c,h){const v=arguments.length>=2?arguments[2]:arguments[0],l=t.apply(this,[v]);return h?(l.then(c,h),Promise.resolve()):l},i.createAnswer=function(c,h){const v=arguments.length>=2?arguments[2]:arguments[0],l=n.apply(this,[v]);return h?(l.then(c,h),Promise.resolve()):l};let s=function(f,c,h){const v=a.apply(this,[f]);return h?(v.then(c,h),Promise.resolve()):v};i.setLocalDescription=s,s=function(f,c,h){const v=o.apply(this,[f]);return h?(v.then(c,h),Promise.resolve()):v},i.setRemoteDescription=s,s=function(f,c,h){const v=d.apply(this,[f]);return h?(v.then(c,h),Promise.resolve()):v},i.addIceCandidate=s}function shimGetUserMedia(e){const i=e&&e.navigator;if(i.mediaDevices&&i.mediaDevices.getUserMedia){const t=i.mediaDevices,n=t.getUserMedia.bind(t);i.mediaDevices.getUserMedia=a=>n(shimConstraints(a))}!i.getUserMedia&&i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=function(n,a,o){i.mediaDevices.getUserMedia(n).then(a,o)}.bind(i))}function shimConstraints(e){return e&&e.video!==void 0?Object.assign({},e,{video:compactObject(e.video)}):e}function shimRTCIceServerUrls(e){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection;e.RTCPeerConnection=function(n,a){if(n&&n.iceServers){const o=[];for(let d=0;d<n.iceServers.length;d++){let s=n.iceServers[d];s.urls===void 0&&s.url?(deprecated("RTCIceServer.url","RTCIceServer.urls"),s=JSON.parse(JSON.stringify(s)),s.urls=s.url,delete s.url,o.push(s)):o.push(n.iceServers[d])}n.iceServers=o}return new i(n,a)},e.RTCPeerConnection.prototype=i.prototype,"generateCertificate"in i&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return i.generateCertificate}})}function shimTrackEventTransceiver(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(e){const i=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const a=this.getTransceivers().find(d=>d.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):n.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const o=this.getTransceivers().find(d=>d.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):n.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return i.apply(this,arguments)}}function shimAudioContext(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var safariShim=Object.freeze({__proto__:null,shimAudioContext,shimCallbacksAPI,shimConstraints,shimCreateOfferLegacy,shimGetUserMedia,shimLocalStreamsAPI,shimRTCIceServerUrls,shimRemoteStreamsAPI,shimTrackEventTransceiver}),sdp$1={exports:{}};(function(e){const i={};i.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},i.localCName=i.generateIdentifier(),i.splitLines=function(t){return t.trim().split(`
`).map(n=>n.trim())},i.splitSections=function(t){return t.split(`
m=`).map((a,o)=>(o>0?"m="+a:a).trim()+`\r
`)},i.getDescription=function(t){const n=i.splitSections(t);return n&&n[0]},i.getMediaSections=function(t){const n=i.splitSections(t);return n.shift(),n},i.matchPrefix=function(t,n){return i.splitLines(t).filter(a=>a.indexOf(n)===0)},i.parseCandidate=function(t){let n;t.indexOf("a=candidate:")===0?n=t.substring(12).split(" "):n=t.substring(10).split(" ");const a={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let o=8;o<n.length;o+=2)switch(n[o]){case"raddr":a.relatedAddress=n[o+1];break;case"rport":a.relatedPort=parseInt(n[o+1],10);break;case"tcptype":a.tcpType=n[o+1];break;case"ufrag":a.ufrag=n[o+1],a.usernameFragment=n[o+1];break;default:a[n[o]]===void 0&&(a[n[o]]=n[o+1]);break}return a},i.writeCandidate=function(t){const n=[];n.push(t.foundation);const a=t.component;a==="rtp"?n.push(1):a==="rtcp"?n.push(2):n.push(a),n.push(t.protocol.toUpperCase()),n.push(t.priority),n.push(t.address||t.ip),n.push(t.port);const o=t.type;return n.push("typ"),n.push(o),o!=="host"&&t.relatedAddress&&t.relatedPort&&(n.push("raddr"),n.push(t.relatedAddress),n.push("rport"),n.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(n.push("ufrag"),n.push(t.usernameFragment||t.ufrag)),"candidate:"+n.join(" ")},i.parseIceOptions=function(t){return t.substring(14).split(" ")},i.parseRtpMap=function(t){let n=t.substring(9).split(" ");const a={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),a.name=n[0],a.clockRate=parseInt(n[1],10),a.channels=n.length===3?parseInt(n[2],10):1,a.numChannels=a.channels,a},i.writeRtpMap=function(t){let n=t.payloadType;t.preferredPayloadType!==void 0&&(n=t.preferredPayloadType);const a=t.channels||t.numChannels||1;return"a=rtpmap:"+n+" "+t.name+"/"+t.clockRate+(a!==1?"/"+a:"")+`\r
`},i.parseExtmap=function(t){const n=t.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},i.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},i.parseFmtp=function(t){const n={};let a;const o=t.substring(t.indexOf(" ")+1).split(";");for(let d=0;d<o.length;d++)a=o[d].trim().split("="),n[a[0].trim()]=a[1];return n},i.writeFmtp=function(t){let n="",a=t.payloadType;if(t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const o=[];Object.keys(t.parameters).forEach(d=>{t.parameters[d]!==void 0?o.push(d+"="+t.parameters[d]):o.push(d)}),n+="a=fmtp:"+a+" "+o.join(";")+`\r
`}return n},i.parseRtcpFb=function(t){const n=t.substring(t.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},i.writeRtcpFb=function(t){let n="",a=t.payloadType;return t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(o=>{n+="a=rtcp-fb:"+a+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),n},i.parseSsrcMedia=function(t){const n=t.indexOf(" "),a={ssrc:parseInt(t.substring(7,n),10)},o=t.indexOf(":",n);return o>-1?(a.attribute=t.substring(n+1,o),a.value=t.substring(o+1)):a.attribute=t.substring(n+1),a},i.parseSsrcGroup=function(t){const n=t.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(a=>parseInt(a,10))}},i.getMid=function(t){const n=i.matchPrefix(t,"a=mid:")[0];if(n)return n.substring(6)},i.parseFingerprint=function(t){const n=t.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},i.getDtlsParameters=function(t,n){return{role:"auto",fingerprints:i.matchPrefix(t+n,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(t,n){let a="a=setup:"+n+`\r
`;return t.fingerprints.forEach(o=>{a+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),a},i.parseCryptoLine=function(t){const n=t.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},i.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?i.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},i.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const n=t.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},i.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},i.getCryptoParameters=function(t,n){return i.matchPrefix(t+n,"a=crypto:").map(i.parseCryptoLine)},i.getIceParameters=function(t,n){const a=i.matchPrefix(t+n,"a=ice-ufrag:")[0],o=i.matchPrefix(t+n,"a=ice-pwd:")[0];return a&&o?{usernameFragment:a.substring(12),password:o.substring(10)}:null},i.writeIceParameters=function(t){let n="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(n+=`a=ice-lite\r
`),n},i.parseRtpParameters=function(t){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=i.splitLines(t)[0].split(" ");n.profile=o[2];for(let s=3;s<o.length;s++){const f=o[s],c=i.matchPrefix(t,"a=rtpmap:"+f+" ")[0];if(c){const h=i.parseRtpMap(c),v=i.matchPrefix(t,"a=fmtp:"+f+" ");switch(h.parameters=v.length?i.parseFmtp(v[0]):{},h.rtcpFeedback=i.matchPrefix(t,"a=rtcp-fb:"+f+" ").map(i.parseRtcpFb),n.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(h.name.toUpperCase());break}}}i.matchPrefix(t,"a=extmap:").forEach(s=>{n.headerExtensions.push(i.parseExtmap(s))});const d=i.matchPrefix(t,"a=rtcp-fb:* ").map(i.parseRtcpFb);return n.codecs.forEach(s=>{d.forEach(f=>{s.rtcpFeedback.find(h=>h.type===f.type&&h.parameter===f.parameter)||s.rtcpFeedback.push(f)})}),n},i.writeRtpDescription=function(t,n){let a="";a+="m="+t+" ",a+=n.codecs.length>0?"9":"0",a+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=n.codecs.map(d=>d.preferredPayloadType!==void 0?d.preferredPayloadType:d.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(d=>{a+=i.writeRtpMap(d),a+=i.writeFmtp(d),a+=i.writeRtcpFb(d)});let o=0;return n.codecs.forEach(d=>{d.maxptime>o&&(o=d.maxptime)}),o>0&&(a+="a=maxptime:"+o+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(d=>{a+=i.writeExtmap(d)}),a},i.parseRtpEncodingParameters=function(t){const n=[],a=i.parseRtpParameters(t),o=a.fecMechanisms.indexOf("RED")!==-1,d=a.fecMechanisms.indexOf("ULPFEC")!==-1,s=i.matchPrefix(t,"a=ssrc:").map(l=>i.parseSsrcMedia(l)).filter(l=>l.attribute==="cname"),f=s.length>0&&s[0].ssrc;let c;const h=i.matchPrefix(t,"a=ssrc-group:FID").map(l=>l.substring(17).split(" ").map(p=>parseInt(p,10)));h.length>0&&h[0].length>1&&h[0][0]===f&&(c=h[0][1]),a.codecs.forEach(l=>{if(l.name.toUpperCase()==="RTX"&&l.parameters.apt){let u={ssrc:f,codecPayloadType:parseInt(l.parameters.apt,10)};f&&c&&(u.rtx={ssrc:c}),n.push(u),o&&(u=JSON.parse(JSON.stringify(u)),u.fec={ssrc:f,mechanism:d?"red+ulpfec":"red"},n.push(u))}}),n.length===0&&f&&n.push({ssrc:f});let v=i.matchPrefix(t,"b=");return v.length&&(v[0].indexOf("b=TIAS:")===0?v=parseInt(v[0].substring(7),10):v[0].indexOf("b=AS:")===0?v=parseInt(v[0].substring(5),10)*1e3*.95-50*40*8:v=void 0,n.forEach(l=>{l.maxBitrate=v})),n},i.parseRtcpParameters=function(t){const n={},a=i.matchPrefix(t,"a=ssrc:").map(s=>i.parseSsrcMedia(s)).filter(s=>s.attribute==="cname")[0];a&&(n.cname=a.value,n.ssrc=a.ssrc);const o=i.matchPrefix(t,"a=rtcp-rsize");n.reducedSize=o.length>0,n.compound=o.length===0;const d=i.matchPrefix(t,"a=rtcp-mux");return n.mux=d.length>0,n},i.writeRtcpParameters=function(t){let n="";return t.reducedSize&&(n+=`a=rtcp-rsize\r
`),t.mux&&(n+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(n+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),n},i.parseMsid=function(t){let n;const a=i.matchPrefix(t,"a=msid:");if(a.length===1)return n=a[0].substring(7).split(" "),{stream:n[0],track:n[1]};const o=i.matchPrefix(t,"a=ssrc:").map(d=>i.parseSsrcMedia(d)).filter(d=>d.attribute==="msid");if(o.length>0)return n=o[0].value.split(" "),{stream:n[0],track:n[1]}},i.parseSctpDescription=function(t){const n=i.parseMLine(t),a=i.matchPrefix(t,"a=max-message-size:");let o;a.length>0&&(o=parseInt(a[0].substring(19),10)),isNaN(o)&&(o=65536);const d=i.matchPrefix(t,"a=sctp-port:");if(d.length>0)return{port:parseInt(d[0].substring(12),10),protocol:n.fmt,maxMessageSize:o};const s=i.matchPrefix(t,"a=sctpmap:");if(s.length>0){const f=s[0].substring(10).split(" ");return{port:parseInt(f[0],10),protocol:f[1],maxMessageSize:o}}},i.writeSctpDescription=function(t,n){let a=[];return t.protocol!=="DTLS/SCTP"?a=["m="+t.kind+" 9 "+t.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:a=["m="+t.kind+" 9 "+t.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&a.push("a=max-message-size:"+n.maxMessageSize+`\r
`),a.join("")},i.generateSessionId=function(){return Math.random().toString().substr(2,22)},i.writeSessionBoilerplate=function(t,n,a){let o;const d=n!==void 0?n:2;return t?o=t:o=i.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+o+" "+d+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},i.getDirection=function(t,n){const a=i.splitLines(t);for(let o=0;o<a.length;o++)switch(a[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[o].substring(2)}return n?i.getDirection(n):"sendrecv"},i.getKind=function(t){return i.splitLines(t)[0].split(" ")[0].substring(2)},i.isRejected=function(t){return t.split(" ",2)[1]==="0"},i.parseMLine=function(t){const a=i.splitLines(t)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},i.parseOLine=function(t){const a=i.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},i.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const n=i.splitLines(t);for(let a=0;a<n.length;a++)if(n[a].length<2||n[a].charAt(1)!=="=")return!1;return!0},e.exports=i})(sdp$1);var sdpExports=sdp$1.exports,SDPUtils=getDefaultExportFromCjs(sdpExports),sdp=_mergeNamespaces({__proto__:null,default:SDPUtils},[sdpExports]);function shimRTCIceCandidate(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const i=e.RTCIceCandidate;e.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const a=new i(n),o=SDPUtils.parseCandidate(n.candidate);for(const d in o)d in a||Object.defineProperty(a,d,{value:o[d]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new i(n)},e.RTCIceCandidate.prototype=i.prototype,wrapPeerConnectionEvent(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function shimRTCIceCandidateRelayProtocol(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||wrapPeerConnectionEvent(e,"icecandidate",i=>{if(i.candidate){const t=SDPUtils.parseCandidate(i.candidate.candidate);t.type==="relay"&&(i.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return i})}function shimMaxMessageSize(e,i){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(s){if(!s||!s.sdp)return!1;const f=SDPUtils.splitSections(s.sdp);return f.shift(),f.some(c=>{const h=SDPUtils.parseMLine(c);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},n=function(s){const f=s.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(f===null||f.length<2)return-1;const c=parseInt(f[1],10);return c!==c?-1:c},a=function(s){let f=65536;return i.browser==="firefox"&&(i.version<57?s===-1?f=16384:f=2147483637:i.version<60?f=i.version===57?65535:65536:f=2147483637),f},o=function(s,f){let c=65536;i.browser==="firefox"&&i.version===57&&(c=65535);const h=SDPUtils.matchPrefix(s.sdp,"a=max-message-size:");return h.length>0?c=parseInt(h[0].substring(19),10):i.browser==="firefox"&&f!==-1&&(c=2147483637),c},d=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,i.browser==="chrome"&&i.version>=76){const{sdpSemantics:f}=this.getConfiguration();f==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const f=n(arguments[0]),c=a(f),h=o(arguments[0],f);let v;c===0&&h===0?v=Number.POSITIVE_INFINITY:c===0||h===0?v=Math.max(c,h):v=Math.min(c,h);const l={};Object.defineProperty(l,"maxMessageSize",{get(){return v}}),this._sctp=l}return d.apply(this,arguments)}}function shimSendThrowTypeError(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function i(n,a){const o=n.send;n.send=function(){const s=arguments[0],f=s.length||s.size||s.byteLength;if(n.readyState==="open"&&a.sctp&&f>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return o.apply(n,arguments)}}const t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const a=t.apply(this,arguments);return i(a,this),a},wrapPeerConnectionEvent(e,"datachannel",n=>(i(n.channel,n.target),n))}function shimConnectionState(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype;Object.defineProperty(i,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(i,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const n=i[t];i[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const o=a.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const d=new Event("connectionstatechange",a);o.dispatchEvent(d)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function removeExtmapAllowMixed(e,i){if(!e.RTCPeerConnection||i.browser==="chrome"&&i.version>=71||i.browser==="safari"&&i.version>=605)return;const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=a.sdp.split(`
`).filter(d=>d.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&a instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:a.type,sdp:o}):a.sdp=o}return t.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(e,i){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const t=e.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(i.browser==="chrome"&&i.version<78||i.browser==="firefox"&&i.version<68||i.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(e,i){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const t=e.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return t.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?t.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(d=>t.apply(this,[d]))})}var commonShim=Object.freeze({__proto__:null,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty,shimConnectionState,shimMaxMessageSize,shimParameterlessSetLocalDescription,shimRTCIceCandidate,shimRTCIceCandidateRelayProtocol,shimSendThrowTypeError});function adapterFactory(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const t=log,n=detectBrowser(e),a={browserDetails:n,commonShim,extractVersion,disableLog,disableWarnings,sdp};switch(n.browser){case"chrome":if(!chromeShim||!shimPeerConnection$1||!i.shimChrome)return t("Chrome shim is not included in this adapter release."),a;if(n.version===null)return t("Chrome shim can not determine version, not shimming."),a;t("adapter.js shimming chrome."),a.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(e,n),shimParameterlessSetLocalDescription(e),shimGetUserMedia$2(e,n),shimMediaStream(e),shimPeerConnection$1(e,n),shimOnTrack$1(e),shimAddTrackRemoveTrack(e,n),shimGetSendersWithDtmf(e),shimGetStats(e),shimSenderReceiverGetStats(e),fixNegotiationNeeded(e,n),shimRTCIceCandidate(e),shimRTCIceCandidateRelayProtocol(e),shimConnectionState(e),shimMaxMessageSize(e,n),shimSendThrowTypeError(e),removeExtmapAllowMixed(e,n);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!i.shimFirefox)return t("Firefox shim is not included in this adapter release."),a;t("adapter.js shimming firefox."),a.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(e,n),shimParameterlessSetLocalDescription(e),shimGetUserMedia$1(e,n),shimPeerConnection(e,n),shimOnTrack(e),shimRemoveStream(e),shimSenderGetStats(e),shimReceiverGetStats(e),shimRTCDataChannel(e),shimAddTransceiver(e),shimGetParameters(e),shimCreateOffer(e),shimCreateAnswer(e),shimRTCIceCandidate(e),shimConnectionState(e),shimMaxMessageSize(e,n),shimSendThrowTypeError(e);break;case"safari":if(!safariShim||!i.shimSafari)return t("Safari shim is not included in this adapter release."),a;t("adapter.js shimming safari."),a.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(e,n),shimParameterlessSetLocalDescription(e),shimRTCIceServerUrls(e),shimCreateOfferLegacy(e),shimCallbacksAPI(e),shimLocalStreamsAPI(e),shimRemoteStreamsAPI(e),shimTrackEventTransceiver(e),shimGetUserMedia(e),shimAudioContext(e),shimRTCIceCandidate(e),shimRTCIceCandidateRelayProtocol(e),shimMaxMessageSize(e,n),shimSendThrowTypeError(e),removeExtmapAllowMixed(e,n);break;default:t("Unsupported browser!");break}return a}adapterFactory({window:typeof window>"u"?void 0:window});var SignalTarget;(function(e){e[e.PUBLISHER=0]="PUBLISHER",e[e.SUBSCRIBER=1]="SUBSCRIBER",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(SignalTarget||(SignalTarget={}));function signalTargetFromJSON(e){switch(e){case 0:case"PUBLISHER":return SignalTarget.PUBLISHER;case 1:case"SUBSCRIBER":return SignalTarget.SUBSCRIBER;case-1:case"UNRECOGNIZED":default:return SignalTarget.UNRECOGNIZED}}function signalTargetToJSON(e){switch(e){case SignalTarget.PUBLISHER:return"PUBLISHER";case SignalTarget.SUBSCRIBER:return"SUBSCRIBER";case SignalTarget.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var StreamState;(function(e){e[e.ACTIVE=0]="ACTIVE",e[e.PAUSED=1]="PAUSED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(StreamState||(StreamState={}));function streamStateFromJSON(e){switch(e){case 0:case"ACTIVE":return StreamState.ACTIVE;case 1:case"PAUSED":return StreamState.PAUSED;case-1:case"UNRECOGNIZED":default:return StreamState.UNRECOGNIZED}}function streamStateToJSON(e){switch(e){case StreamState.ACTIVE:return"ACTIVE";case StreamState.PAUSED:return"PAUSED";case StreamState.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var CandidateProtocol;(function(e){e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.TLS=2]="TLS",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(CandidateProtocol||(CandidateProtocol={}));function candidateProtocolFromJSON(e){switch(e){case 0:case"UDP":return CandidateProtocol.UDP;case 1:case"TCP":return CandidateProtocol.TCP;case 2:case"TLS":return CandidateProtocol.TLS;case-1:case"UNRECOGNIZED":default:return CandidateProtocol.UNRECOGNIZED}}function candidateProtocolToJSON(e){switch(e){case CandidateProtocol.UDP:return"UDP";case CandidateProtocol.TCP:return"TCP";case CandidateProtocol.TLS:return"TLS";case CandidateProtocol.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseSignalRequest(){return{message:void 0}}const SignalRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var t;switch((t=e.message)===null||t===void 0?void 0:t.$case){case"offer":SessionDescription.encode(e.message.offer,i.uint32(10).fork()).ldelim();break;case"answer":SessionDescription.encode(e.message.answer,i.uint32(18).fork()).ldelim();break;case"trickle":TrickleRequest.encode(e.message.trickle,i.uint32(26).fork()).ldelim();break;case"addTrack":AddTrackRequest.encode(e.message.addTrack,i.uint32(34).fork()).ldelim();break;case"mute":MuteTrackRequest.encode(e.message.mute,i.uint32(42).fork()).ldelim();break;case"subscription":UpdateSubscription.encode(e.message.subscription,i.uint32(50).fork()).ldelim();break;case"trackSetting":UpdateTrackSettings.encode(e.message.trackSetting,i.uint32(58).fork()).ldelim();break;case"leave":LeaveRequest.encode(e.message.leave,i.uint32(66).fork()).ldelim();break;case"updateLayers":UpdateVideoLayers.encode(e.message.updateLayers,i.uint32(82).fork()).ldelim();break;case"subscriptionPermission":SubscriptionPermission.encode(e.message.subscriptionPermission,i.uint32(90).fork()).ldelim();break;case"syncState":SyncState.encode(e.message.syncState,i.uint32(98).fork()).ldelim();break;case"simulate":SimulateScenario.encode(e.message.simulate,i.uint32(106).fork()).ldelim();break;case"ping":i.uint32(112).int64(e.message.ping);break;case"updateMetadata":UpdateParticipantMetadata.encode(e.message.updateMetadata,i.uint32(122).fork()).ldelim();break;case"pingReq":Ping.encode(e.message.pingReq,i.uint32(130).fork()).ldelim();break}return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSignalRequest();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.message={$case:"offer",offer:SessionDescription.decode(t,t.uint32())};continue;case 2:if(o!=18)break;a.message={$case:"answer",answer:SessionDescription.decode(t,t.uint32())};continue;case 3:if(o!=26)break;a.message={$case:"trickle",trickle:TrickleRequest.decode(t,t.uint32())};continue;case 4:if(o!=34)break;a.message={$case:"addTrack",addTrack:AddTrackRequest.decode(t,t.uint32())};continue;case 5:if(o!=42)break;a.message={$case:"mute",mute:MuteTrackRequest.decode(t,t.uint32())};continue;case 6:if(o!=50)break;a.message={$case:"subscription",subscription:UpdateSubscription.decode(t,t.uint32())};continue;case 7:if(o!=58)break;a.message={$case:"trackSetting",trackSetting:UpdateTrackSettings.decode(t,t.uint32())};continue;case 8:if(o!=66)break;a.message={$case:"leave",leave:LeaveRequest.decode(t,t.uint32())};continue;case 10:if(o!=82)break;a.message={$case:"updateLayers",updateLayers:UpdateVideoLayers.decode(t,t.uint32())};continue;case 11:if(o!=90)break;a.message={$case:"subscriptionPermission",subscriptionPermission:SubscriptionPermission.decode(t,t.uint32())};continue;case 12:if(o!=98)break;a.message={$case:"syncState",syncState:SyncState.decode(t,t.uint32())};continue;case 13:if(o!=106)break;a.message={$case:"simulate",simulate:SimulateScenario.decode(t,t.uint32())};continue;case 14:if(o!=112)break;a.message={$case:"ping",ping:longToNumber(t.int64())};continue;case 15:if(o!=122)break;a.message={$case:"updateMetadata",updateMetadata:UpdateParticipantMetadata.decode(t,t.uint32())};continue;case 16:if(o!=130)break;a.message={$case:"pingReq",pingReq:Ping.decode(t,t.uint32())};continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{message:isSet(e.offer)?{$case:"offer",offer:SessionDescription.fromJSON(e.offer)}:isSet(e.answer)?{$case:"answer",answer:SessionDescription.fromJSON(e.answer)}:isSet(e.trickle)?{$case:"trickle",trickle:TrickleRequest.fromJSON(e.trickle)}:isSet(e.addTrack)?{$case:"addTrack",addTrack:AddTrackRequest.fromJSON(e.addTrack)}:isSet(e.mute)?{$case:"mute",mute:MuteTrackRequest.fromJSON(e.mute)}:isSet(e.subscription)?{$case:"subscription",subscription:UpdateSubscription.fromJSON(e.subscription)}:isSet(e.trackSetting)?{$case:"trackSetting",trackSetting:UpdateTrackSettings.fromJSON(e.trackSetting)}:isSet(e.leave)?{$case:"leave",leave:LeaveRequest.fromJSON(e.leave)}:isSet(e.updateLayers)?{$case:"updateLayers",updateLayers:UpdateVideoLayers.fromJSON(e.updateLayers)}:isSet(e.subscriptionPermission)?{$case:"subscriptionPermission",subscriptionPermission:SubscriptionPermission.fromJSON(e.subscriptionPermission)}:isSet(e.syncState)?{$case:"syncState",syncState:SyncState.fromJSON(e.syncState)}:isSet(e.simulate)?{$case:"simulate",simulate:SimulateScenario.fromJSON(e.simulate)}:isSet(e.ping)?{$case:"ping",ping:Number(e.ping)}:isSet(e.updateMetadata)?{$case:"updateMetadata",updateMetadata:UpdateParticipantMetadata.fromJSON(e.updateMetadata)}:isSet(e.pingReq)?{$case:"pingReq",pingReq:Ping.fromJSON(e.pingReq)}:void 0}},toJSON(e){var i,t,n,a,o,d,s,f,c,h,v,l,u,p,m,w,_,C,N,P,M,U,W,q,Z,re,Y,O,x,S,k,g,E,T,A,J,G,I,V,B,z,ie,de,me;const be={};return((i=e.message)===null||i===void 0?void 0:i.$case)==="offer"&&(be.offer=!((t=e.message)===null||t===void 0)&&t.offer?SessionDescription.toJSON((n=e.message)===null||n===void 0?void 0:n.offer):void 0),((a=e.message)===null||a===void 0?void 0:a.$case)==="answer"&&(be.answer=!((o=e.message)===null||o===void 0)&&o.answer?SessionDescription.toJSON((d=e.message)===null||d===void 0?void 0:d.answer):void 0),((s=e.message)===null||s===void 0?void 0:s.$case)==="trickle"&&(be.trickle=!((f=e.message)===null||f===void 0)&&f.trickle?TrickleRequest.toJSON((c=e.message)===null||c===void 0?void 0:c.trickle):void 0),((h=e.message)===null||h===void 0?void 0:h.$case)==="addTrack"&&(be.addTrack=!((v=e.message)===null||v===void 0)&&v.addTrack?AddTrackRequest.toJSON((l=e.message)===null||l===void 0?void 0:l.addTrack):void 0),((u=e.message)===null||u===void 0?void 0:u.$case)==="mute"&&(be.mute=!((p=e.message)===null||p===void 0)&&p.mute?MuteTrackRequest.toJSON((m=e.message)===null||m===void 0?void 0:m.mute):void 0),((w=e.message)===null||w===void 0?void 0:w.$case)==="subscription"&&(be.subscription=!((_=e.message)===null||_===void 0)&&_.subscription?UpdateSubscription.toJSON((C=e.message)===null||C===void 0?void 0:C.subscription):void 0),((N=e.message)===null||N===void 0?void 0:N.$case)==="trackSetting"&&(be.trackSetting=!((P=e.message)===null||P===void 0)&&P.trackSetting?UpdateTrackSettings.toJSON((M=e.message)===null||M===void 0?void 0:M.trackSetting):void 0),((U=e.message)===null||U===void 0?void 0:U.$case)==="leave"&&(be.leave=!((W=e.message)===null||W===void 0)&&W.leave?LeaveRequest.toJSON((q=e.message)===null||q===void 0?void 0:q.leave):void 0),((Z=e.message)===null||Z===void 0?void 0:Z.$case)==="updateLayers"&&(be.updateLayers=!((re=e.message)===null||re===void 0)&&re.updateLayers?UpdateVideoLayers.toJSON((Y=e.message)===null||Y===void 0?void 0:Y.updateLayers):void 0),((O=e.message)===null||O===void 0?void 0:O.$case)==="subscriptionPermission"&&(be.subscriptionPermission=!((x=e.message)===null||x===void 0)&&x.subscriptionPermission?SubscriptionPermission.toJSON((S=e.message)===null||S===void 0?void 0:S.subscriptionPermission):void 0),((k=e.message)===null||k===void 0?void 0:k.$case)==="syncState"&&(be.syncState=!((g=e.message)===null||g===void 0)&&g.syncState?SyncState.toJSON((E=e.message)===null||E===void 0?void 0:E.syncState):void 0),((T=e.message)===null||T===void 0?void 0:T.$case)==="simulate"&&(be.simulate=!((A=e.message)===null||A===void 0)&&A.simulate?SimulateScenario.toJSON((J=e.message)===null||J===void 0?void 0:J.simulate):void 0),((G=e.message)===null||G===void 0?void 0:G.$case)==="ping"&&(be.ping=Math.round((I=e.message)===null||I===void 0?void 0:I.ping)),((V=e.message)===null||V===void 0?void 0:V.$case)==="updateMetadata"&&(be.updateMetadata=!((B=e.message)===null||B===void 0)&&B.updateMetadata?UpdateParticipantMetadata.toJSON((z=e.message)===null||z===void 0?void 0:z.updateMetadata):void 0),((ie=e.message)===null||ie===void 0?void 0:ie.$case)==="pingReq"&&(be.pingReq=!((de=e.message)===null||de===void 0)&&de.pingReq?Ping.toJSON((me=e.message)===null||me===void 0?void 0:me.pingReq):void 0),be},create(e){return SignalRequest.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,f,c,h,v,l,u,p,m,w,_,C,N,P,M,U,W,q,Z,re,Y,O,x,S,k,g,E,T,A,J,G,I,V,B,z,ie,de,me,be;const we=createBaseSignalRequest();return((i=e.message)===null||i===void 0?void 0:i.$case)==="offer"&&((t=e.message)===null||t===void 0?void 0:t.offer)!==void 0&&((n=e.message)===null||n===void 0?void 0:n.offer)!==null&&(we.message={$case:"offer",offer:SessionDescription.fromPartial(e.message.offer)}),((a=e.message)===null||a===void 0?void 0:a.$case)==="answer"&&((o=e.message)===null||o===void 0?void 0:o.answer)!==void 0&&((d=e.message)===null||d===void 0?void 0:d.answer)!==null&&(we.message={$case:"answer",answer:SessionDescription.fromPartial(e.message.answer)}),((s=e.message)===null||s===void 0?void 0:s.$case)==="trickle"&&((f=e.message)===null||f===void 0?void 0:f.trickle)!==void 0&&((c=e.message)===null||c===void 0?void 0:c.trickle)!==null&&(we.message={$case:"trickle",trickle:TrickleRequest.fromPartial(e.message.trickle)}),((h=e.message)===null||h===void 0?void 0:h.$case)==="addTrack"&&((v=e.message)===null||v===void 0?void 0:v.addTrack)!==void 0&&((l=e.message)===null||l===void 0?void 0:l.addTrack)!==null&&(we.message={$case:"addTrack",addTrack:AddTrackRequest.fromPartial(e.message.addTrack)}),((u=e.message)===null||u===void 0?void 0:u.$case)==="mute"&&((p=e.message)===null||p===void 0?void 0:p.mute)!==void 0&&((m=e.message)===null||m===void 0?void 0:m.mute)!==null&&(we.message={$case:"mute",mute:MuteTrackRequest.fromPartial(e.message.mute)}),((w=e.message)===null||w===void 0?void 0:w.$case)==="subscription"&&((_=e.message)===null||_===void 0?void 0:_.subscription)!==void 0&&((C=e.message)===null||C===void 0?void 0:C.subscription)!==null&&(we.message={$case:"subscription",subscription:UpdateSubscription.fromPartial(e.message.subscription)}),((N=e.message)===null||N===void 0?void 0:N.$case)==="trackSetting"&&((P=e.message)===null||P===void 0?void 0:P.trackSetting)!==void 0&&((M=e.message)===null||M===void 0?void 0:M.trackSetting)!==null&&(we.message={$case:"trackSetting",trackSetting:UpdateTrackSettings.fromPartial(e.message.trackSetting)}),((U=e.message)===null||U===void 0?void 0:U.$case)==="leave"&&((W=e.message)===null||W===void 0?void 0:W.leave)!==void 0&&((q=e.message)===null||q===void 0?void 0:q.leave)!==null&&(we.message={$case:"leave",leave:LeaveRequest.fromPartial(e.message.leave)}),((Z=e.message)===null||Z===void 0?void 0:Z.$case)==="updateLayers"&&((re=e.message)===null||re===void 0?void 0:re.updateLayers)!==void 0&&((Y=e.message)===null||Y===void 0?void 0:Y.updateLayers)!==null&&(we.message={$case:"updateLayers",updateLayers:UpdateVideoLayers.fromPartial(e.message.updateLayers)}),((O=e.message)===null||O===void 0?void 0:O.$case)==="subscriptionPermission"&&((x=e.message)===null||x===void 0?void 0:x.subscriptionPermission)!==void 0&&((S=e.message)===null||S===void 0?void 0:S.subscriptionPermission)!==null&&(we.message={$case:"subscriptionPermission",subscriptionPermission:SubscriptionPermission.fromPartial(e.message.subscriptionPermission)}),((k=e.message)===null||k===void 0?void 0:k.$case)==="syncState"&&((g=e.message)===null||g===void 0?void 0:g.syncState)!==void 0&&((E=e.message)===null||E===void 0?void 0:E.syncState)!==null&&(we.message={$case:"syncState",syncState:SyncState.fromPartial(e.message.syncState)}),((T=e.message)===null||T===void 0?void 0:T.$case)==="simulate"&&((A=e.message)===null||A===void 0?void 0:A.simulate)!==void 0&&((J=e.message)===null||J===void 0?void 0:J.simulate)!==null&&(we.message={$case:"simulate",simulate:SimulateScenario.fromPartial(e.message.simulate)}),((G=e.message)===null||G===void 0?void 0:G.$case)==="ping"&&((I=e.message)===null||I===void 0?void 0:I.ping)!==void 0&&((V=e.message)===null||V===void 0?void 0:V.ping)!==null&&(we.message={$case:"ping",ping:e.message.ping}),((B=e.message)===null||B===void 0?void 0:B.$case)==="updateMetadata"&&((z=e.message)===null||z===void 0?void 0:z.updateMetadata)!==void 0&&((ie=e.message)===null||ie===void 0?void 0:ie.updateMetadata)!==null&&(we.message={$case:"updateMetadata",updateMetadata:UpdateParticipantMetadata.fromPartial(e.message.updateMetadata)}),((de=e.message)===null||de===void 0?void 0:de.$case)==="pingReq"&&((me=e.message)===null||me===void 0?void 0:me.pingReq)!==void 0&&((be=e.message)===null||be===void 0?void 0:be.pingReq)!==null&&(we.message={$case:"pingReq",pingReq:Ping.fromPartial(e.message.pingReq)}),we}};function createBaseSignalResponse(){return{message:void 0}}const SignalResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var t;switch((t=e.message)===null||t===void 0?void 0:t.$case){case"join":JoinResponse.encode(e.message.join,i.uint32(10).fork()).ldelim();break;case"answer":SessionDescription.encode(e.message.answer,i.uint32(18).fork()).ldelim();break;case"offer":SessionDescription.encode(e.message.offer,i.uint32(26).fork()).ldelim();break;case"trickle":TrickleRequest.encode(e.message.trickle,i.uint32(34).fork()).ldelim();break;case"update":ParticipantUpdate.encode(e.message.update,i.uint32(42).fork()).ldelim();break;case"trackPublished":TrackPublishedResponse.encode(e.message.trackPublished,i.uint32(50).fork()).ldelim();break;case"leave":LeaveRequest.encode(e.message.leave,i.uint32(66).fork()).ldelim();break;case"mute":MuteTrackRequest.encode(e.message.mute,i.uint32(74).fork()).ldelim();break;case"speakersChanged":SpeakersChanged.encode(e.message.speakersChanged,i.uint32(82).fork()).ldelim();break;case"roomUpdate":RoomUpdate.encode(e.message.roomUpdate,i.uint32(90).fork()).ldelim();break;case"connectionQuality":ConnectionQualityUpdate.encode(e.message.connectionQuality,i.uint32(98).fork()).ldelim();break;case"streamStateUpdate":StreamStateUpdate.encode(e.message.streamStateUpdate,i.uint32(106).fork()).ldelim();break;case"subscribedQualityUpdate":SubscribedQualityUpdate.encode(e.message.subscribedQualityUpdate,i.uint32(114).fork()).ldelim();break;case"subscriptionPermissionUpdate":SubscriptionPermissionUpdate.encode(e.message.subscriptionPermissionUpdate,i.uint32(122).fork()).ldelim();break;case"refreshToken":i.uint32(130).string(e.message.refreshToken);break;case"trackUnpublished":TrackUnpublishedResponse.encode(e.message.trackUnpublished,i.uint32(138).fork()).ldelim();break;case"pong":i.uint32(144).int64(e.message.pong);break;case"reconnect":ReconnectResponse.encode(e.message.reconnect,i.uint32(154).fork()).ldelim();break;case"pongResp":Pong.encode(e.message.pongResp,i.uint32(162).fork()).ldelim();break}return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSignalResponse();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.message={$case:"join",join:JoinResponse.decode(t,t.uint32())};continue;case 2:if(o!=18)break;a.message={$case:"answer",answer:SessionDescription.decode(t,t.uint32())};continue;case 3:if(o!=26)break;a.message={$case:"offer",offer:SessionDescription.decode(t,t.uint32())};continue;case 4:if(o!=34)break;a.message={$case:"trickle",trickle:TrickleRequest.decode(t,t.uint32())};continue;case 5:if(o!=42)break;a.message={$case:"update",update:ParticipantUpdate.decode(t,t.uint32())};continue;case 6:if(o!=50)break;a.message={$case:"trackPublished",trackPublished:TrackPublishedResponse.decode(t,t.uint32())};continue;case 8:if(o!=66)break;a.message={$case:"leave",leave:LeaveRequest.decode(t,t.uint32())};continue;case 9:if(o!=74)break;a.message={$case:"mute",mute:MuteTrackRequest.decode(t,t.uint32())};continue;case 10:if(o!=82)break;a.message={$case:"speakersChanged",speakersChanged:SpeakersChanged.decode(t,t.uint32())};continue;case 11:if(o!=90)break;a.message={$case:"roomUpdate",roomUpdate:RoomUpdate.decode(t,t.uint32())};continue;case 12:if(o!=98)break;a.message={$case:"connectionQuality",connectionQuality:ConnectionQualityUpdate.decode(t,t.uint32())};continue;case 13:if(o!=106)break;a.message={$case:"streamStateUpdate",streamStateUpdate:StreamStateUpdate.decode(t,t.uint32())};continue;case 14:if(o!=114)break;a.message={$case:"subscribedQualityUpdate",subscribedQualityUpdate:SubscribedQualityUpdate.decode(t,t.uint32())};continue;case 15:if(o!=122)break;a.message={$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:SubscriptionPermissionUpdate.decode(t,t.uint32())};continue;case 16:if(o!=130)break;a.message={$case:"refreshToken",refreshToken:t.string()};continue;case 17:if(o!=138)break;a.message={$case:"trackUnpublished",trackUnpublished:TrackUnpublishedResponse.decode(t,t.uint32())};continue;case 18:if(o!=144)break;a.message={$case:"pong",pong:longToNumber(t.int64())};continue;case 19:if(o!=154)break;a.message={$case:"reconnect",reconnect:ReconnectResponse.decode(t,t.uint32())};continue;case 20:if(o!=162)break;a.message={$case:"pongResp",pongResp:Pong.decode(t,t.uint32())};continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{message:isSet(e.join)?{$case:"join",join:JoinResponse.fromJSON(e.join)}:isSet(e.answer)?{$case:"answer",answer:SessionDescription.fromJSON(e.answer)}:isSet(e.offer)?{$case:"offer",offer:SessionDescription.fromJSON(e.offer)}:isSet(e.trickle)?{$case:"trickle",trickle:TrickleRequest.fromJSON(e.trickle)}:isSet(e.update)?{$case:"update",update:ParticipantUpdate.fromJSON(e.update)}:isSet(e.trackPublished)?{$case:"trackPublished",trackPublished:TrackPublishedResponse.fromJSON(e.trackPublished)}:isSet(e.leave)?{$case:"leave",leave:LeaveRequest.fromJSON(e.leave)}:isSet(e.mute)?{$case:"mute",mute:MuteTrackRequest.fromJSON(e.mute)}:isSet(e.speakersChanged)?{$case:"speakersChanged",speakersChanged:SpeakersChanged.fromJSON(e.speakersChanged)}:isSet(e.roomUpdate)?{$case:"roomUpdate",roomUpdate:RoomUpdate.fromJSON(e.roomUpdate)}:isSet(e.connectionQuality)?{$case:"connectionQuality",connectionQuality:ConnectionQualityUpdate.fromJSON(e.connectionQuality)}:isSet(e.streamStateUpdate)?{$case:"streamStateUpdate",streamStateUpdate:StreamStateUpdate.fromJSON(e.streamStateUpdate)}:isSet(e.subscribedQualityUpdate)?{$case:"subscribedQualityUpdate",subscribedQualityUpdate:SubscribedQualityUpdate.fromJSON(e.subscribedQualityUpdate)}:isSet(e.subscriptionPermissionUpdate)?{$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:SubscriptionPermissionUpdate.fromJSON(e.subscriptionPermissionUpdate)}:isSet(e.refreshToken)?{$case:"refreshToken",refreshToken:String(e.refreshToken)}:isSet(e.trackUnpublished)?{$case:"trackUnpublished",trackUnpublished:TrackUnpublishedResponse.fromJSON(e.trackUnpublished)}:isSet(e.pong)?{$case:"pong",pong:Number(e.pong)}:isSet(e.reconnect)?{$case:"reconnect",reconnect:ReconnectResponse.fromJSON(e.reconnect)}:isSet(e.pongResp)?{$case:"pongResp",pongResp:Pong.fromJSON(e.pongResp)}:void 0}},toJSON(e){var i,t,n,a,o,d,s,f,c,h,v,l,u,p,m,w,_,C,N,P,M,U,W,q,Z,re,Y,O,x,S,k,g,E,T,A,J,G,I,V,B,z,ie,de,me,be,we,oe,ce,ge,ke,le,te,ee,Q,F;const $={};return((i=e.message)===null||i===void 0?void 0:i.$case)==="join"&&($.join=!((t=e.message)===null||t===void 0)&&t.join?JoinResponse.toJSON((n=e.message)===null||n===void 0?void 0:n.join):void 0),((a=e.message)===null||a===void 0?void 0:a.$case)==="answer"&&($.answer=!((o=e.message)===null||o===void 0)&&o.answer?SessionDescription.toJSON((d=e.message)===null||d===void 0?void 0:d.answer):void 0),((s=e.message)===null||s===void 0?void 0:s.$case)==="offer"&&($.offer=!((f=e.message)===null||f===void 0)&&f.offer?SessionDescription.toJSON((c=e.message)===null||c===void 0?void 0:c.offer):void 0),((h=e.message)===null||h===void 0?void 0:h.$case)==="trickle"&&($.trickle=!((v=e.message)===null||v===void 0)&&v.trickle?TrickleRequest.toJSON((l=e.message)===null||l===void 0?void 0:l.trickle):void 0),((u=e.message)===null||u===void 0?void 0:u.$case)==="update"&&($.update=!((p=e.message)===null||p===void 0)&&p.update?ParticipantUpdate.toJSON((m=e.message)===null||m===void 0?void 0:m.update):void 0),((w=e.message)===null||w===void 0?void 0:w.$case)==="trackPublished"&&($.trackPublished=!((_=e.message)===null||_===void 0)&&_.trackPublished?TrackPublishedResponse.toJSON((C=e.message)===null||C===void 0?void 0:C.trackPublished):void 0),((N=e.message)===null||N===void 0?void 0:N.$case)==="leave"&&($.leave=!((P=e.message)===null||P===void 0)&&P.leave?LeaveRequest.toJSON((M=e.message)===null||M===void 0?void 0:M.leave):void 0),((U=e.message)===null||U===void 0?void 0:U.$case)==="mute"&&($.mute=!((W=e.message)===null||W===void 0)&&W.mute?MuteTrackRequest.toJSON((q=e.message)===null||q===void 0?void 0:q.mute):void 0),((Z=e.message)===null||Z===void 0?void 0:Z.$case)==="speakersChanged"&&($.speakersChanged=!((re=e.message)===null||re===void 0)&&re.speakersChanged?SpeakersChanged.toJSON((Y=e.message)===null||Y===void 0?void 0:Y.speakersChanged):void 0),((O=e.message)===null||O===void 0?void 0:O.$case)==="roomUpdate"&&($.roomUpdate=!((x=e.message)===null||x===void 0)&&x.roomUpdate?RoomUpdate.toJSON((S=e.message)===null||S===void 0?void 0:S.roomUpdate):void 0),((k=e.message)===null||k===void 0?void 0:k.$case)==="connectionQuality"&&($.connectionQuality=!((g=e.message)===null||g===void 0)&&g.connectionQuality?ConnectionQualityUpdate.toJSON((E=e.message)===null||E===void 0?void 0:E.connectionQuality):void 0),((T=e.message)===null||T===void 0?void 0:T.$case)==="streamStateUpdate"&&($.streamStateUpdate=!((A=e.message)===null||A===void 0)&&A.streamStateUpdate?StreamStateUpdate.toJSON((J=e.message)===null||J===void 0?void 0:J.streamStateUpdate):void 0),((G=e.message)===null||G===void 0?void 0:G.$case)==="subscribedQualityUpdate"&&($.subscribedQualityUpdate=!((I=e.message)===null||I===void 0)&&I.subscribedQualityUpdate?SubscribedQualityUpdate.toJSON((V=e.message)===null||V===void 0?void 0:V.subscribedQualityUpdate):void 0),((B=e.message)===null||B===void 0?void 0:B.$case)==="subscriptionPermissionUpdate"&&($.subscriptionPermissionUpdate=!((z=e.message)===null||z===void 0)&&z.subscriptionPermissionUpdate?SubscriptionPermissionUpdate.toJSON((ie=e.message)===null||ie===void 0?void 0:ie.subscriptionPermissionUpdate):void 0),((de=e.message)===null||de===void 0?void 0:de.$case)==="refreshToken"&&($.refreshToken=(me=e.message)===null||me===void 0?void 0:me.refreshToken),((be=e.message)===null||be===void 0?void 0:be.$case)==="trackUnpublished"&&($.trackUnpublished=!((we=e.message)===null||we===void 0)&&we.trackUnpublished?TrackUnpublishedResponse.toJSON((oe=e.message)===null||oe===void 0?void 0:oe.trackUnpublished):void 0),((ce=e.message)===null||ce===void 0?void 0:ce.$case)==="pong"&&($.pong=Math.round((ge=e.message)===null||ge===void 0?void 0:ge.pong)),((ke=e.message)===null||ke===void 0?void 0:ke.$case)==="reconnect"&&($.reconnect=!((le=e.message)===null||le===void 0)&&le.reconnect?ReconnectResponse.toJSON((te=e.message)===null||te===void 0?void 0:te.reconnect):void 0),((ee=e.message)===null||ee===void 0?void 0:ee.$case)==="pongResp"&&($.pongResp=!((Q=e.message)===null||Q===void 0)&&Q.pongResp?Pong.toJSON((F=e.message)===null||F===void 0?void 0:F.pongResp):void 0),$},create(e){return SignalResponse.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,f,c,h,v,l,u,p,m,w,_,C,N,P,M,U,W,q,Z,re,Y,O,x,S,k,g,E,T,A,J,G,I,V,B,z,ie,de,me,be,we,oe,ce,ge,ke,le,te,ee,Q,F,$,X;const se=createBaseSignalResponse();return((i=e.message)===null||i===void 0?void 0:i.$case)==="join"&&((t=e.message)===null||t===void 0?void 0:t.join)!==void 0&&((n=e.message)===null||n===void 0?void 0:n.join)!==null&&(se.message={$case:"join",join:JoinResponse.fromPartial(e.message.join)}),((a=e.message)===null||a===void 0?void 0:a.$case)==="answer"&&((o=e.message)===null||o===void 0?void 0:o.answer)!==void 0&&((d=e.message)===null||d===void 0?void 0:d.answer)!==null&&(se.message={$case:"answer",answer:SessionDescription.fromPartial(e.message.answer)}),((s=e.message)===null||s===void 0?void 0:s.$case)==="offer"&&((f=e.message)===null||f===void 0?void 0:f.offer)!==void 0&&((c=e.message)===null||c===void 0?void 0:c.offer)!==null&&(se.message={$case:"offer",offer:SessionDescription.fromPartial(e.message.offer)}),((h=e.message)===null||h===void 0?void 0:h.$case)==="trickle"&&((v=e.message)===null||v===void 0?void 0:v.trickle)!==void 0&&((l=e.message)===null||l===void 0?void 0:l.trickle)!==null&&(se.message={$case:"trickle",trickle:TrickleRequest.fromPartial(e.message.trickle)}),((u=e.message)===null||u===void 0?void 0:u.$case)==="update"&&((p=e.message)===null||p===void 0?void 0:p.update)!==void 0&&((m=e.message)===null||m===void 0?void 0:m.update)!==null&&(se.message={$case:"update",update:ParticipantUpdate.fromPartial(e.message.update)}),((w=e.message)===null||w===void 0?void 0:w.$case)==="trackPublished"&&((_=e.message)===null||_===void 0?void 0:_.trackPublished)!==void 0&&((C=e.message)===null||C===void 0?void 0:C.trackPublished)!==null&&(se.message={$case:"trackPublished",trackPublished:TrackPublishedResponse.fromPartial(e.message.trackPublished)}),((N=e.message)===null||N===void 0?void 0:N.$case)==="leave"&&((P=e.message)===null||P===void 0?void 0:P.leave)!==void 0&&((M=e.message)===null||M===void 0?void 0:M.leave)!==null&&(se.message={$case:"leave",leave:LeaveRequest.fromPartial(e.message.leave)}),((U=e.message)===null||U===void 0?void 0:U.$case)==="mute"&&((W=e.message)===null||W===void 0?void 0:W.mute)!==void 0&&((q=e.message)===null||q===void 0?void 0:q.mute)!==null&&(se.message={$case:"mute",mute:MuteTrackRequest.fromPartial(e.message.mute)}),((Z=e.message)===null||Z===void 0?void 0:Z.$case)==="speakersChanged"&&((re=e.message)===null||re===void 0?void 0:re.speakersChanged)!==void 0&&((Y=e.message)===null||Y===void 0?void 0:Y.speakersChanged)!==null&&(se.message={$case:"speakersChanged",speakersChanged:SpeakersChanged.fromPartial(e.message.speakersChanged)}),((O=e.message)===null||O===void 0?void 0:O.$case)==="roomUpdate"&&((x=e.message)===null||x===void 0?void 0:x.roomUpdate)!==void 0&&((S=e.message)===null||S===void 0?void 0:S.roomUpdate)!==null&&(se.message={$case:"roomUpdate",roomUpdate:RoomUpdate.fromPartial(e.message.roomUpdate)}),((k=e.message)===null||k===void 0?void 0:k.$case)==="connectionQuality"&&((g=e.message)===null||g===void 0?void 0:g.connectionQuality)!==void 0&&((E=e.message)===null||E===void 0?void 0:E.connectionQuality)!==null&&(se.message={$case:"connectionQuality",connectionQuality:ConnectionQualityUpdate.fromPartial(e.message.connectionQuality)}),((T=e.message)===null||T===void 0?void 0:T.$case)==="streamStateUpdate"&&((A=e.message)===null||A===void 0?void 0:A.streamStateUpdate)!==void 0&&((J=e.message)===null||J===void 0?void 0:J.streamStateUpdate)!==null&&(se.message={$case:"streamStateUpdate",streamStateUpdate:StreamStateUpdate.fromPartial(e.message.streamStateUpdate)}),((G=e.message)===null||G===void 0?void 0:G.$case)==="subscribedQualityUpdate"&&((I=e.message)===null||I===void 0?void 0:I.subscribedQualityUpdate)!==void 0&&((V=e.message)===null||V===void 0?void 0:V.subscribedQualityUpdate)!==null&&(se.message={$case:"subscribedQualityUpdate",subscribedQualityUpdate:SubscribedQualityUpdate.fromPartial(e.message.subscribedQualityUpdate)}),((B=e.message)===null||B===void 0?void 0:B.$case)==="subscriptionPermissionUpdate"&&((z=e.message)===null||z===void 0?void 0:z.subscriptionPermissionUpdate)!==void 0&&((ie=e.message)===null||ie===void 0?void 0:ie.subscriptionPermissionUpdate)!==null&&(se.message={$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:SubscriptionPermissionUpdate.fromPartial(e.message.subscriptionPermissionUpdate)}),((de=e.message)===null||de===void 0?void 0:de.$case)==="refreshToken"&&((me=e.message)===null||me===void 0?void 0:me.refreshToken)!==void 0&&((be=e.message)===null||be===void 0?void 0:be.refreshToken)!==null&&(se.message={$case:"refreshToken",refreshToken:e.message.refreshToken}),((we=e.message)===null||we===void 0?void 0:we.$case)==="trackUnpublished"&&((oe=e.message)===null||oe===void 0?void 0:oe.trackUnpublished)!==void 0&&((ce=e.message)===null||ce===void 0?void 0:ce.trackUnpublished)!==null&&(se.message={$case:"trackUnpublished",trackUnpublished:TrackUnpublishedResponse.fromPartial(e.message.trackUnpublished)}),((ge=e.message)===null||ge===void 0?void 0:ge.$case)==="pong"&&((ke=e.message)===null||ke===void 0?void 0:ke.pong)!==void 0&&((le=e.message)===null||le===void 0?void 0:le.pong)!==null&&(se.message={$case:"pong",pong:e.message.pong}),((te=e.message)===null||te===void 0?void 0:te.$case)==="reconnect"&&((ee=e.message)===null||ee===void 0?void 0:ee.reconnect)!==void 0&&((Q=e.message)===null||Q===void 0?void 0:Q.reconnect)!==null&&(se.message={$case:"reconnect",reconnect:ReconnectResponse.fromPartial(e.message.reconnect)}),((F=e.message)===null||F===void 0?void 0:F.$case)==="pongResp"&&(($=e.message)===null||$===void 0?void 0:$.pongResp)!==void 0&&((X=e.message)===null||X===void 0?void 0:X.pongResp)!==null&&(se.message={$case:"pongResp",pongResp:Pong.fromPartial(e.message.pongResp)}),se}};function createBaseSimulcastCodec(){return{codec:"",cid:"",enableSimulcastLayers:!1}}const SimulcastCodec={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.codec!==""&&i.uint32(10).string(e.codec),e.cid!==""&&i.uint32(18).string(e.cid),e.enableSimulcastLayers===!0&&i.uint32(24).bool(e.enableSimulcastLayers),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSimulcastCodec();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.codec=t.string();continue;case 2:if(o!=18)break;a.cid=t.string();continue;case 3:if(o!=24)break;a.enableSimulcastLayers=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{codec:isSet(e.codec)?String(e.codec):"",cid:isSet(e.cid)?String(e.cid):"",enableSimulcastLayers:isSet(e.enableSimulcastLayers)?!!e.enableSimulcastLayers:!1}},toJSON(e){const i={};return e.codec!==void 0&&(i.codec=e.codec),e.cid!==void 0&&(i.cid=e.cid),e.enableSimulcastLayers!==void 0&&(i.enableSimulcastLayers=e.enableSimulcastLayers),i},create(e){return SimulcastCodec.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseSimulcastCodec();return a.codec=(i=e.codec)!==null&&i!==void 0?i:"",a.cid=(t=e.cid)!==null&&t!==void 0?t:"",a.enableSimulcastLayers=(n=e.enableSimulcastLayers)!==null&&n!==void 0?n:!1,a}};function createBaseAddTrackRequest(){return{cid:"",name:"",type:0,width:0,height:0,muted:!1,disableDtx:!1,source:0,layers:[],simulcastCodecs:[],sid:"",stereo:!1,disableRed:!1,encryption:0}}const AddTrackRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.cid!==""&&i.uint32(10).string(e.cid),e.name!==""&&i.uint32(18).string(e.name),e.type!==0&&i.uint32(24).int32(e.type),e.width!==0&&i.uint32(32).uint32(e.width),e.height!==0&&i.uint32(40).uint32(e.height),e.muted===!0&&i.uint32(48).bool(e.muted),e.disableDtx===!0&&i.uint32(56).bool(e.disableDtx),e.source!==0&&i.uint32(64).int32(e.source);for(const t of e.layers)VideoLayer.encode(t,i.uint32(74).fork()).ldelim();for(const t of e.simulcastCodecs)SimulcastCodec.encode(t,i.uint32(82).fork()).ldelim();return e.sid!==""&&i.uint32(90).string(e.sid),e.stereo===!0&&i.uint32(96).bool(e.stereo),e.disableRed===!0&&i.uint32(104).bool(e.disableRed),e.encryption!==0&&i.uint32(112).int32(e.encryption),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseAddTrackRequest();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.cid=t.string();continue;case 2:if(o!=18)break;a.name=t.string();continue;case 3:if(o!=24)break;a.type=t.int32();continue;case 4:if(o!=32)break;a.width=t.uint32();continue;case 5:if(o!=40)break;a.height=t.uint32();continue;case 6:if(o!=48)break;a.muted=t.bool();continue;case 7:if(o!=56)break;a.disableDtx=t.bool();continue;case 8:if(o!=64)break;a.source=t.int32();continue;case 9:if(o!=74)break;a.layers.push(VideoLayer.decode(t,t.uint32()));continue;case 10:if(o!=82)break;a.simulcastCodecs.push(SimulcastCodec.decode(t,t.uint32()));continue;case 11:if(o!=90)break;a.sid=t.string();continue;case 12:if(o!=96)break;a.stereo=t.bool();continue;case 13:if(o!=104)break;a.disableRed=t.bool();continue;case 14:if(o!=112)break;a.encryption=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{cid:isSet(e.cid)?String(e.cid):"",name:isSet(e.name)?String(e.name):"",type:isSet(e.type)?trackTypeFromJSON(e.type):0,width:isSet(e.width)?Number(e.width):0,height:isSet(e.height)?Number(e.height):0,muted:isSet(e.muted)?!!e.muted:!1,disableDtx:isSet(e.disableDtx)?!!e.disableDtx:!1,source:isSet(e.source)?trackSourceFromJSON(e.source):0,layers:Array.isArray(e==null?void 0:e.layers)?e.layers.map(i=>VideoLayer.fromJSON(i)):[],simulcastCodecs:Array.isArray(e==null?void 0:e.simulcastCodecs)?e.simulcastCodecs.map(i=>SimulcastCodec.fromJSON(i)):[],sid:isSet(e.sid)?String(e.sid):"",stereo:isSet(e.stereo)?!!e.stereo:!1,disableRed:isSet(e.disableRed)?!!e.disableRed:!1,encryption:isSet(e.encryption)?encryption_TypeFromJSON(e.encryption):0}},toJSON(e){const i={};return e.cid!==void 0&&(i.cid=e.cid),e.name!==void 0&&(i.name=e.name),e.type!==void 0&&(i.type=trackTypeToJSON(e.type)),e.width!==void 0&&(i.width=Math.round(e.width)),e.height!==void 0&&(i.height=Math.round(e.height)),e.muted!==void 0&&(i.muted=e.muted),e.disableDtx!==void 0&&(i.disableDtx=e.disableDtx),e.source!==void 0&&(i.source=trackSourceToJSON(e.source)),e.layers?i.layers=e.layers.map(t=>t?VideoLayer.toJSON(t):void 0):i.layers=[],e.simulcastCodecs?i.simulcastCodecs=e.simulcastCodecs.map(t=>t?SimulcastCodec.toJSON(t):void 0):i.simulcastCodecs=[],e.sid!==void 0&&(i.sid=e.sid),e.stereo!==void 0&&(i.stereo=e.stereo),e.disableRed!==void 0&&(i.disableRed=e.disableRed),e.encryption!==void 0&&(i.encryption=encryption_TypeToJSON(e.encryption)),i},create(e){return AddTrackRequest.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,f,c,h,v,l,u,p;const m=createBaseAddTrackRequest();return m.cid=(i=e.cid)!==null&&i!==void 0?i:"",m.name=(t=e.name)!==null&&t!==void 0?t:"",m.type=(n=e.type)!==null&&n!==void 0?n:0,m.width=(a=e.width)!==null&&a!==void 0?a:0,m.height=(o=e.height)!==null&&o!==void 0?o:0,m.muted=(d=e.muted)!==null&&d!==void 0?d:!1,m.disableDtx=(s=e.disableDtx)!==null&&s!==void 0?s:!1,m.source=(f=e.source)!==null&&f!==void 0?f:0,m.layers=((c=e.layers)===null||c===void 0?void 0:c.map(w=>VideoLayer.fromPartial(w)))||[],m.simulcastCodecs=((h=e.simulcastCodecs)===null||h===void 0?void 0:h.map(w=>SimulcastCodec.fromPartial(w)))||[],m.sid=(v=e.sid)!==null&&v!==void 0?v:"",m.stereo=(l=e.stereo)!==null&&l!==void 0?l:!1,m.disableRed=(u=e.disableRed)!==null&&u!==void 0?u:!1,m.encryption=(p=e.encryption)!==null&&p!==void 0?p:0,m}};function createBaseTrickleRequest(){return{candidateInit:"",target:0}}const TrickleRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.candidateInit!==""&&i.uint32(10).string(e.candidateInit),e.target!==0&&i.uint32(16).int32(e.target),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrickleRequest();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.candidateInit=t.string();continue;case 2:if(o!=16)break;a.target=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{candidateInit:isSet(e.candidateInit)?String(e.candidateInit):"",target:isSet(e.target)?signalTargetFromJSON(e.target):0}},toJSON(e){const i={};return e.candidateInit!==void 0&&(i.candidateInit=e.candidateInit),e.target!==void 0&&(i.target=signalTargetToJSON(e.target)),i},create(e){return TrickleRequest.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseTrickleRequest();return n.candidateInit=(i=e.candidateInit)!==null&&i!==void 0?i:"",n.target=(t=e.target)!==null&&t!==void 0?t:0,n}};function createBaseMuteTrackRequest(){return{sid:"",muted:!1}}const MuteTrackRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.sid!==""&&i.uint32(10).string(e.sid),e.muted===!0&&i.uint32(16).bool(e.muted),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseMuteTrackRequest();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.sid=t.string();continue;case 2:if(o!=16)break;a.muted=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{sid:isSet(e.sid)?String(e.sid):"",muted:isSet(e.muted)?!!e.muted:!1}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.muted!==void 0&&(i.muted=e.muted),i},create(e){return MuteTrackRequest.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseMuteTrackRequest();return n.sid=(i=e.sid)!==null&&i!==void 0?i:"",n.muted=(t=e.muted)!==null&&t!==void 0?t:!1,n}};function createBaseJoinResponse(){return{room:void 0,participant:void 0,otherParticipants:[],serverVersion:"",iceServers:[],subscriberPrimary:!1,alternativeUrl:"",clientConfiguration:void 0,serverRegion:"",pingTimeout:0,pingInterval:0,serverInfo:void 0}}const JoinResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.room!==void 0&&Room$1.encode(e.room,i.uint32(10).fork()).ldelim(),e.participant!==void 0&&ParticipantInfo.encode(e.participant,i.uint32(18).fork()).ldelim();for(const t of e.otherParticipants)ParticipantInfo.encode(t,i.uint32(26).fork()).ldelim();e.serverVersion!==""&&i.uint32(34).string(e.serverVersion);for(const t of e.iceServers)ICEServer.encode(t,i.uint32(42).fork()).ldelim();return e.subscriberPrimary===!0&&i.uint32(48).bool(e.subscriberPrimary),e.alternativeUrl!==""&&i.uint32(58).string(e.alternativeUrl),e.clientConfiguration!==void 0&&ClientConfiguration.encode(e.clientConfiguration,i.uint32(66).fork()).ldelim(),e.serverRegion!==""&&i.uint32(74).string(e.serverRegion),e.pingTimeout!==0&&i.uint32(80).int32(e.pingTimeout),e.pingInterval!==0&&i.uint32(88).int32(e.pingInterval),e.serverInfo!==void 0&&ServerInfo.encode(e.serverInfo,i.uint32(98).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseJoinResponse();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.room=Room$1.decode(t,t.uint32());continue;case 2:if(o!=18)break;a.participant=ParticipantInfo.decode(t,t.uint32());continue;case 3:if(o!=26)break;a.otherParticipants.push(ParticipantInfo.decode(t,t.uint32()));continue;case 4:if(o!=34)break;a.serverVersion=t.string();continue;case 5:if(o!=42)break;a.iceServers.push(ICEServer.decode(t,t.uint32()));continue;case 6:if(o!=48)break;a.subscriberPrimary=t.bool();continue;case 7:if(o!=58)break;a.alternativeUrl=t.string();continue;case 8:if(o!=66)break;a.clientConfiguration=ClientConfiguration.decode(t,t.uint32());continue;case 9:if(o!=74)break;a.serverRegion=t.string();continue;case 10:if(o!=80)break;a.pingTimeout=t.int32();continue;case 11:if(o!=88)break;a.pingInterval=t.int32();continue;case 12:if(o!=98)break;a.serverInfo=ServerInfo.decode(t,t.uint32());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{room:isSet(e.room)?Room$1.fromJSON(e.room):void 0,participant:isSet(e.participant)?ParticipantInfo.fromJSON(e.participant):void 0,otherParticipants:Array.isArray(e==null?void 0:e.otherParticipants)?e.otherParticipants.map(i=>ParticipantInfo.fromJSON(i)):[],serverVersion:isSet(e.serverVersion)?String(e.serverVersion):"",iceServers:Array.isArray(e==null?void 0:e.iceServers)?e.iceServers.map(i=>ICEServer.fromJSON(i)):[],subscriberPrimary:isSet(e.subscriberPrimary)?!!e.subscriberPrimary:!1,alternativeUrl:isSet(e.alternativeUrl)?String(e.alternativeUrl):"",clientConfiguration:isSet(e.clientConfiguration)?ClientConfiguration.fromJSON(e.clientConfiguration):void 0,serverRegion:isSet(e.serverRegion)?String(e.serverRegion):"",pingTimeout:isSet(e.pingTimeout)?Number(e.pingTimeout):0,pingInterval:isSet(e.pingInterval)?Number(e.pingInterval):0,serverInfo:isSet(e.serverInfo)?ServerInfo.fromJSON(e.serverInfo):void 0}},toJSON(e){const i={};return e.room!==void 0&&(i.room=e.room?Room$1.toJSON(e.room):void 0),e.participant!==void 0&&(i.participant=e.participant?ParticipantInfo.toJSON(e.participant):void 0),e.otherParticipants?i.otherParticipants=e.otherParticipants.map(t=>t?ParticipantInfo.toJSON(t):void 0):i.otherParticipants=[],e.serverVersion!==void 0&&(i.serverVersion=e.serverVersion),e.iceServers?i.iceServers=e.iceServers.map(t=>t?ICEServer.toJSON(t):void 0):i.iceServers=[],e.subscriberPrimary!==void 0&&(i.subscriberPrimary=e.subscriberPrimary),e.alternativeUrl!==void 0&&(i.alternativeUrl=e.alternativeUrl),e.clientConfiguration!==void 0&&(i.clientConfiguration=e.clientConfiguration?ClientConfiguration.toJSON(e.clientConfiguration):void 0),e.serverRegion!==void 0&&(i.serverRegion=e.serverRegion),e.pingTimeout!==void 0&&(i.pingTimeout=Math.round(e.pingTimeout)),e.pingInterval!==void 0&&(i.pingInterval=Math.round(e.pingInterval)),e.serverInfo!==void 0&&(i.serverInfo=e.serverInfo?ServerInfo.toJSON(e.serverInfo):void 0),i},create(e){return JoinResponse.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,f;const c=createBaseJoinResponse();return c.room=e.room!==void 0&&e.room!==null?Room$1.fromPartial(e.room):void 0,c.participant=e.participant!==void 0&&e.participant!==null?ParticipantInfo.fromPartial(e.participant):void 0,c.otherParticipants=((i=e.otherParticipants)===null||i===void 0?void 0:i.map(h=>ParticipantInfo.fromPartial(h)))||[],c.serverVersion=(t=e.serverVersion)!==null&&t!==void 0?t:"",c.iceServers=((n=e.iceServers)===null||n===void 0?void 0:n.map(h=>ICEServer.fromPartial(h)))||[],c.subscriberPrimary=(a=e.subscriberPrimary)!==null&&a!==void 0?a:!1,c.alternativeUrl=(o=e.alternativeUrl)!==null&&o!==void 0?o:"",c.clientConfiguration=e.clientConfiguration!==void 0&&e.clientConfiguration!==null?ClientConfiguration.fromPartial(e.clientConfiguration):void 0,c.serverRegion=(d=e.serverRegion)!==null&&d!==void 0?d:"",c.pingTimeout=(s=e.pingTimeout)!==null&&s!==void 0?s:0,c.pingInterval=(f=e.pingInterval)!==null&&f!==void 0?f:0,c.serverInfo=e.serverInfo!==void 0&&e.serverInfo!==null?ServerInfo.fromPartial(e.serverInfo):void 0,c}};function createBaseReconnectResponse(){return{iceServers:[],clientConfiguration:void 0}}const ReconnectResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.iceServers)ICEServer.encode(t,i.uint32(10).fork()).ldelim();return e.clientConfiguration!==void 0&&ClientConfiguration.encode(e.clientConfiguration,i.uint32(18).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseReconnectResponse();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.iceServers.push(ICEServer.decode(t,t.uint32()));continue;case 2:if(o!=18)break;a.clientConfiguration=ClientConfiguration.decode(t,t.uint32());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{iceServers:Array.isArray(e==null?void 0:e.iceServers)?e.iceServers.map(i=>ICEServer.fromJSON(i)):[],clientConfiguration:isSet(e.clientConfiguration)?ClientConfiguration.fromJSON(e.clientConfiguration):void 0}},toJSON(e){const i={};return e.iceServers?i.iceServers=e.iceServers.map(t=>t?ICEServer.toJSON(t):void 0):i.iceServers=[],e.clientConfiguration!==void 0&&(i.clientConfiguration=e.clientConfiguration?ClientConfiguration.toJSON(e.clientConfiguration):void 0),i},create(e){return ReconnectResponse.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseReconnectResponse();return t.iceServers=((i=e.iceServers)===null||i===void 0?void 0:i.map(n=>ICEServer.fromPartial(n)))||[],t.clientConfiguration=e.clientConfiguration!==void 0&&e.clientConfiguration!==null?ClientConfiguration.fromPartial(e.clientConfiguration):void 0,t}};function createBaseTrackPublishedResponse(){return{cid:"",track:void 0}}const TrackPublishedResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.cid!==""&&i.uint32(10).string(e.cid),e.track!==void 0&&TrackInfo.encode(e.track,i.uint32(18).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrackPublishedResponse();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.cid=t.string();continue;case 2:if(o!=18)break;a.track=TrackInfo.decode(t,t.uint32());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{cid:isSet(e.cid)?String(e.cid):"",track:isSet(e.track)?TrackInfo.fromJSON(e.track):void 0}},toJSON(e){const i={};return e.cid!==void 0&&(i.cid=e.cid),e.track!==void 0&&(i.track=e.track?TrackInfo.toJSON(e.track):void 0),i},create(e){return TrackPublishedResponse.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseTrackPublishedResponse();return t.cid=(i=e.cid)!==null&&i!==void 0?i:"",t.track=e.track!==void 0&&e.track!==null?TrackInfo.fromPartial(e.track):void 0,t}};function createBaseTrackUnpublishedResponse(){return{trackSid:""}}const TrackUnpublishedResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.trackSid!==""&&i.uint32(10).string(e.trackSid),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrackUnpublishedResponse();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.trackSid=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{trackSid:isSet(e.trackSid)?String(e.trackSid):""}},toJSON(e){const i={};return e.trackSid!==void 0&&(i.trackSid=e.trackSid),i},create(e){return TrackUnpublishedResponse.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseTrackUnpublishedResponse();return t.trackSid=(i=e.trackSid)!==null&&i!==void 0?i:"",t}};function createBaseSessionDescription(){return{type:"",sdp:""}}const SessionDescription={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.type!==""&&i.uint32(10).string(e.type),e.sdp!==""&&i.uint32(18).string(e.sdp),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSessionDescription();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.type=t.string();continue;case 2:if(o!=18)break;a.sdp=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{type:isSet(e.type)?String(e.type):"",sdp:isSet(e.sdp)?String(e.sdp):""}},toJSON(e){const i={};return e.type!==void 0&&(i.type=e.type),e.sdp!==void 0&&(i.sdp=e.sdp),i},create(e){return SessionDescription.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSessionDescription();return n.type=(i=e.type)!==null&&i!==void 0?i:"",n.sdp=(t=e.sdp)!==null&&t!==void 0?t:"",n}};function createBaseParticipantUpdate(){return{participants:[]}}const ParticipantUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.participants)ParticipantInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseParticipantUpdate();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.participants.push(ParticipantInfo.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{participants:Array.isArray(e==null?void 0:e.participants)?e.participants.map(i=>ParticipantInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.participants?i.participants=e.participants.map(t=>t?ParticipantInfo.toJSON(t):void 0):i.participants=[],i},create(e){return ParticipantUpdate.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseParticipantUpdate();return t.participants=((i=e.participants)===null||i===void 0?void 0:i.map(n=>ParticipantInfo.fromPartial(n)))||[],t}};function createBaseUpdateSubscription(){return{trackSids:[],subscribe:!1,participantTracks:[]}}const UpdateSubscription={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.trackSids)i.uint32(10).string(t);e.subscribe===!0&&i.uint32(16).bool(e.subscribe);for(const t of e.participantTracks)ParticipantTracks.encode(t,i.uint32(26).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUpdateSubscription();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.trackSids.push(t.string());continue;case 2:if(o!=16)break;a.subscribe=t.bool();continue;case 3:if(o!=26)break;a.participantTracks.push(ParticipantTracks.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{trackSids:Array.isArray(e==null?void 0:e.trackSids)?e.trackSids.map(i=>String(i)):[],subscribe:isSet(e.subscribe)?!!e.subscribe:!1,participantTracks:Array.isArray(e==null?void 0:e.participantTracks)?e.participantTracks.map(i=>ParticipantTracks.fromJSON(i)):[]}},toJSON(e){const i={};return e.trackSids?i.trackSids=e.trackSids.map(t=>t):i.trackSids=[],e.subscribe!==void 0&&(i.subscribe=e.subscribe),e.participantTracks?i.participantTracks=e.participantTracks.map(t=>t?ParticipantTracks.toJSON(t):void 0):i.participantTracks=[],i},create(e){return UpdateSubscription.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseUpdateSubscription();return a.trackSids=((i=e.trackSids)===null||i===void 0?void 0:i.map(o=>o))||[],a.subscribe=(t=e.subscribe)!==null&&t!==void 0?t:!1,a.participantTracks=((n=e.participantTracks)===null||n===void 0?void 0:n.map(o=>ParticipantTracks.fromPartial(o)))||[],a}};function createBaseUpdateTrackSettings(){return{trackSids:[],disabled:!1,quality:0,width:0,height:0,fps:0,priority:0}}const UpdateTrackSettings={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.trackSids)i.uint32(10).string(t);return e.disabled===!0&&i.uint32(24).bool(e.disabled),e.quality!==0&&i.uint32(32).int32(e.quality),e.width!==0&&i.uint32(40).uint32(e.width),e.height!==0&&i.uint32(48).uint32(e.height),e.fps!==0&&i.uint32(56).uint32(e.fps),e.priority!==0&&i.uint32(64).uint32(e.priority),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUpdateTrackSettings();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.trackSids.push(t.string());continue;case 3:if(o!=24)break;a.disabled=t.bool();continue;case 4:if(o!=32)break;a.quality=t.int32();continue;case 5:if(o!=40)break;a.width=t.uint32();continue;case 6:if(o!=48)break;a.height=t.uint32();continue;case 7:if(o!=56)break;a.fps=t.uint32();continue;case 8:if(o!=64)break;a.priority=t.uint32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{trackSids:Array.isArray(e==null?void 0:e.trackSids)?e.trackSids.map(i=>String(i)):[],disabled:isSet(e.disabled)?!!e.disabled:!1,quality:isSet(e.quality)?videoQualityFromJSON(e.quality):0,width:isSet(e.width)?Number(e.width):0,height:isSet(e.height)?Number(e.height):0,fps:isSet(e.fps)?Number(e.fps):0,priority:isSet(e.priority)?Number(e.priority):0}},toJSON(e){const i={};return e.trackSids?i.trackSids=e.trackSids.map(t=>t):i.trackSids=[],e.disabled!==void 0&&(i.disabled=e.disabled),e.quality!==void 0&&(i.quality=videoQualityToJSON(e.quality)),e.width!==void 0&&(i.width=Math.round(e.width)),e.height!==void 0&&(i.height=Math.round(e.height)),e.fps!==void 0&&(i.fps=Math.round(e.fps)),e.priority!==void 0&&(i.priority=Math.round(e.priority)),i},create(e){return UpdateTrackSettings.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s;const f=createBaseUpdateTrackSettings();return f.trackSids=((i=e.trackSids)===null||i===void 0?void 0:i.map(c=>c))||[],f.disabled=(t=e.disabled)!==null&&t!==void 0?t:!1,f.quality=(n=e.quality)!==null&&n!==void 0?n:0,f.width=(a=e.width)!==null&&a!==void 0?a:0,f.height=(o=e.height)!==null&&o!==void 0?o:0,f.fps=(d=e.fps)!==null&&d!==void 0?d:0,f.priority=(s=e.priority)!==null&&s!==void 0?s:0,f}};function createBaseLeaveRequest(){return{canReconnect:!1,reason:0}}const LeaveRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.canReconnect===!0&&i.uint32(8).bool(e.canReconnect),e.reason!==0&&i.uint32(16).int32(e.reason),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseLeaveRequest();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.canReconnect=t.bool();continue;case 2:if(o!=16)break;a.reason=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{canReconnect:isSet(e.canReconnect)?!!e.canReconnect:!1,reason:isSet(e.reason)?disconnectReasonFromJSON(e.reason):0}},toJSON(e){const i={};return e.canReconnect!==void 0&&(i.canReconnect=e.canReconnect),e.reason!==void 0&&(i.reason=disconnectReasonToJSON(e.reason)),i},create(e){return LeaveRequest.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseLeaveRequest();return n.canReconnect=(i=e.canReconnect)!==null&&i!==void 0?i:!1,n.reason=(t=e.reason)!==null&&t!==void 0?t:0,n}};function createBaseUpdateVideoLayers(){return{trackSid:"",layers:[]}}const UpdateVideoLayers={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.trackSid!==""&&i.uint32(10).string(e.trackSid);for(const t of e.layers)VideoLayer.encode(t,i.uint32(18).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUpdateVideoLayers();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.trackSid=t.string();continue;case 2:if(o!=18)break;a.layers.push(VideoLayer.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{trackSid:isSet(e.trackSid)?String(e.trackSid):"",layers:Array.isArray(e==null?void 0:e.layers)?e.layers.map(i=>VideoLayer.fromJSON(i)):[]}},toJSON(e){const i={};return e.trackSid!==void 0&&(i.trackSid=e.trackSid),e.layers?i.layers=e.layers.map(t=>t?VideoLayer.toJSON(t):void 0):i.layers=[],i},create(e){return UpdateVideoLayers.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseUpdateVideoLayers();return n.trackSid=(i=e.trackSid)!==null&&i!==void 0?i:"",n.layers=((t=e.layers)===null||t===void 0?void 0:t.map(a=>VideoLayer.fromPartial(a)))||[],n}};function createBaseUpdateParticipantMetadata(){return{metadata:"",name:""}}const UpdateParticipantMetadata={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.metadata!==""&&i.uint32(10).string(e.metadata),e.name!==""&&i.uint32(18).string(e.name),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUpdateParticipantMetadata();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.metadata=t.string();continue;case 2:if(o!=18)break;a.name=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{metadata:isSet(e.metadata)?String(e.metadata):"",name:isSet(e.name)?String(e.name):""}},toJSON(e){const i={};return e.metadata!==void 0&&(i.metadata=e.metadata),e.name!==void 0&&(i.name=e.name),i},create(e){return UpdateParticipantMetadata.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseUpdateParticipantMetadata();return n.metadata=(i=e.metadata)!==null&&i!==void 0?i:"",n.name=(t=e.name)!==null&&t!==void 0?t:"",n}};function createBaseICEServer(){return{urls:[],username:"",credential:""}}const ICEServer={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.urls)i.uint32(10).string(t);return e.username!==""&&i.uint32(18).string(e.username),e.credential!==""&&i.uint32(26).string(e.credential),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseICEServer();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.urls.push(t.string());continue;case 2:if(o!=18)break;a.username=t.string();continue;case 3:if(o!=26)break;a.credential=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{urls:Array.isArray(e==null?void 0:e.urls)?e.urls.map(i=>String(i)):[],username:isSet(e.username)?String(e.username):"",credential:isSet(e.credential)?String(e.credential):""}},toJSON(e){const i={};return e.urls?i.urls=e.urls.map(t=>t):i.urls=[],e.username!==void 0&&(i.username=e.username),e.credential!==void 0&&(i.credential=e.credential),i},create(e){return ICEServer.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseICEServer();return a.urls=((i=e.urls)===null||i===void 0?void 0:i.map(o=>o))||[],a.username=(t=e.username)!==null&&t!==void 0?t:"",a.credential=(n=e.credential)!==null&&n!==void 0?n:"",a}};function createBaseSpeakersChanged(){return{speakers:[]}}const SpeakersChanged={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.speakers)SpeakerInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSpeakersChanged();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.speakers.push(SpeakerInfo.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{speakers:Array.isArray(e==null?void 0:e.speakers)?e.speakers.map(i=>SpeakerInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.speakers?i.speakers=e.speakers.map(t=>t?SpeakerInfo.toJSON(t):void 0):i.speakers=[],i},create(e){return SpeakersChanged.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseSpeakersChanged();return t.speakers=((i=e.speakers)===null||i===void 0?void 0:i.map(n=>SpeakerInfo.fromPartial(n)))||[],t}};function createBaseRoomUpdate(){return{room:void 0}}const RoomUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.room!==void 0&&Room$1.encode(e.room,i.uint32(10).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseRoomUpdate();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.room=Room$1.decode(t,t.uint32());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{room:isSet(e.room)?Room$1.fromJSON(e.room):void 0}},toJSON(e){const i={};return e.room!==void 0&&(i.room=e.room?Room$1.toJSON(e.room):void 0),i},create(e){return RoomUpdate.fromPartial(e??{})},fromPartial(e){const i=createBaseRoomUpdate();return i.room=e.room!==void 0&&e.room!==null?Room$1.fromPartial(e.room):void 0,i}};function createBaseConnectionQualityInfo(){return{participantSid:"",quality:0,score:0}}const ConnectionQualityInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.quality!==0&&i.uint32(16).int32(e.quality),e.score!==0&&i.uint32(29).float(e.score),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseConnectionQualityInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.participantSid=t.string();continue;case 2:if(o!=16)break;a.quality=t.int32();continue;case 3:if(o!=29)break;a.score=t.float();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",quality:isSet(e.quality)?connectionQualityFromJSON(e.quality):0,score:isSet(e.score)?Number(e.score):0}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.quality!==void 0&&(i.quality=connectionQualityToJSON(e.quality)),e.score!==void 0&&(i.score=e.score),i},create(e){return ConnectionQualityInfo.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseConnectionQualityInfo();return a.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",a.quality=(t=e.quality)!==null&&t!==void 0?t:0,a.score=(n=e.score)!==null&&n!==void 0?n:0,a}};function createBaseConnectionQualityUpdate(){return{updates:[]}}const ConnectionQualityUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.updates)ConnectionQualityInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseConnectionQualityUpdate();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.updates.push(ConnectionQualityInfo.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{updates:Array.isArray(e==null?void 0:e.updates)?e.updates.map(i=>ConnectionQualityInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.updates?i.updates=e.updates.map(t=>t?ConnectionQualityInfo.toJSON(t):void 0):i.updates=[],i},create(e){return ConnectionQualityUpdate.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseConnectionQualityUpdate();return t.updates=((i=e.updates)===null||i===void 0?void 0:i.map(n=>ConnectionQualityInfo.fromPartial(n)))||[],t}};function createBaseStreamStateInfo(){return{participantSid:"",trackSid:"",state:0}}const StreamStateInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.trackSid!==""&&i.uint32(18).string(e.trackSid),e.state!==0&&i.uint32(24).int32(e.state),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseStreamStateInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.participantSid=t.string();continue;case 2:if(o!=18)break;a.trackSid=t.string();continue;case 3:if(o!=24)break;a.state=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",trackSid:isSet(e.trackSid)?String(e.trackSid):"",state:isSet(e.state)?streamStateFromJSON(e.state):0}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.trackSid!==void 0&&(i.trackSid=e.trackSid),e.state!==void 0&&(i.state=streamStateToJSON(e.state)),i},create(e){return StreamStateInfo.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseStreamStateInfo();return a.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",a.trackSid=(t=e.trackSid)!==null&&t!==void 0?t:"",a.state=(n=e.state)!==null&&n!==void 0?n:0,a}};function createBaseStreamStateUpdate(){return{streamStates:[]}}const StreamStateUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.streamStates)StreamStateInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseStreamStateUpdate();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.streamStates.push(StreamStateInfo.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{streamStates:Array.isArray(e==null?void 0:e.streamStates)?e.streamStates.map(i=>StreamStateInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.streamStates?i.streamStates=e.streamStates.map(t=>t?StreamStateInfo.toJSON(t):void 0):i.streamStates=[],i},create(e){return StreamStateUpdate.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseStreamStateUpdate();return t.streamStates=((i=e.streamStates)===null||i===void 0?void 0:i.map(n=>StreamStateInfo.fromPartial(n)))||[],t}};function createBaseSubscribedQuality(){return{quality:0,enabled:!1}}const SubscribedQuality={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.quality!==0&&i.uint32(8).int32(e.quality),e.enabled===!0&&i.uint32(16).bool(e.enabled),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscribedQuality();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.quality=t.int32();continue;case 2:if(o!=16)break;a.enabled=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{quality:isSet(e.quality)?videoQualityFromJSON(e.quality):0,enabled:isSet(e.enabled)?!!e.enabled:!1}},toJSON(e){const i={};return e.quality!==void 0&&(i.quality=videoQualityToJSON(e.quality)),e.enabled!==void 0&&(i.enabled=e.enabled),i},create(e){return SubscribedQuality.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSubscribedQuality();return n.quality=(i=e.quality)!==null&&i!==void 0?i:0,n.enabled=(t=e.enabled)!==null&&t!==void 0?t:!1,n}};function createBaseSubscribedCodec(){return{codec:"",qualities:[]}}const SubscribedCodec={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.codec!==""&&i.uint32(10).string(e.codec);for(const t of e.qualities)SubscribedQuality.encode(t,i.uint32(18).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscribedCodec();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.codec=t.string();continue;case 2:if(o!=18)break;a.qualities.push(SubscribedQuality.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{codec:isSet(e.codec)?String(e.codec):"",qualities:Array.isArray(e==null?void 0:e.qualities)?e.qualities.map(i=>SubscribedQuality.fromJSON(i)):[]}},toJSON(e){const i={};return e.codec!==void 0&&(i.codec=e.codec),e.qualities?i.qualities=e.qualities.map(t=>t?SubscribedQuality.toJSON(t):void 0):i.qualities=[],i},create(e){return SubscribedCodec.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSubscribedCodec();return n.codec=(i=e.codec)!==null&&i!==void 0?i:"",n.qualities=((t=e.qualities)===null||t===void 0?void 0:t.map(a=>SubscribedQuality.fromPartial(a)))||[],n}};function createBaseSubscribedQualityUpdate(){return{trackSid:"",subscribedQualities:[],subscribedCodecs:[]}}const SubscribedQualityUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.trackSid!==""&&i.uint32(10).string(e.trackSid);for(const t of e.subscribedQualities)SubscribedQuality.encode(t,i.uint32(18).fork()).ldelim();for(const t of e.subscribedCodecs)SubscribedCodec.encode(t,i.uint32(26).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscribedQualityUpdate();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.trackSid=t.string();continue;case 2:if(o!=18)break;a.subscribedQualities.push(SubscribedQuality.decode(t,t.uint32()));continue;case 3:if(o!=26)break;a.subscribedCodecs.push(SubscribedCodec.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{trackSid:isSet(e.trackSid)?String(e.trackSid):"",subscribedQualities:Array.isArray(e==null?void 0:e.subscribedQualities)?e.subscribedQualities.map(i=>SubscribedQuality.fromJSON(i)):[],subscribedCodecs:Array.isArray(e==null?void 0:e.subscribedCodecs)?e.subscribedCodecs.map(i=>SubscribedCodec.fromJSON(i)):[]}},toJSON(e){const i={};return e.trackSid!==void 0&&(i.trackSid=e.trackSid),e.subscribedQualities?i.subscribedQualities=e.subscribedQualities.map(t=>t?SubscribedQuality.toJSON(t):void 0):i.subscribedQualities=[],e.subscribedCodecs?i.subscribedCodecs=e.subscribedCodecs.map(t=>t?SubscribedCodec.toJSON(t):void 0):i.subscribedCodecs=[],i},create(e){return SubscribedQualityUpdate.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseSubscribedQualityUpdate();return a.trackSid=(i=e.trackSid)!==null&&i!==void 0?i:"",a.subscribedQualities=((t=e.subscribedQualities)===null||t===void 0?void 0:t.map(o=>SubscribedQuality.fromPartial(o)))||[],a.subscribedCodecs=((n=e.subscribedCodecs)===null||n===void 0?void 0:n.map(o=>SubscribedCodec.fromPartial(o)))||[],a}};function createBaseTrackPermission(){return{participantSid:"",allTracks:!1,trackSids:[],participantIdentity:""}}const TrackPermission={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.allTracks===!0&&i.uint32(16).bool(e.allTracks);for(const t of e.trackSids)i.uint32(26).string(t);return e.participantIdentity!==""&&i.uint32(34).string(e.participantIdentity),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrackPermission();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.participantSid=t.string();continue;case 2:if(o!=16)break;a.allTracks=t.bool();continue;case 3:if(o!=26)break;a.trackSids.push(t.string());continue;case 4:if(o!=34)break;a.participantIdentity=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",allTracks:isSet(e.allTracks)?!!e.allTracks:!1,trackSids:Array.isArray(e==null?void 0:e.trackSids)?e.trackSids.map(i=>String(i)):[],participantIdentity:isSet(e.participantIdentity)?String(e.participantIdentity):""}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.allTracks!==void 0&&(i.allTracks=e.allTracks),e.trackSids?i.trackSids=e.trackSids.map(t=>t):i.trackSids=[],e.participantIdentity!==void 0&&(i.participantIdentity=e.participantIdentity),i},create(e){return TrackPermission.fromPartial(e??{})},fromPartial(e){var i,t,n,a;const o=createBaseTrackPermission();return o.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",o.allTracks=(t=e.allTracks)!==null&&t!==void 0?t:!1,o.trackSids=((n=e.trackSids)===null||n===void 0?void 0:n.map(d=>d))||[],o.participantIdentity=(a=e.participantIdentity)!==null&&a!==void 0?a:"",o}};function createBaseSubscriptionPermission(){return{allParticipants:!1,trackPermissions:[]}}const SubscriptionPermission={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.allParticipants===!0&&i.uint32(8).bool(e.allParticipants);for(const t of e.trackPermissions)TrackPermission.encode(t,i.uint32(18).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscriptionPermission();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.allParticipants=t.bool();continue;case 2:if(o!=18)break;a.trackPermissions.push(TrackPermission.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{allParticipants:isSet(e.allParticipants)?!!e.allParticipants:!1,trackPermissions:Array.isArray(e==null?void 0:e.trackPermissions)?e.trackPermissions.map(i=>TrackPermission.fromJSON(i)):[]}},toJSON(e){const i={};return e.allParticipants!==void 0&&(i.allParticipants=e.allParticipants),e.trackPermissions?i.trackPermissions=e.trackPermissions.map(t=>t?TrackPermission.toJSON(t):void 0):i.trackPermissions=[],i},create(e){return SubscriptionPermission.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSubscriptionPermission();return n.allParticipants=(i=e.allParticipants)!==null&&i!==void 0?i:!1,n.trackPermissions=((t=e.trackPermissions)===null||t===void 0?void 0:t.map(a=>TrackPermission.fromPartial(a)))||[],n}};function createBaseSubscriptionPermissionUpdate(){return{participantSid:"",trackSid:"",allowed:!1}}const SubscriptionPermissionUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.trackSid!==""&&i.uint32(18).string(e.trackSid),e.allowed===!0&&i.uint32(24).bool(e.allowed),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscriptionPermissionUpdate();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.participantSid=t.string();continue;case 2:if(o!=18)break;a.trackSid=t.string();continue;case 3:if(o!=24)break;a.allowed=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",trackSid:isSet(e.trackSid)?String(e.trackSid):"",allowed:isSet(e.allowed)?!!e.allowed:!1}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.trackSid!==void 0&&(i.trackSid=e.trackSid),e.allowed!==void 0&&(i.allowed=e.allowed),i},create(e){return SubscriptionPermissionUpdate.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseSubscriptionPermissionUpdate();return a.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",a.trackSid=(t=e.trackSid)!==null&&t!==void 0?t:"",a.allowed=(n=e.allowed)!==null&&n!==void 0?n:!1,a}};function createBaseSyncState(){return{answer:void 0,subscription:void 0,publishTracks:[],dataChannels:[],offer:void 0}}const SyncState={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.answer!==void 0&&SessionDescription.encode(e.answer,i.uint32(10).fork()).ldelim(),e.subscription!==void 0&&UpdateSubscription.encode(e.subscription,i.uint32(18).fork()).ldelim();for(const t of e.publishTracks)TrackPublishedResponse.encode(t,i.uint32(26).fork()).ldelim();for(const t of e.dataChannels)DataChannelInfo.encode(t,i.uint32(34).fork()).ldelim();return e.offer!==void 0&&SessionDescription.encode(e.offer,i.uint32(42).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSyncState();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.answer=SessionDescription.decode(t,t.uint32());continue;case 2:if(o!=18)break;a.subscription=UpdateSubscription.decode(t,t.uint32());continue;case 3:if(o!=26)break;a.publishTracks.push(TrackPublishedResponse.decode(t,t.uint32()));continue;case 4:if(o!=34)break;a.dataChannels.push(DataChannelInfo.decode(t,t.uint32()));continue;case 5:if(o!=42)break;a.offer=SessionDescription.decode(t,t.uint32());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{answer:isSet(e.answer)?SessionDescription.fromJSON(e.answer):void 0,subscription:isSet(e.subscription)?UpdateSubscription.fromJSON(e.subscription):void 0,publishTracks:Array.isArray(e==null?void 0:e.publishTracks)?e.publishTracks.map(i=>TrackPublishedResponse.fromJSON(i)):[],dataChannels:Array.isArray(e==null?void 0:e.dataChannels)?e.dataChannels.map(i=>DataChannelInfo.fromJSON(i)):[],offer:isSet(e.offer)?SessionDescription.fromJSON(e.offer):void 0}},toJSON(e){const i={};return e.answer!==void 0&&(i.answer=e.answer?SessionDescription.toJSON(e.answer):void 0),e.subscription!==void 0&&(i.subscription=e.subscription?UpdateSubscription.toJSON(e.subscription):void 0),e.publishTracks?i.publishTracks=e.publishTracks.map(t=>t?TrackPublishedResponse.toJSON(t):void 0):i.publishTracks=[],e.dataChannels?i.dataChannels=e.dataChannels.map(t=>t?DataChannelInfo.toJSON(t):void 0):i.dataChannels=[],e.offer!==void 0&&(i.offer=e.offer?SessionDescription.toJSON(e.offer):void 0),i},create(e){return SyncState.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSyncState();return n.answer=e.answer!==void 0&&e.answer!==null?SessionDescription.fromPartial(e.answer):void 0,n.subscription=e.subscription!==void 0&&e.subscription!==null?UpdateSubscription.fromPartial(e.subscription):void 0,n.publishTracks=((i=e.publishTracks)===null||i===void 0?void 0:i.map(a=>TrackPublishedResponse.fromPartial(a)))||[],n.dataChannels=((t=e.dataChannels)===null||t===void 0?void 0:t.map(a=>DataChannelInfo.fromPartial(a)))||[],n.offer=e.offer!==void 0&&e.offer!==null?SessionDescription.fromPartial(e.offer):void 0,n}};function createBaseDataChannelInfo(){return{label:"",id:0,target:0}}const DataChannelInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.label!==""&&i.uint32(10).string(e.label),e.id!==0&&i.uint32(16).uint32(e.id),e.target!==0&&i.uint32(24).int32(e.target),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseDataChannelInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.label=t.string();continue;case 2:if(o!=16)break;a.id=t.uint32();continue;case 3:if(o!=24)break;a.target=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{label:isSet(e.label)?String(e.label):"",id:isSet(e.id)?Number(e.id):0,target:isSet(e.target)?signalTargetFromJSON(e.target):0}},toJSON(e){const i={};return e.label!==void 0&&(i.label=e.label),e.id!==void 0&&(i.id=Math.round(e.id)),e.target!==void 0&&(i.target=signalTargetToJSON(e.target)),i},create(e){return DataChannelInfo.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseDataChannelInfo();return a.label=(i=e.label)!==null&&i!==void 0?i:"",a.id=(t=e.id)!==null&&t!==void 0?t:0,a.target=(n=e.target)!==null&&n!==void 0?n:0,a}};function createBaseSimulateScenario(){return{scenario:void 0}}const SimulateScenario={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var t;switch((t=e.scenario)===null||t===void 0?void 0:t.$case){case"speakerUpdate":i.uint32(8).int32(e.scenario.speakerUpdate);break;case"nodeFailure":i.uint32(16).bool(e.scenario.nodeFailure);break;case"migration":i.uint32(24).bool(e.scenario.migration);break;case"serverLeave":i.uint32(32).bool(e.scenario.serverLeave);break;case"switchCandidateProtocol":i.uint32(40).int32(e.scenario.switchCandidateProtocol);break;case"subscriberBandwidth":i.uint32(48).int64(e.scenario.subscriberBandwidth);break}return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSimulateScenario();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.scenario={$case:"speakerUpdate",speakerUpdate:t.int32()};continue;case 2:if(o!=16)break;a.scenario={$case:"nodeFailure",nodeFailure:t.bool()};continue;case 3:if(o!=24)break;a.scenario={$case:"migration",migration:t.bool()};continue;case 4:if(o!=32)break;a.scenario={$case:"serverLeave",serverLeave:t.bool()};continue;case 5:if(o!=40)break;a.scenario={$case:"switchCandidateProtocol",switchCandidateProtocol:t.int32()};continue;case 6:if(o!=48)break;a.scenario={$case:"subscriberBandwidth",subscriberBandwidth:longToNumber(t.int64())};continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{scenario:isSet(e.speakerUpdate)?{$case:"speakerUpdate",speakerUpdate:Number(e.speakerUpdate)}:isSet(e.nodeFailure)?{$case:"nodeFailure",nodeFailure:!!e.nodeFailure}:isSet(e.migration)?{$case:"migration",migration:!!e.migration}:isSet(e.serverLeave)?{$case:"serverLeave",serverLeave:!!e.serverLeave}:isSet(e.switchCandidateProtocol)?{$case:"switchCandidateProtocol",switchCandidateProtocol:candidateProtocolFromJSON(e.switchCandidateProtocol)}:isSet(e.subscriberBandwidth)?{$case:"subscriberBandwidth",subscriberBandwidth:Number(e.subscriberBandwidth)}:void 0}},toJSON(e){var i,t,n,a,o,d,s,f,c,h,v,l,u;const p={};return((i=e.scenario)===null||i===void 0?void 0:i.$case)==="speakerUpdate"&&(p.speakerUpdate=Math.round((t=e.scenario)===null||t===void 0?void 0:t.speakerUpdate)),((n=e.scenario)===null||n===void 0?void 0:n.$case)==="nodeFailure"&&(p.nodeFailure=(a=e.scenario)===null||a===void 0?void 0:a.nodeFailure),((o=e.scenario)===null||o===void 0?void 0:o.$case)==="migration"&&(p.migration=(d=e.scenario)===null||d===void 0?void 0:d.migration),((s=e.scenario)===null||s===void 0?void 0:s.$case)==="serverLeave"&&(p.serverLeave=(f=e.scenario)===null||f===void 0?void 0:f.serverLeave),((c=e.scenario)===null||c===void 0?void 0:c.$case)==="switchCandidateProtocol"&&(p.switchCandidateProtocol=((h=e.scenario)===null||h===void 0?void 0:h.switchCandidateProtocol)!==void 0?candidateProtocolToJSON((v=e.scenario)===null||v===void 0?void 0:v.switchCandidateProtocol):void 0),((l=e.scenario)===null||l===void 0?void 0:l.$case)==="subscriberBandwidth"&&(p.subscriberBandwidth=Math.round((u=e.scenario)===null||u===void 0?void 0:u.subscriberBandwidth)),p},create(e){return SimulateScenario.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,f,c,h,v,l,u,p,m,w,_,C;const N=createBaseSimulateScenario();return((i=e.scenario)===null||i===void 0?void 0:i.$case)==="speakerUpdate"&&((t=e.scenario)===null||t===void 0?void 0:t.speakerUpdate)!==void 0&&((n=e.scenario)===null||n===void 0?void 0:n.speakerUpdate)!==null&&(N.scenario={$case:"speakerUpdate",speakerUpdate:e.scenario.speakerUpdate}),((a=e.scenario)===null||a===void 0?void 0:a.$case)==="nodeFailure"&&((o=e.scenario)===null||o===void 0?void 0:o.nodeFailure)!==void 0&&((d=e.scenario)===null||d===void 0?void 0:d.nodeFailure)!==null&&(N.scenario={$case:"nodeFailure",nodeFailure:e.scenario.nodeFailure}),((s=e.scenario)===null||s===void 0?void 0:s.$case)==="migration"&&((f=e.scenario)===null||f===void 0?void 0:f.migration)!==void 0&&((c=e.scenario)===null||c===void 0?void 0:c.migration)!==null&&(N.scenario={$case:"migration",migration:e.scenario.migration}),((h=e.scenario)===null||h===void 0?void 0:h.$case)==="serverLeave"&&((v=e.scenario)===null||v===void 0?void 0:v.serverLeave)!==void 0&&((l=e.scenario)===null||l===void 0?void 0:l.serverLeave)!==null&&(N.scenario={$case:"serverLeave",serverLeave:e.scenario.serverLeave}),((u=e.scenario)===null||u===void 0?void 0:u.$case)==="switchCandidateProtocol"&&((p=e.scenario)===null||p===void 0?void 0:p.switchCandidateProtocol)!==void 0&&((m=e.scenario)===null||m===void 0?void 0:m.switchCandidateProtocol)!==null&&(N.scenario={$case:"switchCandidateProtocol",switchCandidateProtocol:e.scenario.switchCandidateProtocol}),((w=e.scenario)===null||w===void 0?void 0:w.$case)==="subscriberBandwidth"&&((_=e.scenario)===null||_===void 0?void 0:_.subscriberBandwidth)!==void 0&&((C=e.scenario)===null||C===void 0?void 0:C.subscriberBandwidth)!==null&&(N.scenario={$case:"subscriberBandwidth",subscriberBandwidth:e.scenario.subscriberBandwidth}),N}};function createBasePing(){return{timestamp:0,rtt:0}}const Ping={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.timestamp!==0&&i.uint32(8).int64(e.timestamp),e.rtt!==0&&i.uint32(16).int64(e.rtt),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBasePing();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.timestamp=longToNumber(t.int64());continue;case 2:if(o!=16)break;a.rtt=longToNumber(t.int64());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{timestamp:isSet(e.timestamp)?Number(e.timestamp):0,rtt:isSet(e.rtt)?Number(e.rtt):0}},toJSON(e){const i={};return e.timestamp!==void 0&&(i.timestamp=Math.round(e.timestamp)),e.rtt!==void 0&&(i.rtt=Math.round(e.rtt)),i},create(e){return Ping.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBasePing();return n.timestamp=(i=e.timestamp)!==null&&i!==void 0?i:0,n.rtt=(t=e.rtt)!==null&&t!==void 0?t:0,n}};function createBasePong(){return{lastPingTimestamp:0,timestamp:0}}const Pong={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.lastPingTimestamp!==0&&i.uint32(8).int64(e.lastPingTimestamp),e.timestamp!==0&&i.uint32(16).int64(e.timestamp),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBasePong();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.lastPingTimestamp=longToNumber(t.int64());continue;case 2:if(o!=16)break;a.timestamp=longToNumber(t.int64());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{lastPingTimestamp:isSet(e.lastPingTimestamp)?Number(e.lastPingTimestamp):0,timestamp:isSet(e.timestamp)?Number(e.timestamp):0}},toJSON(e){const i={};return e.lastPingTimestamp!==void 0&&(i.lastPingTimestamp=Math.round(e.lastPingTimestamp)),e.timestamp!==void 0&&(i.timestamp=Math.round(e.timestamp)),i},create(e){return Pong.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBasePong();return n.lastPingTimestamp=(i=e.lastPingTimestamp)!==null&&i!==void 0?i:0,n.timestamp=(t=e.timestamp)!==null&&t!==void 0?t:0,n}};var tsProtoGlobalThis=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw"Unable to locate global object"})();function longToNumber(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new tsProtoGlobalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}_m0.util.Long!==Long$1&&(_m0.util.Long=Long$1,_m0.configure());function isSet(e){return e!=null}class LivekitError extends Error{constructor(i,t){super(t||"an error has occured"),this.code=i}}class ConnectionError extends LivekitError{constructor(i,t,n){super(1,i),this.status=n,this.reason=t}}class DeviceUnsupportedError extends LivekitError{constructor(i){super(21,i??"device is unsupported")}}class TrackInvalidError extends LivekitError{constructor(i){super(20,i??"track is invalid")}}class UnsupportedServer extends LivekitError{constructor(i){super(10,i??"unsupported server")}}class UnexpectedConnectionState extends LivekitError{constructor(i){super(12,i??"unexpected connection state")}}class NegotiationError extends LivekitError{constructor(i){super(13,i??"unable to negotiate")}}var MediaDeviceFailure;(function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"})(MediaDeviceFailure||(MediaDeviceFailure={}));(function(e){function i(t){if(t&&"name"in t)return t.name==="NotFoundError"||t.name==="DevicesNotFoundError"?e.NotFound:t.name==="NotAllowedError"||t.name==="PermissionDeniedError"?e.PermissionDenied:t.name==="NotReadableError"||t.name==="TrackStartError"?e.DeviceInUse:e.Other}e.getFailure=i})(MediaDeviceFailure||(MediaDeviceFailure={}));class CriticalTimers{}CriticalTimers.setTimeout=function(){return setTimeout(...arguments)};CriticalTimers.setInterval=function(){return setInterval(...arguments)};CriticalTimers.clearTimeout=function(){return clearTimeout(...arguments)};CriticalTimers.clearInterval=function(){return clearInterval(...arguments)};var uaParser={exports:{}};(function(e,i){(function(t,n){var a="1.0.35",o="",d="?",s="function",f="undefined",c="object",h="string",v="major",l="model",u="name",p="type",m="vendor",w="version",_="architecture",C="console",N="mobile",P="tablet",M="smarttv",U="wearable",W="embedded",q=350,Z="Amazon",re="Apple",Y="ASUS",O="BlackBerry",x="Browser",S="Chrome",k="Edge",g="Firefox",E="Google",T="Huawei",A="LG",J="Microsoft",G="Motorola",I="Opera",V="Samsung",B="Sharp",z="Sony",ie="Xiaomi",de="Zebra",me="Facebook",be="Chromium OS",we="Mac OS",oe=function(ue,y){var L={};for(var H in ue)y[H]&&y[H].length%2===0?L[H]=y[H].concat(ue[H]):L[H]=ue[H];return L},ce=function(ue){for(var y={},L=0;L<ue.length;L++)y[ue[L].toUpperCase()]=ue[L];return y},ge=function(ue,y){return typeof ue===h?ke(y).indexOf(ke(ue))!==-1:!1},ke=function(ue){return ue.toLowerCase()},le=function(ue){return typeof ue===h?ue.replace(/[^\d\.]/g,o).split(".")[0]:n},te=function(ue,y){if(typeof ue===h)return ue=ue.replace(/^\s\s*/,o),typeof y===f?ue:ue.substring(0,q)},ee=function(ue,y){for(var L=0,H,fe,j,b,D,K;L<y.length&&!D;){var pe=y[L],ae=y[L+1];for(H=fe=0;H<pe.length&&!D&&pe[H];)if(D=pe[H++].exec(ue),D)for(j=0;j<ae.length;j++)K=D[++fe],b=ae[j],typeof b===c&&b.length>0?b.length===2?typeof b[1]==s?this[b[0]]=b[1].call(this,K):this[b[0]]=b[1]:b.length===3?typeof b[1]===s&&!(b[1].exec&&b[1].test)?this[b[0]]=K?b[1].call(this,K,b[2]):n:this[b[0]]=K?K.replace(b[1],b[2]):n:b.length===4&&(this[b[0]]=K?b[3].call(this,K.replace(b[1],b[2])):n):this[b]=K||n;L+=2}},Q=function(ue,y){for(var L in y)if(typeof y[L]===c&&y[L].length>0){for(var H=0;H<y[L].length;H++)if(ge(y[L][H],ue))return L===d?n:L}else if(ge(y[L],ue))return L===d?n:L;return ue},F={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},$={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[w,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[w,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,w],[/opios[\/ ]+([\w\.]+)/i],[w,[u,I+" Mini"]],[/\bopr\/([\w\.]+)/i],[w,[u,I]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[u,w],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[w,[u,"UC"+x]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[w,[u,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[w,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[w,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[w,[u,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[w,[u,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure "+x],w],[/\bfocus\/([\w\.]+)/i],[w,[u,g+" Focus"]],[/\bopt\/([\w\.]+)/i],[w,[u,I+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[w,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[w,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[w,[u,I+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[w,[u,"MIUI "+x]],[/fxios\/([-\w\.]+)/i],[w,[u,g]],[/\bqihu|(qi?ho?o?|360)browser/i],[[u,"360 "+x]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 "+x],w],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],w],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[u,w],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,me],w],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[u,w],[/\bgsa\/([\w\.]+) .*safari\//i],[w,[u,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[w,[u,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[w,[u,S+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,S+" WebView"],w],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[w,[u,"Android "+x]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,w],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[w,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[w,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[w,Q,F]],[/(webkit|khtml)\/([\w\.]+)/i],[u,w],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],w],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[w,[u,g+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[u,w],[/(cobalt)\/([\w\.]+)/i],[u,[w,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,ke]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,o,ke]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,ke]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[m,V],[p,P]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[m,V],[p,N]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[m,re],[p,N]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[m,re],[p,P]],[/(macintosh);/i],[l,[m,re]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[m,B],[p,N]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[m,T],[p,P]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[m,T],[p,N]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[m,ie],[p,N]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[m,ie],[p,P]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[m,"OPPO"],[p,N]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[m,"Vivo"],[p,N]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[m,"Realme"],[p,N]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[m,G],[p,N]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[m,G],[p,P]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[m,A],[p,P]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[m,A],[p,N]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[m,"Lenovo"],[p,P]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[m,"Nokia"],[p,N]],[/(pixel c)\b/i],[l,[m,E],[p,P]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[m,E],[p,N]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[m,z],[p,N]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[m,z],[p,P]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[m,"OnePlus"],[p,N]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[m,Z],[p,P]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[m,Z],[p,N]],[/(playbook);[-\w\),; ]+(rim)/i],[l,m,[p,P]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[m,O],[p,N]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[m,Y],[p,P]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[m,Y],[p,N]],[/(nexus 9)/i],[l,[m,"HTC"],[p,P]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[l,/_/g," "],[p,N]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[m,"Acer"],[p,P]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[m,"Meizu"],[p,N]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,l,[p,N]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,l,[p,P]],[/(surface duo)/i],[l,[m,J],[p,P]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[m,"Fairphone"],[p,N]],[/(u304aa)/i],[l,[m,"AT&T"],[p,N]],[/\bsie-(\w*)/i],[l,[m,"Siemens"],[p,N]],[/\b(rct\w+) b/i],[l,[m,"RCA"],[p,P]],[/\b(venue[\d ]{2,7}) b/i],[l,[m,"Dell"],[p,P]],[/\b(q(?:mv|ta)\w+) b/i],[l,[m,"Verizon"],[p,P]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[m,"Barnes & Noble"],[p,P]],[/\b(tm\d{3}\w+) b/i],[l,[m,"NuVision"],[p,P]],[/\b(k88) b/i],[l,[m,"ZTE"],[p,P]],[/\b(nx\d{3}j) b/i],[l,[m,"ZTE"],[p,N]],[/\b(gen\d{3}) b.+49h/i],[l,[m,"Swiss"],[p,N]],[/\b(zur\d{3}) b/i],[l,[m,"Swiss"],[p,P]],[/\b((zeki)?tb.*\b) b/i],[l,[m,"Zeki"],[p,P]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],l,[p,P]],[/\b(ns-?\w{0,9}) b/i],[l,[m,"Insignia"],[p,P]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[m,"NextBook"],[p,P]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],l,[p,N]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],l,[p,N]],[/\b(ph-1) /i],[l,[m,"Essential"],[p,N]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[m,"Envizen"],[p,P]],[/\b(trio[-\w\. ]+) b/i],[l,[m,"MachSpeed"],[p,P]],[/\btu_(1491) b/i],[l,[m,"Rotor"],[p,P]],[/(shield[\w ]+) b/i],[l,[m,"Nvidia"],[p,P]],[/(sprint) (\w+)/i],[m,l,[p,N]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[m,J],[p,N]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[m,de],[p,P]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[m,de],[p,N]],[/smart-tv.+(samsung)/i],[m,[p,M]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[m,V],[p,M]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,A],[p,M]],[/(apple) ?tv/i],[m,[l,re+" TV"],[p,M]],[/crkey/i],[[l,S+"cast"],[m,E],[p,M]],[/droid.+aft(\w)( bui|\))/i],[l,[m,Z],[p,M]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[m,B],[p,M]],[/(bravia[\w ]+)( bui|\))/i],[l,[m,z],[p,M]],[/(mitv-\w{5}) bui/i],[l,[m,ie],[p,M]],[/Hbbtv.*(technisat) (.*);/i],[m,l,[p,M]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,te],[l,te],[p,M]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,M]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,l,[p,C]],[/droid.+; (shield) bui/i],[l,[m,"Nvidia"],[p,C]],[/(playstation [345portablevi]+)/i],[l,[m,z],[p,C]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[m,J],[p,C]],[/((pebble))app/i],[m,l,[p,U]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[m,re],[p,U]],[/droid.+; (glass) \d/i],[l,[m,E],[p,U]],[/droid.+; (wt63?0{2,3})\)/i],[l,[m,de],[p,U]],[/(quest( 2| pro)?)/i],[l,[m,me],[p,U]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[p,W]],[/(aeobc)\b/i],[l,[m,Z],[p,W]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[p,N]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[p,P]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,P]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,N]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[w,[u,k+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[w,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[u,w],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[w,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,w],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[u,[w,Q,$]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[u,"Windows"],[w,Q,$]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[w,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,we],[w,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[w,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,w],[/\(bb(10);/i],[w,[u,O]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[w,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[w,[u,g+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[w,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[w,[u,"watchOS"]],[/crkey\/([\d\.]+)/i],[w,[u,S+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,be],w],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,w],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],w],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[u,w]]},se=function(ue,y){if(typeof ue===c&&(y=ue,ue=n),!(this instanceof se))return new se(ue,y).getResult();var L=typeof t!==f&&t.navigator?t.navigator:n,H=ue||(L&&L.userAgent?L.userAgent:o),fe=L&&L.userAgentData?L.userAgentData:n,j=y?oe(X,y):X,b=L&&L.userAgent==H;return this.getBrowser=function(){var D={};return D[u]=n,D[w]=n,ee.call(D,H,j.browser),D[v]=le(D[w]),b&&L&&L.brave&&typeof L.brave.isBrave==s&&(D[u]="Brave"),D},this.getCPU=function(){var D={};return D[_]=n,ee.call(D,H,j.cpu),D},this.getDevice=function(){var D={};return D[m]=n,D[l]=n,D[p]=n,ee.call(D,H,j.device),b&&!D[p]&&fe&&fe.mobile&&(D[p]=N),b&&D[l]=="Macintosh"&&L&&typeof L.standalone!==f&&L.maxTouchPoints&&L.maxTouchPoints>2&&(D[l]="iPad",D[p]=P),D},this.getEngine=function(){var D={};return D[u]=n,D[w]=n,ee.call(D,H,j.engine),D},this.getOS=function(){var D={};return D[u]=n,D[w]=n,ee.call(D,H,j.os),b&&!D[u]&&fe&&fe.platform!="Unknown"&&(D[u]=fe.platform.replace(/chrome os/i,be).replace(/macos/i,we)),D},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return H},this.setUA=function(D){return H=typeof D===h&&D.length>q?te(D,q):D,this},this.setUA(H),this};se.VERSION=a,se.BROWSER=ce([u,w,v]),se.CPU=ce([_]),se.DEVICE=ce([l,m,p,C,N,M,P,U,W]),se.ENGINE=se.OS=ce([u,w]),e.exports&&(i=e.exports=se),i.UAParser=se;var ve=typeof t!==f&&(t.jQuery||t.Zepto);if(ve&&!ve.ua){var Se=new se;ve.ua=Se.getResult(),ve.ua.get=function(){return Se.getUA()},ve.ua.set=function(ue){Se.setUA(ue);var y=Se.getResult();for(var L in y)ve.ua[L]=y[L]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser,uaParser.exports);var uaParserExports=uaParser.exports,UAParser=getDefaultExportFromCjs(uaParserExports),version$1="1.9.2";const version=version$1,protocolVersion=9;function mergeDefaultOptions(e,i,t){const n=_objectSpread2({},e);return n.audio===!0&&(n.audio={}),n.video===!0&&(n.video={}),n.audio&&mergeObjectWithoutOverwriting(n.audio,i),n.video&&mergeObjectWithoutOverwriting(n.video,t),n}function mergeObjectWithoutOverwriting(e,i){return Object.keys(i).forEach(t=>{e[t]===void 0&&(e[t]=i[t])}),e}function constraintsForOptions(e){const i={};if(e.video)if(typeof e.video=="object"){const t={},n=t,a=e.video;Object.keys(a).forEach(o=>{switch(o){case"resolution":mergeObjectWithoutOverwriting(n,a.resolution);break;default:n[o]=a[o]}}),i.video=t}else i.video=e.video;else i.video=!1;return e.audio?typeof e.audio=="object"?i.audio=e.audio:i.audio=!0:i.audio=!1,i}async function detectSilence(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;const t=getNewAudioContext();if(t){const n=t.createAnalyser();n.fftSize=2048;const a=n.frequencyBinCount,o=new Uint8Array(a);t.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(n),await sleep(i),n.getByteTimeDomainData(o);const s=o.some(f=>f!==128&&f!==0);return t.close(),!s}return!1}function getNewAudioContext(){const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e)return new e({latencyHint:"interactive"})}const separator="|",ddExtensionURI="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function unpackStreamId(e){const i=e.split(separator);return i.length>1?[i[0],e.substr(i[0].length+1)]:[e,""]}async function sleep(e){return new Promise(i=>setTimeout(i,e))}function supportsTransceiver(){return"addTransceiver"in RTCPeerConnection.prototype}function supportsAddTrack(){return"addTrack"in RTCPeerConnection.prototype}function supportsAV1(){const e=RTCRtpReceiver.getCapabilities("video");let i=!1;if(e){for(const t of e.codecs)if(t.mimeType==="video/AV1"){i=!0;break}}return i}function supportsVP9(){const e=RTCRtpReceiver.getCapabilities("video");let i=!1;if(e){for(const t of e.codecs)if(t.mimeType==="video/VP9"){i=!0;break}}return i}function isSVCCodec(e){return e==="av1"||e==="vp9"}function supportsSetSinkId(e){return document?(e||(e=document.createElement("audio")),"setSinkId"in e):!1}const setCodecPreferencesVersions={Chrome:"100",Chromium:"100",Safari:"15",Firefox:"100",Edge:"100",Brave:"1.40"};function supportsSetCodecPreferences(e){if(!isWeb()||!("setCodecPreferences"in e))return!1;const i=UAParser();if(!i.browser.name||!i.browser.version)return!1;const t=setCodecPreferencesVersions[i.browser.name];return t?compareVersions(i.browser.version,t)>=0:!1}function isFireFox(){return isWeb()?navigator.userAgent.indexOf("Firefox")!==-1:!1}function isSafari(){return isWeb()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}function isMobile(){return isWeb()?/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function isWeb(){return typeof document<"u"}function isReactNative(){return navigator.product=="ReactNative"}function isCloud(e){return e.hostname.endsWith(".livekit.cloud")}function getLKReactNativeInfo(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function getReactNativeOs(){if(!isReactNative())return;let e=getLKReactNativeInfo();if(e)return e.platform}function getDevicePixelRatio(){if(isWeb())return window.devicePixelRatio;if(isReactNative()){let e=getLKReactNativeInfo();if(e)return e.devicePixelRatio}return 1}function compareVersions(e,i){const t=e.split("."),n=i.split("."),a=Math.min(e.length,i.length);for(let o=0;o<a;++o){const d=parseInt(t[o],10),s=parseInt(n[o],10);if(d>s)return 1;if(d<s)return-1}return t.length==n.length?0:t.length<n.length?-1:1}function roDispatchCallback(e){for(const i of e)i.target.handleResize(i)}function ioDispatchCallback(e){for(const i of e)i.target.handleVisibilityChanged(i)}let resizeObserver=null;const getResizeObserver=()=>(resizeObserver||(resizeObserver=new ResizeObserver(roDispatchCallback)),resizeObserver);let intersectionObserver=null;const getIntersectionObserver=()=>(intersectionObserver||(intersectionObserver=new IntersectionObserver(ioDispatchCallback,{root:document,rootMargin:"0px"})),intersectionObserver);function getClientInfo(){var e;const i=ClientInfo.fromPartial({sdk:ClientInfo_SDK.JS,protocol:protocolVersion,version});return isReactNative()&&(i.os=(e=getReactNativeOs())!==null&&e!==void 0?e:""),i}let emptyVideoStreamTrack;function getEmptyVideoStreamTrack(){return emptyVideoStreamTrack||(emptyVideoStreamTrack=createDummyVideoStreamTrack()),emptyVideoStreamTrack}function createDummyVideoStreamTrack(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const a=document.createElement("canvas");a.width=e,a.height=i;const o=a.getContext("2d");o==null||o.fillRect(0,0,a.width,a.height),n&&o&&(o.beginPath(),o.arc(e/2,i/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const d=a.captureStream(),[s]=d.getTracks();if(!s)throw Error("Could not get empty media stream video track");return s.enabled=t,s}let emptyAudioStreamTrack;function getEmptyAudioStreamTrack(){if(!emptyAudioStreamTrack){const e=new AudioContext,i=e.createOscillator(),t=e.createMediaStreamDestination();if(i.connect(t),i.start(),[emptyAudioStreamTrack]=t.stream.getAudioTracks(),!emptyAudioStreamTrack)throw Error("Could not get empty media stream audio track");emptyAudioStreamTrack.enabled=!1}return emptyAudioStreamTrack}class Future{constructor(i,t){this.onFinally=t,this.promise=new Promise(async(n,a)=>{this.resolve=n,this.reject=a,i&&await i(n,a)}).finally(()=>{var n;return(n=this.onFinally)===null||n===void 0?void 0:n.call(this)})}}class Mutex{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let i;const t=new Promise(a=>i=()=>{this._locks-=1,a()}),n=this._locking.then(()=>i);return this._locking=this._locking.then(()=>t),n}}const passThroughQueueSignals=["syncState","trickle","offer","answer","simulate","leave"];function canPassThroughQueue(e){const i=passThroughQueueSignals.includes(e.$case);return livekitLogger.trace("request allowed to bypass queue:",{canPass:i,req:e}),i}class SignalClient{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.rtt=0,this.isConnected=!1,this.isReconnecting=!1,this.useJSON=i,this.requestQueue=new Queue,this.queuedRequests=[],this.closingLock=new Mutex}async join(i,t,n,a){return this.isConnected=!1,this.options=n,await this.connect(i,t,n,a)}async reconnect(i,t,n,a){if(!this.options){livekitLogger.warn("attempted to reconnect without signal options being set, ignoring");return}return this.isReconnecting=!0,this.clearPingInterval(),await this.connect(i,t,_objectSpread2(_objectSpread2({},this.options),{},{reconnect:!0,sid:n,reconnectReason:a}))}connect(i,t,n,a){this.connectOptions=n,i.startsWith("http")&&(i=i.replace("http","ws")),i=i.replace(/\/$/,""),i+="/rtc";const o=getClientInfo(),d=createConnectionParams(t,o,n);return new Promise(async(s,f)=>{const c=async()=>{await this.close(),f(new ConnectionError("room connection has been cancelled (signal)"))};a!=null&&a.aborted&&c(),a==null||a.addEventListener("abort",c),livekitLogger.debug("connecting to ".concat(i+d)),this.ws&&await this.close(),this.ws=new WebSocket(i+d),this.ws.binaryType="arraybuffer",this.ws.onerror=async h=>{if(!this.isConnected){try{const v=await fetch("http".concat(i.substring(2),"/validate").concat(d));if(v.status.toFixed(0).startsWith("4")){const l=await v.text();f(new ConnectionError(l,0,v.status))}else f(new ConnectionError("Internal error",2,v.status))}catch{f(new ConnectionError("server was not reachable",1))}return}this.handleWSError(h)},this.ws.onmessage=async h=>{var v,l,u,p;let m;if(typeof h.data=="string"){const w=JSON.parse(h.data);m=SignalResponse.fromJSON(w)}else if(h.data instanceof ArrayBuffer)m=SignalResponse.decode(new Uint8Array(h.data));else{livekitLogger.error("could not decode websocket message: ".concat(typeof h.data));return}if(!this.isConnected){let w=!1;if(((v=m.message)===null||v===void 0?void 0:v.$case)==="join"?(this.isConnected=!0,a==null||a.removeEventListener("abort",c),this.pingTimeoutDuration=m.message.join.pingTimeout,this.pingIntervalDuration=m.message.join.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(livekitLogger.debug("ping config",{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration}),this.startPingInterval()),s(m.message.join)):n.reconnect?(this.isConnected=!0,a==null||a.removeEventListener("abort",c),this.startPingInterval(),((l=m.message)===null||l===void 0?void 0:l.$case)==="reconnect"?s((u=m.message)===null||u===void 0?void 0:u.reconnect):(s(),w=!0)):n.reconnect||f(new ConnectionError("did not receive join response, got ".concat((p=m.message)===null||p===void 0?void 0:p.$case," instead"))),!w)return}this.signalLatency&&await sleep(this.signalLatency),this.handleSignalResponse(m)},this.ws.onclose=h=>{this.handleOnClose(h.reason)}})}async close(){const i=await this.closingLock.lock();try{if(this.isConnected=!1,this.ws){this.ws.onclose=null,this.ws.onmessage=null,this.ws.onopen=null;const t=new Promise(n=>{this.ws?this.ws.onclose=n:n(!0)});this.ws.close(),await Promise.race([t,sleep(250)])}this.ws=void 0,this.clearPingInterval()}finally{i()}}sendOffer(i){livekitLogger.debug("sending offer",i),this.sendRequest({$case:"offer",offer:toProtoSessionDescription(i)})}sendAnswer(i){return livekitLogger.debug("sending answer"),this.sendRequest({$case:"answer",answer:toProtoSessionDescription(i)})}sendIceCandidate(i,t){return livekitLogger.trace("sending ice candidate",i),this.sendRequest({$case:"trickle",trickle:{candidateInit:JSON.stringify(i),target:t}})}sendMuteTrack(i,t){return this.sendRequest({$case:"mute",mute:{sid:i,muted:t}})}sendAddTrack(i){return this.sendRequest({$case:"addTrack",addTrack:AddTrackRequest.fromPartial(i)})}sendUpdateLocalMetadata(i,t){return this.sendRequest({$case:"updateMetadata",updateMetadata:{metadata:i,name:t}})}sendUpdateTrackSettings(i){this.sendRequest({$case:"trackSetting",trackSetting:i})}sendUpdateSubscription(i){return this.sendRequest({$case:"subscription",subscription:i})}sendSyncState(i){return this.sendRequest({$case:"syncState",syncState:i})}sendUpdateVideoLayers(i,t){return this.sendRequest({$case:"updateLayers",updateLayers:{trackSid:i,layers:t}})}sendUpdateSubscriptionPermissions(i,t){return this.sendRequest({$case:"subscriptionPermission",subscriptionPermission:{allParticipants:i,trackPermissions:t}})}sendSimulateScenario(i){return this.sendRequest({$case:"simulate",simulate:i})}sendPing(){return Promise.all([this.sendRequest({$case:"ping",ping:Date.now()}),this.sendRequest({$case:"pingReq",pingReq:{timestamp:Date.now(),rtt:this.rtt}})])}sendLeave(){return this.sendRequest({$case:"leave",leave:{canReconnect:!1,reason:DisconnectReason.CLIENT_INITIATED}})}async sendRequest(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!t&&!canPassThroughQueue(i)&&this.isReconnecting){this.queuedRequests.push(async()=>{await this.sendRequest(i,!0)});return}if(t||await this.requestQueue.flush(),this.signalLatency&&await sleep(this.signalLatency),!this.ws||this.ws.readyState!==this.ws.OPEN){livekitLogger.error("cannot send signal request before connected, type: ".concat(i==null?void 0:i.$case));return}const a={message:i};try{this.useJSON?this.ws.send(JSON.stringify(SignalRequest.toJSON(a))):this.ws.send(SignalRequest.encode(a).finish())}catch(o){livekitLogger.error("error sending signal message",{error:o})}}handleSignalResponse(i){var t,n;const a=i.message;if(a==null){livekitLogger.debug("received unsupported message");return}if(a.$case==="answer"){const o=fromProtoSessionDescription(a.answer);this.onAnswer&&this.onAnswer(o)}else if(a.$case==="offer"){const o=fromProtoSessionDescription(a.offer);this.onOffer&&this.onOffer(o)}else if(a.$case==="trickle"){const o=JSON.parse(a.trickle.candidateInit);this.onTrickle&&this.onTrickle(o,a.trickle.target)}else a.$case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((t=a.update.participants)!==null&&t!==void 0?t:[]):a.$case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(a.trackPublished):a.$case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((n=a.speakersChanged.speakers)!==null&&n!==void 0?n:[]):a.$case==="leave"?this.onLeave&&this.onLeave(a.leave):a.$case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(a.mute.sid,a.mute.muted):a.$case==="roomUpdate"?this.onRoomUpdate&&a.roomUpdate.room&&this.onRoomUpdate(a.roomUpdate.room):a.$case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(a.connectionQuality):a.$case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(a.streamStateUpdate):a.$case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(a.subscribedQualityUpdate):a.$case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(a.subscriptionPermissionUpdate):a.$case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(a.refreshToken):a.$case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(a.trackUnpublished):a.$case==="pong"?this.resetPingTimeout():a.$case==="pongResp"?(this.rtt=Date.now()-a.pongResp.lastPingTimestamp,this.resetPingTimeout()):livekitLogger.debug("unsupported message",a)}setReconnected(){for(;this.queuedRequests.length>0;){const i=this.queuedRequests.shift();i&&this.requestQueue.run(i)}this.isReconnecting=!1}handleOnClose(i){this.isConnected&&(this.clearPingInterval(),this.clearPingTimeout(),livekitLogger.debug("websocket connection closed: ".concat(i)),this.isConnected=!1,this.onClose&&this.onClose(i),this.ws=void 0)}handleWSError(i){livekitLogger.error("websocket error",i)}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){livekitLogger.warn("ping timeout duration not set");return}this.pingTimeout=CriticalTimers.setTimeout(()=>{livekitLogger.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString())),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&CriticalTimers.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){livekitLogger.warn("ping interval duration not set");return}livekitLogger.debug("start ping interval"),this.pingInterval=CriticalTimers.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){livekitLogger.debug("clearing ping interval"),this.clearPingTimeout(),this.pingInterval&&CriticalTimers.clearInterval(this.pingInterval)}}function fromProtoSessionDescription(e){const i={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":i.type=e.type;break}return i}function toProtoSessionDescription(e){return{sdp:e.sdp,type:e.type}}function createConnectionParams(e,i,t){var n;const a=new URLSearchParams;return a.set("access_token",e),t.reconnect&&(a.set("reconnect","1"),t.sid&&a.set("sid",t.sid)),a.set("auto_subscribe",t.autoSubscribe?"1":"0"),a.set("sdk",isReactNative()?"reactnative":"js"),a.set("version",i.version),a.set("protocol",i.protocol.toString()),i.deviceModel&&a.set("device_model",i.deviceModel),i.os&&a.set("os",i.os),i.osVersion&&a.set("os_version",i.osVersion),i.browser&&a.set("browser",i.browser),i.browserVersion&&a.set("browser_version",i.browserVersion),t.publishOnly!==void 0&&a.set("publish",t.publishOnly),t.adaptiveStream&&a.set("adaptive_stream","1"),t.reconnectReason&&a.set("reconnect_reason",t.reconnectReason.toString()),!((n=navigator.connection)===null||n===void 0)&&n.type&&a.set("network",navigator.connection.type),"?".concat(a.toString())}const defaultId="default";class DeviceManager{static getInstance(){return this.instance===void 0&&(this.instance=new DeviceManager),this.instance}async getDevices(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var n;if(((n=DeviceManager.userMediaPromiseMap)===null||n===void 0?void 0:n.size)>0){livekitLogger.debug("awaiting getUserMedia promise");try{i?await DeviceManager.userMediaPromiseMap.get(i):await Promise.all(DeviceManager.userMediaPromiseMap.values())}catch{livekitLogger.warn("error waiting for media permissons")}}let a=await navigator.mediaDevices.enumerateDevices();if(t&&i&&(!DeviceManager.userMediaPromiseMap.get(i)||!isSafari())&&(a.length===0||a.some(d=>{const s=d.label==="",f=i?d.kind===i:!0;return s&&f}))){const d={video:i!=="audioinput"&&i!=="audiooutput",audio:i!=="videoinput"},s=await navigator.mediaDevices.getUserMedia(d);a=await navigator.mediaDevices.enumerateDevices(),s.getTracks().forEach(f=>{f.stop()})}return i&&(a=a.filter(o=>o.kind===i)),a}async normalizeDeviceId(i,t,n){if(t!==defaultId)return t;const o=(await this.getDevices(i)).find(d=>d.groupId===n&&d.deviceId!==defaultId);return o==null?void 0:o.deviceId}}DeviceManager.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];DeviceManager.userMediaPromiseMap=new Map;var parser$1={},grammar$2={exports:{}},grammar$1=grammar$2.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var i="candidate:%s %d %s %d %s %d typ %s";return i+=e.raddr!=null?" raddr %s rport %d":"%v%v",i+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(i+=" generation %d"),i+=e["network-id"]!=null?" network-id %d":"%v",i+=e["network-cost"]!=null?" network-cost %d":"%v",i}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var i="ssrc:%d";return e.attribute!=null&&(i+=" %s",e.value!=null&&(i+=":%s")),i}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var i="mediaclk:";return i+=e.id!=null?"id=%s %s":"%v%s",i+=e.mediaClockValue!=null?"=%s":"",i+=e.rateNumerator!=null?" rate=%s":"",i+=e.rateDenominator!=null?"/%s":"",i}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(grammar$1).forEach(function(e){var i=grammar$1[e];i.forEach(function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")})});var grammarExports=grammar$2.exports;(function(e){var i=function(s){return String(Number(s))===s?Number(s):s},t=function(s,f,c,h){if(h&&!c)f[h]=i(s[1]);else for(var v=0;v<c.length;v+=1)s[v+1]!=null&&(f[c[v]]=i(s[v+1]))},n=function(s,f,c){var h=s.name&&s.names;s.push&&!f[s.push]?f[s.push]=[]:h&&!f[s.name]&&(f[s.name]={});var v=s.push?{}:h?f[s.name]:f;t(c.match(s.reg),v,s.names,s.name),s.push&&f[s.push].push(v)},a=grammarExports,o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(s){var f={},c=[],h=f;return s.split(/(\r\n|\r|\n)/).filter(o).forEach(function(v){var l=v[0],u=v.slice(2);l==="m"&&(c.push({rtp:[],fmtp:[]}),h=c[c.length-1]);for(var p=0;p<(a[l]||[]).length;p+=1){var m=a[l][p];if(m.reg.test(u))return n(m,h,u)}}),f.media=c,f};var d=function(s,f){var c=f.split(/=(.+)/,2);return c.length===2?s[c[0]]=i(c[1]):c.length===1&&f.length>1&&(s[c[0]]=void 0),s};e.parseParams=function(s){return s.split(/;\s?/).reduce(d,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(s){return s.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(s){for(var f=[],c=s.split(" ").map(i),h=0;h<c.length;h+=3)f.push({component:c[h],ip:c[h+1],port:c[h+2]});return f},e.parseImageAttributes=function(s){return s.split(" ").map(function(f){return f.substring(1,f.length-1).split(",").reduce(d,{})})},e.parseSimulcastStreamList=function(s){return s.split(";").map(function(f){return f.split(",").map(function(c){var h,v=!1;return c[0]!=="~"?h=i(c):(h=i(c.substring(1,c.length)),v=!0),{scid:h,paused:v}})})}})(parser$1);var grammar=grammarExports,formatRegExp=/%[sdv%]/g,format=function(e){var i=1,t=arguments,n=t.length;return e.replace(formatRegExp,function(a){if(i>=n)return a;var o=t[i];switch(i+=1,a){case"%%":return"%";case"%s":return String(o);case"%d":return Number(o);case"%v":return""}})},makeLine=function(e,i,t){var n=i.format instanceof Function?i.format(i.push?t:t[i.name]):i.format,a=[e+"="+n];if(i.names)for(var o=0;o<i.names.length;o+=1){var d=i.names[o];i.name?a.push(t[i.name][d]):a.push(t[i.names[o]])}else a.push(t[i.name]);return format.apply(null,a)},defaultOuterOrder=["v","o","s","i","u","e","p","c","b","t","r","z","a"],defaultInnerOrder=["i","c","b","a"],writer$1=function(e,i){i=i||{},e.version==null&&(e.version=0),e.name==null&&(e.name=" "),e.media.forEach(function(o){o.payloads==null&&(o.payloads="")});var t=i.outerOrder||defaultOuterOrder,n=i.innerOrder||defaultInnerOrder,a=[];return t.forEach(function(o){grammar[o].forEach(function(d){d.name in e&&e[d.name]!=null?a.push(makeLine(o,d,e)):d.push in e&&e[d.push]!=null&&e[d.push].forEach(function(s){a.push(makeLine(o,d,s))})})}),e.media.forEach(function(o){a.push(makeLine("m",grammar.m[0],o)),n.forEach(function(d){grammar[d].forEach(function(s){s.name in o&&o[s.name]!=null?a.push(makeLine(d,s,o)):s.push in o&&o[s.push]!=null&&o[s.push].forEach(function(f){a.push(makeLine(d,s,f))})})})}),a.join(`\r
`)+`\r
`},parser=parser$1,writer=writer$1,write=writer,parse=parser.parse;function r(e,i,t){var n,a,o;i===void 0&&(i=50),t===void 0&&(t={});var d=(n=t.isImmediate)!=null&&n,s=(a=t.callback)!=null&&a,f=t.maxWait,c=Date.now(),h=[];function v(){if(f!==void 0){var u=Date.now()-c;if(u+i>=f)return f-u}return i}var l=function(){var u=[].slice.call(arguments),p=this;return new Promise(function(m,w){var _=d&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,c=Date.now(),!d){var N=e.apply(p,u);s&&s(N),h.forEach(function(P){return(0,P.resolve)(N)}),h=[]}},v()),_){var C=e.apply(p,u);return s&&s(C),m(C)}h.push({resolve:m,reject:w})})};return l.cancel=function(u){o!==void 0&&clearTimeout(o),h.forEach(function(p){return(0,p.reject)(u)}),h=[]},l}const PCEvents={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete"};class PCTransport extends EventEmitter$1{constructor(i){super(),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=r(t=>{this.emit(PCEvents.NegotiationStarted);try{this.createAndSendOffer()}catch(n){if(t)t(n);else throw n}},100),this.pc=new RTCPeerConnection(i)}get isICEConnected(){return this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed"}async addIceCandidate(i){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(i);this.pendingCandidates.push(i)}async setRemoteDescription(i){if(i.type==="offer"){let{stereoMids:t,nackMids:n}=extractStereoAndNackAudioFromOffer(i);this.remoteStereoMids=t,this.remoteNackMids=n}await this.pc.setRemoteDescription(i),this.pendingCandidates.forEach(t=>{this.pc.addIceCandidate(t)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,this.createAndSendOffer()):i.type==="answer"&&this.emit(PCEvents.NegotiationComplete)}async createAndSendOffer(i){var t;if(this.onOffer===void 0)return;if(i!=null&&i.iceRestart&&(livekitLogger.debug("restarting ICE"),this.restartingIce=!0),this.pc.signalingState==="have-local-offer"){const o=this.pc.remoteDescription;if(i!=null&&i.iceRestart&&o)await this.pc.setRemoteDescription(o);else{this.renegotiate=!0;return}}else if(this.pc.signalingState==="closed"){livekitLogger.warn("could not createOffer with closed peer connection");return}livekitLogger.debug("starting to negotiate");const n=await this.pc.createOffer(i),a=parse((t=n.sdp)!==null&&t!==void 0?t:"");a.media.forEach(o=>{o.type==="audio"?ensureAudioNackAndStereo(o,[],[]):o.type==="video"&&(ensureVideoDDExtensionForSVC(o),this.trackBitrates.some(d=>{if(!o.msid||!o.msid.includes(d.sid))return!1;let s=0;return o.rtp.some(f=>f.codec.toUpperCase()===d.codec.toUpperCase()?(s=f.payload,!0):!1),s>0&&(o.fmtp.some(f=>f.payload===s?(f.config.includes("x-google-start-bitrate")||(f.config+=";x-google-start-bitrate=".concat(d.maxbr*.7)),f.config.includes("x-google-max-bitrate")||(f.config+=";x-google-max-bitrate=".concat(d.maxbr)),!0):!1)||o.fmtp.push({payload:s,config:"x-google-start-bitrate=".concat(d.maxbr*.7,";x-google-max-bitrate=").concat(d.maxbr)})),!0}))}),this.trackBitrates=[],await this.setMungedLocalDescription(n,write(a)),this.onOffer(n)}async createAndSetAnswer(){var i;const t=await this.pc.createAnswer(),n=parse((i=t.sdp)!==null&&i!==void 0?i:"");return n.media.forEach(a=>{a.type==="audio"&&ensureAudioNackAndStereo(a,this.remoteStereoMids,this.remoteNackMids)}),await this.setMungedLocalDescription(t,write(n)),t}setTrackCodecBitrate(i,t,n){this.trackBitrates.push({sid:i,codec:t,maxbr:n})}close(){this.pc.onconnectionstatechange=null,this.pc.oniceconnectionstatechange=null,this.pc.close()}async setMungedLocalDescription(i,t){const n=i.sdp;i.sdp=t;try{livekitLogger.debug("setting munged local description"),await this.pc.setLocalDescription(i);return}catch(a){livekitLogger.warn("not able to set ".concat(i.type,", falling back to unmodified sdp"),{error:a}),i.sdp=n}try{await this.pc.setLocalDescription(i)}catch(a){let o="unknown error";throw a instanceof Error?o=a.message:typeof a=="string"&&(o=a),new NegotiationError(o)}}}function ensureAudioNackAndStereo(e,i,t){let n=0;e.rtp.some(a=>a.codec==="opus"?(n=a.payload,!0):!1),n>0&&(e.rtcpFb||(e.rtcpFb=[]),t.includes(e.mid)&&!e.rtcpFb.some(a=>a.payload===n&&a.type==="nack")&&e.rtcpFb.push({payload:n,type:"nack"}),i.includes(e.mid)&&e.fmtp.some(a=>a.payload===n?(a.config.includes("stereo=1")||(a.config+=";stereo=1"),!0):!1))}function ensureVideoDDExtensionForSVC(e){var i,t,n,a;const o=(t=(i=e.rtp.at(0))===null||i===void 0?void 0:i.codec)===null||t===void 0?void 0:t.toLowerCase();if(!isSVCCodec(o))return;let d=0;((n=e.ext)===null||n===void 0?void 0:n.some(f=>f.uri===ddExtensionURI?!0:(f.value>d&&(d=f.value),!1)))||(a=e.ext)===null||a===void 0||a.push({value:d+1,uri:ddExtensionURI})}function extractStereoAndNackAudioFromOffer(e){var i;const t=[],n=[],a=parse((i=e.sdp)!==null&&i!==void 0?i:"");let o=0;return a.media.forEach(d=>{var s;d.type==="audio"&&(d.rtp.some(f=>f.codec==="opus"?(o=f.payload,!0):!1),!((s=d.rtcpFb)===null||s===void 0)&&s.some(f=>f.payload===o&&f.type==="nack")&&n.push(d.mid),d.fmtp.some(f=>f.payload===o?(f.config.includes("sprop-stereo=1")&&t.push(d.mid),!0):!1))}),{stereoMids:t,nackMids:n}}class RegionUrlProvider{constructor(i,t){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(i),this.token=t}isCloud(){return isCloud(this.serverUrl)}async getNextBestRegionUrl(i){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=await this.fetchRegionSettings(i));const t=this.regionSettings.regions.filter(n=>!this.attemptedRegions.find(a=>a.url===n.url));if(t.length>0){const n=t[0];return this.attemptedRegions.push(n),livekitLogger.debug("next region: ".concat(n.region)),n.url}else return null}resetAttempts(){this.attemptedRegions=[]}async fetchRegionSettings(i){const t=await fetch("".concat(getCloudConfigUrl(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:i});if(t.ok){const n=await t.json();return this.lastUpdateAt=Date.now(),n}else throw new ConnectionError("Could not fetch region settings: ".concat(t.statusText),t.status===401?0:void 0,t.status)}}function getCloudConfigUrl(e){return"".concat(e.protocol.replace("ws","http"),"//").concat(e.host,"/settings")}class VideoPreset{constructor(i,t,n,a){this.width=i,this.height=t,this.encoding={maxBitrate:n,maxFramerate:a}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}const backupCodecs=["vp8","h264"];function isBackupCodec(e){return!!backupCodecs.find(i=>i===e)}function isCodecEqual(e,i){return(e==null?void 0:e.toLowerCase().replace(/audio\/|video\//y,""))===(i==null?void 0:i.toLowerCase().replace(/audio\/|video\//y,""))}var AudioPresets;(function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:2e4},e.music={maxBitrate:32e3},e.musicStereo={maxBitrate:48e3},e.musicHighQuality={maxBitrate:64e3},e.musicHighQualityStereo={maxBitrate:96e3}})(AudioPresets||(AudioPresets={}));const VideoPresets={h90:new VideoPreset(160,90,6e4,15),h180:new VideoPreset(320,180,12e4,15),h216:new VideoPreset(384,216,18e4,15),h360:new VideoPreset(640,360,3e5,20),h540:new VideoPreset(960,540,6e5,25),h720:new VideoPreset(1280,720,17e5,30),h1080:new VideoPreset(1920,1080,3e6,30),h1440:new VideoPreset(2560,1440,5e6,30),h2160:new VideoPreset(3840,2160,8e6,30)},VideoPresets43={h120:new VideoPreset(160,120,8e4,15),h180:new VideoPreset(240,180,1e5,15),h240:new VideoPreset(320,240,15e4,15),h360:new VideoPreset(480,360,225e3,20),h480:new VideoPreset(640,480,3e5,20),h540:new VideoPreset(720,540,45e4,25),h720:new VideoPreset(960,720,15e5,30),h1080:new VideoPreset(1440,1080,25e5,30),h1440:new VideoPreset(1920,1440,35e5,30)},ScreenSharePresets={h360fps3:new VideoPreset(640,360,2e5,3),h720fps5:new VideoPreset(1280,720,4e5,5),h720fps15:new VideoPreset(1280,720,1e6,15),h1080fps15:new VideoPreset(1920,1080,15e5,15),h1080fps30:new VideoPreset(1920,1080,3e6,30)},publishDefaults={audioBitrate:AudioPresets.music.maxBitrate,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:ScreenSharePresets.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:"vp8",backupCodec:{codec:"vp8",encoding:VideoPresets.h540.encoding}},audioDefaults={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},videoDefaults={resolution:VideoPresets.h720.resolution},roomOptionDefaults={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new DefaultReconnectPolicy,disconnectOnPageLeave:!0,expWebAudioMix:!1},roomConnectOptionDefaults={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3};var RoomEvent;(function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.StateChanged="connectionStateChanged",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.DCBufferStatusChanged="dcBufferStatusChanged"})(RoomEvent||(RoomEvent={}));var ParticipantEvent;(function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged"})(ParticipantEvent||(ParticipantEvent={}));var EngineEvent;(function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.DCBufferStatusChanged="dcBufferStatusChanged"})(EngineEvent||(EngineEvent={}));var TrackEvent;(function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged"})(TrackEvent||(TrackEvent={}));const BACKGROUND_REACTION_DELAY=5e3,recycledElements=[];class Track extends eventsExports.EventEmitter{constructor(i,t){super(),this.attachedElements=[],this.isMuted=!1,this.streamState=Track.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),BACKGROUND_REACTION_DELAY):this.handleAppVisibilityChanged()},this.setMaxListeners(100),this.kind=t,this._mediaStreamTrack=i,this._mediaStreamID=i.id,this.source=Track.Source.Unknown}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(i){let t="audio";this.kind===Track.Kind.Video&&(t="video"),this.attachedElements.length===0&&Track.Kind.Video&&this.addAppVisibilityListener(),i||(t==="audio"&&(recycledElements.forEach(a=>{a.parentElement===null&&!i&&(i=a)}),i&&recycledElements.splice(recycledElements.indexOf(i),1)),i||(i=document.createElement(t))),this.attachedElements.includes(i)||this.attachedElements.push(i),attachToElement(this._mediaStreamTrack,i);const n=i.srcObject.getTracks();return n.some(a=>a.kind==="audio")&&i.play().then(()=>{this.emit(TrackEvent.AudioPlaybackStarted)}).catch(a=>{a.name==="NotAllowedError"?this.emit(TrackEvent.AudioPlaybackFailed,a):livekitLogger.warn("could not playback audio",a),i&&n.some(o=>o.kind==="video")&&a.name==="NotAllowedError"&&(i.muted=!0,i.play().catch(()=>{}))}),this.emit(TrackEvent.ElementAttached,i),i}detach(i){try{if(i){detachTrack(this._mediaStreamTrack,i);const n=this.attachedElements.indexOf(i);return n>=0&&(this.attachedElements.splice(n,1),this.recycleElement(i),this.emit(TrackEvent.ElementDetached,i)),i}const t=[];return this.attachedElements.forEach(n=>{detachTrack(this._mediaStreamTrack,n),t.push(n),this.recycleElement(n),this.emit(TrackEvent.ElementDetached,n)}),this.attachedElements=[],t}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval)}recycleElement(i){if(i instanceof HTMLAudioElement){let t=!0;i.pause(),recycledElements.forEach(n=>{n.parentElement||(t=!1)}),t&&recycledElements.push(i)}}async handleAppVisibilityChanged(){this.isInBackground=document.visibilityState==="hidden"}addAppVisibilityListener(){isWeb()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){isWeb()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function attachToElement(e,i){let t;i.srcObject instanceof MediaStream?t=i.srcObject:t=new MediaStream;let n;e.kind==="audio"?n=t.getAudioTracks():n=t.getVideoTracks(),n.includes(e)||(n.forEach(a=>{t.removeTrack(a)}),t.addTrack(e)),i.autoplay=!0,i.muted=t.getAudioTracks().length===0,i instanceof HTMLVideoElement&&(i.playsInline=!0),i.srcObject!==t&&(i.srcObject=t,(isSafari()||isFireFox())&&i instanceof HTMLVideoElement&&setTimeout(()=>{i.srcObject=t,i.play().catch(()=>{})},0))}function detachTrack(e,i){if(i.srcObject instanceof MediaStream){const t=i.srcObject;t.removeTrack(e),t.getTracks().length>0?i.srcObject=t:i.srcObject=null}}(function(e){let i;(function(c){c.Audio="audio",c.Video="video",c.Unknown="unknown"})(i=e.Kind||(e.Kind={}));let t;(function(c){c.Camera="camera",c.Microphone="microphone",c.ScreenShare="screen_share",c.ScreenShareAudio="screen_share_audio",c.Unknown="unknown"})(t=e.Source||(e.Source={}));let n;(function(c){c.Active="active",c.Paused="paused",c.Unknown="unknown"})(n=e.StreamState||(e.StreamState={}));function a(c){switch(c){case i.Audio:return TrackType.AUDIO;case i.Video:return TrackType.VIDEO;default:return TrackType.UNRECOGNIZED}}e.kindToProto=a;function o(c){switch(c){case TrackType.AUDIO:return i.Audio;case TrackType.VIDEO:return i.Video;default:return i.Unknown}}e.kindFromProto=o;function d(c){switch(c){case t.Camera:return TrackSource.CAMERA;case t.Microphone:return TrackSource.MICROPHONE;case t.ScreenShare:return TrackSource.SCREEN_SHARE;case t.ScreenShareAudio:return TrackSource.SCREEN_SHARE_AUDIO;default:return TrackSource.UNRECOGNIZED}}e.sourceToProto=d;function s(c){switch(c){case TrackSource.CAMERA:return t.Camera;case TrackSource.MICROPHONE:return t.Microphone;case TrackSource.SCREEN_SHARE:return t.ScreenShare;case TrackSource.SCREEN_SHARE_AUDIO:return t.ScreenShareAudio;default:return t.Unknown}}e.sourceFromProto=s;function f(c){switch(c){case StreamState.ACTIVE:return n.Active;case StreamState.PAUSED:return n.Paused;default:return n.Unknown}}e.streamStateFromProto=f})(Track||(Track={}));const lossyDataChannel="_lossy",reliableDataChannel="_reliable",minReconnectWait=2*1e3,leaveReconnect="leave-reconnect";var PCState;(function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"})(PCState||(PCState={}));class RTCEngine extends eventsExports.EventEmitter{get isClosed(){return this._isClosed}constructor(i){super(),this.options=i,this.rtcConfig={},this.peerConnectionTimeout=roomConnectOptionDefaults.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=PCState.New,this._isClosed=!0,this.pendingTrackResolvers={},this.hasPublished=!1,this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.handleDataChannel=async t=>{let{channel:n}=t;if(n){if(n.label===reliableDataChannel)this.reliableDCSub=n;else if(n.label===lossyDataChannel)this.lossyDCSub=n;else return;livekitLogger.debug("on data channel ".concat(n.id,", ").concat(n.label)),n.onmessage=this.handleDataMessage}},this.handleDataMessage=async t=>{var n,a;const o=await this.dataProcessLock.lock();try{let d;if(t.data instanceof ArrayBuffer)d=t.data;else if(t.data instanceof Blob)d=await t.data.arrayBuffer();else{livekitLogger.error("unsupported data type",t.data);return}const s=DataPacket.decode(new Uint8Array(d));((n=s.value)===null||n===void 0?void 0:n.$case)==="speaker"?this.emit(EngineEvent.ActiveSpeakersUpdate,s.value.speaker.speakers):((a=s.value)===null||a===void 0?void 0:a.$case)==="user"&&this.emit(EngineEvent.DataPacketReceived,s.value.user,s.kind)}finally{o()}},this.handleDataError=t=>{const a=t.currentTarget.maxRetransmits===0?"lossy":"reliable";if(t instanceof ErrorEvent){const{error:o}=t.error;livekitLogger.error("DataChannel error on ".concat(a,": ").concat(t.message),o)}else livekitLogger.error("Unknown DataChannel Error on ".concat(a),t)},this.handleBufferedAmountLow=t=>{const a=t.currentTarget.maxRetransmits===0?DataPacket_Kind.LOSSY:DataPacket_Kind.RELIABLE;this.updateAndEmitDCBufferStatus(a)},this.handleDisconnect=(t,n)=>{if(this._isClosed)return;livekitLogger.warn("".concat(t," disconnected")),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const a=s=>{livekitLogger.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(s,"ms. giving up")),this.emit(EngineEvent.Disconnected),this.close()},o=Date.now()-this.reconnectStart;let d=this.getNextRetryDelay({elapsedMs:o,retryCount:this.reconnectAttempts});if(d===null){a(o);return}t===leaveReconnect&&(d=0),livekitLogger.debug("reconnecting in ".concat(d,"ms")),this.clearReconnectTimeout(),this.url&&this.token&&isCloud(new URL(this.url))&&(this.regionUrlProvider=new RegionUrlProvider(this.url,this.token)),this.reconnectTimeout=CriticalTimers.setTimeout(()=>this.attemptReconnect(n),d)},this.waitForRestarted=()=>new Promise((t,n)=>{this.pcState===PCState.Connected&&t();const a=()=>{this.off(EngineEvent.Disconnected,o),t()},o=()=>{this.off(EngineEvent.Restarted,a),n()};this.once(EngineEvent.Restarted,a),this.once(EngineEvent.Disconnected,o)}),this.updateAndEmitDCBufferStatus=t=>{const n=this.isBufferStatusLow(t);typeof n<"u"&&n!==this.dcBufferStatus.get(t)&&(this.dcBufferStatus.set(t,n),this.emit(EngineEvent.DCBufferStatusChanged,n,t))},this.isBufferStatusLow=t=>{const n=this.dataChannelForKind(t);if(n)return n.bufferedAmount<=n.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.isReconnecting&&(this.clearReconnectTimeout(),this.attemptReconnect(ReconnectReason.RR_SIGNAL_DISCONNECTED))},this.client=new SignalClient,this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Mutex,this.dataProcessLock=new Mutex,this.dcBufferStatus=new Map([[DataPacket_Kind.LOSSY,!0],[DataPacket_Kind.RELIABLE,!0]])}async join(i,t,n,a){this.url=i,this.token=t,this.signalOpts=n;try{this.joinAttempts+=1;const o=await this.client.join(i,t,n,a);return this._isClosed=!1,this.subscriberPrimary=o.subscriberPrimary,this.publisher||this.configure(o),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=o.clientConfiguration,o}catch(o){if(o instanceof ConnectionError&&o.reason===1&&(livekitLogger.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts)),this.joinAttempts<this.maxJoinAttempts))return this.join(i,t,n,a);throw o}}async close(){const i=await this.closingLock.lock();if(this.isClosed){i();return}try{this._isClosed=!0,this.emit(EngineEvent.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),this.publisher&&this.publisher.pc.signalingState!=="closed"&&(this.publisher.pc.getSenders().forEach(t=>{var n,a;try{!((n=this.publisher)===null||n===void 0)&&n.pc.removeTrack&&((a=this.publisher)===null||a===void 0||a.pc.removeTrack(t))}catch(o){livekitLogger.warn("could not removeTrack",{error:o})}}),this.publisher.close(),this.publisher=void 0),this.subscriber&&(this.subscriber.close(),this.subscriber=void 0),await this.client.close()}finally{i()}}addTrack(i){if(this.pendingTrackResolvers[i.cid])throw new TrackInvalidError("a track with the same ID has already been published");return new Promise((t,n)=>{const a=setTimeout(()=>{delete this.pendingTrackResolvers[i.cid],n(new ConnectionError("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[i.cid]={resolve:o=>{clearTimeout(a),t(o)},reject:()=>{clearTimeout(a),n(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(i)})}removeTrack(i){var t;if(i.track&&this.pendingTrackResolvers[i.track.id]){const{reject:n}=this.pendingTrackResolvers[i.track.id];n&&n(),delete this.pendingTrackResolvers[i.track.id]}try{return(t=this.publisher)===null||t===void 0||t.pc.removeTrack(i),!0}catch(n){livekitLogger.warn("failed to remove track",{error:n,method:"removeTrack"})}return!1}updateMuteStatus(i,t){this.client.sendMuteTrack(i,t)}get dataSubscriberReadyState(){var i;return(i=this.reliableDCSub)===null||i===void 0?void 0:i.readyState}async getConnectedServerAddress(){if(this.primaryPC!==void 0)return getConnectedAddress(this.primaryPC)}configure(i){var t;if(this.publisher||this.subscriber)return;this.participantSid=(t=i.participant)===null||t===void 0?void 0:t.sid;const n=this.makeRTCConfiguration(i);this.publisher=new PCTransport(n),this.subscriber=new PCTransport(n),this.emit(EngineEvent.TransportsCreated,this.publisher,this.subscriber),this.publisher.pc.onicecandidate=s=>{s.candidate&&(livekitLogger.trace("adding ICE candidate for peer",s.candidate),this.client.sendIceCandidate(s.candidate,SignalTarget.PUBLISHER))},this.subscriber.pc.onicecandidate=s=>{s.candidate&&this.client.sendIceCandidate(s.candidate,SignalTarget.SUBSCRIBER)},this.publisher.onOffer=s=>{this.client.sendOffer(s)};let a=this.publisher.pc,o=this.subscriber.pc,d=i.subscriberPrimary;d&&(a=this.subscriber.pc,o=this.publisher.pc,this.subscriber.pc.ondatachannel=this.handleDataChannel),this.primaryPC=a,a.onconnectionstatechange=async()=>{if(livekitLogger.debug("primary PC state changed ".concat(a.connectionState)),a.connectionState==="connected"){const s=this.pcState===PCState.New;this.pcState=PCState.Connected,s&&this.emit(EngineEvent.Connected,i)}else a.connectionState==="failed"&&this.pcState===PCState.Connected&&(this.pcState=PCState.Disconnected,this.handleDisconnect("primary peerconnection",d?ReconnectReason.RR_SUBSCRIBER_FAILED:ReconnectReason.RR_PUBLISHER_FAILED))},o.onconnectionstatechange=async()=>{livekitLogger.debug("secondary PC state changed ".concat(o.connectionState)),o.connectionState==="failed"&&this.handleDisconnect("secondary peerconnection",d?ReconnectReason.RR_PUBLISHER_FAILED:ReconnectReason.RR_SUBSCRIBER_FAILED)},this.subscriber.pc.ontrack=s=>{this.emit(EngineEvent.MediaTrackAdded,s.track,s.streams[0],s.receiver)},this.createDataChannels(),this.client.onAnswer=async s=>{this.publisher&&(livekitLogger.debug("received server answer",{RTCSdpType:s.type,signalingState:this.publisher.pc.signalingState}),await this.publisher.setRemoteDescription(s))},this.client.onTrickle=(s,f)=>{!this.publisher||!this.subscriber||(livekitLogger.trace("got ICE candidate from peer",{candidate:s,target:f}),f===SignalTarget.PUBLISHER?this.publisher.addIceCandidate(s):this.subscriber.addIceCandidate(s))},this.client.onOffer=async s=>{if(!this.subscriber)return;livekitLogger.debug("received server offer",{RTCSdpType:s.type,signalingState:this.subscriber.pc.signalingState}),await this.subscriber.setRemoteDescription(s);const f=await this.subscriber.createAndSetAnswer();this.client.sendAnswer(f)},this.client.onLocalTrackPublished=s=>{livekitLogger.debug("received trackPublishedResponse",s);const{resolve:f}=this.pendingTrackResolvers[s.cid];if(!f){livekitLogger.error("missing track resolver for ".concat(s.cid));return}delete this.pendingTrackResolvers[s.cid],f(s.track)},this.client.onTokenRefresh=s=>{this.token=s},this.client.onClose=()=>{this.handleDisconnect("signal",ReconnectReason.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=s=>{s!=null&&s.canReconnect?(this.fullReconnectOnNext=!0,this.primaryPC=void 0,this.handleDisconnect(leaveReconnect)):(this.emit(EngineEvent.Disconnected,s==null?void 0:s.reason),this.close()),livekitLogger.trace("leave request",{leave:s})}}makeRTCConfiguration(i){const t=_objectSpread2({},this.rtcConfig);if(i.iceServers&&!t.iceServers){const n=[];i.iceServers.forEach(a=>{const o={urls:a.urls};a.username&&(o.username=a.username),a.credential&&(o.credential=a.credential),n.push(o)}),t.iceServers=n}return i.clientConfiguration&&i.clientConfiguration.forceRelay===ClientConfigSetting.ENABLED&&(t.iceTransportPolicy="relay"),t.sdpSemantics="unified-plan",t.continualGatheringPolicy="gather_continually",t}createDataChannels(){this.publisher&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.publisher.pc.createDataChannel(lossyDataChannel,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.publisher.pc.createDataChannel(reliableDataChannel,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}setPreferredCodec(i,t,n){if(!("getCapabilities"in RTCRtpSender))return;const a=RTCRtpSender.getCapabilities(t);if(!a)return;livekitLogger.debug("get capabilities",a);const o=[],d=[],s=[];a.codecs.forEach(f=>{const c=f.mimeType.toLowerCase();if(c==="audio/opus"){o.push(f);return}if(!(c==="video/".concat(n))){s.push(f);return}if(n==="h264"){f.sdpFmtpLine&&f.sdpFmtpLine.includes("profile-level-id=42e01f")?o.push(f):d.push(f);return}o.push(f)}),supportsSetCodecPreferences(i)&&i.setCodecPreferences(o.concat(d,s))}async createSender(i,t,n){if(supportsTransceiver())return this.createTransceiverRTCRtpSender(i,t,n);if(supportsAddTrack())return livekitLogger.debug("using add-track fallback"),this.createRTCRtpSender(i.mediaStreamTrack);throw new UnexpectedConnectionState("Required webRTC APIs not supported on this device")}async createSimulcastSender(i,t,n,a){if(supportsTransceiver())return this.createSimulcastTransceiverSender(i,t,n,a);if(supportsAddTrack())return livekitLogger.debug("using add-track fallback"),this.createRTCRtpSender(i.mediaStreamTrack);throw new UnexpectedConnectionState("Cannot stream on this device")}async createTransceiverRTCRtpSender(i,t,n){if(!this.publisher)throw new UnexpectedConnectionState("publisher is closed");const a={direction:"sendonly"};n&&(a.sendEncodings=n);const o=await this.publisher.pc.addTransceiver(i.mediaStreamTrack,a);return i.kind===Track.Kind.Video&&t.videoCodec&&(this.setPreferredCodec(o,i.kind,t.videoCodec),i.codec=t.videoCodec),o.sender}async createSimulcastTransceiverSender(i,t,n,a){if(!this.publisher)throw new UnexpectedConnectionState("publisher is closed");const o={direction:"sendonly"};a&&(o.sendEncodings=a);const d=await this.publisher.pc.addTransceiver(t.mediaStreamTrack,o);if(n.videoCodec)return this.setPreferredCodec(d,i.kind,n.videoCodec),i.setSimulcastTrackSender(n.videoCodec,d.sender),d.sender}async createRTCRtpSender(i){if(!this.publisher)throw new UnexpectedConnectionState("publisher is closed");return this.publisher.pc.addTrack(i)}async attemptReconnect(i){var t,n,a;if(!this._isClosed&&!this.attemptingReconnect){(((t=this.clientConfiguration)===null||t===void 0?void 0:t.resumeConnection)===ClientConfigSetting.DISABLED||((a=(n=this.primaryPC)===null||n===void 0?void 0:n.signalingState)!==null&&a!==void 0?a:"closed")==="closed")&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?await this.restartConnection():await this.resumeConnection(i),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let d=!0;o instanceof UnexpectedConnectionState?(livekitLogger.debug("received unrecoverable error",{error:o}),d=!1):o instanceof SignalReconnectError||(this.fullReconnectOnNext=!0),d?this.handleDisconnect("reconnect",ReconnectReason.RR_UNKOWN):(livekitLogger.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up")),this.emit(EngineEvent.Disconnected),await this.close())}finally{this.attemptingReconnect=!1}}}getNextRetryDelay(i){try{return this.reconnectPolicy.nextRetryDelayInMs(i)}catch(t){livekitLogger.warn("encountered error in reconnect policy",{error:t})}return null}async restartConnection(i){var t,n,a,o,d;try{if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");livekitLogger.info("reconnecting, attempt: ".concat(this.reconnectAttempts)),this.emit(EngineEvent.Restarting),this.client.isConnected&&await this.client.sendLeave(),await this.client.close(),this.primaryPC=void 0,(t=this.publisher)===null||t===void 0||t.close(),this.publisher=void 0,(n=this.subscriber)===null||n===void 0||n.close(),this.subscriber=void 0;let s;try{if(!this.signalOpts)throw livekitLogger.warn("attempted connection restart, without signal options present"),new SignalReconnectError;s=await this.join(i??this.url,this.token,this.signalOpts)}catch(f){throw f instanceof ConnectionError&&f.reason===0?new UnexpectedConnectionState("could not reconnect, token might be expired"):new SignalReconnectError}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");this.client.setReconnected(),this.emit(EngineEvent.SignalRestarted,s),await this.waitForPCReconnected(),(a=this.regionUrlProvider)===null||a===void 0||a.resetAttempts(),this.emit(EngineEvent.Restarted)}catch(s){const f=await((o=this.regionUrlProvider)===null||o===void 0?void 0:o.getNextBestRegionUrl());if(f){await this.restartConnection(f);return}else throw(d=this.regionUrlProvider)===null||d===void 0||d.resetAttempts(),s}}async resumeConnection(i){var t;if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");if(!this.publisher||!this.subscriber)throw new UnexpectedConnectionState("publisher and subscriber connections unset");livekitLogger.info("resuming signal connection, attempt ".concat(this.reconnectAttempts)),this.emit(EngineEvent.Resuming);try{const n=await this.client.reconnect(this.url,this.token,this.participantSid,i);if(n){const a=this.makeRTCConfiguration(n);this.publisher.pc.setConfiguration(a),this.subscriber.pc.setConfiguration(a)}}catch(n){let a="";throw n instanceof Error&&(a=n.message),n instanceof ConnectionError&&n.reason===0?new UnexpectedConnectionState("could not reconnect, token might be expired"):new SignalReconnectError(a)}if(this.emit(EngineEvent.SignalResumed),this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");this.subscriber.restartingIce=!0,this.hasPublished&&await this.publisher.createAndSendOffer({iceRestart:!0}),await this.waitForPCReconnected(),this.client.setReconnected(),((t=this.reliableDC)===null||t===void 0?void 0:t.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(EngineEvent.Resumed)}async waitForPCInitialConnection(i,t){if(this.pcState!==PCState.Connected){if(this.pcState!==PCState.New)throw new UnexpectedConnectionState("Expected peer connection to be new on initial connection");return new Promise((n,a)=>{const o=()=>{livekitLogger.warn("closing engine"),CriticalTimers.clearTimeout(s),a(new ConnectionError("room connection has been cancelled",3))};t!=null&&t.signal.aborted&&o(),t==null||t.signal.addEventListener("abort",o);const d=()=>{CriticalTimers.clearTimeout(s),t==null||t.signal.removeEventListener("abort",o),n()},s=CriticalTimers.setTimeout(()=>{this.off(EngineEvent.Connected,d),a(new ConnectionError("could not establish pc connection"))},i??this.peerConnectionTimeout);this.once(EngineEvent.Connected,d)})}}async waitForPCReconnected(){var i;const t=Date.now();let n=t;for(this.pcState=PCState.Reconnecting,livekitLogger.debug("waiting for peer connection to reconnect");n-t<this.peerConnectionTimeout&&this.primaryPC!==void 0;){if(n-t>minReconnectWait&&((i=this.primaryPC)===null||i===void 0?void 0:i.connectionState)==="connected"&&(this.pcState=PCState.Connected),this.pcState===PCState.Connected)return;await sleep(100),n=Date.now()}throw new ConnectionError("could not establish PC connection")}async sendDataPacket(i,t){const n=DataPacket.encode(i).finish();await this.ensurePublisherConnected(t);const a=this.dataChannelForKind(t);a&&a.send(n),this.updateAndEmitDCBufferStatus(t)}async ensureDataTransportConnected(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;var n,a,o;const d=t?this.subscriber:this.publisher,s=t?"Subscriber":"Publisher";if(!d)throw new ConnectionError("".concat(s," connection not set"));!t&&!(!((n=this.publisher)===null||n===void 0)&&n.isICEConnected)&&((a=this.publisher)===null||a===void 0?void 0:a.pc.iceConnectionState)!=="checking"&&this.negotiate();const f=this.dataChannelForKind(i,t);if((f==null?void 0:f.readyState)==="open")return;const c=new Date().getTime()+this.peerConnectionTimeout;for(;new Date().getTime()<c;){if(d.isICEConnected&&((o=this.dataChannelForKind(i,t))===null||o===void 0?void 0:o.readyState)==="open")return;await sleep(50)}throw new ConnectionError("could not establish ".concat(s," connection, state: ").concat(d.pc.iceConnectionState))}async ensurePublisherConnected(i){await this.ensureDataTransportConnected(i,!1)}verifyTransport(){return!(!this.primaryPC||this.primaryPC.connectionState==="closed"||this.primaryPC.connectionState==="failed"||this.hasPublished&&this.subscriberPrimary&&(!this.publisher||this.publisher.pc.connectionState==="closed"||this.publisher.pc.connectionState==="failed")||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return new Promise((i,t)=>{if(!this.publisher){t(new NegotiationError("publisher is not defined"));return}this.hasPublished=!0;const n=()=>{livekitLogger.debug("engine disconnected while negotiation was ongoing"),o(),i()};this.on(EngineEvent.Closing,n);const a=setTimeout(()=>{t("negotiation timed out"),this.handleDisconnect("negotiation",ReconnectReason.RR_SIGNAL_DISCONNECTED)},this.peerConnectionTimeout),o=()=>{clearTimeout(a),this.off(EngineEvent.Closing,n)};this.publisher.once(PCEvents.NegotiationStarted,()=>{var d;(d=this.publisher)===null||d===void 0||d.once(PCEvents.NegotiationComplete,()=>{o(),i()})}),this.publisher.negotiate(d=>{o(),t(d),d instanceof NegotiationError&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",ReconnectReason.RR_UNKOWN)})})}dataChannelForKind(i,t){if(t){if(i===DataPacket_Kind.LOSSY)return this.lossyDCSub;if(i===DataPacket_Kind.RELIABLE)return this.reliableDCSub}else{if(i===DataPacket_Kind.LOSSY)return this.lossyDC;if(i===DataPacket_Kind.RELIABLE)return this.reliableDC}}failNext(){this.shouldFailNext=!0}clearReconnectTimeout(){this.reconnectTimeout&&CriticalTimers.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){isWeb()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){isWeb()&&window.removeEventListener("online",this.handleBrowserOnLine)}}async function getConnectedAddress(e){var i;let t="";const n=new Map,a=new Map;if((await e.getStats()).forEach(s=>{switch(s.type){case"transport":t=s.selectedCandidatePairId;break;case"candidate-pair":t===""&&s.selected&&(t=s.id),n.set(s.id,s);break;case"remote-candidate":a.set(s.id,"".concat(s.address,":").concat(s.port));break}}),t==="")return;const d=(i=n.get(t))===null||i===void 0?void 0:i.remoteCandidateId;if(d!==void 0)return a.get(d)}class SignalReconnectError extends Error{}const monitorFrequency=2e3;function computeBitrate(e,i){if(!i)return 0;let t,n;return"bytesReceived"in e?(t=e.bytesReceived,n=i.bytesReceived):"bytesSent"in e&&(t=e.bytesSent,n=i.bytesSent),t===void 0||n===void 0||e.timestamp===void 0||i.timestamp===void 0?0:(t-n)*8*1e3/(e.timestamp-i.timestamp)}const defaultDimensionsTimeout=2*1e3;class LocalTrack extends Track{constructor(i,t,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;super(i,t),this._isUpstreamPaused=!1,this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this.emit(TrackEvent.Ended,this)},this._mediaStreamTrack.addEventListener("ended",this.handleEnded),this.constraints=n??i.getConstraints(),this.reacquireTrack=!1,this.providedByUser=a,this.muteLock=new Mutex,this.pauseUpstreamLock=new Mutex}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Track.Kind.Video)return;const{width:i,height:t}=this._mediaStreamTrack.getSettings();if(i&&t)return{width:i,height:t}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}async waitForDimensions(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultDimensionsTimeout;if(this.kind===Track.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");const t=Date.now();for(;Date.now()-t<i;){const n=this.dimensions;if(n)return n;await sleep(50)}throw new TrackInvalidError("unable to get track dimensions after timeout")}async getDeviceId(){if(this.source===Track.Source.ScreenShare)return;const{deviceId:i,groupId:t}=this._mediaStreamTrack.getSettings(),n=this.kind===Track.Kind.Audio?"audioinput":"videoinput";return DeviceManager.getInstance().normalizeDeviceId(n,i,t)}async mute(){return this.setTrackMuted(!0),this}async unmute(){return this.setTrackMuted(!1),this}async replaceTrack(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!this.sender)throw new TrackInvalidError("unable to replace an unpublished track");return this.attachedElements.forEach(n=>{detachTrack(this._mediaStreamTrack,n)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this.providedByUser||this._mediaStreamTrack.stop(),i.addEventListener("ended",this.handleEnded),livekitLogger.debug("replace MediaStreamTrack"),this.sender&&await this.sender.replaceTrack(i),this._mediaStreamTrack=i,this._mediaStreamTrack.enabled=!this.isMuted,await this.resumeUpstream(),this.attachedElements.forEach(n=>{attachToElement(i,n)}),this.mediaStream=new MediaStream([i]),this.providedByUser=t,this}async restart(i){i||(i=this.constraints),livekitLogger.debug("restarting track with constraints",i);const t={audio:!1,video:!1};this.kind===Track.Kind.Video?t.video=i:t.audio=i,this.attachedElements.forEach(o=>{detachTrack(this._mediaStreamTrack,o)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const n=await navigator.mediaDevices.getUserMedia(t),a=n.getTracks()[0];return a.addEventListener("ended",this.handleEnded),livekitLogger.debug("re-acquired MediaStreamTrack"),this.sender&&await this.sender.replaceTrack(a),this._mediaStreamTrack=a,await this.resumeUpstream(),this.attachedElements.forEach(o=>{attachToElement(a,o)}),this.mediaStream=n,this.constraints=i,this.emit(TrackEvent.Restarted,this),this}setTrackMuted(i){livekitLogger.debug("setting ".concat(this.kind," track ").concat(i?"muted":"unmuted")),!(this.isMuted===i&&this._mediaStreamTrack.enabled!==i)&&(this.isMuted=i,this._mediaStreamTrack.enabled=!i,this.emit(i?TrackEvent.Muted:TrackEvent.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),isMobile()&&(livekitLogger.debug("visibility changed, is in Background: ".concat(this.isInBackground)),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(livekitLogger.debug("track needs to be reaquired, restarting ".concat(this.source)),await this.restart(),this.reacquireTrack=!1))}async pauseUpstream(){const i=await this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){livekitLogger.warn("unable to pause upstream for an unpublished track");return}this._isUpstreamPaused=!0,this.emit(TrackEvent.UpstreamPaused,this);const t=this.kind===Track.Kind.Audio?getEmptyAudioStreamTrack():getEmptyVideoStreamTrack();await this.sender.replaceTrack(t)}finally{i()}}async resumeUpstream(){const i=await this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){livekitLogger.warn("unable to resume upstream for an unpublished track");return}this._isUpstreamPaused=!1,this.emit(TrackEvent.UpstreamResumed,this),await this.sender.replaceTrack(this._mediaStreamTrack)}finally{i()}}}class LocalAudioTrack extends LocalTrack{constructor(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;super(i,Track.Kind.Audio,t,n),this.stopOnMute=!1,this.monitorSender=async()=>{if(!this.sender){this._currentBitrate=0;return}let a;try{a=await this.getSenderStats()}catch(o){livekitLogger.error("could not get audio sender stats",{error:o});return}a&&this.prevStats&&(this._currentBitrate=computeBitrate(a,this.prevStats)),this.prevStats=a},this.checkForSilence()}async setDeviceId(i){this.constraints.deviceId!==i&&(this.constraints.deviceId=i,this.isMuted||await this.restartTrack())}async mute(){const i=await this.muteLock.lock();try{return this.source===Track.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(livekitLogger.debug("stopping mic track"),this._mediaStreamTrack.stop()),await super.mute(),this}finally{i()}}async unmute(){const i=await this.muteLock.lock();try{return this.source===Track.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended")&&!this.isUserProvided&&(livekitLogger.debug("reacquiring mic track"),await this.restartTrack()),await super.unmute(),this}finally{i()}}async restartTrack(i){let t;if(i){const n=constraintsForOptions({audio:i});typeof n.audio!="boolean"&&(t=n.audio)}await this.restart(t)}async restart(i){const t=await super.restart(i);return this.checkForSilence(),t}startMonitor(){isWeb()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},monitorFrequency)))}async getSenderStats(){var i;if(!(!((i=this.sender)===null||i===void 0)&&i.getStats))return;const t=await this.sender.getStats();let n;return t.forEach(a=>{a.type==="outbound-rtp"&&(n={type:"audio",streamId:a.id,packetsSent:a.packetsSent,packetsLost:a.packetsLost,bytesSent:a.bytesSent,timestamp:a.timestamp,roundTripTime:a.roundTripTime,jitter:a.jitter})}),n}async checkForSilence(){const i=await detectSilence(this);return i&&(this.isMuted||livekitLogger.warn("silence detected on local audio track"),this.emit(TrackEvent.AudioSilenceDetected)),i}}const refreshSubscribedCodecAfterNewCodec=5e3;class LocalVideoTrack extends LocalTrack{constructor(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;super(i,Track.Kind.Video,t,n),this.simulcastCodecs=new Map,this.monitorSender=async()=>{if(!this.sender){this._currentBitrate=0;return}let a;try{a=await this.getSenderStats()}catch(d){livekitLogger.error("could not get audio sender stats",{error:d});return}const o=new Map(a.map(d=>[d.rid,d]));if(this.prevStats){let d=0;o.forEach((s,f)=>{var c;const h=(c=this.prevStats)===null||c===void 0?void 0:c.get(f);d+=computeBitrate(s,h)}),this._currentBitrate=d}this.prevStats=o},this.senderLock=new Mutex}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(i){var t;if(this.signalClient=i,!isWeb())return;const n=(t=this.sender)===null||t===void 0?void 0:t.getParameters();n&&(this.encodings=n.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},monitorFrequency))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(i=>{i.mediaStreamTrack.stop()}),super.stop()}async mute(){const i=await this.muteLock.lock();try{return this.source===Track.Source.Camera&&!this.isUserProvided&&(livekitLogger.debug("stopping camera track"),this._mediaStreamTrack.stop()),await super.mute(),this}finally{i()}}async unmute(){const i=await this.muteLock.lock();try{return this.source===Track.Source.Camera&&!this.isUserProvided&&(livekitLogger.debug("reacquiring camera track"),await this.restartTrack()),await super.unmute(),this}finally{i()}}async getSenderStats(){var i;if(!(!((i=this.sender)===null||i===void 0)&&i.getStats))return[];const t=[],n=await this.sender.getStats();return n.forEach(a=>{var o;if(a.type==="outbound-rtp"){const d={type:"video",streamId:a.id,frameHeight:a.frameHeight,frameWidth:a.frameWidth,firCount:a.firCount,pliCount:a.pliCount,nackCount:a.nackCount,packetsSent:a.packetsSent,bytesSent:a.bytesSent,framesSent:a.framesSent,timestamp:a.timestamp,rid:(o=a.rid)!==null&&o!==void 0?o:a.id,retransmittedPacketsSent:a.retransmittedPacketsSent,qualityLimitationReason:a.qualityLimitationReason,qualityLimitationResolutionChanges:a.qualityLimitationResolutionChanges},s=n.get(a.remoteId);s&&(d.jitter=s.jitter,d.packetsLost=s.packetsLost,d.roundTripTime=s.roundTripTime),t.push(d)}}),t}setPublishingQuality(i){const t=[];for(let n=VideoQuality.LOW;n<=VideoQuality.HIGH;n+=1)t.push({quality:n,enabled:n<=i});livekitLogger.debug("setting publishing quality. max quality ".concat(i)),this.setPublishingLayers(t)}async setDeviceId(i){this.constraints.deviceId!==i&&(this.constraints.deviceId=i,this.isMuted||await this.restartTrack())}async restartTrack(i){let t;if(i){const n=constraintsForOptions({video:i});typeof n.video!="boolean"&&(t=n.video)}await this.restart(t)}addSimulcastTrack(i,t){if(this.simulcastCodecs.has(i))throw new Error("".concat(i," already added"));const n={codec:i,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:t};return this.simulcastCodecs.set(i,n),n}setSimulcastTrackSender(i,t){const n=this.simulcastCodecs.get(i);n&&(n.sender=t,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},refreshSubscribedCodecAfterNewCodec))}async setPublishingCodecs(i){if(livekitLogger.debug("setting publishing codecs",{codecs:i,currentCodec:this.codec}),!this.codec&&i.length>0)return await this.setPublishingLayers(i[0].qualities),[];this.subscribedCodecs=i;const t=[];var n=!1,a=!1,o;try{for(var d=_asyncIterator(i),s;n=!(s=await d.next()).done;n=!1){const f=s.value;if(!this.codec||this.codec===f.codec)await this.setPublishingLayers(f.qualities);else{const c=this.simulcastCodecs.get(f.codec);if(livekitLogger.debug("try setPublishingCodec for ".concat(f.codec),c),!c||!c.sender){for(const h of f.qualities)if(h.enabled){t.push(f.codec);break}}else c.encodings&&(livekitLogger.debug("try setPublishingLayersForSender ".concat(f.codec)),await setPublishingLayersForSender(c.sender,c.encodings,f.qualities,this.senderLock))}}}catch(f){a=!0,o=f}finally{try{n&&d.return!=null&&await d.return()}finally{if(a)throw o}}return t}async setPublishingLayers(i){livekitLogger.debug("setting publishing layers",i),!(!this.sender||!this.encodings)&&await setPublishingLayersForSender(this.sender,this.encodings,i,this.senderLock)}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),isMobile()&&this.isInBackground&&this.source===Track.Source.Camera&&(this._mediaStreamTrack.enabled=!1)}}async function setPublishingLayersForSender(e,i,t,n){const a=await n.lock();livekitLogger.debug("setPublishingLayersForSender",{sender:e,qualities:t,senderEncodings:i});try{const o=e.getParameters(),{encodings:d}=o;if(!d)return;if(d.length!==i.length){livekitLogger.warn("cannot set publishing layers, encodings mismatch");return}let s=!1;d.forEach((f,c)=>{var h;let v=(h=f.rid)!==null&&h!==void 0?h:"";v===""&&(v="q");const l=videoQualityForRid(v),u=t.find(p=>p.quality===l);u&&f.active!==u.enabled&&(s=!0,f.active=u.enabled,livekitLogger.debug("setting layer ".concat(u.quality," to ").concat(f.active?"enabled":"disabled")),isFireFox()&&(u.enabled?(f.scaleResolutionDownBy=i[c].scaleResolutionDownBy,f.maxBitrate=i[c].maxBitrate,f.maxFrameRate=i[c].maxFrameRate):(f.scaleResolutionDownBy=4,f.maxBitrate=10,f.maxFrameRate=2)))}),s&&(o.encodings=d,await e.setParameters(o))}finally{a()}}function videoQualityForRid(e){switch(e){case"f":return VideoQuality.HIGH;case"h":return VideoQuality.MEDIUM;case"q":return VideoQuality.LOW;default:return VideoQuality.UNRECOGNIZED}}function videoLayersFromEncodings(e,i,t){return t?t.map(n=>{var a,o,d;const s=(a=n.scaleResolutionDownBy)!==null&&a!==void 0?a:1;let f=videoQualityForRid((o=n.rid)!==null&&o!==void 0?o:"");return f===VideoQuality.UNRECOGNIZED&&t.length===1&&(f=VideoQuality.HIGH),{quality:f,width:e/s,height:i/s,bitrate:(d=n.maxBitrate)!==null&&d!==void 0?d:0,ssrc:0}}):[{quality:VideoQuality.HIGH,width:e,height:i,bitrate:0,ssrc:0}]}class RemoteTrack extends Track{constructor(i,t,n,a){super(i,n),this.sid=t,this.receiver=a}setMuted(i){this.isMuted!==i&&(this.isMuted=i,this._mediaStreamTrack.enabled=!i,this.emit(i?TrackEvent.Muted:TrackEvent.Unmuted,this))}setMediaStream(i){this.mediaStream=i,i.onremovetrack=()=>{this.receiver=void 0,this._currentBitrate=0,this.emit(TrackEvent.Ended,this)}}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),monitorFrequency))}}class RemoteAudioTrack extends RemoteTrack{constructor(i,t,n,a,o){super(i,t,Track.Kind.Audio,n),this.monitorReceiver=async()=>{if(!this.receiver){this._currentBitrate=0;return}const d=await this.getReceiverStats();d&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(d,this.prevStats)),this.prevStats=d},this.audioContext=a,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(i){var t;for(const n of this.attachedElements)this.audioContext?(t=this.gainNode)===null||t===void 0||t.gain.setTargetAtTime(i,0,.1):n.volume=i;this.elementVolume=i}getVolume(){if(this.elementVolume)return this.elementVolume;let i=0;return this.attachedElements.forEach(t=>{t.volume>i&&(i=t.volume)}),i}async setSinkId(i){this.sinkId=i,await Promise.all(this.attachedElements.map(t=>{if(supportsSetSinkId(t))return t.setSinkId(i)}))}attach(i){const t=this.attachedElements.length===0;return i?super.attach(i):i=super.attach(),this.elementVolume&&(i.volume=this.elementVolume),this.sinkId&&supportsSetSinkId(i)&&i.setSinkId(this.sinkId),this.audioContext&&t&&(livekitLogger.debug("using audio context mapping"),this.connectWebAudio(this.audioContext,i),i.volume=0,i.muted=!0),i}detach(i){let t;return i?(t=super.detach(i),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(t=super.detach(),this.disconnectWebAudio()),t}setAudioContext(i){this.audioContext=i,i&&this.attachedElements.length>0?this.connectWebAudio(i,this.attachedElements[0]):i||this.disconnectWebAudio()}setWebAudioPlugins(i){this.webAudioPluginNodes=i,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(i,t){this.disconnectWebAudio(),this.sourceNode=i.createMediaStreamSource(t.srcObject);let n=this.sourceNode;this.webAudioPluginNodes.forEach(a=>{n.connect(a),n=a}),this.gainNode=i.createGain(),n.connect(this.gainNode),this.gainNode.connect(i.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),i.state!=="running"&&i.resume().then(()=>{i.state!=="running"&&this.emit(TrackEvent.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(a=>{this.emit(TrackEvent.AudioPlaybackFailed,a)})}disconnectWebAudio(){var i,t;(i=this.gainNode)===null||i===void 0||i.disconnect(),(t=this.sourceNode)===null||t===void 0||t.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}async getReceiverStats(){if(!this.receiver||!this.receiver.getStats)return;const i=await this.receiver.getStats();let t;return i.forEach(n=>{n.type==="inbound-rtp"&&(t={type:"audio",timestamp:n.timestamp,jitter:n.jitter,bytesReceived:n.bytesReceived,concealedSamples:n.concealedSamples,concealmentEvents:n.concealmentEvents,silentConcealedSamples:n.silentConcealedSamples,silentConcealmentEvents:n.silentConcealmentEvents,totalAudioEnergy:n.totalAudioEnergy,totalSamplesDuration:n.totalSamplesDuration})}),t}}const REACTION_DELAY=100;class RemoteVideoTrack extends RemoteTrack{constructor(i,t,n,a){super(i,t,Track.Kind.Video,n),this.elementInfos=[],this.isObserved=!1,this.monitorReceiver=async()=>{if(!this.receiver){this._currentBitrate=0;return}const o=await this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(o,this.prevStats)),this.prevStats=o},this.debouncedHandleResize=r(()=>{this.updateDimensions()},REACTION_DELAY),this.adaptiveStreamSettings=a}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this.isAdaptiveStream&&!this.isObserved&&livekitLogger.warn("When using adaptiveStream, you need to use remoteVideoTrack.attach() to add the track to a HTMLVideoElement, otherwise your video tracks might never start"),this._mediaStreamTrack}setMuted(i){super.setMuted(i),this.attachedElements.forEach(t=>{i?detachTrack(this._mediaStreamTrack,t):attachToElement(this._mediaStreamTrack,t)})}attach(i){if(i?super.attach(i):i=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(t=>t.element===i)===void 0){const t=new HTMLElementInfo(i);this.observeElementInfo(t)}return i}observeElementInfo(i){this.adaptiveStreamSettings&&this.elementInfos.find(t=>t===i)===void 0?(i.handleResize=()=>{this.debouncedHandleResize()},i.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(i),i.observe(),this.debouncedHandleResize(),this.updateVisibility(),this.isObserved=!0):livekitLogger.warn("visibility resize observer not triggered")}stopObservingElementInfo(i){if(!this.isAdaptiveStream){livekitLogger.warn("stopObservingElementInfo ignored");return}const t=this.elementInfos.filter(n=>n===i);for(const n of t)n.stopObserving();this.elementInfos=this.elementInfos.filter(n=>n!==i),this.updateVisibility()}detach(i){let t=[];if(i)return this.stopObservingElement(i),super.detach(i);t=super.detach();for(const n of t)this.stopObservingElement(n);return t}getDecoderImplementation(){var i;return(i=this.prevStats)===null||i===void 0?void 0:i.decoderImplementation}async getReceiverStats(){if(!this.receiver||!this.receiver.getStats)return;const i=await this.receiver.getStats();let t;return i.forEach(n=>{n.type==="inbound-rtp"&&(t={type:"video",framesDecoded:n.framesDecoded,framesDropped:n.framesDropped,framesReceived:n.framesReceived,packetsReceived:n.packetsReceived,packetsLost:n.packetsLost,frameWidth:n.frameWidth,frameHeight:n.frameHeight,pliCount:n.pliCount,firCount:n.firCount,nackCount:n.nackCount,jitter:n.jitter,timestamp:n.timestamp,bytesReceived:n.bytesReceived,decoderImplementation:n.decoderImplementation})}),t}stopObservingElement(i){const t=this.elementInfos.filter(n=>n.element===i);for(const n of t)n.stopObserving();this.elementInfos=this.elementInfos.filter(n=>n.element!==i)}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),this.isAdaptiveStream&&this.updateVisibility()}updateVisibility(){var i,t;const n=this.elementInfos.reduce((s,f)=>Math.max(s,f.visibilityChangedAt||0),0),a=!((t=(i=this.adaptiveStreamSettings)===null||i===void 0?void 0:i.pauseVideoInBackground)!==null&&t!==void 0)||t?this.isInBackground:!1,o=this.elementInfos.some(s=>s.pictureInPicture),d=this.elementInfos.some(s=>s.visible)&&!a||o;if(this.lastVisible!==d){if(!d&&Date.now()-n<REACTION_DELAY){CriticalTimers.setTimeout(()=>{this.updateVisibility()},REACTION_DELAY);return}this.lastVisible=d,this.emit(TrackEvent.VisibilityChanged,d,this)}}updateDimensions(){var i,t,n,a;let o=0,d=0;for(const s of this.elementInfos){const f=(t=(i=this.adaptiveStreamSettings)===null||i===void 0?void 0:i.pixelDensity)!==null&&t!==void 0?t:1,c=f==="screen"?getDevicePixelRatio():f,h=s.width()*c,v=s.height()*c;h+v>o+d&&(o=h,d=v)}((n=this.lastDimensions)===null||n===void 0?void 0:n.width)===o&&((a=this.lastDimensions)===null||a===void 0?void 0:a.height)===d||(this.lastDimensions={width:o,height:d},this.emit(TrackEvent.VideoDimensionsChanged,this.lastDimensions,this))}}class HTMLElementInfo{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(i,t){this.onVisibilityChanged=n=>{var a;const{target:o,isIntersecting:d}=n;o===this.element&&(this.isIntersecting=d,this.visibilityChangedAt=Date.now(),(a=this.handleVisibilityChanged)===null||a===void 0||a.call(this))},this.onEnterPiP=()=>{var n;this.isPiP=!0,(n=this.handleVisibilityChanged)===null||n===void 0||n.call(this)},this.onLeavePiP=()=>{var n;this.isPiP=!1,(n=this.handleVisibilityChanged)===null||n===void 0||n.call(this)},this.element=i,this.isIntersecting=t??isElementInViewport(i),this.isPiP=isWeb()&&document.pictureInPictureElement===i,this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.isIntersecting=isElementInViewport(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=()=>{var i;(i=this.handleResize)===null||i===void 0||i.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,getIntersectionObserver().observe(this.element),getResizeObserver().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}stopObserving(){var i,t;(i=getIntersectionObserver())===null||i===void 0||i.unobserve(this.element),(t=getResizeObserver())===null||t===void 0||t.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}function isElementInViewport(e){let i=e.offsetTop,t=e.offsetLeft;const n=e.offsetWidth,a=e.offsetHeight,{hidden:o}=e,{opacity:d,display:s}=getComputedStyle(e);for(;e.offsetParent;)e=e.offsetParent,i+=e.offsetTop,t+=e.offsetLeft;return i<window.pageYOffset+window.innerHeight&&t<window.pageXOffset+window.innerWidth&&i+a>window.pageYOffset&&t+n>window.pageXOffset&&!o&&(d!==""?parseFloat(d)>0:!0)&&s!=="none"}class TrackPublication extends eventsExports.EventEmitter{constructor(i,t,n){super(),this.metadataMuted=!1,this.handleMuted=()=>{this.emit(TrackEvent.Muted)},this.handleUnmuted=()=>{this.emit(TrackEvent.Unmuted)},this.setMaxListeners(100),this.kind=i,this.trackSid=t,this.trackName=n,this.source=Track.Source.Unknown}setTrack(i){this.track&&(this.track.off(TrackEvent.Muted,this.handleMuted),this.track.off(TrackEvent.Unmuted,this.handleUnmuted)),this.track=i,i&&(i.on(TrackEvent.Muted,this.handleMuted),i.on(TrackEvent.Unmuted,this.handleUnmuted))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get audioTrack(){if(this.track instanceof LocalAudioTrack||this.track instanceof RemoteAudioTrack)return this.track}get videoTrack(){if(this.track instanceof LocalVideoTrack||this.track instanceof RemoteVideoTrack)return this.track}updateInfo(i){this.trackSid=i.sid,this.trackName=i.name,this.source=Track.sourceFromProto(i.source),this.mimeType=i.mimeType,this.kind===Track.Kind.Video&&i.width>0&&(this.dimensions={width:i.width,height:i.height},this.simulcasted=i.simulcast),this.trackInfo=i,livekitLogger.trace("update publication info",{info:i})}}(function(e){(function(i){i.Desired="desired",i.Subscribed="subscribed",i.Unsubscribed="unsubscribed"})(e.SubscriptionStatus||(e.SubscriptionStatus={})),function(i){i.Allowed="allowed",i.NotAllowed="not_allowed"}(e.PermissionStatus||(e.PermissionStatus={}))})(TrackPublication||(TrackPublication={}));class LocalTrackPublication extends TrackPublication{get isUpstreamPaused(){var i;return(i=this.track)===null||i===void 0?void 0:i.isUpstreamPaused}constructor(i,t,n){super(i,t.sid,t.name),this.track=void 0,this.handleTrackEnded=()=>{this.emit(TrackEvent.Ended)},this.updateInfo(t),this.setTrack(n)}setTrack(i){this.track&&this.track.off(TrackEvent.Ended,this.handleTrackEnded),super.setTrack(i),i&&i.on(TrackEvent.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}async mute(){var i;return(i=this.track)===null||i===void 0?void 0:i.mute()}async unmute(){var i;return(i=this.track)===null||i===void 0?void 0:i.unmute()}async pauseUpstream(){var i;await((i=this.track)===null||i===void 0?void 0:i.pauseUpstream())}async resumeUpstream(){var i;await((i=this.track)===null||i===void 0?void 0:i.resumeUpstream())}}var ConnectionQuality;(function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Unknown="unknown"})(ConnectionQuality||(ConnectionQuality={}));function qualityFromProto(e){switch(e){case ConnectionQuality$1.EXCELLENT:return ConnectionQuality.Excellent;case ConnectionQuality$1.GOOD:return ConnectionQuality.Good;case ConnectionQuality$1.POOR:return ConnectionQuality.Poor;default:return ConnectionQuality.Unknown}}class Participant extends eventsExports.EventEmitter{constructor(i,t,n,a){super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ConnectionQuality.Unknown,this.setMaxListeners(100),this.sid=i,this.identity=t,this.name=n,this.metadata=a,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(i){for(const[,t]of this.tracks)if(t.source===i)return t}getTrackByName(i){for(const[,t]of this.tracks)if(t.trackName===i)return t}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var i;const t=this.getTrack(Track.Source.Camera);return!(!((i=t==null?void 0:t.isMuted)!==null&&i!==void 0)||i)}get isMicrophoneEnabled(){var i;const t=this.getTrack(Track.Source.Microphone);return!(!((i=t==null?void 0:t.isMuted)!==null&&i!==void 0)||i)}get isScreenShareEnabled(){return!!this.getTrack(Track.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(this.participantInfo.joinedAt*1e3):new Date}updateInfo(i){return this.participantInfo&&this.participantInfo.sid===i.sid&&this.participantInfo.version>i.version?!1:(this.identity=i.identity,this.sid=i.sid,this.setName(i.name),this.setMetadata(i.metadata),i.permission&&this.setPermissions(i.permission),this.participantInfo=i,livekitLogger.trace("update participant info",{info:i}),!0)}setMetadata(i){const t=this.metadata!==i,n=this.metadata;this.metadata=i,t&&this.emit(ParticipantEvent.ParticipantMetadataChanged,n)}setName(i){const t=this.name!==i;this.name=i,t&&this.emit(ParticipantEvent.ParticipantNameChanged,i)}setPermissions(i){var t,n,a,o,d;const s=this.permissions,f=i.canPublish!==((t=this.permissions)===null||t===void 0?void 0:t.canPublish)||i.canSubscribe!==((n=this.permissions)===null||n===void 0?void 0:n.canSubscribe)||i.canPublishData!==((a=this.permissions)===null||a===void 0?void 0:a.canPublishData)||i.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||i.recorder!==((d=this.permissions)===null||d===void 0?void 0:d.recorder)||i.canPublishSources.length!==this.permissions.canPublishSources.length||i.canPublishSources.some((c,h)=>{var v;return c!==((v=this.permissions)===null||v===void 0?void 0:v.canPublishSources[h])});return this.permissions=i,f&&this.emit(ParticipantEvent.ParticipantPermissionsChanged,s),f}setIsSpeaking(i){i!==this.isSpeaking&&(this.isSpeaking=i,i&&(this.lastSpokeAt=new Date),this.emit(ParticipantEvent.IsSpeakingChanged,i))}setConnectionQuality(i){const t=this._connectionQuality;this._connectionQuality=qualityFromProto(i),t!==this._connectionQuality&&this.emit(ParticipantEvent.ConnectionQualityChanged,this._connectionQuality)}addTrackPublication(i){i.on(TrackEvent.Muted,()=>{this.emit(ParticipantEvent.TrackMuted,i)}),i.on(TrackEvent.Unmuted,()=>{this.emit(ParticipantEvent.TrackUnmuted,i)});const t=i;switch(t.track&&(t.track.sid=i.trackSid),this.tracks.set(i.trackSid,i),i.kind){case Track.Kind.Audio:this.audioTracks.set(i.trackSid,i);break;case Track.Kind.Video:this.videoTracks.set(i.trackSid,i);break}}}function trackPermissionToProto(e){var i,t,n;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return{participantIdentity:(i=e.participantIdentity)!==null&&i!==void 0?i:"",participantSid:(t=e.participantSid)!==null&&t!==void 0?t:"",allTracks:(n=e.allowAll)!==null&&n!==void 0?n:!1,trackSids:e.allowedTrackSids||[]}}class RemoteTrackPublication extends TrackPublication{constructor(i,t,n){super(i,t.sid,t.name),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=VideoQuality.HIGH,this.handleEnded=a=>{this.setTrack(void 0),this.emit(TrackEvent.Ended,a)},this.handleVisibilityChange=a=>{livekitLogger.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(a),{trackSid:this.trackSid}),this.disabled=!a,this.emitTrackUpdate()},this.handleVideoDimensionsChange=a=>{livekitLogger.debug("adaptivestream video dimensions ".concat(a.width,"x").concat(a.height),{trackSid:this.trackSid}),this.videoDimensions=a,this.emitTrackUpdate()},this.subscribed=n,this.updateInfo(t)}setSubscribed(i){const t=this.subscriptionStatus,n=this.permissionStatus;this.subscribed=i,i&&(this.allowed=!0);const a={trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[{participantSid:"",trackSids:[this.trackSid]}]};this.emit(TrackEvent.UpdateSubscription,a),this.emitSubscriptionUpdateIfChanged(t),this.emitPermissionUpdateIfChanged(n)}get subscriptionStatus(){return this.subscribed===!1?TrackPublication.SubscriptionStatus.Unsubscribed:super.isSubscribed?TrackPublication.SubscriptionStatus.Subscribed:TrackPublication.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?TrackPublication.PermissionStatus.Allowed:TrackPublication.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(i){!this.isManualOperationAllowed()||this.disabled===!i||(this.disabled=!i,this.emitTrackUpdate())}setVideoQuality(i){!this.isManualOperationAllowed()||this.currentVideoQuality===i||(this.currentVideoQuality=i,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(i){var t,n;this.isManualOperationAllowed()&&(((t=this.videoDimensions)===null||t===void 0?void 0:t.width)===i.width&&((n=this.videoDimensions)===null||n===void 0?void 0:n.height)===i.height||(this.track instanceof RemoteVideoTrack&&(this.videoDimensions=i),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(i){this.isManualOperationAllowed()&&this.track instanceof RemoteVideoTrack&&this.fps!==i&&(this.fps=i,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(i){const t=this.subscriptionStatus,n=this.permissionStatus,a=this.track;a!==i&&(a&&(a.off(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),a.off(TrackEvent.VisibilityChanged,this.handleVisibilityChange),a.off(TrackEvent.Ended,this.handleEnded),a.detach(),a.stopMonitor(),this.emit(TrackEvent.Unsubscribed,a)),super.setTrack(i),i&&(i.sid=this.trackSid,i.on(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.on(TrackEvent.VisibilityChanged,this.handleVisibilityChange),i.on(TrackEvent.Ended,this.handleEnded),this.emit(TrackEvent.Subscribed,i)),this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t))}setAllowed(i){const t=this.subscriptionStatus,n=this.permissionStatus;this.allowed=i,this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t)}updateInfo(i){super.updateInfo(i);const t=this.metadataMuted;this.metadataMuted=i.muted,this.track?this.track.setMuted(i.muted):t!==i.muted&&this.emit(i.muted?TrackEvent.Muted:TrackEvent.Unmuted)}emitSubscriptionUpdateIfChanged(i){const t=this.subscriptionStatus;i!==t&&this.emit(TrackEvent.SubscriptionStatusChanged,t,i)}emitPermissionUpdateIfChanged(i){this.permissionStatus!==i&&this.emit(TrackEvent.SubscriptionPermissionChanged,this.permissionStatus,i)}isManualOperationAllowed(){return this.kind===Track.Kind.Video&&this.isAdaptiveStream?(livekitLogger.warn("adaptive stream is enabled, cannot change video track settings",{trackSid:this.trackSid}),!1):this.isDesired?!0:(livekitLogger.warn("cannot update track settings when not subscribed",{trackSid:this.trackSid}),!1)}get isAdaptiveStream(){return this.track instanceof RemoteVideoTrack&&this.track.isAdaptiveStream}emitTrackUpdate(){const i=UpdateTrackSettings.fromPartial({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(i.width=this.videoDimensions.width,i.height=this.videoDimensions.height):this.currentVideoQuality!==void 0?i.quality=this.currentVideoQuality:i.quality=VideoQuality.HIGH,this.emit(TrackEvent.UpdateSettings,i)}}class RemoteParticipant extends Participant{static fromParticipantInfo(i,t){return new RemoteParticipant(i,t.sid,t.identity,t.name,t.metadata)}constructor(i,t,n,a,o){super(t,n||"",a,o),this.signalClient=i,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map}addTrackPublication(i){super.addTrackPublication(i),i.on(TrackEvent.UpdateSettings,t=>{livekitLogger.debug("send update settings",t),this.signalClient.sendUpdateTrackSettings(t)}),i.on(TrackEvent.UpdateSubscription,t=>{t.participantTracks.forEach(n=>{n.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(t)}),i.on(TrackEvent.SubscriptionPermissionChanged,t=>{this.emit(ParticipantEvent.TrackSubscriptionPermissionChanged,i,t)}),i.on(TrackEvent.SubscriptionStatusChanged,t=>{this.emit(ParticipantEvent.TrackSubscriptionStatusChanged,i,t)}),i.on(TrackEvent.Subscribed,t=>{this.emit(ParticipantEvent.TrackSubscribed,t,i)}),i.on(TrackEvent.Unsubscribed,t=>{this.emit(ParticipantEvent.TrackUnsubscribed,t,i)})}getTrack(i){const t=super.getTrack(i);if(t)return t}getTrackByName(i){const t=super.getTrackByName(i);if(t)return t}setVolume(i){this.volume=i;const t=this.getTrack(Track.Source.Microphone);t&&t.track&&t.track.setVolume(i)}getVolume(){const i=this.getTrack(Track.Source.Microphone);return i&&i.track?i.track.getVolume():this.volume}addSubscribedMediaTrack(i,t,n,a,o,d){let s=this.getTrackPublication(t);if(s||t.startsWith("TR")||this.tracks.forEach(h=>{!s&&i.kind===h.kind.toString()&&(s=h)}),!s){if(d===0){livekitLogger.error("could not find published track",{participant:this.sid,trackSid:t}),this.emit(ParticipantEvent.TrackSubscriptionFailed,t);return}d===void 0&&(d=20),setTimeout(()=>{this.addSubscribedMediaTrack(i,t,n,a,o,d-1)},150);return}if(i.readyState==="ended"){livekitLogger.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",{participant:this.sid,trackSid:t}),this.emit(ParticipantEvent.TrackSubscriptionFailed,t);return}const f=i.kind==="video";let c;return f?c=new RemoteVideoTrack(i,t,a,o):c=new RemoteAudioTrack(i,t,a,this.audioContext,this.audioOutput),c.source=s.source,c.isMuted=s.isMuted,c.setMediaStream(n),c.start(),s.setTrack(c),this.volume!==void 0&&c instanceof RemoteAudioTrack&&c.source===Track.Source.Microphone&&c.setVolume(this.volume),s}get hasMetadata(){return!!this.participantInfo}getTrackPublication(i){return this.tracks.get(i)}updateInfo(i){if(!super.updateInfo(i))return!1;const t=new Map,n=new Map;return i.tracks.forEach(a=>{var o;let d=this.getTrackPublication(a.sid);if(d)d.updateInfo(a);else{const s=Track.kindFromProto(a.type);if(!s)return;d=new RemoteTrackPublication(s,a,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe),d.updateInfo(a),n.set(a.sid,d);const f=Array.from(this.tracks.values()).find(c=>c.source===(d==null?void 0:d.source));f&&d.source!==Track.Source.Unknown&&livekitLogger.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(d.source),{oldTrack:f,newTrack:d,participant:this,participantInfo:i}),this.addTrackPublication(d)}t.set(a.sid,d)}),this.tracks.forEach(a=>{t.has(a.trackSid)||(livekitLogger.trace("detected removed track on remote participant, unpublishing",{publication:a,participantSid:this.sid}),this.unpublishTrack(a.trackSid,!0))}),n.forEach(a=>{this.emit(ParticipantEvent.TrackPublished,a)}),!0}unpublishTrack(i,t){const n=this.tracks.get(i);if(!n)return;switch(this.tracks.delete(i),n.kind){case Track.Kind.Audio:this.audioTracks.delete(i);break;case Track.Kind.Video:this.videoTracks.delete(i);break}const{track:a}=n;a&&(a.stop(),n.setTrack(void 0)),t&&this.emit(ParticipantEvent.TrackUnpublished,n)}setAudioContext(i){this.audioContext=i,this.audioTracks.forEach(t=>t.track instanceof RemoteAudioTrack&&t.track.setAudioContext(i))}async setAudioOutput(i){this.audioOutput=i;const t=[];this.audioTracks.forEach(n=>{var a;n.track instanceof RemoteAudioTrack&&t.push(n.track.setSinkId((a=i.deviceId)!==null&&a!==void 0?a:"default"))}),await Promise.all(t)}emit(i){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return livekitLogger.trace("participant event",{participant:this.sid,event:i,args:n}),super.emit(i,...n)}}function mediaTrackToLocalTrack(e,i){switch(e.kind){case"audio":return new LocalAudioTrack(e,i,!1);case"video":return new LocalVideoTrack(e,i,!1);default:throw new TrackInvalidError("unsupported track type: ".concat(e.kind))}}const presets169=Object.values(VideoPresets),presets43=Object.values(VideoPresets43),presetsScreenShare=Object.values(ScreenSharePresets),defaultSimulcastPresets169=[VideoPresets.h180,VideoPresets.h360],defaultSimulcastPresets43=[VideoPresets43.h180,VideoPresets43.h360],computeDefaultScreenShareSimulcastPresets=e=>[{scaleResolutionDownBy:2,fps:3}].map(t=>{var n;return new VideoPreset(Math.floor(e.width/t.scaleResolutionDownBy),Math.floor(e.height/t.scaleResolutionDownBy),Math.max(15e4,Math.floor(e.encoding.maxBitrate/(t.scaleResolutionDownBy**2*(((n=e.encoding.maxFramerate)!==null&&n!==void 0?n:30)/t.fps)))),t.fps)}),videoRids=["q","h","f"];function computeVideoEncodings(e,i,t,n){var a,o;let d=n==null?void 0:n.videoEncoding;e&&(d=n==null?void 0:n.screenShareEncoding);const s=n==null?void 0:n.simulcast,f=n==null?void 0:n.scalabilityMode,c=n==null?void 0:n.videoCodec;if(!d&&!s&&!f||!i||!t)return[{}];d||(d=determineAppropriateEncoding(e,i,t,c),livekitLogger.debug("using video encoding",d));const h=new VideoPreset(i,t,d.maxBitrate,d.maxFramerate);if(f&&isSVCCodec(c)){livekitLogger.debug("using svc with scalabilityMode ".concat(f));const u=[];switch(f){case"L3T3":for(let p=0;p<3;p+=1)u.push({rid:videoRids[2-p],scaleResolutionDownBy:2**p,maxBitrate:d.maxBitrate/3**p,maxFramerate:h.encoding.maxFramerate,scalabilityMode:"L3T3"});return livekitLogger.debug("encodings",u),u;default:throw new Error("unsupported scalabilityMode: ".concat(f))}}if(!s)return[d];let v=[];e?v=(a=sortPresets(n==null?void 0:n.screenShareSimulcastLayers))!==null&&a!==void 0?a:defaultSimulcastLayers(e,h):v=(o=sortPresets(n==null?void 0:n.videoSimulcastLayers))!==null&&o!==void 0?o:defaultSimulcastLayers(e,h);let l;if(v.length>0){const u=v[0];v.length>1&&([,l]=v);const p=Math.max(i,t);if(p>=960&&l)return encodingsFromPresets(i,t,[u,l,h]);if(p>=480)return encodingsFromPresets(i,t,[u,h])}return encodingsFromPresets(i,t,[h])}function computeTrackBackupEncodings(e,i,t){var n,a,o,d;if(!t.backupCodec||t.backupCodec.codec===t.videoCodec)return;i!==t.backupCodec.codec&&livekitLogger.warn("requested a different codec than specified as backup",{serverRequested:i,backup:t.backupCodec.codec}),t.videoCodec=i,t.videoEncoding=t.backupCodec.encoding;const s=e.mediaStreamTrack.getSettings(),f=(n=s.width)!==null&&n!==void 0?n:(a=e.dimensions)===null||a===void 0?void 0:a.width,c=(o=s.height)!==null&&o!==void 0?o:(d=e.dimensions)===null||d===void 0?void 0:d.height;return computeVideoEncodings(e.source===Track.Source.ScreenShare,f,c,t)}function determineAppropriateEncoding(e,i,t,n){const a=presetsForResolution(e,i,t);let{encoding:o}=a[0];const d=Math.max(i,t);for(let s=0;s<a.length;s+=1){const f=a[s];if(o=f.encoding,f.width>=d)break}if(n)switch(n){case"av1":o=_objectSpread2({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=_objectSpread2({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function presetsForResolution(e,i,t){if(e)return presetsScreenShare;const n=i>t?i/t:t/i;return Math.abs(n-16/9)<Math.abs(n-4/3)?presets169:presets43}function defaultSimulcastLayers(e,i){if(e)return computeDefaultScreenShareSimulcastPresets(i);const{width:t,height:n}=i,a=t>n?t/n:n/t;return Math.abs(a-16/9)<Math.abs(a-4/3)?defaultSimulcastPresets169:defaultSimulcastPresets43}function encodingsFromPresets(e,i,t){const n=[];return t.forEach((a,o)=>{if(o>=videoRids.length)return;const d=Math.min(e,i),f={rid:videoRids[o],scaleResolutionDownBy:Math.max(1,d/Math.min(a.width,a.height)),maxBitrate:a.encoding.maxBitrate};a.encoding.maxFramerate&&(f.maxFramerate=a.encoding.maxFramerate),n.push(f)}),n}function sortPresets(e){if(e)return e.sort((i,t)=>{const{encoding:n}=i,{encoding:a}=t;return n.maxBitrate>a.maxBitrate?1:n.maxBitrate<a.maxBitrate?-1:n.maxBitrate===a.maxBitrate&&n.maxFramerate&&a.maxFramerate?n.maxFramerate>a.maxFramerate?1:-1:0})}class LocalParticipant extends Participant{constructor(i,t,n,a){super(i,t),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Future)},this.handleReconnected=()=>{var o,d;(d=(o=this.reconnectFuture)===null||o===void 0?void 0:o.resolve)===null||d===void 0||d.call(o),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var o,d;(d=(o=this.reconnectFuture)===null||o===void 0?void 0:o.reject)===null||d===void 0||d.call(o,"Got disconnected during publishing attempt"),this.reconnectFuture=void 0},this.updateTrackSubscriptionPermissions=()=>{livekitLogger.debug("updating track subscription permissions",{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions}),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(o=>trackPermissionToProto(o)))},this.onTrackUnmuted=o=>{this.onTrackMuted(o,o.isUpstreamPaused)},this.onTrackMuted=(o,d)=>{if(d===void 0&&(d=!0),!o.sid){livekitLogger.error("could not update mute status for unpublished track",o);return}this.engine.updateMuteStatus(o.sid,d)},this.onTrackUpstreamPaused=o=>{livekitLogger.debug("upstream paused"),this.onTrackMuted(o,!0)},this.onTrackUpstreamResumed=o=>{livekitLogger.debug("upstream resumed"),this.onTrackMuted(o,o.isMuted)},this.handleSubscribedQualityUpdate=async o=>{var d,s;if(!(!((d=this.roomOptions)===null||d===void 0)&&d.dynacast))return;const f=this.videoTracks.get(o.trackSid);if(!f){livekitLogger.warn("received subscribed quality update for unknown track",{method:"handleSubscribedQualityUpdate",sid:o.trackSid});return}if(o.subscribedCodecs.length>0){if(!f.videoTrack)return;const p=await f.videoTrack.setPublishingCodecs(o.subscribedCodecs);var c=!1,h=!1,v;try{for(var l=_asyncIterator(p),u;c=!(u=await l.next()).done;c=!1){const m=u.value;isBackupCodec(m)&&(livekitLogger.debug("publish ".concat(m," for ").concat(f.videoTrack.sid)),await this.publishAdditionalCodecForTrack(f.videoTrack,m,f.options))}}catch(m){h=!0,v=m}finally{try{c&&l.return!=null&&await l.return()}finally{if(h)throw v}}}else o.subscribedQualities.length>0&&await((s=f.videoTrack)===null||s===void 0?void 0:s.setPublishingLayers(o.subscribedQualities))},this.handleLocalTrackUnpublished=o=>{const d=this.tracks.get(o.trackSid);if(!d){livekitLogger.warn("received unpublished event for unknown track",{method:"handleLocalTrackUnpublished",trackSid:o.trackSid});return}this.unpublishTrack(d.track)},this.handleTrackEnded=async o=>{if(o.source===Track.Source.ScreenShare||o.source===Track.Source.ScreenShareAudio)livekitLogger.debug("unpublishing local track due to TrackEnded",{track:o.sid}),this.unpublishTrack(o);else if(o.isUserProvided)await o.mute();else if(o instanceof LocalAudioTrack||o instanceof LocalVideoTrack)try{if(isWeb())try{const d=await(navigator==null?void 0:navigator.permissions.query({name:o.source===Track.Source.Camera?"camera":"microphone"}));if(d&&d.state==="denied")throw livekitLogger.warn("user has revoked access to ".concat(o.source)),d.onchange=()=>{d.state!=="denied"&&(o.isMuted||o.restartTrack(),d.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}o.isMuted||(livekitLogger.debug("track ended, attempting to use a different device"),await o.restartTrack())}catch{livekitLogger.warn("could not restart track, muting instead"),await o.mute()}},this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=n,this.roomOptions=a,this.setupEngine(n)}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}getTrack(i){const t=super.getTrack(i);if(t)return t}getTrackByName(i){const t=super.getTrackByName(i);if(t)return t}setupEngine(i){this.engine=i,this.engine.client.onRemoteMuteChanged=(t,n)=>{const a=this.tracks.get(t);!a||!a.track||(n?a.mute():a.unmute())},this.engine.client.onSubscribedQualityUpdate=this.handleSubscribedQualityUpdate,this.engine.client.onLocalTrackUnpublished=this.handleLocalTrackUnpublished,this.engine.on(EngineEvent.Connected,this.handleReconnected).on(EngineEvent.Restarted,this.handleReconnected).on(EngineEvent.Resumed,this.handleReconnected).on(EngineEvent.Restarting,this.handleReconnecting).on(EngineEvent.Resuming,this.handleReconnecting).on(EngineEvent.Disconnected,this.handleDisconnected)}setMetadata(i){var t;super.setMetadata(i),this.engine.client.sendUpdateLocalMetadata(i,(t=this.name)!==null&&t!==void 0?t:"")}setName(i){var t;super.setName(i),this.engine.client.sendUpdateLocalMetadata((t=this.metadata)!==null&&t!==void 0?t:"",i)}setCameraEnabled(i,t,n){return this.setTrackEnabled(Track.Source.Camera,i,t,n)}setMicrophoneEnabled(i,t,n){return this.setTrackEnabled(Track.Source.Microphone,i,t,n)}setScreenShareEnabled(i,t,n){return this.setTrackEnabled(Track.Source.ScreenShare,i,t,n)}async setTrackEnabled(i,t,n,a){var o,d;livekitLogger.debug("setTrackEnabled",{source:i,enabled:t});let s=this.getTrack(i);if(t)if(s)await s.unmute();else{let f;if(this.pendingPublishing.has(i)){livekitLogger.info("skipping duplicate published source",{source:i});return}this.pendingPublishing.add(i);try{switch(i){case Track.Source.Camera:f=await this.createTracks({video:(o=n)!==null&&o!==void 0?o:!0});break;case Track.Source.Microphone:f=await this.createTracks({audio:(d=n)!==null&&d!==void 0?d:!0});break;case Track.Source.ScreenShare:f=await this.createScreenTracks(_objectSpread2({},n));break;default:throw new TrackInvalidError(i)}const c=[];for(const v of f)livekitLogger.info("publishing track",{localTrack:v}),c.push(this.publishTrack(v,a));[s]=await Promise.all(c)}catch(c){throw c instanceof Error&&!(c instanceof TrackInvalidError)&&this.emit(ParticipantEvent.MediaDevicesError,c),c}finally{this.pendingPublishing.delete(i)}}else if(s&&s.track)if(i===Track.Source.ScreenShare){s=await this.unpublishTrack(s.track);const f=this.getTrack(Track.Source.ScreenShareAudio);f&&f.track&&this.unpublishTrack(f.track)}else await s.mute();return s}async enableCameraAndMicrophone(){if(!(this.pendingPublishing.has(Track.Source.Camera)||this.pendingPublishing.has(Track.Source.Microphone))){this.pendingPublishing.add(Track.Source.Camera),this.pendingPublishing.add(Track.Source.Microphone);try{const i=await this.createTracks({audio:!0,video:!0});await Promise.all(i.map(t=>this.publishTrack(t)))}finally{this.pendingPublishing.delete(Track.Source.Camera),this.pendingPublishing.delete(Track.Source.Microphone)}}}async createTracks(i){var t,n;const a=mergeDefaultOptions(i,(t=this.roomOptions)===null||t===void 0?void 0:t.audioCaptureDefaults,(n=this.roomOptions)===null||n===void 0?void 0:n.videoCaptureDefaults),o=constraintsForOptions(a);let d;try{d=await navigator.mediaDevices.getUserMedia(o)}catch(s){throw s instanceof Error&&(o.audio&&(this.microphoneError=s),o.video&&(this.cameraError=s)),s}return o.audio&&(this.microphoneError=void 0),o.video&&(this.cameraError=void 0),d.getTracks().map(s=>{const f=s.kind==="audio";f?i.audio:i.video;let c;const h=f?o.audio:o.video;typeof h!="boolean"&&(c=h);const v=mediaTrackToLocalTrack(s,c);return v.kind===Track.Kind.Video?v.source=Track.Source.Camera:v.kind===Track.Kind.Audio&&(v.source=Track.Source.Microphone),v.mediaStream=d,v})}async createScreenTracks(i){var t;i===void 0&&(i={}),i.resolution===void 0&&(i.resolution=ScreenSharePresets.h1080fps15.resolution);let n=!0;if(i.resolution&&(isSafari()?n={width:{max:i.resolution.width},height:{max:i.resolution.height},frameRate:i.resolution.frameRate}:n={width:{ideal:i.resolution.width},height:{ideal:i.resolution.height},frameRate:i.resolution.frameRate}),navigator.mediaDevices.getDisplayMedia===void 0)throw new DeviceUnsupportedError("getDisplayMedia not supported");const a=await navigator.mediaDevices.getDisplayMedia({audio:(t=i.audio)!==null&&t!==void 0?t:!1,video:n,controller:i.controller,selfBrowserSurface:i.selfBrowserSurface,surfaceSwitching:i.surfaceSwitching,systemAudio:i.systemAudio}),o=a.getVideoTracks();if(o.length===0)throw new TrackInvalidError("no video track found");const d=new LocalVideoTrack(o[0],void 0,!1);d.source=Track.Source.ScreenShare;const s=[d];if(a.getAudioTracks().length>0){const f=new LocalAudioTrack(a.getAudioTracks()[0],void 0,!1);f.source=Track.Source.ScreenShareAudio,s.push(f)}return s}async publishTrack(i,t){var n,a,o;if(await((n=this.reconnectFuture)===null||n===void 0?void 0:n.promise),i instanceof LocalTrack&&this.pendingPublishPromises.has(i)&&await this.pendingPublishPromises.get(i),i instanceof MediaStreamTrack)switch(i.kind){case"audio":i=new LocalAudioTrack(i,void 0,!0);break;case"video":i=new LocalVideoTrack(i,void 0,!0);break;default:throw new TrackInvalidError("unsupported MediaStreamTrack kind ".concat(i.kind))}let d;if(this.tracks.forEach(h=>{h.track&&h.track===i&&(d=h)}),d)return livekitLogger.warn("track has already been published, skipping"),d;const s=(t==null?void 0:t.forceStereo)||"channelCount"in i.mediaStreamTrack.getSettings()&&i.mediaStreamTrack.getSettings().channelCount===2||i.mediaStreamTrack.getConstraints().channelCount===2;s&&(t||(t={}),t.dtx===void 0&&livekitLogger.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work."),t.red===void 0&&livekitLogger.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(a=t.dtx)!==null&&a!==void 0||(t.dtx=!1),(o=t.red)!==null&&o!==void 0||(t.red=!1));const f=_objectSpread2(_objectSpread2({},this.roomOptions.publishDefaults),t);f.source&&(i.source=f.source);const c=this.publish(i,f,t,s);this.pendingPublishPromises.set(i,c);try{return await c}catch(h){throw h}finally{this.pendingPublishPromises.delete(i)}}async publish(i,t,n,a){var o,d,s,f;const c=Array.from(this.tracks.values()).find(_=>i instanceof LocalTrack&&_.source===i.source);if(c&&i.source!==Track.Source.Unknown)try{throw Error("publishing a second track with the same source: ".concat(i.source))}catch(_){_ instanceof Error&&livekitLogger.warn(_.message,{oldTrack:c,newTrack:i,trace:_.stack})}t.stopMicTrackOnMute&&i instanceof LocalAudioTrack&&(i.stopOnMute=!0),i.source===Track.Source.ScreenShare&&isFireFox()&&(t.simulcast=!1),t.videoCodec==="av1"&&!supportsAV1()&&(t.videoCodec=void 0),t.videoCodec==="vp9"&&!supportsVP9()&&(t.videoCodec=void 0),i.on(TrackEvent.Muted,this.onTrackMuted),i.on(TrackEvent.Unmuted,this.onTrackUnmuted),i.on(TrackEvent.Ended,this.handleTrackEnded),i.on(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),i.on(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed);const h=AddTrackRequest.fromPartial({cid:i.mediaStreamTrack.id,name:n==null?void 0:n.name,type:Track.kindToProto(i.kind),muted:i.isMuted,source:Track.sourceToProto(i.source),disableDtx:!(!((o=t.dtx)!==null&&o!==void 0)||o),stereo:a,disableRed:!(!((d=t.red)!==null&&d!==void 0)||d)});let v,l;if(i.kind===Track.Kind.Video){let _={width:0,height:0};try{_=await i.waitForDimensions()}catch{livekitLogger.error("could not determine track dimensions")}if(h.width=_.width,h.height=_.height,i instanceof LocalVideoTrack&&(isSVCCodec(t.videoCodec)&&(t.scalabilityMode=(s=t.scalabilityMode)!==null&&s!==void 0?s:"L3T3"),t.videoCodec&&t.backupCodec&&t.videoCodec!==t.backupCodec.codec)){const C=_objectSpread2({},t);C.simulcast=!0,l=computeTrackBackupEncodings(i,t.backupCodec.codec,C),h.simulcastCodecs=[{codec:t.videoCodec,cid:i.mediaStreamTrack.id,enableSimulcastLayers:!0},{codec:t.backupCodec.codec,cid:"",enableSimulcastLayers:!0}]}v=computeVideoEncodings(i.source===Track.Source.ScreenShare,_.width,_.height,t),h.layers=videoLayersFromEncodings(h.width,h.height,l??v)}else i.kind===Track.Kind.Audio&&t.audioBitrate&&(v=[{maxBitrate:t.audioBitrate}]);if(!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");const u=await this.engine.addTrack(h);let p=!1,m=!1;if(u.codecs.forEach(_=>{isCodecEqual(_.mimeType,t.videoCodec)?p=!0:t.backupCodec&&isCodecEqual(_.mimeType,t.backupCodec.codec)&&(m=!0)}),h.simulcastCodecs.length>0){if(!p&&!m)throw Error("cannot publish track, codec not supported by server");if(!p&&t.backupCodec){const _=t.backupCodec;t=_objectSpread2({},t),livekitLogger.debug("primary codec ".concat(t.videoCodec," not supported, fallback to ").concat(_.codec)),t.videoCodec=_.codec,t.videoEncoding=_.encoding,v=l}}const w=new LocalTrackPublication(i.kind,u,i);if(w.options=t,i.sid=u.sid,!this.engine.publisher)throw new UnexpectedConnectionState("publisher is closed");return livekitLogger.debug("publishing ".concat(i.kind," with encodings"),{encodings:v,trackInfo:u}),i.sender=await this.engine.createSender(i,t,v),i.codec&&isSVCCodec(i.codec)&&v&&(!((f=v[0])===null||f===void 0)&&f.maxBitrate)&&this.engine.publisher.setTrackCodecBitrate(h.cid,i.codec,v[0].maxBitrate/1e3),this.engine.negotiate(),i instanceof LocalVideoTrack?i.startMonitor(this.engine.client):i instanceof LocalAudioTrack&&i.startMonitor(),this.addTrackPublication(w),this.emit(ParticipantEvent.LocalTrackPublished,w),w}get isLocal(){return!0}async publishAdditionalCodecForTrack(i,t,n){var a;let o;if(this.tracks.forEach(v=>{v.track&&v.track===i&&(o=v)}),!o)throw new TrackInvalidError("track is not published");if(!(i instanceof LocalVideoTrack))throw new TrackInvalidError("track is not a video track");const d=_objectSpread2(_objectSpread2({},(a=this.roomOptions)===null||a===void 0?void 0:a.publishDefaults),n),s=computeTrackBackupEncodings(i,t,d);if(!s){livekitLogger.info("backup codec has been disabled, ignoring request to add additional codec for track");return}const f=i.addSimulcastTrack(t,s),c=AddTrackRequest.fromPartial({cid:f.mediaStreamTrack.id,type:Track.kindToProto(i.kind),muted:i.isMuted,source:Track.sourceToProto(i.source),sid:i.sid,simulcastCodecs:[{codec:d.videoCodec,cid:f.mediaStreamTrack.id,enableSimulcastLayers:d.simulcast}]});if(c.layers=videoLayersFromEncodings(c.width,c.height,s),!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");const h=await this.engine.addTrack(c);await this.engine.createSimulcastSender(i,f,d,s),this.engine.negotiate(),livekitLogger.debug("published ".concat(t," for track ").concat(i.sid),{encodings:s,trackInfo:h})}async unpublishTrack(i,t){var n,a;const o=this.getPublicationForTrack(i);if(livekitLogger.debug("unpublishing track",{track:i,method:"unpublishTrack"}),!o||!o.track){livekitLogger.warn("track was not unpublished because no publication was found",{track:i,method:"unpublishTrack"});return}i=o.track,i.off(TrackEvent.Muted,this.onTrackMuted),i.off(TrackEvent.Unmuted,this.onTrackUnmuted),i.off(TrackEvent.Ended,this.handleTrackEnded),i.off(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),i.off(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed),t===void 0&&(t=(a=(n=this.roomOptions)===null||n===void 0?void 0:n.stopLocalTrackOnUnpublish)!==null&&a!==void 0?a:!0),t&&i.stop();let d=!1;const s=i.sender;if(i.sender=void 0,this.engine.publisher&&this.engine.publisher.pc.connectionState!=="closed"&&s)try{if(this.engine.removeTrack(s)&&(d=!0),i instanceof LocalVideoTrack){for(const[,f]of i.simulcastCodecs)f.sender&&(this.engine.removeTrack(f.sender)&&(d=!0),f.sender=void 0);i.simulcastCodecs.clear()}}catch(f){livekitLogger.warn("failed to unpublish track",{error:f,method:"unpublishTrack"})}switch(this.tracks.delete(o.trackSid),o.kind){case Track.Kind.Audio:this.audioTracks.delete(o.trackSid);break;case Track.Kind.Video:this.videoTracks.delete(o.trackSid);break}return this.emit(ParticipantEvent.LocalTrackUnpublished,o),o.setTrack(void 0),d&&await this.engine.negotiate(),o}async unpublishTracks(i){return(await Promise.all(i.map(n=>this.unpublishTrack(n)))).filter(n=>n instanceof LocalTrackPublication)}async republishAllTracks(i){const t=[];this.tracks.forEach(n=>{n.track&&(i&&(n.options=_objectSpread2(_objectSpread2({},n.options),i)),t.push(n))}),await Promise.all(t.map(async n=>{const a=n.track;await this.unpublishTrack(a,!1),await this.publishTrack(a,n.options)}))}async publishData(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=Array.isArray(n)?n:n==null?void 0:n.destination,o=[],d=Array.isArray(n)?void 0:n.topic;a!==void 0&&a.forEach(f=>{f instanceof RemoteParticipant?o.push(f.sid):o.push(f)});const s={kind:t,value:{$case:"user",user:{participantSid:this.sid,payload:i,destinationSids:o,topic:d}}};await this.engine.sendDataPacket(s,t)}setTrackSubscriptionPermissions(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=t,this.allParticipantsAllowedToSubscribe=i,this.engine.client.isConnected&&this.updateTrackSubscriptionPermissions()}updateInfo(i){return i.sid!==this.sid||!super.updateInfo(i)?!1:(i.tracks.forEach(t=>{var n,a;const o=this.tracks.get(t.sid);if(o){const d=o.isMuted||((a=(n=o.track)===null||n===void 0?void 0:n.isUpstreamPaused)!==null&&a!==void 0?a:!1);d!==t.muted&&(livekitLogger.debug("updating server mute state after reconcile",{sid:t.sid,muted:d}),this.engine.client.sendMuteTrack(t.sid,d))}}),!0)}getPublicationForTrack(i){let t;return this.tracks.forEach(n=>{const a=n.track;a&&(i instanceof MediaStreamTrack?(a instanceof LocalAudioTrack||a instanceof LocalVideoTrack)&&a.mediaStreamTrack===i&&(t=n):i===a&&(t=n))}),t}publishedTracksInfo(){const i=[];return this.tracks.forEach(t=>{t.track!==void 0&&i.push({cid:t.track.mediaStreamID,track:t.trackInfo})}),i}dataChannelsInfo(){const i=[],t=(n,a)=>{(n==null?void 0:n.id)!==void 0&&n.id!==null&&i.push({label:n.label,id:n.id,target:a})};return t(this.engine.dataChannelForKind(DataPacket_Kind.LOSSY),SignalTarget.PUBLISHER),t(this.engine.dataChannelForKind(DataPacket_Kind.RELIABLE),SignalTarget.PUBLISHER),t(this.engine.dataChannelForKind(DataPacket_Kind.LOSSY,!0),SignalTarget.SUBSCRIBER),t(this.engine.dataChannelForKind(DataPacket_Kind.RELIABLE,!0),SignalTarget.SUBSCRIBER),i}}var ConnectionState;(function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting"})(ConnectionState||(ConnectionState={}));const connectionReconcileFrequency=2*1e3;class Room extends eventsExports.EventEmitter{constructor(i){var t;super(),t=this,this.state=ConnectionState.Disconnected,this.activeSpeakers=[],this.audioEnabled=!0,this.connect=async(n,a,o)=>{const d=await this.disconnectLock.lock();if(this.state===ConnectionState.Connected)return livekitLogger.info("already connected to room ".concat(this.name)),d(),Promise.resolve();if(this.connectFuture)return d(),this.connectFuture.promise;this.setAndEmitConnectionState(ConnectionState.Connecting);const s=new RegionUrlProvider(n,a),f=async(c,h,v)=>{var l;this.abortController&&this.abortController.abort(),this.abortController=new AbortController,d==null||d();try{await this.attemptConnection(v??n,a,o,this.abortController),this.abortController=void 0,c()}catch(u){if(isCloud(new URL(n))&&u instanceof ConnectionError&&u.reason!==3){let p=null;try{p=await s.getNextBestRegionUrl((l=this.abortController)===null||l===void 0?void 0:l.signal)}catch(m){if(m instanceof ConnectionError&&(m.status===401||m.reason===3)){h(m);return}}p?(livekitLogger.debug("initial connection failed, retrying with another region"),await f(c,h,p)):h(u)}else h(u)}};return this.connectFuture=new Future(f,()=>{this.clearConnectionFutures()}),this.connectFuture.promise},this.connectSignal=async(n,a,o,d,s,f)=>{const c=await o.join(n,a,{autoSubscribe:d.autoSubscribe,publishOnly:d.publishOnly,adaptiveStream:typeof s.adaptiveStream=="object"?!0:s.adaptiveStream,maxRetries:d.maxRetries},f.signal);let h=c.serverInfo;if(h||(h={version:c.serverVersion,region:c.serverRegion}),livekitLogger.debug("connected to Livekit Server ".concat(Object.entries(h).map(v=>{let[l,u]=v;return"".concat(l,": ").concat(u)}).join(", "))),!c.serverVersion)throw new UnsupportedServer("unknown server version");return c.serverVersion==="0.15.1"&&this.options.dynacast&&(livekitLogger.debug("disabling dynacast due to server version"),s.dynacast=!1),c},this.applyJoinResponse=n=>{const a=n.participant;this.localParticipant.sid=a.sid,this.localParticipant.identity=a.identity,this.handleParticipantUpdates([a,...n.otherParticipants]),n.room&&this.handleRoomUpdate(n.room)},this.attemptConnection=async(n,a,o,d)=>{var s;this.state===ConnectionState.Reconnecting?(livekitLogger.info("Reconnection attempt replaced by new connection attempt"),this.recreateEngine()):this.maybeCreateEngine(),this.acquireAudioContext(),this.connOptions=_objectSpread2(_objectSpread2({},roomConnectOptionDefaults),o),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const f=await this.connectSignal(n,a,this.engine,this.connOptions,this.options,d);this.applyJoinResponse(f),this.setupLocalParticipantEvents(),this.emit(RoomEvent.SignalConnected)}catch(f){this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish);const c=new ConnectionError("could not establish signal connection");throw f instanceof Error&&(c.message="".concat(c.message,": ").concat(f.message)),f instanceof ConnectionError&&(c.reason=f.reason,c.status=f.status),livekitLogger.debug("error trying to establish signal connection",{error:f}),c}if(d.signal.aborted)throw this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),new ConnectionError("Connection attempt aborted");try{await this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,d)}catch(f){throw this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f}isWeb()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave),(s=navigator.mediaDevices)===null||s===void 0||s.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Connected),this.registerConnectionReconcile()},this.disconnect=async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;var a,o,d,s;const f=await t.disconnectLock.lock();try{if(t.state===ConnectionState.Disconnected){livekitLogger.debug("already disconnected");return}livekitLogger.info("disconnect from room",{identity:t.localParticipant.identity}),(t.state===ConnectionState.Connecting||t.state===ConnectionState.Reconnecting)&&(livekitLogger.warn("abort connection attempt"),(a=t.abortController)===null||a===void 0||a.abort(),(d=(o=t.connectFuture)===null||o===void 0?void 0:o.reject)===null||d===void 0||d.call(o,new ConnectionError("Client initiated disconnect")),t.connectFuture=void 0),!((s=t.engine)===null||s===void 0)&&s.client.isConnected&&await t.engine.client.sendLeave(),t.engine&&await t.engine.close(),t.handleDisconnect(n,DisconnectReason.CLIENT_INITIATED),t.engine=void 0}finally{f()}},this.onPageLeave=async()=>{await this.disconnect()},this.handleRestarting=()=>{this.clearConnectionReconcile();for(const n of this.participants.values())this.handleParticipantDisconnected(n.sid,n);this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting)},this.handleSignalRestarted=async n=>{livekitLogger.debug("signal reconnected to server",{region:n.serverRegion}),this.cachedParticipantSids=[],this.applyJoinResponse(n);try{const a=[];this.localParticipant.tracks.forEach(o=>{o.track&&a.push(o)}),await Promise.all(a.map(async o=>{const d=o.track;this.localParticipant.unpublishTrack(d,!1),d.isMuted||((d instanceof LocalAudioTrack||d instanceof LocalVideoTrack)&&!d.isUserProvided&&(livekitLogger.debug("restarting existing track",{track:o.trackSid}),await d.restartTrack()),livekitLogger.debug("publishing new track",{track:o.trackSid}),await this.localParticipant.publishTrack(d,o.options))}))}catch(a){livekitLogger.error("error trying to re-publish tracks after reconnection",{error:a})}try{await this.engine.waitForRestarted(),livekitLogger.debug("fully reconnected to server",{region:n.serverRegion})}catch{return}this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Reconnected),this.registerConnectionReconcile(),this.participants.forEach(a=>{this.emit(RoomEvent.ParticipantConnected,a)})},this.handleParticipantUpdates=n=>{n.forEach(a=>{if(a.identity===this.localParticipant.identity){this.localParticipant.updateInfo(a);return}const o=this.identityToSid.get(a.identity);o&&o!==a.sid&&this.handleParticipantDisconnected(o,this.participants.get(o));let d=this.participants.get(a.sid);const s=!d;a.state===ParticipantInfo_State.DISCONNECTED?this.handleParticipantDisconnected(a.sid,d):(d=this.getOrCreateParticipant(a.sid,a),s||d.updateInfo(a))})},this.handleActiveSpeakersUpdate=n=>{const a=[],o={};n.forEach(d=>{if(o[d.sid]=!0,d.sid===this.localParticipant.sid)this.localParticipant.audioLevel=d.level,this.localParticipant.setIsSpeaking(!0),a.push(this.localParticipant);else{const s=this.participants.get(d.sid);s&&(s.audioLevel=d.level,s.setIsSpeaking(!0),a.push(s))}}),o[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(d=>{o[d.sid]||(d.audioLevel=0,d.setIsSpeaking(!1))}),this.activeSpeakers=a,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,a)},this.handleSpeakersChanged=n=>{const a=new Map;this.activeSpeakers.forEach(d=>{a.set(d.sid,d)}),n.forEach(d=>{let s=this.participants.get(d.sid);d.sid===this.localParticipant.sid&&(s=this.localParticipant),s&&(s.audioLevel=d.level,s.setIsSpeaking(d.active),d.active?a.set(d.sid,s):a.delete(d.sid))});const o=Array.from(a.values());o.sort((d,s)=>s.audioLevel-d.audioLevel),this.activeSpeakers=o,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,o)},this.handleStreamStateUpdate=n=>{n.streamStates.forEach(a=>{const o=this.participants.get(a.participantSid);if(!o)return;const d=o.getTrackPublication(a.trackSid);!d||!d.track||(d.track.streamState=Track.streamStateFromProto(a.state),o.emit(ParticipantEvent.TrackStreamStateChanged,d,d.track.streamState),this.emitWhenConnected(RoomEvent.TrackStreamStateChanged,d,d.track.streamState,o))})},this.handleSubscriptionPermissionUpdate=n=>{const a=this.participants.get(n.participantSid);if(!a)return;const o=a.getTrackPublication(n.trackSid);o&&o.setAllowed(n.allowed)},this.handleDataPacket=(n,a)=>{const o=this.participants.get(n.participantSid);this.emit(RoomEvent.DataReceived,n.payload,o,a,n.topic),o==null||o.emit(ParticipantEvent.DataReceived,n.payload,a)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(RoomEvent.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=n=>{livekitLogger.warn("could not playback audio",n),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(RoomEvent.AudioPlaybackStatusChanged,!1))},this.handleDeviceChange=async()=>{this.emit(RoomEvent.MediaDevicesChanged)},this.handleRoomUpdate=n=>{const a=this.roomInfo;this.roomInfo=n,a&&a.metadata!==n.metadata&&this.emitWhenConnected(RoomEvent.RoomMetadataChanged,n.metadata),(a==null?void 0:a.activeRecording)!==n.activeRecording&&this.emitWhenConnected(RoomEvent.RecordingStatusChanged,n.activeRecording)},this.handleConnectionQualityUpdate=n=>{n.updates.forEach(a=>{if(a.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(a.quality);return}const o=this.participants.get(a.participantSid);o&&o.setConnectionQuality(a.quality)})},this.onLocalParticipantMetadataChanged=n=>{this.emit(RoomEvent.ParticipantMetadataChanged,n,this.localParticipant)},this.onLocalParticipantNameChanged=n=>{this.emit(RoomEvent.ParticipantNameChanged,n,this.localParticipant)},this.onLocalTrackMuted=n=>{this.emit(RoomEvent.TrackMuted,n,this.localParticipant)},this.onLocalTrackUnmuted=n=>{this.emit(RoomEvent.TrackUnmuted,n,this.localParticipant)},this.onLocalTrackPublished=async n=>{this.emit(RoomEvent.LocalTrackPublished,n,this.localParticipant),n.track instanceof LocalAudioTrack&&await n.track.checkForSilence()&&this.emit(RoomEvent.LocalAudioSilenceDetected,n)},this.onLocalTrackUnpublished=n=>{this.emit(RoomEvent.LocalTrackUnpublished,n,this.localParticipant)},this.onLocalConnectionQualityChanged=n=>{this.emit(RoomEvent.ConnectionQualityChanged,n,this.localParticipant)},this.onMediaDevicesError=n=>{this.emit(RoomEvent.MediaDevicesError,n)},this.onLocalParticipantPermissionsChanged=n=>{this.emit(RoomEvent.ParticipantPermissionsChanged,n,this.localParticipant)},this.setMaxListeners(100),this.participants=new Map,this.cachedParticipantSids=[],this.identityToSid=new Map,this.options=_objectSpread2(_objectSpread2({},roomOptionDefaults),i),this.options.audioCaptureDefaults=_objectSpread2(_objectSpread2({},audioDefaults),i==null?void 0:i.audioCaptureDefaults),this.options.videoCaptureDefaults=_objectSpread2(_objectSpread2({},videoDefaults),i==null?void 0:i.videoCaptureDefaults),this.options.publishDefaults=_objectSpread2(_objectSpread2({},publishDefaults),i==null?void 0:i.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Mutex,this.localParticipant=new LocalParticipant("","",this.engine,this.options)}get isRecording(){var i,t;return(t=(i=this.roomInfo)===null||i===void 0?void 0:i.activeRecording)!==null&&t!==void 0?t:!1}get sid(){var i,t;return(t=(i=this.roomInfo)===null||i===void 0?void 0:i.sid)!==null&&t!==void 0?t:""}get name(){var i,t;return(t=(i=this.roomInfo)===null||i===void 0?void 0:i.name)!==null&&t!==void 0?t:""}get metadata(){var i;return(i=this.roomInfo)===null||i===void 0?void 0:i.metadata}get numParticipants(){var i,t;return(t=(i=this.roomInfo)===null||i===void 0?void 0:i.numParticipants)!==null&&t!==void 0?t:0}get numPublishers(){var i,t;return(t=(i=this.roomInfo)===null||i===void 0?void 0:i.numPublishers)!==null&&t!==void 0?t:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new RTCEngine(this.options),this.engine.client.onParticipantUpdate=this.handleParticipantUpdates,this.engine.client.onRoomUpdate=this.handleRoomUpdate,this.engine.client.onSpeakersChanged=this.handleSpeakersChanged,this.engine.client.onStreamStateUpdate=this.handleStreamStateUpdate,this.engine.client.onSubscriptionPermissionUpdate=this.handleSubscriptionPermissionUpdate,this.engine.client.onConnectionQuality=this.handleConnectionQualityUpdate,this.engine.on(EngineEvent.MediaTrackAdded,(i,t,n)=>{this.onTrackAdded(i,t,n)}).on(EngineEvent.Disconnected,i=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,i)}).on(EngineEvent.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(EngineEvent.DataPacketReceived,this.handleDataPacket).on(EngineEvent.Resuming,()=>{this.clearConnectionReconcile(),this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting),this.cachedParticipantSids=Array.from(this.participants.keys())}).on(EngineEvent.Resumed,()=>{this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Reconnected),this.registerConnectionReconcile(),this.updateSubscriptions(),Array.from(this.participants.values()).filter(t=>!this.cachedParticipantSids.includes(t.sid)).forEach(t=>this.emit(RoomEvent.ParticipantConnected,t)),this.cachedParticipantSids=[]}).on(EngineEvent.SignalResumed,()=>{this.state===ConnectionState.Reconnecting&&this.sendSyncState()}).on(EngineEvent.Restarting,this.handleRestarting).on(EngineEvent.SignalRestarted,this.handleSignalRestarted).on(EngineEvent.DCBufferStatusChanged,(i,t)=>{this.emit(RoomEvent.DCBufferStatusChanged,i,t)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine))}static getLocalDevices(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return DeviceManager.getInstance().getDevices(i,t)}async prepareConnection(i){await fetch("http".concat(i.substring(2)),{method:"HEAD"})}getParticipantByIdentity(i){if(this.localParticipant.identity===i)return this.localParticipant;const t=this.identityToSid.get(i);if(t)return this.participants.get(t)}clearConnectionFutures(){this.connectFuture=void 0}async simulateScenario(i){let t=()=>{},n;switch(i){case"signal-reconnect":await this.engine.client.close(),this.engine.client.onClose&&this.engine.client.onClose("simulate disconnect");break;case"speaker":n=SimulateScenario.fromPartial({scenario:{$case:"speakerUpdate",speakerUpdate:3}});break;case"node-failure":n=SimulateScenario.fromPartial({scenario:{$case:"nodeFailure",nodeFailure:!0}});break;case"server-leave":n=SimulateScenario.fromPartial({scenario:{$case:"serverLeave",serverLeave:!0}});break;case"migration":n=SimulateScenario.fromPartial({scenario:{$case:"migration",migration:!0}});break;case"resume-reconnect":this.engine.failNext(),await this.engine.client.close(),this.engine.client.onClose&&this.engine.client.onClose("simulate resume-reconnect");break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,await this.engine.client.close(),this.engine.client.onClose&&this.engine.client.onClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":n=SimulateScenario.fromPartial({scenario:{$case:"switchCandidateProtocol",switchCandidateProtocol:i==="force-tls"?2:1}}),t=async()=>{const a=this.engine.client.onLeave;a&&a({reason:DisconnectReason.CLIENT_INITIATED,canReconnect:!0})};break}n&&(this.engine.client.sendSimulateScenario(n),t())}async startAudio(){await this.acquireAudioContext();const i=[];this.participants.forEach(t=>{t.audioTracks.forEach(n=>{n.track&&n.track.attachedElements.forEach(a=>{i.push(a)})})});try{await Promise.all(i.map(t=>(t.muted=!1,t.play()))),this.handleAudioPlaybackStarted()}catch(t){throw this.handleAudioPlaybackFailed(t),t}}get canPlaybackAudio(){return this.audioEnabled}getActiveAudioOutputDevice(){var i,t;return(t=(i=this.options.audioOutput)===null||i===void 0?void 0:i.deviceId)!==null&&t!==void 0?t:""}async switchActiveDevice(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var a,o;const d=n?{exact:t}:t;if(i==="audioinput"){const s=this.options.audioCaptureDefaults.deviceId;this.options.audioCaptureDefaults.deviceId=d;const f=Array.from(this.localParticipant.audioTracks.values()).filter(c=>c.source===Track.Source.Microphone);try{await Promise.all(f.map(c=>{var h;return(h=c.audioTrack)===null||h===void 0?void 0:h.setDeviceId(d)}))}catch(c){throw this.options.audioCaptureDefaults.deviceId=s,c}}else if(i==="videoinput"){const s=this.options.videoCaptureDefaults.deviceId;this.options.videoCaptureDefaults.deviceId=d;const f=Array.from(this.localParticipant.videoTracks.values()).filter(c=>c.source===Track.Source.Camera);try{await Promise.all(f.map(c=>{var h;return(h=c.videoTrack)===null||h===void 0?void 0:h.setDeviceId(d)}))}catch(c){throw this.options.videoCaptureDefaults.deviceId=s,c}}else if(i==="audiooutput"){if(!supportsSetSinkId())throw new Error("cannot switch audio output, setSinkId not supported");(a=(o=this.options).audioOutput)!==null&&a!==void 0||(o.audioOutput={});const s=this.options.audioOutput.deviceId;this.options.audioOutput.deviceId=t;try{await Promise.all(Array.from(this.participants.values()).map(f=>f.setAudioOutput({deviceId:t})))}catch(f){throw this.options.audioOutput.deviceId=s,f}}}setupLocalParticipantEvents(){this.localParticipant.on(ParticipantEvent.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ParticipantEvent.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ParticipantEvent.TrackMuted,this.onLocalTrackMuted).on(ParticipantEvent.TrackUnmuted,this.onLocalTrackUnmuted).on(ParticipantEvent.LocalTrackPublished,this.onLocalTrackPublished).on(ParticipantEvent.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ParticipantEvent.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ParticipantEvent.MediaDevicesError,this.onMediaDevicesError).on(ParticipantEvent.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var i;(i=this.engine)===null||i===void 0||i.close(),this.engine=void 0,this.participants.clear(),this.maybeCreateEngine()}onTrackAdded(i,t,n){if(this.state===ConnectionState.Connecting||this.state===ConnectionState.Reconnecting){const c=()=>{this.onTrackAdded(i,t,n),h()},h=()=>{this.off(RoomEvent.Reconnected,c),this.off(RoomEvent.Connected,c),this.off(RoomEvent.Disconnected,h)};this.once(RoomEvent.Reconnected,c),this.once(RoomEvent.Connected,c),this.once(RoomEvent.Disconnected,h);return}if(this.state===ConnectionState.Disconnected){livekitLogger.warn("skipping incoming track after Room disconnected");return}const a=unpackStreamId(t.id),o=a[0];let d=a[1];if((!d||d==="")&&(d=i.id),o===this.localParticipant.sid){livekitLogger.warn("tried to create RemoteParticipant for local participant");return}const s=this.getOrCreateParticipant(o);let f;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?f=this.options.adaptiveStream:f={}),s.addSubscribedMediaTrack(i,d,t,n,f)}handleDisconnect(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1?arguments[1]:void 0;var n;if(this.clearConnectionReconcile(),this.state!==ConnectionState.Disconnected)try{this.participants.forEach(a=>{a.tracks.forEach(o=>{a.unpublishTrack(o.trackSid)})}),this.localParticipant.tracks.forEach(a=>{var o,d;a.track&&this.localParticipant.unpublishTrack(a.track,i),i&&((o=a.track)===null||o===void 0||o.detach(),(d=a.track)===null||d===void 0||d.stop())}),this.localParticipant.off(ParticipantEvent.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ParticipantEvent.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ParticipantEvent.TrackMuted,this.onLocalTrackMuted).off(ParticipantEvent.TrackUnmuted,this.onLocalTrackUnmuted).off(ParticipantEvent.LocalTrackPublished,this.onLocalTrackPublished).off(ParticipantEvent.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ParticipantEvent.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ParticipantEvent.MediaDevicesError,this.onMediaDevicesError).off(ParticipantEvent.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.tracks.clear(),this.localParticipant.videoTracks.clear(),this.localParticipant.audioTracks.clear(),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.expWebAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),isWeb()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),(n=navigator.mediaDevices)===null||n===void 0||n.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(ConnectionState.Disconnected),this.emit(RoomEvent.Disconnected,t)}}handleParticipantDisconnected(i,t){this.participants.delete(i),t&&(this.identityToSid.delete(t.identity),t.tracks.forEach(n=>{t.unpublishTrack(n.trackSid,!0)}),this.emit(RoomEvent.ParticipantDisconnected,t))}async acquireAudioContext(){var i,t;typeof this.options.expWebAudioMix!="boolean"&&this.options.expWebAudioMix.audioContext?(this.audioContext=this.options.expWebAudioMix.audioContext,await this.audioContext.resume()):this.audioContext=(i=getNewAudioContext())!==null&&i!==void 0?i:void 0,this.options.expWebAudioMix&&this.participants.forEach(a=>a.setAudioContext(this.audioContext));const n=((t=this.audioContext)===null||t===void 0?void 0:t.state)==="running";n!==this.canPlaybackAudio&&(this.audioEnabled=n,this.emit(RoomEvent.AudioPlaybackStatusChanged,n))}createParticipant(i,t){let n;return t?n=RemoteParticipant.fromParticipantInfo(this.engine.client,t):n=new RemoteParticipant(this.engine.client,i,"",void 0,void 0),this.options.expWebAudioMix&&n.setAudioContext(this.audioContext),n}getOrCreateParticipant(i,t){if(this.participants.has(i))return this.participants.get(i);const n=this.createParticipant(i,t);return this.participants.set(i,n),t&&(this.identityToSid.set(t.identity,t.sid),this.emitWhenConnected(RoomEvent.ParticipantConnected,n)),n.on(ParticipantEvent.TrackPublished,a=>{this.emitWhenConnected(RoomEvent.TrackPublished,a,n)}).on(ParticipantEvent.TrackSubscribed,(a,o)=>{a.kind===Track.Kind.Audio&&(a.on(TrackEvent.AudioPlaybackStarted,this.handleAudioPlaybackStarted),a.on(TrackEvent.AudioPlaybackFailed,this.handleAudioPlaybackFailed)),this.emit(RoomEvent.TrackSubscribed,a,o,n)}).on(ParticipantEvent.TrackUnpublished,a=>{this.emit(RoomEvent.TrackUnpublished,a,n)}).on(ParticipantEvent.TrackUnsubscribed,(a,o)=>{this.emit(RoomEvent.TrackUnsubscribed,a,o,n)}).on(ParticipantEvent.TrackSubscriptionFailed,a=>{this.emit(RoomEvent.TrackSubscriptionFailed,a,n)}).on(ParticipantEvent.TrackMuted,a=>{this.emitWhenConnected(RoomEvent.TrackMuted,a,n)}).on(ParticipantEvent.TrackUnmuted,a=>{this.emitWhenConnected(RoomEvent.TrackUnmuted,a,n)}).on(ParticipantEvent.ParticipantMetadataChanged,a=>{this.emitWhenConnected(RoomEvent.ParticipantMetadataChanged,a,n)}).on(ParticipantEvent.ParticipantNameChanged,a=>{this.emitWhenConnected(RoomEvent.ParticipantNameChanged,a,n)}).on(ParticipantEvent.ConnectionQualityChanged,a=>{this.emitWhenConnected(RoomEvent.ConnectionQualityChanged,a,n)}).on(ParticipantEvent.ParticipantPermissionsChanged,a=>{this.emitWhenConnected(RoomEvent.ParticipantPermissionsChanged,a,n)}).on(ParticipantEvent.TrackSubscriptionStatusChanged,(a,o)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionStatusChanged,a,o,n)}).on(ParticipantEvent.TrackSubscriptionPermissionChanged,(a,o)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionPermissionChanged,a,o,n)}),t&&n.updateInfo(t),n}sendSyncState(){var i,t;if(this.engine.subscriber===void 0||this.engine.subscriber.pc.localDescription===null)return;const n=this.engine.subscriber.pc.localDescription,a=this.engine.subscriber.pc.remoteDescription,o=(t=(i=this.connOptions)===null||i===void 0?void 0:i.autoSubscribe)!==null&&t!==void 0?t:!0,d=new Array;this.participants.forEach(s=>{s.tracks.forEach(f=>{f.isDesired!==o&&d.push(f.trackSid)})}),this.engine.client.sendSyncState({answer:toProtoSessionDescription({sdp:n.sdp,type:n.type}),offer:a?toProtoSessionDescription({sdp:a.sdp,type:a.type}):void 0,subscription:{trackSids:d,subscribe:!o,participantTracks:[]},publishTracks:this.localParticipant.publishedTracksInfo(),dataChannels:this.localParticipant.dataChannelsInfo()})}updateSubscriptions(){for(const i of this.participants.values())for(const t of i.videoTracks.values())t.isSubscribed&&t instanceof RemoteTrackPublication&&t.emitTrackUpdate()}registerConnectionReconcile(){this.clearConnectionReconcile();let i=0;this.connectionReconcileInterval=CriticalTimers.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(i++,livekitLogger.warn("detected connection state mismatch",{numFailures:i}),i>=3&&this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,DisconnectReason.UNKNOWN_REASON)):i=0},connectionReconcileFrequency)}clearConnectionReconcile(){this.connectionReconcileInterval&&CriticalTimers.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(i){return i===this.state?!1:(this.state=i,this.emit(RoomEvent.ConnectionStateChanged,this.state),!0)}emitWhenConnected(i){if(this.state===ConnectionState.Connected){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return this.emit(i,...n)}return!1}async simulateParticipants(i){var t,n;const a=_objectSpread2({audio:!0,video:!0,useRealTracks:!1},i.publish),o=_objectSpread2({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},i.participants);if(this.handleDisconnect(),this.roomInfo={sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:new Date().getTime(),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1},this.localParticipant.updateInfo(ParticipantInfo.fromPartial({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(RoomEvent.SignalConnected),this.emit(RoomEvent.Connected),this.setAndEmitConnectionState(ConnectionState.Connected),a.video){const d=new LocalTrackPublication(Track.Kind.Video,TrackInfo.fromPartial({source:TrackSource.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO,name:"video-dummy"}),new LocalVideoTrack(a.useRealTracks?(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:createDummyVideoStreamTrack((t=160*o.aspectRatios[0])!==null&&t!==void 0?t:1,160,!0,!0)));this.localParticipant.addTrackPublication(d),this.localParticipant.emit(ParticipantEvent.LocalTrackPublished,d)}if(a.audio){const d=new LocalTrackPublication(Track.Kind.Audio,TrackInfo.fromPartial({source:TrackSource.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO}),new LocalAudioTrack(a.useRealTracks?(await navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:getEmptyAudioStreamTrack()));this.localParticipant.addTrackPublication(d),this.localParticipant.emit(ParticipantEvent.LocalTrackPublished,d)}for(let d=0;d<o.count-1;d+=1){let s=ParticipantInfo.fromPartial({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(d),state:ParticipantInfo_State.ACTIVE,tracks:[],joinedAt:Date.now()});const f=this.getOrCreateParticipant(s.identity,s);if(o.video){const c=createDummyVideoStreamTrack((n=160*o.aspectRatios[d%o.aspectRatios.length])!==null&&n!==void 0?n:1,160,!1,!0),h=TrackInfo.fromPartial({source:TrackSource.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO});f.addSubscribedMediaTrack(c,h.sid,new MediaStream([c])),s.tracks=[...s.tracks,h]}if(o.audio){const c=getEmptyAudioStreamTrack(),h=TrackInfo.fromPartial({source:TrackSource.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO});f.addSubscribedMediaTrack(c,h.sid,new MediaStream([c])),s.tracks=[...s.tracks,h]}f.updateInfo(s)}}emit(i){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return i!==RoomEvent.ActiveSpeakersChanged&&livekitLogger.debug("room event ".concat(i),{event:i,args:n}),super.emit(i,...n)}}var CheckStatus;(function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"})(CheckStatus||(CheckStatus={}));class Checker extends eventsExports.EventEmitter{constructor(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=CheckStatus.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=i,this.token=t,this.name=this.constructor.name,this.room=new Room(n.roomOptions),this.connectOptions=n.connectOptions,n.errorsAsWarnings&&(this.errorsAsWarnings=n.errorsAsWarnings)}async run(i){if(this.status!==CheckStatus.IDLE)throw Error("check is running already");this.setStatus(CheckStatus.RUNNING),this.appendMessage("".concat(this.name," started."));try{await this.perform()}catch(t){t instanceof Error&&(this.errorsAsWarnings?this.appendWarning(t.message):this.appendError(t.message))}return await this.disconnect(),await new Promise(t=>setTimeout(t,500)),this.status!==CheckStatus.SKIPPED&&this.setStatus(this.isSuccess()?CheckStatus.SUCCESS:CheckStatus.FAILED),i&&i(),this.getInfo()}isSuccess(){return!this.logs.some(i=>i.level==="error")}async connect(){return this.room.state===ConnectionState.Connected?this.room:(await this.room.connect(this.url,this.token),this.room)}async disconnect(){this.room&&this.room.state!==ConnectionState.Disconnected&&(await this.room.disconnect(),await new Promise(i=>setTimeout(i,500)))}skip(){this.setStatus(CheckStatus.SKIPPED)}appendMessage(i){this.logs.push({level:"info",message:i}),this.emit("update",this.getInfo())}appendWarning(i){this.logs.push({level:"warning",message:i}),this.emit("update",this.getInfo())}appendError(i){this.logs.push({level:"error",message:i}),this.emit("update",this.getInfo())}setStatus(i){this.status=i,this.emit("update",this.getInfo())}get engine(){var i;return(i=this.room)===null||i===void 0?void 0:i.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}(function(e){if(typeof exports=="object"&&typeof module<"u")module.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var i;typeof window<"u"?i=window:typeof global<"u"?i=global:typeof self<"u"?i=self:i=this,i.nodeJsShim=e()}})(function(){return function(){function e(i,t,n){function a(s,f){if(!t[s]){if(!i[s]){var c=typeof require=="function"&&require;if(!f&&c)return c(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var v=t[s]={exports:{}};i[s][0].call(v.exports,function(l){var u=i[s][1][l];return a(u||l)},v,v.exports,e,i,t,n)}return t[s].exports}for(var o=typeof require=="function"&&require,d=0;d<n.length;d++)a(n[d]);return a}return e}()({1:[function(e,i,t){const n=e("livekit-server-sdk");window.livekitServerSDK=n;const a=e("simple-peer");window.SimplePeer=a},{"livekit-server-sdk":71,"simple-peer":120}],2:[function(e,i,t){i.exports=n;function n(a,o){for(var d=new Array(arguments.length-1),s=0,f=2,c=!0;f<arguments.length;)d[s++]=arguments[f++];return new Promise(function(v,l){d[s]=function(p){if(c)if(c=!1,p)l(p);else{for(var m=new Array(arguments.length-1),w=0;w<m.length;)m[w++]=arguments[w];v.apply(null,m)}};try{a.apply(o||null,d)}catch(u){c&&(c=!1,l(u))}})}},{}],3:[function(e,i,t){var n=t;n.length=function(c){var h=c.length;if(!h)return 0;for(var v=0;--h%4>1&&c.charAt(h)==="=";)++v;return Math.ceil(c.length*3)/4-v};for(var a=new Array(64),o=new Array(123),d=0;d<64;)o[a[d]=d<26?d+65:d<52?d+71:d<62?d-4:d-59|43]=d++;n.encode=function(c,h,v){for(var l=null,u=[],p=0,m=0,w;h<v;){var _=c[h++];switch(m){case 0:u[p++]=a[_>>2],w=(_&3)<<4,m=1;break;case 1:u[p++]=a[w|_>>4],w=(_&15)<<2,m=2;break;case 2:u[p++]=a[w|_>>6],u[p++]=a[_&63],m=0;break}p>8191&&((l||(l=[])).push(String.fromCharCode.apply(String,u)),p=0)}return m&&(u[p++]=a[w],u[p++]=61,m===1&&(u[p++]=61)),l?(p&&l.push(String.fromCharCode.apply(String,u.slice(0,p))),l.join("")):String.fromCharCode.apply(String,u.slice(0,p))};var s="invalid encoding";n.decode=function(c,h,v){for(var l=v,u=0,p,m=0;m<c.length;){var w=c.charCodeAt(m++);if(w===61&&u>1)break;if((w=o[w])===void 0)throw Error(s);switch(u){case 0:p=w,u=1;break;case 1:h[v++]=p<<2|(w&48)>>4,p=w,u=2;break;case 2:h[v++]=(p&15)<<4|(w&60)>>2,p=w,u=3;break;case 3:h[v++]=(p&3)<<6|w,u=0;break}}if(u===1)throw Error(s);return v-l},n.test=function(c){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(c)}},{}],4:[function(e,i,t){i.exports=n;function n(){this._listeners={}}n.prototype.on=function(o,d,s){return(this._listeners[o]||(this._listeners[o]=[])).push({fn:d,ctx:s||this}),this},n.prototype.off=function(o,d){if(o===void 0)this._listeners={};else if(d===void 0)this._listeners[o]=[];else for(var s=this._listeners[o],f=0;f<s.length;)s[f].fn===d?s.splice(f,1):++f;return this},n.prototype.emit=function(o){var d=this._listeners[o];if(d){for(var s=[],f=1;f<arguments.length;)s.push(arguments[f++]);for(f=0;f<d.length;)d[f].fn.apply(d[f++].ctx,s)}return this}},{}],5:[function(e,i,t){i.exports=n(n);function n(f){return typeof Float32Array<"u"?function(){var c=new Float32Array([-0]),h=new Uint8Array(c.buffer),v=h[3]===128;function l(w,_,C){c[0]=w,_[C]=h[0],_[C+1]=h[1],_[C+2]=h[2],_[C+3]=h[3]}function u(w,_,C){c[0]=w,_[C]=h[3],_[C+1]=h[2],_[C+2]=h[1],_[C+3]=h[0]}f.writeFloatLE=v?l:u,f.writeFloatBE=v?u:l;function p(w,_){return h[0]=w[_],h[1]=w[_+1],h[2]=w[_+2],h[3]=w[_+3],c[0]}function m(w,_){return h[3]=w[_],h[2]=w[_+1],h[1]=w[_+2],h[0]=w[_+3],c[0]}f.readFloatLE=v?p:m,f.readFloatBE=v?m:p}():function(){function c(v,l,u,p){var m=l<0?1:0;if(m&&(l=-l),l===0)v(1/l>0?0:2147483648,u,p);else if(isNaN(l))v(2143289344,u,p);else if(l>34028234663852886e22)v((m<<31|2139095040)>>>0,u,p);else if(l<11754943508222875e-54)v((m<<31|Math.round(l/1401298464324817e-60))>>>0,u,p);else{var w=Math.floor(Math.log(l)/Math.LN2),_=Math.round(l*Math.pow(2,-w)*8388608)&8388607;v((m<<31|w+127<<23|_)>>>0,u,p)}}f.writeFloatLE=c.bind(null,a),f.writeFloatBE=c.bind(null,o);function h(v,l,u){var p=v(l,u),m=(p>>31)*2+1,w=p>>>23&255,_=p&8388607;return w===255?_?NaN:m*(1/0):w===0?m*1401298464324817e-60*_:m*Math.pow(2,w-150)*(_+8388608)}f.readFloatLE=h.bind(null,d),f.readFloatBE=h.bind(null,s)}(),typeof Float64Array<"u"?function(){var c=new Float64Array([-0]),h=new Uint8Array(c.buffer),v=h[7]===128;function l(w,_,C){c[0]=w,_[C]=h[0],_[C+1]=h[1],_[C+2]=h[2],_[C+3]=h[3],_[C+4]=h[4],_[C+5]=h[5],_[C+6]=h[6],_[C+7]=h[7]}function u(w,_,C){c[0]=w,_[C]=h[7],_[C+1]=h[6],_[C+2]=h[5],_[C+3]=h[4],_[C+4]=h[3],_[C+5]=h[2],_[C+6]=h[1],_[C+7]=h[0]}f.writeDoubleLE=v?l:u,f.writeDoubleBE=v?u:l;function p(w,_){return h[0]=w[_],h[1]=w[_+1],h[2]=w[_+2],h[3]=w[_+3],h[4]=w[_+4],h[5]=w[_+5],h[6]=w[_+6],h[7]=w[_+7],c[0]}function m(w,_){return h[7]=w[_],h[6]=w[_+1],h[5]=w[_+2],h[4]=w[_+3],h[3]=w[_+4],h[2]=w[_+5],h[1]=w[_+6],h[0]=w[_+7],c[0]}f.readDoubleLE=v?p:m,f.readDoubleBE=v?m:p}():function(){function c(v,l,u,p,m,w){var _=p<0?1:0;if(_&&(p=-p),p===0)v(0,m,w+l),v(1/p>0?0:2147483648,m,w+u);else if(isNaN(p))v(0,m,w+l),v(2146959360,m,w+u);else if(p>17976931348623157e292)v(0,m,w+l),v((_<<31|2146435072)>>>0,m,w+u);else{var C;if(p<22250738585072014e-324)C=p/5e-324,v(C>>>0,m,w+l),v((_<<31|C/4294967296)>>>0,m,w+u);else{var N=Math.floor(Math.log(p)/Math.LN2);N===1024&&(N=1023),C=p*Math.pow(2,-N),v(C*4503599627370496>>>0,m,w+l),v((_<<31|N+1023<<20|C*1048576&1048575)>>>0,m,w+u)}}}f.writeDoubleLE=c.bind(null,a,0,4),f.writeDoubleBE=c.bind(null,o,4,0);function h(v,l,u,p,m){var w=v(p,m+l),_=v(p,m+u),C=(_>>31)*2+1,N=_>>>20&2047,P=4294967296*(_&1048575)+w;return N===2047?P?NaN:C*(1/0):N===0?C*5e-324*P:C*Math.pow(2,N-1075)*(P+4503599627370496)}f.readDoubleLE=h.bind(null,d,0,4),f.readDoubleBE=h.bind(null,s,4,0)}(),f}function a(f,c,h){c[h]=f&255,c[h+1]=f>>>8&255,c[h+2]=f>>>16&255,c[h+3]=f>>>24}function o(f,c,h){c[h]=f>>>24,c[h+1]=f>>>16&255,c[h+2]=f>>>8&255,c[h+3]=f&255}function d(f,c){return(f[c]|f[c+1]<<8|f[c+2]<<16|f[c+3]<<24)>>>0}function s(f,c){return(f[c]<<24|f[c+1]<<16|f[c+2]<<8|f[c+3])>>>0}},{}],6:[function(require,module,exports){module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}},{}],7:[function(e,i,t){i.exports=n;function n(a,o,d){var s=d||8192,f=s>>>1,c=null,h=s;return function(l){if(l<1||l>f)return a(l);h+l>s&&(c=a(s),h=0);var u=o.call(c,h,h+=l);return h&7&&(h=(h|7)+1),u}}},{}],8:[function(e,i,t){var n=t;n.length=function(o){for(var d=0,s=0,f=0;f<o.length;++f)s=o.charCodeAt(f),s<128?d+=1:s<2048?d+=2:(s&64512)===55296&&(o.charCodeAt(f+1)&64512)===56320?(++f,d+=4):d+=3;return d},n.read=function(o,d,s){var f=s-d;if(f<1)return"";for(var c=null,h=[],v=0,l;d<s;)l=o[d++],l<128?h[v++]=l:l>191&&l<224?h[v++]=(l&31)<<6|o[d++]&63:l>239&&l<365?(l=((l&7)<<18|(o[d++]&63)<<12|(o[d++]&63)<<6|o[d++]&63)-65536,h[v++]=55296+(l>>10),h[v++]=56320+(l&1023)):h[v++]=(l&15)<<12|(o[d++]&63)<<6|o[d++]&63,v>8191&&((c||(c=[])).push(String.fromCharCode.apply(String,h)),v=0);return c?(v&&c.push(String.fromCharCode.apply(String,h.slice(0,v))),c.join("")):String.fromCharCode.apply(String,h.slice(0,v))},n.write=function(o,d,s){for(var f=s,c,h,v=0;v<o.length;++v)c=o.charCodeAt(v),c<128?d[s++]=c:c<2048?(d[s++]=c>>6|192,d[s++]=c&63|128):(c&64512)===55296&&((h=o.charCodeAt(v+1))&64512)===56320?(c=65536+((c&1023)<<10)+(h&1023),++v,d[s++]=c>>18|240,d[s++]=c>>12&63|128,d[s++]=c>>6&63|128,d[s++]=c&63|128):(d[s++]=c>>12|224,d[s++]=c>>6&63|128,d[s++]=c&63|128);return s-f}},{}],9:[function(e,i,t){i.exports=e("./lib/axios")},{"./lib/axios":11}],10:[function(e,i,t){var n=e("./../utils"),a=e("./../core/settle"),o=e("./../helpers/cookies"),d=e("./../helpers/buildURL"),s=e("../core/buildFullPath"),f=e("./../helpers/parseHeaders"),c=e("./../helpers/isURLSameOrigin"),h=e("../core/createError");i.exports=function(l){return new Promise(function(p,m){var w=l.data,_=l.headers,C=l.responseType;n.isFormData(w)&&delete _["Content-Type"];var N=new XMLHttpRequest;if(l.auth){var P=l.auth.username||"",M=l.auth.password?unescape(encodeURIComponent(l.auth.password)):"";_.Authorization="Basic "+btoa(P+":"+M)}var U=s(l.baseURL,l.url);N.open(l.method.toUpperCase(),d(U,l.params,l.paramsSerializer),!0),N.timeout=l.timeout;function W(){if(N){var Z="getAllResponseHeaders"in N?f(N.getAllResponseHeaders()):null,re=!C||C==="text"||C==="json"?N.responseText:N.response,Y={data:re,status:N.status,statusText:N.statusText,headers:Z,config:l,request:N};a(p,m,Y),N=null}}if("onloadend"in N?N.onloadend=W:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(W)},N.onabort=function(){N&&(m(h("Request aborted",l,"ECONNABORTED",N)),N=null)},N.onerror=function(){m(h("Network Error",l,null,N)),N=null},N.ontimeout=function(){var re="timeout of "+l.timeout+"ms exceeded";l.timeoutErrorMessage&&(re=l.timeoutErrorMessage),m(h(re,l,l.transitional&&l.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",N)),N=null},n.isStandardBrowserEnv()){var q=(l.withCredentials||c(U))&&l.xsrfCookieName?o.read(l.xsrfCookieName):void 0;q&&(_[l.xsrfHeaderName]=q)}"setRequestHeader"in N&&n.forEach(_,function(re,Y){typeof w>"u"&&Y.toLowerCase()==="content-type"?delete _[Y]:N.setRequestHeader(Y,re)}),n.isUndefined(l.withCredentials)||(N.withCredentials=!!l.withCredentials),C&&C!=="json"&&(N.responseType=l.responseType),typeof l.onDownloadProgress=="function"&&N.addEventListener("progress",l.onDownloadProgress),typeof l.onUploadProgress=="function"&&N.upload&&N.upload.addEventListener("progress",l.onUploadProgress),l.cancelToken&&l.cancelToken.promise.then(function(re){N&&(N.abort(),m(re),N=null)}),w||(w=null),N.send(w)})}},{"../core/buildFullPath":17,"../core/createError":18,"./../core/settle":22,"./../helpers/buildURL":26,"./../helpers/cookies":28,"./../helpers/isURLSameOrigin":31,"./../helpers/parseHeaders":33,"./../utils":36}],11:[function(e,i,t){var n=e("./utils"),a=e("./helpers/bind"),o=e("./core/Axios"),d=e("./core/mergeConfig"),s=e("./defaults");function f(h){var v=new o(h),l=a(o.prototype.request,v);return n.extend(l,o.prototype,v),n.extend(l,v),l}var c=f(s);c.Axios=o,c.create=function(v){return f(d(c.defaults,v))},c.Cancel=e("./cancel/Cancel"),c.CancelToken=e("./cancel/CancelToken"),c.isCancel=e("./cancel/isCancel"),c.all=function(v){return Promise.all(v)},c.spread=e("./helpers/spread"),c.isAxiosError=e("./helpers/isAxiosError"),i.exports=c,i.exports.default=c},{"./cancel/Cancel":12,"./cancel/CancelToken":13,"./cancel/isCancel":14,"./core/Axios":15,"./core/mergeConfig":21,"./defaults":24,"./helpers/bind":25,"./helpers/isAxiosError":30,"./helpers/spread":34,"./utils":36}],12:[function(e,i,t){function n(a){this.message=a}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,i.exports=n},{}],13:[function(e,i,t){var n=e("./Cancel");function a(o){if(typeof o!="function")throw new TypeError("executor must be a function.");var d;this.promise=new Promise(function(c){d=c});var s=this;o(function(c){s.reason||(s.reason=new n(c),d(s.reason))})}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var d,s=new a(function(c){d=c});return{token:s,cancel:d}},i.exports=a},{"./Cancel":12}],14:[function(e,i,t){i.exports=function(a){return!!(a&&a.__CANCEL__)}},{}],15:[function(e,i,t){var n=e("./../utils"),a=e("../helpers/buildURL"),o=e("./InterceptorManager"),d=e("./dispatchRequest"),s=e("./mergeConfig"),f=e("../helpers/validator"),c=f.validators;function h(v){this.defaults=v,this.interceptors={request:new o,response:new o}}h.prototype.request=function(l){typeof l=="string"?(l=arguments[1]||{},l.url=arguments[0]):l=l||{},l=s(this.defaults,l),l.method?l.method=l.method.toLowerCase():this.defaults.method?l.method=this.defaults.method.toLowerCase():l.method="get";var u=l.transitional;u!==void 0&&f.assertOptions(u,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var p=[],m=!0;this.interceptors.request.forEach(function(W){typeof W.runWhen=="function"&&W.runWhen(l)===!1||(m=m&&W.synchronous,p.unshift(W.fulfilled,W.rejected))});var w=[];this.interceptors.response.forEach(function(W){w.push(W.fulfilled,W.rejected)});var _;if(!m){var C=[d,void 0];for(Array.prototype.unshift.apply(C,p),C=C.concat(w),_=Promise.resolve(l);C.length;)_=_.then(C.shift(),C.shift());return _}for(var N=l;p.length;){var P=p.shift(),M=p.shift();try{N=P(N)}catch(U){M(U);break}}try{_=d(N)}catch(U){return Promise.reject(U)}for(;w.length;)_=_.then(w.shift(),w.shift());return _},h.prototype.getUri=function(l){return l=s(this.defaults,l),a(l.url,l.params,l.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],function(l){h.prototype[l]=function(u,p){return this.request(s(p||{},{method:l,url:u,data:(p||{}).data}))}}),n.forEach(["post","put","patch"],function(l){h.prototype[l]=function(u,p,m){return this.request(s(m||{},{method:l,url:u,data:p}))}}),i.exports=h},{"../helpers/buildURL":26,"../helpers/validator":35,"./../utils":36,"./InterceptorManager":16,"./dispatchRequest":19,"./mergeConfig":21}],16:[function(e,i,t){var n=e("./../utils");function a(){this.handlers=[]}a.prototype.use=function(d,s,f){return this.handlers.push({fulfilled:d,rejected:s,synchronous:f?f.synchronous:!1,runWhen:f?f.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(d){this.handlers[d]&&(this.handlers[d]=null)},a.prototype.forEach=function(d){n.forEach(this.handlers,function(f){f!==null&&d(f)})},i.exports=a},{"./../utils":36}],17:[function(e,i,t){var n=e("../helpers/isAbsoluteURL"),a=e("../helpers/combineURLs");i.exports=function(d,s){return d&&!n(s)?a(d,s):s}},{"../helpers/combineURLs":27,"../helpers/isAbsoluteURL":29}],18:[function(e,i,t){var n=e("./enhanceError");i.exports=function(o,d,s,f,c){var h=new Error(o);return n(h,d,s,f,c)}},{"./enhanceError":20}],19:[function(e,i,t){var n=e("./../utils"),a=e("./transformData"),o=e("../cancel/isCancel"),d=e("../defaults");function s(f){f.cancelToken&&f.cancelToken.throwIfRequested()}i.exports=function(c){s(c),c.headers=c.headers||{},c.data=a.call(c,c.data,c.headers,c.transformRequest),c.headers=n.merge(c.headers.common||{},c.headers[c.method]||{},c.headers),n.forEach(["delete","get","head","post","put","patch","common"],function(l){delete c.headers[l]});var h=c.adapter||d.adapter;return h(c).then(function(l){return s(c),l.data=a.call(c,l.data,l.headers,c.transformResponse),l},function(l){return o(l)||(s(c),l&&l.response&&(l.response.data=a.call(c,l.response.data,l.response.headers,c.transformResponse))),Promise.reject(l)})}},{"../cancel/isCancel":14,"../defaults":24,"./../utils":36,"./transformData":23}],20:[function(e,i,t){i.exports=function(a,o,d,s,f){return a.config=o,d&&(a.code=d),a.request=s,a.response=f,a.isAxiosError=!0,a.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},a}},{}],21:[function(e,i,t){var n=e("../utils");i.exports=function(o,d){d=d||{};var s={},f=["url","method","data"],c=["headers","auth","proxy","params"],h=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],v=["validateStatus"];function l(w,_){return n.isPlainObject(w)&&n.isPlainObject(_)?n.merge(w,_):n.isPlainObject(_)?n.merge({},_):n.isArray(_)?_.slice():_}function u(w){n.isUndefined(d[w])?n.isUndefined(o[w])||(s[w]=l(void 0,o[w])):s[w]=l(o[w],d[w])}n.forEach(f,function(_){n.isUndefined(d[_])||(s[_]=l(void 0,d[_]))}),n.forEach(c,u),n.forEach(h,function(_){n.isUndefined(d[_])?n.isUndefined(o[_])||(s[_]=l(void 0,o[_])):s[_]=l(void 0,d[_])}),n.forEach(v,function(_){_ in d?s[_]=l(o[_],d[_]):_ in o&&(s[_]=l(void 0,o[_]))});var p=f.concat(c).concat(h).concat(v),m=Object.keys(o).concat(Object.keys(d)).filter(function(_){return p.indexOf(_)===-1});return n.forEach(m,u),s}},{"../utils":36}],22:[function(e,i,t){var n=e("./createError");i.exports=function(o,d,s){var f=s.config.validateStatus;!s.status||!f||f(s.status)?o(s):d(n("Request failed with status code "+s.status,s.config,null,s.request,s))}},{"./createError":18}],23:[function(e,i,t){var n=e("./../utils"),a=e("./../defaults");i.exports=function(d,s,f){var c=this||a;return n.forEach(f,function(v){d=v.call(c,d,s)}),d}},{"./../defaults":24,"./../utils":36}],24:[function(e,i,t){(function(n){(function(){var a=e("./utils"),o=e("./helpers/normalizeHeaderName"),d=e("./core/enhanceError"),s={"Content-Type":"application/x-www-form-urlencoded"};function f(l,u){!a.isUndefined(l)&&a.isUndefined(l["Content-Type"])&&(l["Content-Type"]=u)}function c(){var l;return typeof XMLHttpRequest<"u"?l=e("./adapters/xhr"):typeof n<"u"&&Object.prototype.toString.call(n)==="[object process]"&&(l=e("./adapters/http")),l}function h(l,u,p){if(a.isString(l))try{return(u||JSON.parse)(l),a.trim(l)}catch(m){if(m.name!=="SyntaxError")throw m}return(p||JSON.stringify)(l)}var v={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:c(),transformRequest:[function(u,p){return o(p,"Accept"),o(p,"Content-Type"),a.isFormData(u)||a.isArrayBuffer(u)||a.isBuffer(u)||a.isStream(u)||a.isFile(u)||a.isBlob(u)?u:a.isArrayBufferView(u)?u.buffer:a.isURLSearchParams(u)?(f(p,"application/x-www-form-urlencoded;charset=utf-8"),u.toString()):a.isObject(u)||p&&p["Content-Type"]==="application/json"?(f(p,"application/json"),h(u)):u}],transformResponse:[function(u){var p=this.transitional,m=p&&p.silentJSONParsing,w=p&&p.forcedJSONParsing,_=!m&&this.responseType==="json";if(_||w&&a.isString(u)&&u.length)try{return JSON.parse(u)}catch(C){if(_)throw C.name==="SyntaxError"?d(C,this,"E_JSON_PARSE"):C}return u}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(u){return u>=200&&u<300}};v.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],function(u){v.headers[u]={}}),a.forEach(["post","put","patch"],function(u){v.headers[u]=a.merge(s)}),i.exports=v}).call(this)}).call(this,e("_process"))},{"./adapters/http":10,"./adapters/xhr":10,"./core/enhanceError":20,"./helpers/normalizeHeaderName":32,"./utils":36,_process:254}],25:[function(e,i,t){i.exports=function(a,o){return function(){for(var s=new Array(arguments.length),f=0;f<s.length;f++)s[f]=arguments[f];return a.apply(o,s)}}},{}],26:[function(e,i,t){var n=e("./../utils");function a(o){return encodeURIComponent(o).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}i.exports=function(d,s,f){if(!s)return d;var c;if(f)c=f(s);else if(n.isURLSearchParams(s))c=s.toString();else{var h=[];n.forEach(s,function(u,p){u===null||typeof u>"u"||(n.isArray(u)?p=p+"[]":u=[u],n.forEach(u,function(w){n.isDate(w)?w=w.toISOString():n.isObject(w)&&(w=JSON.stringify(w)),h.push(a(p)+"="+a(w))}))}),c=h.join("&")}if(c){var v=d.indexOf("#");v!==-1&&(d=d.slice(0,v)),d+=(d.indexOf("?")===-1?"?":"&")+c}return d}},{"./../utils":36}],27:[function(e,i,t){i.exports=function(a,o){return o?a.replace(/\/+$/,"")+"/"+o.replace(/^\/+/,""):a}},{}],28:[function(e,i,t){var n=e("./../utils");i.exports=n.isStandardBrowserEnv()?function(){return{write:function(d,s,f,c,h,v){var l=[];l.push(d+"="+encodeURIComponent(s)),n.isNumber(f)&&l.push("expires="+new Date(f).toGMTString()),n.isString(c)&&l.push("path="+c),n.isString(h)&&l.push("domain="+h),v===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(d){var s=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(d){this.write(d,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},{"./../utils":36}],29:[function(e,i,t){i.exports=function(a){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(a)}},{}],30:[function(e,i,t){i.exports=function(a){return typeof a=="object"&&a.isAxiosError===!0}},{}],31:[function(e,i,t){var n=e("./../utils");i.exports=n.isStandardBrowserEnv()?function(){var o=/(msie|trident)/i.test(navigator.userAgent),d=document.createElement("a"),s;function f(c){var h=c;return o&&(d.setAttribute("href",h),h=d.href),d.setAttribute("href",h),{href:d.href,protocol:d.protocol?d.protocol.replace(/:$/,""):"",host:d.host,search:d.search?d.search.replace(/^\?/,""):"",hash:d.hash?d.hash.replace(/^#/,""):"",hostname:d.hostname,port:d.port,pathname:d.pathname.charAt(0)==="/"?d.pathname:"/"+d.pathname}}return s=f(window.location.href),function(h){var v=n.isString(h)?f(h):h;return v.protocol===s.protocol&&v.host===s.host}}():function(){return function(){return!0}}()},{"./../utils":36}],32:[function(e,i,t){var n=e("../utils");i.exports=function(o,d){n.forEach(o,function(f,c){c!==d&&c.toUpperCase()===d.toUpperCase()&&(o[d]=f,delete o[c])})}},{"../utils":36}],33:[function(e,i,t){var n=e("./../utils"),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];i.exports=function(d){var s={},f,c,h;return d&&n.forEach(d.split(`
`),function(l){if(h=l.indexOf(":"),f=n.trim(l.substr(0,h)).toLowerCase(),c=n.trim(l.substr(h+1)),f){if(s[f]&&a.indexOf(f)>=0)return;f==="set-cookie"?s[f]=(s[f]?s[f]:[]).concat([c]):s[f]=s[f]?s[f]+", "+c:c}}),s}},{"./../utils":36}],34:[function(e,i,t){i.exports=function(a){return function(d){return a.apply(null,d)}}},{}],35:[function(e,i,t){var n=e("./../../package.json"),a={};["object","boolean","number","function","string","symbol"].forEach(function(c,h){a[c]=function(l){return typeof l===c||"a"+(h<1?"n ":" ")+c}});var o={},d=n.version.split(".");function s(c,h){for(var v=h?h.split("."):d,l=c.split("."),u=0;u<3;u++){if(v[u]>l[u])return!0;if(v[u]<l[u])return!1}return!1}a.transitional=function(h,v,l){var u=v&&s(v);function p(m,w){return"[Axios v"+n.version+"] Transitional option '"+m+"'"+w+(l?". "+l:"")}return function(m,w,_){if(h===!1)throw new Error(p(w," has been removed in "+v));return u&&!o[w]&&(o[w]=!0,console.warn(p(w," has been deprecated since v"+v+" and will be removed in the near future"))),h?h(m,w,_):!0}};function f(c,h,v){if(typeof c!="object")throw new TypeError("options must be an object");for(var l=Object.keys(c),u=l.length;u-- >0;){var p=l[u],m=h[p];if(m){var w=c[p],_=w===void 0||m(w,p,c);if(_!==!0)throw new TypeError("option "+p+" must be "+_);continue}if(v!==!0)throw Error("Unknown option "+p)}}i.exports={isOlderVersion:s,assertOptions:f,validators:a}},{"./../../package.json":37}],36:[function(e,i,t){var n=e("./helpers/bind"),a=Object.prototype.toString;function o(Y){return a.call(Y)==="[object Array]"}function d(Y){return typeof Y>"u"}function s(Y){return Y!==null&&!d(Y)&&Y.constructor!==null&&!d(Y.constructor)&&typeof Y.constructor.isBuffer=="function"&&Y.constructor.isBuffer(Y)}function f(Y){return a.call(Y)==="[object ArrayBuffer]"}function c(Y){return typeof FormData<"u"&&Y instanceof FormData}function h(Y){var O;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?O=ArrayBuffer.isView(Y):O=Y&&Y.buffer&&Y.buffer instanceof ArrayBuffer,O}function v(Y){return typeof Y=="string"}function l(Y){return typeof Y=="number"}function u(Y){return Y!==null&&typeof Y=="object"}function p(Y){if(a.call(Y)!=="[object Object]")return!1;var O=Object.getPrototypeOf(Y);return O===null||O===Object.prototype}function m(Y){return a.call(Y)==="[object Date]"}function w(Y){return a.call(Y)==="[object File]"}function _(Y){return a.call(Y)==="[object Blob]"}function C(Y){return a.call(Y)==="[object Function]"}function N(Y){return u(Y)&&C(Y.pipe)}function P(Y){return typeof URLSearchParams<"u"&&Y instanceof URLSearchParams}function M(Y){return Y.trim?Y.trim():Y.replace(/^\s+|\s+$/g,"")}function U(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function W(Y,O){if(!(Y===null||typeof Y>"u"))if(typeof Y!="object"&&(Y=[Y]),o(Y))for(var x=0,S=Y.length;x<S;x++)O.call(null,Y[x],x,Y);else for(var k in Y)Object.prototype.hasOwnProperty.call(Y,k)&&O.call(null,Y[k],k,Y)}function q(){var Y={};function O(k,g){p(Y[g])&&p(k)?Y[g]=q(Y[g],k):p(k)?Y[g]=q({},k):o(k)?Y[g]=k.slice():Y[g]=k}for(var x=0,S=arguments.length;x<S;x++)W(arguments[x],O);return Y}function Z(Y,O,x){return W(O,function(k,g){x&&typeof k=="function"?Y[g]=n(k,x):Y[g]=k}),Y}function re(Y){return Y.charCodeAt(0)===65279&&(Y=Y.slice(1)),Y}i.exports={isArray:o,isArrayBuffer:f,isBuffer:s,isFormData:c,isArrayBufferView:h,isString:v,isNumber:l,isObject:u,isPlainObject:p,isUndefined:d,isDate:m,isFile:w,isBlob:_,isFunction:C,isStream:N,isURLSearchParams:P,isStandardBrowserEnv:U,forEach:W,merge:q,extend:Z,trim:M,stripBOM:re}},{"./helpers/bind":25}],37:[function(e,i,t){i.exports={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}},{}],38:[function(e,i,t){var n=e("buffer").Buffer,a=e("buffer").SlowBuffer;i.exports=o;function o(f,c){if(!n.isBuffer(f)||!n.isBuffer(c)||f.length!==c.length)return!1;for(var h=0,v=0;v<f.length;v++)h|=f[v]^c[v];return h===0}o.install=function(){n.prototype.equal=a.prototype.equal=function(c){return o(this,c)}};var d=n.prototype.equal,s=a.prototype.equal;o.restore=function(){n.prototype.equal=d,a.prototype.equal=s}},{buffer:171}],39:[function(e,i,t){const n=e("map-obj"),a=e("camelcase"),o=e("quick-lru"),d=(h,v)=>h.some(l=>typeof l=="string"?l===v:(l.lastIndex=0,l.test(v))),s=new o({maxSize:1e5}),f=h=>typeof h=="object"&&h!==null&&!(h instanceof RegExp)&&!(h instanceof Error)&&!(h instanceof Date),c=(h,v)=>{if(!f(h))return h;v={deep:!1,pascalCase:!1,...v};const{exclude:l,pascalCase:u,stopPaths:p,deep:m}=v,w=new Set(p),_=C=>(N,P)=>{if(m&&f(P)){const M=C===void 0?N:`${C}.${N}`;w.has(M)||(P=n(P,_(M)))}if(!(l&&d(l,N))){const M=u?`${N}_`:N;if(s.has(M))N=s.get(M);else{const U=a(N,{pascalCase:u,locale:!1});N.length<100&&s.set(M,U),N=U}}return[N,P]};return n(h,_(void 0))};i.exports=(h,v)=>Array.isArray(h)?Object.keys(h).map(l=>c(h[l],v)):c(h,v)},{camelcase:40,"map-obj":86,"quick-lru":101}],40:[function(e,i,t){const n=/[\p{Lu}]/u,a=/[\p{Ll}]/u,o=/^[\p{Lu}](?![\p{Lu}])/gu,d=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,f=new RegExp("^"+s.source),c=new RegExp(s.source+d.source,"gu"),h=new RegExp("\\d+"+d.source,"gu"),v=(m,w,_)=>{let C=!1,N=!1,P=!1;for(let M=0;M<m.length;M++){const U=m[M];C&&n.test(U)?(m=m.slice(0,M)+"-"+m.slice(M),C=!1,P=N,N=!0,M++):N&&P&&a.test(U)?(m=m.slice(0,M-1)+"-"+m.slice(M-1),P=N,N=!1,C=!0):(C=w(U)===U&&_(U)!==U,P=N,N=_(U)===U&&w(U)!==U)}return m},l=(m,w)=>(o.lastIndex=0,m.replace(o,_=>w(_))),u=(m,w)=>(c.lastIndex=0,h.lastIndex=0,m.replace(c,(_,C)=>w(C)).replace(h,_=>w(_))),p=(m,w)=>{if(!(typeof m=="string"||Array.isArray(m)))throw new TypeError("Expected the input to be `string | string[]`");if(w={pascalCase:!1,preserveConsecutiveUppercase:!1,...w},Array.isArray(m)?m=m.map(P=>P.trim()).filter(P=>P.length).join("-"):m=m.trim(),m.length===0)return"";const _=w.locale===!1?P=>P.toLowerCase():P=>P.toLocaleLowerCase(w.locale),C=w.locale===!1?P=>P.toUpperCase():P=>P.toLocaleUpperCase(w.locale);return m.length===1?w.pascalCase?C(m):_(m):(m!==_(m)&&(m=v(m,_,C)),m=m.replace(f,""),w.preserveConsecutiveUppercase?m=l(m,_):m=_(m),w.pascalCase&&(m=C(m.charAt(0))+m.slice(1)),u(m,C))};i.exports=p,i.exports.default=p},{}],41:[function(e,i,t){(function(n){(function(){t.formatArgs=o,t.save=d,t.load=s,t.useColors=a,t.storage=f(),t.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function a(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),!this.useColors)return;const v="color: "+this.color;h.splice(1,0,v,"color: inherit");let l=0,u=0;h[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(l++,p==="%c"&&(u=l))}),h.splice(u,0,v)}t.log=console.debug||console.log||(()=>{});function d(h){try{h?t.storage.setItem("debug",h):t.storage.removeItem("debug")}catch{}}function s(){let h;try{h=t.storage.getItem("debug")}catch{}return!h&&typeof n<"u"&&"env"in n&&(h={}.DEBUG),h}function f(){try{return localStorage}catch{}}i.exports=e("./common")(t);const{formatters:c}=i.exports;c.j=function(h){try{return JSON.stringify(h)}catch(v){return"[UnexpectedJSONParseError]: "+v.message}}}).call(this)}).call(this,e("_process"))},{"./common":42,_process:254}],42:[function(e,i,t){function n(a){d.debug=d,d.default=d,d.coerce=l,d.disable=c,d.enable=f,d.enabled=h,d.humanize=e("ms"),d.destroy=u,Object.keys(a).forEach(p=>{d[p]=a[p]}),d.names=[],d.skips=[],d.formatters={};function o(p){let m=0;for(let w=0;w<p.length;w++)m=(m<<5)-m+p.charCodeAt(w),m|=0;return d.colors[Math.abs(m)%d.colors.length]}d.selectColor=o;function d(p){let m,w=null,_,C;function N(...P){if(!N.enabled)return;const M=N,U=Number(new Date),W=U-(m||U);M.diff=W,M.prev=m,M.curr=U,m=U,P[0]=d.coerce(P[0]),typeof P[0]!="string"&&P.unshift("%O");let q=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(re,Y)=>{if(re==="%%")return"%";q++;const O=d.formatters[Y];if(typeof O=="function"){const x=P[q];re=O.call(M,x),P.splice(q,1),q--}return re}),d.formatArgs.call(M,P),(M.log||d.log).apply(M,P)}return N.namespace=p,N.useColors=d.useColors(),N.color=d.selectColor(p),N.extend=s,N.destroy=d.destroy,Object.defineProperty(N,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(_!==d.namespaces&&(_=d.namespaces,C=d.enabled(p)),C),set:P=>{w=P}}),typeof d.init=="function"&&d.init(N),N}function s(p,m){const w=d(this.namespace+(typeof m>"u"?":":m)+p);return w.log=this.log,w}function f(p){d.save(p),d.namespaces=p,d.names=[],d.skips=[];let m;const w=(typeof p=="string"?p:"").split(/[\s,]+/),_=w.length;for(m=0;m<_;m++)w[m]&&(p=w[m].replace(/\*/g,".*?"),p[0]==="-"?d.skips.push(new RegExp("^"+p.slice(1)+"$")):d.names.push(new RegExp("^"+p+"$")))}function c(){const p=[...d.names.map(v),...d.skips.map(v).map(m=>"-"+m)].join(",");return d.enable(""),p}function h(p){if(p[p.length-1]==="*")return!0;let m,w;for(m=0,w=d.skips.length;m<w;m++)if(d.skips[m].test(p))return!1;for(m=0,w=d.names.length;m<w;m++)if(d.names[m].test(p))return!0;return!1}function v(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}function l(p){return p instanceof Error?p.stack||p.message:p}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return d.enable(d.load()),d}i.exports=n},{ms:87}],43:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("./param-bytes-for-alg"),o=128,d=0,s=32,f=16,c=2,h=f|s|d<<6,v=c|d<<6;function l(_){return _.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function u(_){if(n.isBuffer(_))return _;if(typeof _=="string")return n.from(_,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function p(_,C){_=u(_);var N=a(C),P=N+1,M=_.length,U=0;if(_[U++]!==h)throw new Error('Could not find expected "seq"');var W=_[U++];if(W===(o|1)&&(W=_[U++]),M-U<W)throw new Error('"seq" specified length of "'+W+'", only "'+(M-U)+'" remaining');if(_[U++]!==v)throw new Error('Could not find expected "int" for "r"');var q=_[U++];if(M-U-2<q)throw new Error('"r" specified length of "'+q+'", only "'+(M-U-2)+'" available');if(P<q)throw new Error('"r" specified length of "'+q+'", max of "'+P+'" is acceptable');var Z=U;if(U+=q,_[U++]!==v)throw new Error('Could not find expected "int" for "s"');var re=_[U++];if(M-U!==re)throw new Error('"s" specified length of "'+re+'", expected "'+(M-U)+'"');if(P<re)throw new Error('"s" specified length of "'+re+'", max of "'+P+'" is acceptable');var Y=U;if(U+=re,U!==M)throw new Error('Expected to consume entire buffer, but "'+(M-U)+'" bytes remain');var O=N-q,x=N-re,S=n.allocUnsafe(O+q+x+re);for(U=0;U<O;++U)S[U]=0;_.copy(S,U,Z+Math.max(-O,0),Z+q),U=N;for(var k=U;U<k+x;++U)S[U]=0;return _.copy(S,U,Y+Math.max(-x,0),Y+re),S=S.toString("base64"),S=l(S),S}function m(_,C,N){for(var P=0;C+P<N&&_[C+P]===0;)++P;var M=_[C+P]>=o;return M&&--P,P}function w(_,C){_=u(_);var N=a(C),P=_.length;if(P!==N*2)throw new TypeError('"'+C+'" signatures must be "'+N*2+'" bytes, saw "'+P+'"');var M=m(_,0,N),U=m(_,N,_.length),W=N-M,q=N-U,Z=1+1+W+1+1+q,re=Z<o,Y=n.allocUnsafe((re?2:3)+Z),O=0;return Y[O++]=h,re?Y[O++]=Z:(Y[O++]=o|1,Y[O++]=Z&255),Y[O++]=v,Y[O++]=W,M<0?(Y[O++]=0,O+=_.copy(Y,O,0,N)):O+=_.copy(Y,O,M,N),Y[O++]=v,Y[O++]=q,U<0?(Y[O++]=0,_.copy(Y,O,N)):_.copy(Y,O,N+U),Y}i.exports={derToJose:p,joseToDer:w}},{"./param-bytes-for-alg":44,"safe-buffer":118}],44:[function(e,i,t){function n(d){var s=(d/8|0)+(d%8===0?0:1);return s}var a={ES256:n(256),ES384:n(384),ES512:n(521)};function o(d){var s=a[d];if(s)return s;throw new Error('Unknown algorithm "'+d+'"')}i.exports=o},{}],45:[function(e,i,t){function n(o,d){for(const s in d)Object.defineProperty(o,s,{value:d[s],enumerable:!0,configurable:!0});return o}function a(o,d,s){if(!o||typeof o=="string")throw new TypeError("Please pass an Error to err-code");s||(s={}),typeof d=="object"&&(s=d,d=""),d&&(s.code=d);try{return n(o,s)}catch{s.message=o.message,s.stack=o.stack;const c=function(){};return c.prototype=Object.create(Object.getPrototypeOf(o)),n(new c,s)}}i.exports=a},{}],46:[function(e,i,t){i.exports=function(){if(typeof globalThis>"u")return null;var a={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return a.RTCPeerConnection?a:null}},{}],47:[function(e,i,t){typeof Object.create=="function"?i.exports=function(a,o){o&&(a.super_=o,a.prototype=Object.create(o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function(a,o){if(o){a.super_=o;var d=function(){};d.prototype=o.prototype,a.prototype=new d,a.prototype.constructor=a}}},{}],48:[function(e,i,t){var n=e("jws");i.exports=function(a,o){o=o||{};var d=n.decode(a,o);if(!d)return null;var s=d.payload;if(typeof s=="string")try{var f=JSON.parse(s);f!==null&&typeof f=="object"&&(s=f)}catch{}return o.complete===!0?{header:d.header,payload:s,signature:d.signature}:s}},{jws:58}],49:[function(e,i,t){i.exports={decode:e("./decode"),verify:e("./verify"),sign:e("./sign"),JsonWebTokenError:e("./lib/JsonWebTokenError"),NotBeforeError:e("./lib/NotBeforeError"),TokenExpiredError:e("./lib/TokenExpiredError")}},{"./decode":48,"./lib/JsonWebTokenError":50,"./lib/NotBeforeError":51,"./lib/TokenExpiredError":52,"./sign":55,"./verify":56}],50:[function(e,i,t){var n=function(a,o){Error.call(this,a),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=a,o&&(this.inner=o)};n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,i.exports=n},{}],51:[function(e,i,t){var n=e("./JsonWebTokenError"),a=function(o,d){n.call(this,o),this.name="NotBeforeError",this.date=d};a.prototype=Object.create(n.prototype),a.prototype.constructor=a,i.exports=a},{"./JsonWebTokenError":50}],52:[function(e,i,t){var n=e("./JsonWebTokenError"),a=function(o,d){n.call(this,o),this.name="TokenExpiredError",this.expiredAt=d};a.prototype=Object.create(n.prototype),a.prototype.constructor=a,i.exports=a},{"./JsonWebTokenError":50}],53:[function(e,i,t){(function(n){(function(){var a=e("semver");i.exports=a.satisfies(n.version,"^6.12.0 || >=8.0.0")}).call(this)}).call(this,e("_process"))},{_process:254,semver:119}],54:[function(e,i,t){var n=e("ms");i.exports=function(a,o){var d=o||Math.floor(Date.now()/1e3);if(typeof a=="string"){var s=n(a);return typeof s>"u"?void 0:Math.floor(d+s/1e3)}else return typeof a=="number"?d+a:void 0}},{ms:88}],55:[function(e,i,t){(function(n){(function(){var a=e("./lib/timespan"),o=e("./lib/psSupported"),d=e("jws"),s=e("lodash.includes"),f=e("lodash.isboolean"),c=e("lodash.isinteger"),h=e("lodash.isnumber"),v=e("lodash.isplainobject"),l=e("lodash.isstring"),u=e("lodash.once"),p=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];o&&p.splice(3,0,"PS256","PS384","PS512");var m={expiresIn:{isValid:function(U){return c(U)||l(U)&&U},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(U){return c(U)||l(U)&&U},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(U){return l(U)||Array.isArray(U)},message:'"audience" must be a string or array'},algorithm:{isValid:s.bind(null,p),message:'"algorithm" must be a valid string enum value'},header:{isValid:v,message:'"header" must be an object'},encoding:{isValid:l,message:'"encoding" must be a string'},issuer:{isValid:l,message:'"issuer" must be a string'},subject:{isValid:l,message:'"subject" must be a string'},jwtid:{isValid:l,message:'"jwtid" must be a string'},noTimestamp:{isValid:f,message:'"noTimestamp" must be a boolean'},keyid:{isValid:l,message:'"keyid" must be a string'},mutatePayload:{isValid:f,message:'"mutatePayload" must be a boolean'}},w={iat:{isValid:h,message:'"iat" should be a number of seconds'},exp:{isValid:h,message:'"exp" should be a number of seconds'},nbf:{isValid:h,message:'"nbf" should be a number of seconds'}};function _(U,W,q,Z){if(!v(q))throw new Error('Expected "'+Z+'" to be a plain object.');Object.keys(q).forEach(function(re){var Y=U[re];if(!Y){if(!W)throw new Error('"'+re+'" is not allowed in "'+Z+'"');return}if(!Y.isValid(q[re]))throw new Error(Y.message)})}function C(U){return _(m,!1,U,"options")}function N(U){return _(w,!0,U,"payload")}var P={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},M=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];i.exports=function(U,W,q,Z){typeof q=="function"?(Z=q,q={}):q=q||{};var re=typeof U=="object"&&!n.isBuffer(U),Y=Object.assign({alg:q.algorithm||"HS256",typ:re?"JWT":void 0,kid:q.keyid},q.header);function O(g){if(Z)return Z(g);throw g}if(!W&&q.algorithm!=="none")return O(new Error("secretOrPrivateKey must have a value"));if(typeof U>"u")return O(new Error("payload is required"));if(re){try{N(U)}catch(g){return O(g)}q.mutatePayload||(U=Object.assign({},U))}else{var x=M.filter(function(g){return typeof q[g]<"u"});if(x.length>0)return O(new Error("invalid "+x.join(",")+" option for "+typeof U+" payload"))}if(typeof U.exp<"u"&&typeof q.expiresIn<"u")return O(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof U.nbf<"u"&&typeof q.notBefore<"u")return O(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{C(q)}catch(g){return O(g)}var S=U.iat||Math.floor(Date.now()/1e3);if(q.noTimestamp?delete U.iat:re&&(U.iat=S),typeof q.notBefore<"u"){try{U.nbf=a(q.notBefore,S)}catch(g){return O(g)}if(typeof U.nbf>"u")return O(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof q.expiresIn<"u"&&typeof U=="object"){try{U.exp=a(q.expiresIn,S)}catch(g){return O(g)}if(typeof U.exp>"u")return O(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(P).forEach(function(g){var E=P[g];if(typeof q[g]<"u"){if(typeof U[E]<"u")return O(new Error('Bad "options.'+g+'" option. The payload already has an "'+E+'" property.'));U[E]=q[g]}});var k=q.encoding||"utf8";if(typeof Z=="function")Z=Z&&u(Z),d.createSign({header:Y,privateKey:W,payload:U,encoding:k}).once("error",Z).once("done",function(g){Z(null,g)});else return d.sign({header:Y,payload:U,secret:W,encoding:k})}}).call(this)}).call(this,{isBuffer:e("../../../../../../../../Library/pnpm/global/5/.pnpm/is-buffer@1.1.6/node_modules/is-buffer/index.js")})},{"../../../../../../../../Library/pnpm/global/5/.pnpm/is-buffer@1.1.6/node_modules/is-buffer/index.js":235,"./lib/psSupported":53,"./lib/timespan":54,jws:58,"lodash.includes":78,"lodash.isboolean":79,"lodash.isinteger":80,"lodash.isnumber":81,"lodash.isplainobject":82,"lodash.isstring":83,"lodash.once":84}],56:[function(e,i,t){var n=e("./lib/JsonWebTokenError"),a=e("./lib/NotBeforeError"),o=e("./lib/TokenExpiredError"),d=e("./decode"),s=e("./lib/timespan"),f=e("./lib/psSupported"),c=e("jws"),h=["RS256","RS384","RS512","ES256","ES384","ES512"],v=["RS256","RS384","RS512"],l=["HS256","HS384","HS512"];f&&(h.splice(3,0,"PS256","PS384","PS512"),v.splice(3,0,"PS256","PS384","PS512")),i.exports=function(u,p,m,w){typeof m=="function"&&!w&&(w=m,m={}),m||(m={}),m=Object.assign({},m);var _;if(w?_=w:_=function(W,q){if(W)throw W;return q},m.clockTimestamp&&typeof m.clockTimestamp!="number")return _(new n("clockTimestamp must be a number"));if(m.nonce!==void 0&&(typeof m.nonce!="string"||m.nonce.trim()===""))return _(new n("nonce must be a non-empty string"));var C=m.clockTimestamp||Math.floor(Date.now()/1e3);if(!u)return _(new n("jwt must be provided"));if(typeof u!="string")return _(new n("jwt must be a string"));var N=u.split(".");if(N.length!==3)return _(new n("jwt malformed"));var P;try{P=d(u,{complete:!0})}catch(W){return _(W)}if(!P)return _(new n("invalid token"));var M=P.header,U;if(typeof p=="function"){if(!w)return _(new n("verify must be called asynchronous if secret or public key is provided as a callback"));U=p}else U=function(W,q){return q(null,p)};return U(M,function(W,q){if(W)return _(new n("error in secret or public key callback: "+W.message));var Z=N[2].trim()!=="";if(!Z&&q)return _(new n("jwt signature is required"));if(Z&&!q)return _(new n("secret or public key must be provided"));if(!Z&&!m.algorithms&&(m.algorithms=["none"]),m.algorithms||(m.algorithms=~q.toString().indexOf("BEGIN CERTIFICATE")||~q.toString().indexOf("BEGIN PUBLIC KEY")?h:~q.toString().indexOf("BEGIN RSA PUBLIC KEY")?v:l),!~m.algorithms.indexOf(P.header.alg))return _(new n("invalid algorithm"));var re;try{re=c.verify(u,P.header.alg,q)}catch(T){return _(T)}if(!re)return _(new n("invalid signature"));var Y=P.payload;if(typeof Y.nbf<"u"&&!m.ignoreNotBefore){if(typeof Y.nbf!="number")return _(new n("invalid nbf value"));if(Y.nbf>C+(m.clockTolerance||0))return _(new a("jwt not active",new Date(Y.nbf*1e3)))}if(typeof Y.exp<"u"&&!m.ignoreExpiration){if(typeof Y.exp!="number")return _(new n("invalid exp value"));if(C>=Y.exp+(m.clockTolerance||0))return _(new o("jwt expired",new Date(Y.exp*1e3)))}if(m.audience){var O=Array.isArray(m.audience)?m.audience:[m.audience],x=Array.isArray(Y.aud)?Y.aud:[Y.aud],S=x.some(function(T){return O.some(function(A){return A instanceof RegExp?A.test(T):A===T})});if(!S)return _(new n("jwt audience invalid. expected: "+O.join(" or ")))}if(m.issuer){var k=typeof m.issuer=="string"&&Y.iss!==m.issuer||Array.isArray(m.issuer)&&m.issuer.indexOf(Y.iss)===-1;if(k)return _(new n("jwt issuer invalid. expected: "+m.issuer))}if(m.subject&&Y.sub!==m.subject)return _(new n("jwt subject invalid. expected: "+m.subject));if(m.jwtid&&Y.jti!==m.jwtid)return _(new n("jwt jwtid invalid. expected: "+m.jwtid));if(m.nonce&&Y.nonce!==m.nonce)return _(new n("jwt nonce invalid. expected: "+m.nonce));if(m.maxAge){if(typeof Y.iat!="number")return _(new n("iat required when maxAge is specified"));var g=s(m.maxAge,Y.iat);if(typeof g>"u")return _(new n('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(C>=g+(m.clockTolerance||0))return _(new o("maxAge exceeded",new Date(g*1e3)))}if(m.complete===!0){var E=P.signature;return _(null,{header:M,payload:Y,signature:E})}return _(null,Y)})}},{"./decode":48,"./lib/JsonWebTokenError":50,"./lib/NotBeforeError":51,"./lib/TokenExpiredError":52,"./lib/psSupported":53,"./lib/timespan":54,jws:58}],57:[function(e,i,t){var n=e("buffer-equal-constant-time"),a=e("safe-buffer").Buffer,o=e("crypto"),d=e("ecdsa-sig-formatter"),s=e("util"),f=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,c="secret must be a string or buffer",h="key must be a string or a buffer",v="key must be a string, a buffer or an object",l=typeof o.createPublicKey=="function";l&&(h+=" or a KeyObject",c+="or a KeyObject");function u(k){if(!a.isBuffer(k)&&typeof k!="string"&&(!l||typeof k!="object"||typeof k.type!="string"||typeof k.asymmetricKeyType!="string"||typeof k.export!="function"))throw C(h)}function p(k){if(!a.isBuffer(k)&&typeof k!="string"&&typeof k!="object")throw C(v)}function m(k){if(!a.isBuffer(k)){if(typeof k=="string")return k;if(!l||typeof k!="object"||k.type!=="secret"||typeof k.export!="function")throw C(c)}}function w(k){return k.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _(k){k=k.toString();var g=4-k.length%4;if(g!==4)for(var E=0;E<g;++E)k+="=";return k.replace(/\-/g,"+").replace(/_/g,"/")}function C(k){var g=[].slice.call(arguments,1),E=s.format.bind(s,k).apply(null,g);return new TypeError(E)}function N(k){return a.isBuffer(k)||typeof k=="string"}function P(k){return N(k)||(k=JSON.stringify(k)),k}function M(k){return function(E,T){m(T),E=P(E);var A=o.createHmac("sha"+k,T),J=(A.update(E),A.digest("base64"));return w(J)}}function U(k){return function(E,T,A){var J=M(k)(E,A);return n(a.from(T),a.from(J))}}function W(k){return function(E,T){p(T),E=P(E);var A=o.createSign("RSA-SHA"+k),J=(A.update(E),A.sign(T,"base64"));return w(J)}}function q(k){return function(E,T,A){u(A),E=P(E),T=_(T);var J=o.createVerify("RSA-SHA"+k);return J.update(E),J.verify(A,T,"base64")}}function Z(k){return function(E,T){p(T),E=P(E);var A=o.createSign("RSA-SHA"+k),J=(A.update(E),A.sign({key:T,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return w(J)}}function re(k){return function(E,T,A){u(A),E=P(E),T=_(T);var J=o.createVerify("RSA-SHA"+k);return J.update(E),J.verify({key:A,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},T,"base64")}}function Y(k){var g=W(k);return function(){var T=g.apply(null,arguments);return T=d.derToJose(T,"ES"+k),T}}function O(k){var g=q(k);return function(T,A,J){A=d.joseToDer(A,"ES"+k).toString("base64");var G=g(T,A,J);return G}}function x(){return function(){return""}}function S(){return function(g,E){return E===""}}i.exports=function(g){var E={hs:M,rs:W,ps:Z,es:Y,none:x},T={hs:U,rs:q,ps:re,es:O,none:S},A=g.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!A)throw C(f,g);var J=(A[1]||A[3]).toLowerCase(),G=A[2];return{sign:E[J](G),verify:T[J](G)}}},{"buffer-equal-constant-time":38,crypto:180,"ecdsa-sig-formatter":43,"safe-buffer":118,util:294}],58:[function(e,i,t){var n=e("./lib/sign-stream"),a=e("./lib/verify-stream"),o=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];t.ALGORITHMS=o,t.sign=n.sign,t.verify=a.verify,t.decode=a.decode,t.isValid=a.isValid,t.createSign=function(s){return new n(s)},t.createVerify=function(s){return new a(s)}},{"./lib/sign-stream":60,"./lib/verify-stream":62}],59:[function(e,i,t){(function(n){(function(){var a=e("safe-buffer").Buffer,o=e("stream"),d=e("util");function s(f){if(this.buffer=null,this.writable=!0,this.readable=!0,!f)return this.buffer=a.alloc(0),this;if(typeof f.pipe=="function")return this.buffer=a.alloc(0),f.pipe(this),this;if(f.length||typeof f=="object")return this.buffer=f,this.writable=!1,n.nextTick(function(){this.emit("end",f),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof f+")")}d.inherits(s,o),s.prototype.write=function(c){this.buffer=a.concat([this.buffer,a.from(c)]),this.emit("data",c)},s.prototype.end=function(c){c&&this.write(c),this.emit("end",c),this.emit("close"),this.writable=!1,this.readable=!1},i.exports=s}).call(this)}).call(this,e("_process"))},{_process:254,"safe-buffer":118,stream:289,util:294}],60:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("./data-stream"),o=e("jwa"),d=e("stream"),s=e("./tostring"),f=e("util");function c(u,p){return n.from(u,p).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function h(u,p,m){m=m||"utf8";var w=c(s(u),"binary"),_=c(s(p),m);return f.format("%s.%s",w,_)}function v(u){var p=u.header,m=u.payload,w=u.secret||u.privateKey,_=u.encoding,C=o(p.alg),N=h(p,m,_),P=C.sign(N,w);return f.format("%s.%s",N,P)}function l(u){var p=u.secret||u.privateKey||u.key,m=new a(p);this.readable=!0,this.header=u.header,this.encoding=u.encoding,this.secret=this.privateKey=this.key=m,this.payload=new a(u.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}f.inherits(l,d),l.prototype.sign=function(){try{var p=v({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",p),this.emit("data",p),this.emit("end"),this.readable=!1,p}catch(m){this.readable=!1,this.emit("error",m),this.emit("close")}},l.sign=v,i.exports=l},{"./data-stream":59,"./tostring":61,jwa:57,"safe-buffer":118,stream:289,util:294}],61:[function(e,i,t){var n=e("buffer").Buffer;i.exports=function(o){return typeof o=="string"?o:typeof o=="number"||n.isBuffer(o)?o.toString():JSON.stringify(o)}},{buffer:171}],62:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("./data-stream"),o=e("jwa"),d=e("stream"),s=e("./tostring"),f=e("util"),c=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function h(P){return Object.prototype.toString.call(P)==="[object Object]"}function v(P){if(h(P))return P;try{return JSON.parse(P)}catch{return}}function l(P){var M=P.split(".",1)[0];return v(n.from(M,"base64").toString("binary"))}function u(P){return P.split(".",2).join(".")}function p(P){return P.split(".")[2]}function m(P,M){M=M||"utf8";var U=P.split(".")[1];return n.from(U,"base64").toString(M)}function w(P){return c.test(P)&&!!l(P)}function _(P,M,U){if(!M){var W=new Error("Missing algorithm parameter for jws.verify");throw W.code="MISSING_ALGORITHM",W}P=s(P);var q=p(P),Z=u(P),re=o(M);return re.verify(Z,q,U)}function C(P,M){if(M=M||{},P=s(P),!w(P))return null;var U=l(P);if(!U)return null;var W=m(P);return(U.typ==="JWT"||M.json)&&(W=JSON.parse(W,M.encoding)),{header:U,payload:W,signature:p(P)}}function N(P){P=P||{};var M=P.secret||P.publicKey||P.key,U=new a(M);this.readable=!0,this.algorithm=P.algorithm,this.encoding=P.encoding,this.secret=this.publicKey=this.key=U,this.signature=new a(P.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}f.inherits(N,d),N.prototype.verify=function(){try{var M=_(this.signature.buffer,this.algorithm,this.key.buffer),U=C(this.signature.buffer,this.encoding);return this.emit("done",M,U),this.emit("data",M),this.emit("end"),this.readable=!1,M}catch(W){this.readable=!1,this.emit("error",W),this.emit("close")}},N.decode=C,N.isValid=w,N.verify=_,i.exports=N},{"./data-stream":59,"./tostring":61,jwa:57,"safe-buffer":118,stream:289,util:294}],63:[function(e,i,t){(function(n){(function(){var a=this&&this.__createBinding||(Object.create?function(v,l,u,p){p===void 0&&(p=u),Object.defineProperty(v,p,{enumerable:!0,get:function(){return l[u]}})}:function(v,l,u,p){p===void 0&&(p=u),v[p]=l[u]}),o=this&&this.__setModuleDefault||(Object.create?function(v,l){Object.defineProperty(v,"default",{enumerable:!0,value:l})}:function(v,l){v.default=l}),d=this&&this.__importStar||function(v){if(v&&v.__esModule)return v;var l={};if(v!=null)for(var u in v)u!=="default"&&Object.prototype.hasOwnProperty.call(v,u)&&a(l,v,u);return o(l,v),l};Object.defineProperty(t,"__esModule",{value:!0}),t.TokenVerifier=t.AccessToken=void 0;const s=d(e("jsonwebtoken")),f=6*60*60;class c{constructor(l,u,p){if(l||(l={}.LIVEKIT_API_KEY),u||(u={}.LIVEKIT_API_SECRET),!l||!u)throw Error("api-key and api-secret must be set");this.apiKey=l,this.apiSecret=u,this.grants={},this.identity=p==null?void 0:p.identity,this.ttl=(p==null?void 0:p.ttl)||f,p!=null&&p.metadata&&(this.metadata=p.metadata),p!=null&&p.name&&(this.name=p.name)}addGrant(l){this.grants.video=l}set metadata(l){this.grants.metadata=l}set name(l){this.grants.name=l}get sha256(){return this.grants.sha256}set sha256(l){this.grants.sha256=l}toJwt(){var l;const u={issuer:this.apiKey,expiresIn:this.ttl,notBefore:0};if(this.identity)u.subject=this.identity,u.jwtid=this.identity;else if(!((l=this.grants.video)===null||l===void 0)&&l.roomJoin)throw Error("identity is required for join but not set");return s.sign(this.grants,this.apiSecret,u)}}t.AccessToken=c;class h{constructor(l,u){this.apiKey=l,this.apiSecret=u}verify(l){const u=s.verify(l,this.apiSecret,{issuer:this.apiKey});if(!u)throw Error("invalid token");return u}}t.TokenVerifier=h}).call(this)}).call(this,e("_process"))},{_process:254,jsonwebtoken:49}],64:[function(e,i,t){var n=this&&this.__awaiter||function(h,v,l,u){function p(m){return m instanceof l?m:new l(function(w){w(m)})}return new(l||(l=Promise))(function(m,w){function _(P){try{N(u.next(P))}catch(M){w(M)}}function C(P){try{N(u.throw(P))}catch(M){w(M)}}function N(P){P.done?m(P.value):p(P.value).then(_,C)}N((u=u.apply(h,v||[])).next())})},a=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(t,"__esModule",{value:!0}),t.EgressClient=void 0;const o=e("./proto/livekit_egress"),d=a(e("./ServiceBase")),s=e("./TwirpRPC"),f="Egress";class c extends d.default{constructor(v,l,u){super(l,u),this.rpc=new s.TwirpRpc(v,s.livekitPackage)}startRoomCompositeEgress(v,l,u,p,m,w,_){return n(this,void 0,void 0,function*(){let C;if(u!==void 0)if(typeof u=="string")C=u;else{const re=u;C=re.layout,p=re.encodingOptions,m=re.audioOnly,w=re.videoOnly,_=re.customBaseUrl}C??(C=""),m??(m=!1),w??(w=!1),_??(_="");const{file:N,segments:P,stream:M,preset:U,advanced:W}=this.getOutputParams(l,p),q=o.RoomCompositeEgressRequest.toJSON({roomName:v,layout:C,audioOnly:m,videoOnly:w,customBaseUrl:_,file:N,stream:M,segments:P,preset:U,advanced:W}),Z=yield this.rpc.request(f,"StartRoomCompositeEgress",q,this.authHeader({roomRecord:!0}));return o.EgressInfo.fromJSON(Z)})}startWebEgress(v,l,u){return n(this,void 0,void 0,function*(){const p=(u==null?void 0:u.audioOnly)||!1,m=(u==null?void 0:u.videoOnly)||!1,{file:w,segments:_,stream:C,preset:N,advanced:P}=this.getOutputParams(l,u==null?void 0:u.encodingOptions),M=o.WebEgressRequest.toJSON({url:v,audioOnly:p,videoOnly:m,file:w,stream:C,segments:_,preset:N,advanced:P}),U=yield this.rpc.request(f,"StartWebEgress",M,this.authHeader({roomRecord:!0}));return o.EgressInfo.fromJSON(U)})}startTrackCompositeEgress(v,l,u,p,m){return n(this,void 0,void 0,function*(){let w;if(u!==void 0)if(typeof u=="string")w=u;else{const q=u;w=q.audioTrackId,p=q.videoTrackId,m=q.encodingOptions}w??(w=""),p??(p="");const{file:_,segments:C,stream:N,preset:P,advanced:M}=this.getOutputParams(l,m),U=o.TrackCompositeEgressRequest.toJSON({roomName:v,audioTrackId:w,videoTrackId:p,file:_,stream:N,segments:C,preset:P,advanced:M}),W=yield this.rpc.request(f,"StartTrackCompositeEgress",U,this.authHeader({roomRecord:!0}));return o.EgressInfo.fromJSON(W)})}getOutputParams(v,l){let u,p,m,w,_;return v.filepath!==void 0?u=v:v.filenamePrefix!==void 0?m=v:p=v,l&&(typeof l=="number"?w=l:_=l),{file:u,segments:m,stream:p,preset:w,advanced:_}}startTrackEgress(v,l,u){return n(this,void 0,void 0,function*(){let p,m;l.filepath!==void 0?p=l:m=l;const w=o.TrackEgressRequest.toJSON({roomName:v,trackId:u,file:p,websocketUrl:m}),_=yield this.rpc.request(f,"StartTrackEgress",w,this.authHeader({roomRecord:!0}));return o.EgressInfo.fromJSON(_)})}updateLayout(v,l){return n(this,void 0,void 0,function*(){const u=yield this.rpc.request(f,"UpdateLayout",o.UpdateLayoutRequest.toJSON({egressId:v,layout:l}),this.authHeader({roomRecord:!0}));return o.EgressInfo.fromJSON(u)})}updateStream(v,l,u){return n(this,void 0,void 0,function*(){l??(l=[]),u??(u=[]);const p=yield this.rpc.request(f,"UpdateStream",o.UpdateStreamRequest.toJSON({egressId:v,addOutputUrls:l,removeOutputUrls:u}),this.authHeader({roomRecord:!0}));return o.EgressInfo.fromJSON(p)})}listEgress(v){var l;return n(this,void 0,void 0,function*(){v??(v="");const u=yield this.rpc.request(f,"ListEgress",o.ListEgressRequest.toJSON({roomName:v}),this.authHeader({roomRecord:!0}));return(l=o.ListEgressResponse.fromJSON(u).items)!==null&&l!==void 0?l:[]})}stopEgress(v){return n(this,void 0,void 0,function*(){const l=yield this.rpc.request(f,"StopEgress",o.StopEgressRequest.toJSON({egressId:v}),this.authHeader({roomRecord:!0}));return o.EgressInfo.fromJSON(l)})}}t.EgressClient=c},{"./ServiceBase":67,"./TwirpRPC":68,"./proto/livekit_egress":73}],65:[function(e,i,t){var n=this&&this.__awaiter||function(h,v,l,u){function p(m){return m instanceof l?m:new l(function(w){w(m)})}return new(l||(l=Promise))(function(m,w){function _(P){try{N(u.next(P))}catch(M){w(M)}}function C(P){try{N(u.throw(P))}catch(M){w(M)}}function N(P){P.done?m(P.value):p(P.value).then(_,C)}N((u=u.apply(h,v||[])).next())})},a=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(t,"__esModule",{value:!0}),t.IngressClient=void 0;const o=e("./proto/livekit_ingress"),d=a(e("./ServiceBase")),s=e("./TwirpRPC"),f="Ingress";class c extends d.default{constructor(v,l,u){super(l,u),this.rpc=new s.TwirpRpc(v,s.livekitPackage)}createIngress(v,l){return n(this,void 0,void 0,function*(){let u="",p="",m="",w="",_,C;l!==void 0&&(u=l.name||"",p=l.roomName||"",m=l.participantName||"",w=l.participantIdentity||"",_=l.audioParams,C=l.videoParams);const N=o.CreateIngressRequest.toJSON({inputType:v,name:u,roomName:p,participantIdentity:w,participantName:m,audio:_,video:C}),P=yield this.rpc.request(f,"CreateIngress",N,this.authHeader({ingressAdmin:!0}));return o.IngressInfo.fromJSON(P)})}updateIngress(v,l){return n(this,void 0,void 0,function*(){const u=l.name||"",p=l.roomName||"",m=l.participantName||"",w=l.participantIdentity||"",_=l.audioParams,C=l.videoParams,N=o.UpdateIngressRequest.toJSON({ingressId:v,name:u,roomName:p,participantIdentity:w,participantName:m,audio:_,video:C}),P=yield this.rpc.request(f,"UpdateIngress",N,this.authHeader({ingressAdmin:!0}));return o.IngressInfo.fromJSON(P)})}listIngress(v){var l;return n(this,void 0,void 0,function*(){v??(v="");const u=yield this.rpc.request(f,"ListIngress",o.ListIngressRequest.toJSON({roomName:v}),this.authHeader({ingressAdmin:!0}));return(l=o.ListIngressResponse.fromJSON(u).items)!==null&&l!==void 0?l:[]})}deleteIngress(v){return n(this,void 0,void 0,function*(){const l=yield this.rpc.request(f,"DeleteIngress",o.DeleteIngressRequest.toJSON({ingressId:v}),this.authHeader({ingressAdmin:!0}));return o.IngressInfo.fromJSON(l)})}}t.IngressClient=c},{"./ServiceBase":67,"./TwirpRPC":68,"./proto/livekit_ingress":74}],66:[function(e,i,t){var n=this&&this.__awaiter||function(v,l,u,p){function m(w){return w instanceof u?w:new u(function(_){_(w)})}return new(u||(u=Promise))(function(w,_){function C(M){try{P(p.next(M))}catch(U){_(U)}}function N(M){try{P(p.throw(M))}catch(U){_(U)}}function P(M){M.done?w(M.value):m(M.value).then(C,N)}P((p=p.apply(v,l||[])).next())})},a=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(t,"__esModule",{value:!0}),t.RoomServiceClient=void 0;const o=e("./proto/livekit_models"),d=e("./proto/livekit_room"),s=a(e("./ServiceBase")),f=e("./TwirpRPC"),c="RoomService";class h extends s.default{constructor(l,u,p){super(u,p),this.rpc=new f.TwirpRpc(l,f.livekitPackage)}createRoom(l){return n(this,void 0,void 0,function*(){const u=yield this.rpc.request(c,"CreateRoom",d.CreateRoomRequest.toJSON(d.CreateRoomRequest.fromPartial(l)),this.authHeader({roomCreate:!0}));return o.Room.fromJSON(u)})}listRooms(l){var u;return n(this,void 0,void 0,function*(){const p=yield this.rpc.request(c,"ListRooms",d.ListRoomsRequest.toJSON({names:l??[]}),this.authHeader({roomList:!0}));return(u=d.ListRoomsResponse.fromJSON(p).rooms)!==null&&u!==void 0?u:[]})}deleteRoom(l){return n(this,void 0,void 0,function*(){yield this.rpc.request(c,"DeleteRoom",d.DeleteRoomRequest.toJSON({room:l}),this.authHeader({roomCreate:!0}))})}updateRoomMetadata(l,u){return n(this,void 0,void 0,function*(){const p=yield this.rpc.request(c,"UpdateRoomMetadata",d.UpdateRoomMetadataRequest.toJSON({room:l,metadata:u}),this.authHeader({roomAdmin:!0,room:l}));return o.Room.fromJSON(p)})}listParticipants(l){var u;return n(this,void 0,void 0,function*(){const p=yield this.rpc.request(c,"ListParticipants",d.ListParticipantsRequest.toJSON({room:l}),this.authHeader({roomAdmin:!0,room:l}));return(u=d.ListParticipantsResponse.fromJSON(p).participants)!==null&&u!==void 0?u:[]})}getParticipant(l,u){return n(this,void 0,void 0,function*(){const p=yield this.rpc.request(c,"GetParticipant",d.RoomParticipantIdentity.toJSON({room:l,identity:u}),this.authHeader({roomAdmin:!0,room:l}));return o.ParticipantInfo.fromJSON(p)})}removeParticipant(l,u){return n(this,void 0,void 0,function*(){yield this.rpc.request(c,"RemoveParticipant",d.RoomParticipantIdentity.toJSON({room:l,identity:u}),this.authHeader({roomAdmin:!0,room:l}))})}mutePublishedTrack(l,u,p,m){return n(this,void 0,void 0,function*(){const w=d.MuteRoomTrackRequest.toJSON({room:l,identity:u,trackSid:p,muted:m}),_=yield this.rpc.request(c,"MutePublishedTrack",w,this.authHeader({roomAdmin:!0,room:l}));return d.MuteRoomTrackResponse.fromJSON(_).track})}updateParticipant(l,u,p,m,w){return n(this,void 0,void 0,function*(){const _={room:l,identity:u,metadata:p||"",permission:m,name:w||""},C=yield this.rpc.request(c,"UpdateParticipant",d.UpdateParticipantRequest.toJSON(_),this.authHeader({roomAdmin:!0,room:l}));return o.ParticipantInfo.fromJSON(C)})}updateSubscriptions(l,u,p,m){return n(this,void 0,void 0,function*(){const w=d.UpdateSubscriptionsRequest.toJSON({room:l,identity:u,trackSids:p,subscribe:m,participantTracks:[]});yield this.rpc.request(c,"UpdateSubscriptions",w,this.authHeader({roomAdmin:!0,room:l}))})}sendData(l,u,p,m=[]){return n(this,void 0,void 0,function*(){const w=d.SendDataRequest.toJSON({room:l,data:u,kind:p,destinationSids:m});yield this.rpc.request(c,"SendData",w,this.authHeader({roomAdmin:!0,room:l}))})}}t.RoomServiceClient=h},{"./ServiceBase":67,"./TwirpRPC":68,"./proto/livekit_models":75,"./proto/livekit_room":76}],67:[function(e,i,t){Object.defineProperty(t,"__esModule",{value:!0});const n=e("./AccessToken");class a{constructor(d,s,f){this.apiKey=d,this.secret=s,this.ttl=f||"10m"}authHeader(d){const s=new n.AccessToken(this.apiKey,this.secret,{ttl:this.ttl});return s.addGrant(d),{Authorization:`Bearer ${s.toJwt()}`}}}t.default=a},{"./AccessToken":63}],68:[function(e,i,t){var n=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.TwirpRpc=t.livekitPackage=void 0;const a=n(e("axios")),o=n(e("camelcase-keys")),d="/twirp";t.livekitPackage="livekit";class s{constructor(c,h,v){this.host=c,this.pkg=h,this.prefix=v||d,this.instance=a.default.create({baseURL:c})}request(c,h,v,l){return new Promise((u,p)=>{const m=`${this.prefix}/${this.pkg}.${c}/${h}`;this.instance.post(m,v,{headers:l}).then(w=>{u(o.default(w.data,{deep:!0}))}).catch(p)})}}t.TwirpRpc=s},{axios:9,"camelcase-keys":39}],69:[function(e,i,t){var n=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebhookReceiver=t.authorizeHeader=void 0;const a=n(e("crypto")),o=e("./AccessToken"),d=e("./proto/livekit_webhook");t.authorizeHeader="Authorize";class s{constructor(c,h){this.verifier=new o.TokenVerifier(c,h)}receive(c,h,v=!1){if(!v){if(!h)throw new Error("authorization header is empty");const l=this.verifier.verify(h),u=a.default.createHash("sha256");if(u.update(c),l.sha256!==u.digest("base64"))throw new Error("sha256 checksum of body does not match")}return d.WebhookEvent.fromJSON(JSON.parse(c))}}t.WebhookReceiver=s},{"./AccessToken":63,"./proto/livekit_webhook":77,crypto:180}],70:[function(e,i,t){Object.defineProperty(t,"__esModule",{value:!0})},{}],71:[function(e,i,t){var n=this&&this.__createBinding||(Object.create?function(f,c,h,v){v===void 0&&(v=h),Object.defineProperty(f,v,{enumerable:!0,get:function(){return c[h]}})}:function(f,c,h,v){v===void 0&&(v=h),f[v]=c[h]}),a=this&&this.__exportStar||function(f,c){for(var h in f)h!=="default"&&!Object.prototype.hasOwnProperty.call(c,h)&&n(c,f,h)};Object.defineProperty(t,"__esModule",{value:!0}),t.TrackType=t.TrackInfo=t.Room=t.ParticipantPermission=t.ParticipantInfo_State=t.ParticipantInfo=t.DataPacket_Kind=t.IngressVideoOptions=t.IngressState=t.IngressInput=t.IngressInfo=t.IngressAudioOptions=t.StreamProtocol=t.StreamOutput=t.SegmentedFileProtocol=t.SegmentedFileOutput=t.EncodingOptionsPreset=t.EncodingOptions=t.EncodedFileType=t.EncodedFileOutput=t.EgressInfo=t.DirectFileOutput=void 0,a(e("./AccessToken"),t),a(e("./EgressClient"),t),a(e("./grants"),t),a(e("./IngressClient"),t);var o=e("./proto/livekit_egress");Object.defineProperty(t,"DirectFileOutput",{enumerable:!0,get:function(){return o.DirectFileOutput}}),Object.defineProperty(t,"EgressInfo",{enumerable:!0,get:function(){return o.EgressInfo}}),Object.defineProperty(t,"EncodedFileOutput",{enumerable:!0,get:function(){return o.EncodedFileOutput}}),Object.defineProperty(t,"EncodedFileType",{enumerable:!0,get:function(){return o.EncodedFileType}}),Object.defineProperty(t,"EncodingOptions",{enumerable:!0,get:function(){return o.EncodingOptions}}),Object.defineProperty(t,"EncodingOptionsPreset",{enumerable:!0,get:function(){return o.EncodingOptionsPreset}}),Object.defineProperty(t,"SegmentedFileOutput",{enumerable:!0,get:function(){return o.SegmentedFileOutput}}),Object.defineProperty(t,"SegmentedFileProtocol",{enumerable:!0,get:function(){return o.SegmentedFileProtocol}}),Object.defineProperty(t,"StreamOutput",{enumerable:!0,get:function(){return o.StreamOutput}}),Object.defineProperty(t,"StreamProtocol",{enumerable:!0,get:function(){return o.StreamProtocol}});var d=e("./proto/livekit_ingress");Object.defineProperty(t,"IngressAudioOptions",{enumerable:!0,get:function(){return d.IngressAudioOptions}}),Object.defineProperty(t,"IngressInfo",{enumerable:!0,get:function(){return d.IngressInfo}}),Object.defineProperty(t,"IngressInput",{enumerable:!0,get:function(){return d.IngressInput}}),Object.defineProperty(t,"IngressState",{enumerable:!0,get:function(){return d.IngressState}}),Object.defineProperty(t,"IngressVideoOptions",{enumerable:!0,get:function(){return d.IngressVideoOptions}});var s=e("./proto/livekit_models");Object.defineProperty(t,"DataPacket_Kind",{enumerable:!0,get:function(){return s.DataPacket_Kind}}),Object.defineProperty(t,"ParticipantInfo",{enumerable:!0,get:function(){return s.ParticipantInfo}}),Object.defineProperty(t,"ParticipantInfo_State",{enumerable:!0,get:function(){return s.ParticipantInfo_State}}),Object.defineProperty(t,"ParticipantPermission",{enumerable:!0,get:function(){return s.ParticipantPermission}}),Object.defineProperty(t,"Room",{enumerable:!0,get:function(){return s.Room}}),Object.defineProperty(t,"TrackInfo",{enumerable:!0,get:function(){return s.TrackInfo}}),Object.defineProperty(t,"TrackType",{enumerable:!0,get:function(){return s.TrackType}}),a(e("./RoomServiceClient"),t),a(e("./WebhookReceiver"),t)},{"./AccessToken":63,"./EgressClient":64,"./IngressClient":65,"./RoomServiceClient":66,"./WebhookReceiver":69,"./grants":70,"./proto/livekit_egress":73,"./proto/livekit_ingress":74,"./proto/livekit_models":75}],72:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(t,"__esModule",{value:!0}),t.Timestamp=t.protobufPackage=void 0;const o=a(e("long")),d=a(e("protobufjs/minimal"));t.protobufPackage="google.protobuf";function s(){return{seconds:0,nanos:0}}t.Timestamp={encode(v,l=d.default.Writer.create()){return v.seconds!==0&&l.uint32(8).int64(v.seconds),v.nanos!==0&&l.uint32(16).int32(v.nanos),l},decode(v,l){const u=v instanceof d.default.Reader?v:new d.default.Reader(v);let p=l===void 0?u.len:u.pos+l;const m=s();for(;u.pos<p;){const w=u.uint32();switch(w>>>3){case 1:m.seconds=c(u.int64());break;case 2:m.nanos=u.int32();break;default:u.skipType(w&7);break}}return m},fromJSON(v){return{seconds:h(v.seconds)?Number(v.seconds):0,nanos:h(v.nanos)?Number(v.nanos):0}},toJSON(v){const l={};return v.seconds!==void 0&&(l.seconds=Math.round(v.seconds)),v.nanos!==void 0&&(l.nanos=Math.round(v.nanos)),l},fromPartial(v){var l,u;const p=s();return p.seconds=(l=v.seconds)!==null&&l!==void 0?l:0,p.nanos=(u=v.nanos)!==null&&u!==void 0?u:0,p}};var f=(()=>{if(typeof f<"u")return f;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function c(v){if(v.gt(Number.MAX_SAFE_INTEGER))throw new f.Error("Value is larger than Number.MAX_SAFE_INTEGER");return v.toNumber()}d.default.util.Long!==o.default&&(d.default.util.Long=o.default,d.default.configure());function h(v){return v!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{long:85,"protobufjs/minimal":89}],73:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoTrackEgress=t.SegmentsInfo=t.FileInfo=t.StreamInfo=t.StreamInfoList=t.EgressInfo=t.StopEgressRequest=t.ListEgressResponse=t.ListEgressRequest=t.UpdateStreamRequest=t.UpdateLayoutRequest=t.EncodingOptions=t.StreamOutput=t.AliOSSUpload=t.AzureBlobUpload=t.GCPUpload=t.S3Upload_MetadataEntry=t.S3Upload=t.DirectFileOutput=t.SegmentedFileOutput=t.EncodedFileOutput=t.WebEgressRequest=t.TrackEgressRequest=t.TrackCompositeEgressRequest=t.RoomCompositeEgressRequest=t.streamInfo_StatusToJSON=t.streamInfo_StatusFromJSON=t.StreamInfo_Status=t.egressStatusToJSON=t.egressStatusFromJSON=t.EgressStatus=t.encodingOptionsPresetToJSON=t.encodingOptionsPresetFromJSON=t.EncodingOptionsPreset=t.videoCodecToJSON=t.videoCodecFromJSON=t.VideoCodec=t.audioCodecToJSON=t.audioCodecFromJSON=t.AudioCodec=t.segmentedFileProtocolToJSON=t.segmentedFileProtocolFromJSON=t.SegmentedFileProtocol=t.streamProtocolToJSON=t.streamProtocolFromJSON=t.StreamProtocol=t.encodedFileTypeToJSON=t.encodedFileTypeFromJSON=t.EncodedFileType=t.protobufPackage=void 0;const o=a(e("long")),d=a(e("protobufjs/minimal"));t.protobufPackage="livekit";var s;(function(y){y[y.DEFAULT_FILETYPE=0]="DEFAULT_FILETYPE",y[y.MP4=1]="MP4",y[y.OGG=2]="OGG",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(s=t.EncodedFileType||(t.EncodedFileType={}));function f(y){switch(y){case 0:case"DEFAULT_FILETYPE":return s.DEFAULT_FILETYPE;case 1:case"MP4":return s.MP4;case 2:case"OGG":return s.OGG;case-1:case"UNRECOGNIZED":default:return s.UNRECOGNIZED}}t.encodedFileTypeFromJSON=f;function c(y){switch(y){case s.DEFAULT_FILETYPE:return"DEFAULT_FILETYPE";case s.MP4:return"MP4";case s.OGG:return"OGG";case s.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.encodedFileTypeToJSON=c;var h;(function(y){y[y.DEFAULT_PROTOCOL=0]="DEFAULT_PROTOCOL",y[y.RTMP=1]="RTMP",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(h=t.StreamProtocol||(t.StreamProtocol={}));function v(y){switch(y){case 0:case"DEFAULT_PROTOCOL":return h.DEFAULT_PROTOCOL;case 1:case"RTMP":return h.RTMP;case-1:case"UNRECOGNIZED":default:return h.UNRECOGNIZED}}t.streamProtocolFromJSON=v;function l(y){switch(y){case h.DEFAULT_PROTOCOL:return"DEFAULT_PROTOCOL";case h.RTMP:return"RTMP";case h.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.streamProtocolToJSON=l;var u;(function(y){y[y.DEFAULT_SEGMENTED_FILE_PROTOCOL=0]="DEFAULT_SEGMENTED_FILE_PROTOCOL",y[y.HLS_PROTOCOL=1]="HLS_PROTOCOL",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(u=t.SegmentedFileProtocol||(t.SegmentedFileProtocol={}));function p(y){switch(y){case 0:case"DEFAULT_SEGMENTED_FILE_PROTOCOL":return u.DEFAULT_SEGMENTED_FILE_PROTOCOL;case 1:case"HLS_PROTOCOL":return u.HLS_PROTOCOL;case-1:case"UNRECOGNIZED":default:return u.UNRECOGNIZED}}t.segmentedFileProtocolFromJSON=p;function m(y){switch(y){case u.DEFAULT_SEGMENTED_FILE_PROTOCOL:return"DEFAULT_SEGMENTED_FILE_PROTOCOL";case u.HLS_PROTOCOL:return"HLS_PROTOCOL";case u.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.segmentedFileProtocolToJSON=m;var w;(function(y){y[y.DEFAULT_AC=0]="DEFAULT_AC",y[y.OPUS=1]="OPUS",y[y.AAC=2]="AAC",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(w=t.AudioCodec||(t.AudioCodec={}));function _(y){switch(y){case 0:case"DEFAULT_AC":return w.DEFAULT_AC;case 1:case"OPUS":return w.OPUS;case 2:case"AAC":return w.AAC;case-1:case"UNRECOGNIZED":default:return w.UNRECOGNIZED}}t.audioCodecFromJSON=_;function C(y){switch(y){case w.DEFAULT_AC:return"DEFAULT_AC";case w.OPUS:return"OPUS";case w.AAC:return"AAC";case w.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.audioCodecToJSON=C;var N;(function(y){y[y.DEFAULT_VC=0]="DEFAULT_VC",y[y.H264_BASELINE=1]="H264_BASELINE",y[y.H264_MAIN=2]="H264_MAIN",y[y.H264_HIGH=3]="H264_HIGH",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(N=t.VideoCodec||(t.VideoCodec={}));function P(y){switch(y){case 0:case"DEFAULT_VC":return N.DEFAULT_VC;case 1:case"H264_BASELINE":return N.H264_BASELINE;case 2:case"H264_MAIN":return N.H264_MAIN;case 3:case"H264_HIGH":return N.H264_HIGH;case-1:case"UNRECOGNIZED":default:return N.UNRECOGNIZED}}t.videoCodecFromJSON=P;function M(y){switch(y){case N.DEFAULT_VC:return"DEFAULT_VC";case N.H264_BASELINE:return"H264_BASELINE";case N.H264_MAIN:return"H264_MAIN";case N.H264_HIGH:return"H264_HIGH";case N.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.videoCodecToJSON=M;var U;(function(y){y[y.H264_720P_30=0]="H264_720P_30",y[y.H264_720P_60=1]="H264_720P_60",y[y.H264_1080P_30=2]="H264_1080P_30",y[y.H264_1080P_60=3]="H264_1080P_60",y[y.PORTRAIT_H264_720P_30=4]="PORTRAIT_H264_720P_30",y[y.PORTRAIT_H264_720P_60=5]="PORTRAIT_H264_720P_60",y[y.PORTRAIT_H264_1080P_30=6]="PORTRAIT_H264_1080P_30",y[y.PORTRAIT_H264_1080P_60=7]="PORTRAIT_H264_1080P_60",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(U=t.EncodingOptionsPreset||(t.EncodingOptionsPreset={}));function W(y){switch(y){case 0:case"H264_720P_30":return U.H264_720P_30;case 1:case"H264_720P_60":return U.H264_720P_60;case 2:case"H264_1080P_30":return U.H264_1080P_30;case 3:case"H264_1080P_60":return U.H264_1080P_60;case 4:case"PORTRAIT_H264_720P_30":return U.PORTRAIT_H264_720P_30;case 5:case"PORTRAIT_H264_720P_60":return U.PORTRAIT_H264_720P_60;case 6:case"PORTRAIT_H264_1080P_30":return U.PORTRAIT_H264_1080P_30;case 7:case"PORTRAIT_H264_1080P_60":return U.PORTRAIT_H264_1080P_60;case-1:case"UNRECOGNIZED":default:return U.UNRECOGNIZED}}t.encodingOptionsPresetFromJSON=W;function q(y){switch(y){case U.H264_720P_30:return"H264_720P_30";case U.H264_720P_60:return"H264_720P_60";case U.H264_1080P_30:return"H264_1080P_30";case U.H264_1080P_60:return"H264_1080P_60";case U.PORTRAIT_H264_720P_30:return"PORTRAIT_H264_720P_30";case U.PORTRAIT_H264_720P_60:return"PORTRAIT_H264_720P_60";case U.PORTRAIT_H264_1080P_30:return"PORTRAIT_H264_1080P_30";case U.PORTRAIT_H264_1080P_60:return"PORTRAIT_H264_1080P_60";case U.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.encodingOptionsPresetToJSON=q;var Z;(function(y){y[y.EGRESS_STARTING=0]="EGRESS_STARTING",y[y.EGRESS_ACTIVE=1]="EGRESS_ACTIVE",y[y.EGRESS_ENDING=2]="EGRESS_ENDING",y[y.EGRESS_COMPLETE=3]="EGRESS_COMPLETE",y[y.EGRESS_FAILED=4]="EGRESS_FAILED",y[y.EGRESS_ABORTED=5]="EGRESS_ABORTED",y[y.EGRESS_LIMIT_REACHED=6]="EGRESS_LIMIT_REACHED",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Z=t.EgressStatus||(t.EgressStatus={}));function re(y){switch(y){case 0:case"EGRESS_STARTING":return Z.EGRESS_STARTING;case 1:case"EGRESS_ACTIVE":return Z.EGRESS_ACTIVE;case 2:case"EGRESS_ENDING":return Z.EGRESS_ENDING;case 3:case"EGRESS_COMPLETE":return Z.EGRESS_COMPLETE;case 4:case"EGRESS_FAILED":return Z.EGRESS_FAILED;case 5:case"EGRESS_ABORTED":return Z.EGRESS_ABORTED;case 6:case"EGRESS_LIMIT_REACHED":return Z.EGRESS_LIMIT_REACHED;case-1:case"UNRECOGNIZED":default:return Z.UNRECOGNIZED}}t.egressStatusFromJSON=re;function Y(y){switch(y){case Z.EGRESS_STARTING:return"EGRESS_STARTING";case Z.EGRESS_ACTIVE:return"EGRESS_ACTIVE";case Z.EGRESS_ENDING:return"EGRESS_ENDING";case Z.EGRESS_COMPLETE:return"EGRESS_COMPLETE";case Z.EGRESS_FAILED:return"EGRESS_FAILED";case Z.EGRESS_ABORTED:return"EGRESS_ABORTED";case Z.EGRESS_LIMIT_REACHED:return"EGRESS_LIMIT_REACHED";case Z.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.egressStatusToJSON=Y;var O;(function(y){y[y.ACTIVE=0]="ACTIVE",y[y.FINISHED=1]="FINISHED",y[y.FAILED=2]="FAILED",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(O=t.StreamInfo_Status||(t.StreamInfo_Status={}));function x(y){switch(y){case 0:case"ACTIVE":return O.ACTIVE;case 1:case"FINISHED":return O.FINISHED;case 2:case"FAILED":return O.FAILED;case-1:case"UNRECOGNIZED":default:return O.UNRECOGNIZED}}t.streamInfo_StatusFromJSON=x;function S(y){switch(y){case O.ACTIVE:return"ACTIVE";case O.FINISHED:return"FINISHED";case O.FAILED:return"FAILED";case O.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.streamInfo_StatusToJSON=S;function k(){return{roomName:"",layout:"",audioOnly:!1,videoOnly:!1,customBaseUrl:"",file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}t.RoomCompositeEgressRequest={encode(y,L=d.default.Writer.create()){return y.roomName!==void 0&&y.roomName!==""&&L.uint32(10).string(y.roomName),y.layout!==void 0&&y.layout!==""&&L.uint32(18).string(y.layout),y.audioOnly===!0&&L.uint32(24).bool(y.audioOnly),y.videoOnly===!0&&L.uint32(32).bool(y.videoOnly),y.customBaseUrl!==void 0&&y.customBaseUrl!==""&&L.uint32(42).string(y.customBaseUrl),y.file!==void 0&&t.EncodedFileOutput.encode(y.file,L.uint32(50).fork()).ldelim(),y.stream!==void 0&&t.StreamOutput.encode(y.stream,L.uint32(58).fork()).ldelim(),y.segments!==void 0&&t.SegmentedFileOutput.encode(y.segments,L.uint32(82).fork()).ldelim(),y.preset!==void 0&&L.uint32(64).int32(y.preset),y.advanced!==void 0&&t.EncodingOptions.encode(y.advanced,L.uint32(74).fork()).ldelim(),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=k();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.roomName=H.string();break;case 2:j.layout=H.string();break;case 3:j.audioOnly=H.bool();break;case 4:j.videoOnly=H.bool();break;case 5:j.customBaseUrl=H.string();break;case 6:j.file=t.EncodedFileOutput.decode(H,H.uint32());break;case 7:j.stream=t.StreamOutput.decode(H,H.uint32());break;case 10:j.segments=t.SegmentedFileOutput.decode(H,H.uint32());break;case 8:j.preset=H.int32();break;case 9:j.advanced=t.EncodingOptions.decode(H,H.uint32());break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{roomName:ue(y.roomName)?String(y.roomName):"",layout:ue(y.layout)?String(y.layout):"",audioOnly:ue(y.audioOnly)?!!y.audioOnly:!1,videoOnly:ue(y.videoOnly)?!!y.videoOnly:!1,customBaseUrl:ue(y.customBaseUrl)?String(y.customBaseUrl):"",file:ue(y.file)?t.EncodedFileOutput.fromJSON(y.file):void 0,stream:ue(y.stream)?t.StreamOutput.fromJSON(y.stream):void 0,segments:ue(y.segments)?t.SegmentedFileOutput.fromJSON(y.segments):void 0,preset:ue(y.preset)?W(y.preset):void 0,advanced:ue(y.advanced)?t.EncodingOptions.fromJSON(y.advanced):void 0}},toJSON(y){const L={};return y.roomName!==void 0&&(L.roomName=y.roomName),y.layout!==void 0&&(L.layout=y.layout),y.audioOnly!==void 0&&(L.audioOnly=y.audioOnly),y.videoOnly!==void 0&&(L.videoOnly=y.videoOnly),y.customBaseUrl!==void 0&&(L.customBaseUrl=y.customBaseUrl),y.file!==void 0&&(L.file=y.file?t.EncodedFileOutput.toJSON(y.file):void 0),y.stream!==void 0&&(L.stream=y.stream?t.StreamOutput.toJSON(y.stream):void 0),y.segments!==void 0&&(L.segments=y.segments?t.SegmentedFileOutput.toJSON(y.segments):void 0),y.preset!==void 0&&(L.preset=y.preset!==void 0?q(y.preset):void 0),y.advanced!==void 0&&(L.advanced=y.advanced?t.EncodingOptions.toJSON(y.advanced):void 0),L},fromPartial(y){var L,H,fe,j,b,D;const K=k();return K.roomName=(L=y.roomName)!==null&&L!==void 0?L:"",K.layout=(H=y.layout)!==null&&H!==void 0?H:"",K.audioOnly=(fe=y.audioOnly)!==null&&fe!==void 0?fe:!1,K.videoOnly=(j=y.videoOnly)!==null&&j!==void 0?j:!1,K.customBaseUrl=(b=y.customBaseUrl)!==null&&b!==void 0?b:"",K.file=y.file!==void 0&&y.file!==null?t.EncodedFileOutput.fromPartial(y.file):void 0,K.stream=y.stream!==void 0&&y.stream!==null?t.StreamOutput.fromPartial(y.stream):void 0,K.segments=y.segments!==void 0&&y.segments!==null?t.SegmentedFileOutput.fromPartial(y.segments):void 0,K.preset=(D=y.preset)!==null&&D!==void 0?D:void 0,K.advanced=y.advanced!==void 0&&y.advanced!==null?t.EncodingOptions.fromPartial(y.advanced):void 0,K}};function g(){return{roomName:"",audioTrackId:"",videoTrackId:"",file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}t.TrackCompositeEgressRequest={encode(y,L=d.default.Writer.create()){return y.roomName!==void 0&&y.roomName!==""&&L.uint32(10).string(y.roomName),y.audioTrackId!==void 0&&y.audioTrackId!==""&&L.uint32(18).string(y.audioTrackId),y.videoTrackId!==void 0&&y.videoTrackId!==""&&L.uint32(26).string(y.videoTrackId),y.file!==void 0&&t.EncodedFileOutput.encode(y.file,L.uint32(34).fork()).ldelim(),y.stream!==void 0&&t.StreamOutput.encode(y.stream,L.uint32(42).fork()).ldelim(),y.segments!==void 0&&t.SegmentedFileOutput.encode(y.segments,L.uint32(66).fork()).ldelim(),y.preset!==void 0&&L.uint32(48).int32(y.preset),y.advanced!==void 0&&t.EncodingOptions.encode(y.advanced,L.uint32(58).fork()).ldelim(),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=g();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.roomName=H.string();break;case 2:j.audioTrackId=H.string();break;case 3:j.videoTrackId=H.string();break;case 4:j.file=t.EncodedFileOutput.decode(H,H.uint32());break;case 5:j.stream=t.StreamOutput.decode(H,H.uint32());break;case 8:j.segments=t.SegmentedFileOutput.decode(H,H.uint32());break;case 6:j.preset=H.int32();break;case 7:j.advanced=t.EncodingOptions.decode(H,H.uint32());break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{roomName:ue(y.roomName)?String(y.roomName):"",audioTrackId:ue(y.audioTrackId)?String(y.audioTrackId):"",videoTrackId:ue(y.videoTrackId)?String(y.videoTrackId):"",file:ue(y.file)?t.EncodedFileOutput.fromJSON(y.file):void 0,stream:ue(y.stream)?t.StreamOutput.fromJSON(y.stream):void 0,segments:ue(y.segments)?t.SegmentedFileOutput.fromJSON(y.segments):void 0,preset:ue(y.preset)?W(y.preset):void 0,advanced:ue(y.advanced)?t.EncodingOptions.fromJSON(y.advanced):void 0}},toJSON(y){const L={};return y.roomName!==void 0&&(L.roomName=y.roomName),y.audioTrackId!==void 0&&(L.audioTrackId=y.audioTrackId),y.videoTrackId!==void 0&&(L.videoTrackId=y.videoTrackId),y.file!==void 0&&(L.file=y.file?t.EncodedFileOutput.toJSON(y.file):void 0),y.stream!==void 0&&(L.stream=y.stream?t.StreamOutput.toJSON(y.stream):void 0),y.segments!==void 0&&(L.segments=y.segments?t.SegmentedFileOutput.toJSON(y.segments):void 0),y.preset!==void 0&&(L.preset=y.preset!==void 0?q(y.preset):void 0),y.advanced!==void 0&&(L.advanced=y.advanced?t.EncodingOptions.toJSON(y.advanced):void 0),L},fromPartial(y){var L,H,fe,j;const b=g();return b.roomName=(L=y.roomName)!==null&&L!==void 0?L:"",b.audioTrackId=(H=y.audioTrackId)!==null&&H!==void 0?H:"",b.videoTrackId=(fe=y.videoTrackId)!==null&&fe!==void 0?fe:"",b.file=y.file!==void 0&&y.file!==null?t.EncodedFileOutput.fromPartial(y.file):void 0,b.stream=y.stream!==void 0&&y.stream!==null?t.StreamOutput.fromPartial(y.stream):void 0,b.segments=y.segments!==void 0&&y.segments!==null?t.SegmentedFileOutput.fromPartial(y.segments):void 0,b.preset=(j=y.preset)!==null&&j!==void 0?j:void 0,b.advanced=y.advanced!==void 0&&y.advanced!==null?t.EncodingOptions.fromPartial(y.advanced):void 0,b}};function E(){return{roomName:"",trackId:"",file:void 0,websocketUrl:void 0}}t.TrackEgressRequest={encode(y,L=d.default.Writer.create()){return y.roomName!==void 0&&y.roomName!==""&&L.uint32(10).string(y.roomName),y.trackId!==void 0&&y.trackId!==""&&L.uint32(18).string(y.trackId),y.file!==void 0&&t.DirectFileOutput.encode(y.file,L.uint32(26).fork()).ldelim(),y.websocketUrl!==void 0&&L.uint32(34).string(y.websocketUrl),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=E();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.roomName=H.string();break;case 2:j.trackId=H.string();break;case 3:j.file=t.DirectFileOutput.decode(H,H.uint32());break;case 4:j.websocketUrl=H.string();break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{roomName:ue(y.roomName)?String(y.roomName):"",trackId:ue(y.trackId)?String(y.trackId):"",file:ue(y.file)?t.DirectFileOutput.fromJSON(y.file):void 0,websocketUrl:ue(y.websocketUrl)?String(y.websocketUrl):void 0}},toJSON(y){const L={};return y.roomName!==void 0&&(L.roomName=y.roomName),y.trackId!==void 0&&(L.trackId=y.trackId),y.file!==void 0&&(L.file=y.file?t.DirectFileOutput.toJSON(y.file):void 0),y.websocketUrl!==void 0&&(L.websocketUrl=y.websocketUrl),L},fromPartial(y){var L,H,fe;const j=E();return j.roomName=(L=y.roomName)!==null&&L!==void 0?L:"",j.trackId=(H=y.trackId)!==null&&H!==void 0?H:"",j.file=y.file!==void 0&&y.file!==null?t.DirectFileOutput.fromPartial(y.file):void 0,j.websocketUrl=(fe=y.websocketUrl)!==null&&fe!==void 0?fe:void 0,j}};function T(){return{url:"",audioOnly:!1,videoOnly:!1,file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}t.WebEgressRequest={encode(y,L=d.default.Writer.create()){return y.url!==void 0&&y.url!==""&&L.uint32(10).string(y.url),y.audioOnly===!0&&L.uint32(16).bool(y.audioOnly),y.videoOnly===!0&&L.uint32(24).bool(y.videoOnly),y.file!==void 0&&t.EncodedFileOutput.encode(y.file,L.uint32(34).fork()).ldelim(),y.stream!==void 0&&t.StreamOutput.encode(y.stream,L.uint32(42).fork()).ldelim(),y.segments!==void 0&&t.SegmentedFileOutput.encode(y.segments,L.uint32(50).fork()).ldelim(),y.preset!==void 0&&L.uint32(56).int32(y.preset),y.advanced!==void 0&&t.EncodingOptions.encode(y.advanced,L.uint32(66).fork()).ldelim(),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=T();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.url=H.string();break;case 2:j.audioOnly=H.bool();break;case 3:j.videoOnly=H.bool();break;case 4:j.file=t.EncodedFileOutput.decode(H,H.uint32());break;case 5:j.stream=t.StreamOutput.decode(H,H.uint32());break;case 6:j.segments=t.SegmentedFileOutput.decode(H,H.uint32());break;case 7:j.preset=H.int32();break;case 8:j.advanced=t.EncodingOptions.decode(H,H.uint32());break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{url:ue(y.url)?String(y.url):"",audioOnly:ue(y.audioOnly)?!!y.audioOnly:!1,videoOnly:ue(y.videoOnly)?!!y.videoOnly:!1,file:ue(y.file)?t.EncodedFileOutput.fromJSON(y.file):void 0,stream:ue(y.stream)?t.StreamOutput.fromJSON(y.stream):void 0,segments:ue(y.segments)?t.SegmentedFileOutput.fromJSON(y.segments):void 0,preset:ue(y.preset)?W(y.preset):void 0,advanced:ue(y.advanced)?t.EncodingOptions.fromJSON(y.advanced):void 0}},toJSON(y){const L={};return y.url!==void 0&&(L.url=y.url),y.audioOnly!==void 0&&(L.audioOnly=y.audioOnly),y.videoOnly!==void 0&&(L.videoOnly=y.videoOnly),y.file!==void 0&&(L.file=y.file?t.EncodedFileOutput.toJSON(y.file):void 0),y.stream!==void 0&&(L.stream=y.stream?t.StreamOutput.toJSON(y.stream):void 0),y.segments!==void 0&&(L.segments=y.segments?t.SegmentedFileOutput.toJSON(y.segments):void 0),y.preset!==void 0&&(L.preset=y.preset!==void 0?q(y.preset):void 0),y.advanced!==void 0&&(L.advanced=y.advanced?t.EncodingOptions.toJSON(y.advanced):void 0),L},fromPartial(y){var L,H,fe,j;const b=T();return b.url=(L=y.url)!==null&&L!==void 0?L:"",b.audioOnly=(H=y.audioOnly)!==null&&H!==void 0?H:!1,b.videoOnly=(fe=y.videoOnly)!==null&&fe!==void 0?fe:!1,b.file=y.file!==void 0&&y.file!==null?t.EncodedFileOutput.fromPartial(y.file):void 0,b.stream=y.stream!==void 0&&y.stream!==null?t.StreamOutput.fromPartial(y.stream):void 0,b.segments=y.segments!==void 0&&y.segments!==null?t.SegmentedFileOutput.fromPartial(y.segments):void 0,b.preset=(j=y.preset)!==null&&j!==void 0?j:void 0,b.advanced=y.advanced!==void 0&&y.advanced!==null?t.EncodingOptions.fromPartial(y.advanced):void 0,b}};function A(){return{fileType:0,filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}t.EncodedFileOutput={encode(y,L=d.default.Writer.create()){return y.fileType!==void 0&&y.fileType!==0&&L.uint32(8).int32(y.fileType),y.filepath!==void 0&&y.filepath!==""&&L.uint32(18).string(y.filepath),y.disableManifest===!0&&L.uint32(48).bool(y.disableManifest),y.s3!==void 0&&t.S3Upload.encode(y.s3,L.uint32(26).fork()).ldelim(),y.gcp!==void 0&&t.GCPUpload.encode(y.gcp,L.uint32(34).fork()).ldelim(),y.azure!==void 0&&t.AzureBlobUpload.encode(y.azure,L.uint32(42).fork()).ldelim(),y.aliOSS!==void 0&&t.AliOSSUpload.encode(y.aliOSS,L.uint32(58).fork()).ldelim(),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=A();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.fileType=H.int32();break;case 2:j.filepath=H.string();break;case 6:j.disableManifest=H.bool();break;case 3:j.s3=t.S3Upload.decode(H,H.uint32());break;case 4:j.gcp=t.GCPUpload.decode(H,H.uint32());break;case 5:j.azure=t.AzureBlobUpload.decode(H,H.uint32());break;case 7:j.aliOSS=t.AliOSSUpload.decode(H,H.uint32());break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{fileType:ue(y.fileType)?f(y.fileType):0,filepath:ue(y.filepath)?String(y.filepath):"",disableManifest:ue(y.disableManifest)?!!y.disableManifest:!1,s3:ue(y.s3)?t.S3Upload.fromJSON(y.s3):void 0,gcp:ue(y.gcp)?t.GCPUpload.fromJSON(y.gcp):void 0,azure:ue(y.azure)?t.AzureBlobUpload.fromJSON(y.azure):void 0,aliOSS:ue(y.aliOSS)?t.AliOSSUpload.fromJSON(y.aliOSS):void 0}},toJSON(y){const L={};return y.fileType!==void 0&&(L.fileType=c(y.fileType)),y.filepath!==void 0&&(L.filepath=y.filepath),y.disableManifest!==void 0&&(L.disableManifest=y.disableManifest),y.s3!==void 0&&(L.s3=y.s3?t.S3Upload.toJSON(y.s3):void 0),y.gcp!==void 0&&(L.gcp=y.gcp?t.GCPUpload.toJSON(y.gcp):void 0),y.azure!==void 0&&(L.azure=y.azure?t.AzureBlobUpload.toJSON(y.azure):void 0),y.aliOSS!==void 0&&(L.aliOSS=y.aliOSS?t.AliOSSUpload.toJSON(y.aliOSS):void 0),L},fromPartial(y){var L,H,fe;const j=A();return j.fileType=(L=y.fileType)!==null&&L!==void 0?L:0,j.filepath=(H=y.filepath)!==null&&H!==void 0?H:"",j.disableManifest=(fe=y.disableManifest)!==null&&fe!==void 0?fe:!1,j.s3=y.s3!==void 0&&y.s3!==null?t.S3Upload.fromPartial(y.s3):void 0,j.gcp=y.gcp!==void 0&&y.gcp!==null?t.GCPUpload.fromPartial(y.gcp):void 0,j.azure=y.azure!==void 0&&y.azure!==null?t.AzureBlobUpload.fromPartial(y.azure):void 0,j.aliOSS=y.aliOSS!==void 0&&y.aliOSS!==null?t.AliOSSUpload.fromPartial(y.aliOSS):void 0,j}};function J(){return{protocol:0,filenamePrefix:"",playlistName:"",segmentDuration:0,disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}t.SegmentedFileOutput={encode(y,L=d.default.Writer.create()){return y.protocol!==void 0&&y.protocol!==0&&L.uint32(8).int32(y.protocol),y.filenamePrefix!==void 0&&y.filenamePrefix!==""&&L.uint32(18).string(y.filenamePrefix),y.playlistName!==void 0&&y.playlistName!==""&&L.uint32(26).string(y.playlistName),y.segmentDuration!==void 0&&y.segmentDuration!==0&&L.uint32(32).uint32(y.segmentDuration),y.disableManifest===!0&&L.uint32(64).bool(y.disableManifest),y.s3!==void 0&&t.S3Upload.encode(y.s3,L.uint32(42).fork()).ldelim(),y.gcp!==void 0&&t.GCPUpload.encode(y.gcp,L.uint32(50).fork()).ldelim(),y.azure!==void 0&&t.AzureBlobUpload.encode(y.azure,L.uint32(58).fork()).ldelim(),y.aliOSS!==void 0&&t.AliOSSUpload.encode(y.aliOSS,L.uint32(74).fork()).ldelim(),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=J();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.protocol=H.int32();break;case 2:j.filenamePrefix=H.string();break;case 3:j.playlistName=H.string();break;case 4:j.segmentDuration=H.uint32();break;case 8:j.disableManifest=H.bool();break;case 5:j.s3=t.S3Upload.decode(H,H.uint32());break;case 6:j.gcp=t.GCPUpload.decode(H,H.uint32());break;case 7:j.azure=t.AzureBlobUpload.decode(H,H.uint32());break;case 9:j.aliOSS=t.AliOSSUpload.decode(H,H.uint32());break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{protocol:ue(y.protocol)?p(y.protocol):0,filenamePrefix:ue(y.filenamePrefix)?String(y.filenamePrefix):"",playlistName:ue(y.playlistName)?String(y.playlistName):"",segmentDuration:ue(y.segmentDuration)?Number(y.segmentDuration):0,disableManifest:ue(y.disableManifest)?!!y.disableManifest:!1,s3:ue(y.s3)?t.S3Upload.fromJSON(y.s3):void 0,gcp:ue(y.gcp)?t.GCPUpload.fromJSON(y.gcp):void 0,azure:ue(y.azure)?t.AzureBlobUpload.fromJSON(y.azure):void 0,aliOSS:ue(y.aliOSS)?t.AliOSSUpload.fromJSON(y.aliOSS):void 0}},toJSON(y){const L={};return y.protocol!==void 0&&(L.protocol=m(y.protocol)),y.filenamePrefix!==void 0&&(L.filenamePrefix=y.filenamePrefix),y.playlistName!==void 0&&(L.playlistName=y.playlistName),y.segmentDuration!==void 0&&(L.segmentDuration=Math.round(y.segmentDuration)),y.disableManifest!==void 0&&(L.disableManifest=y.disableManifest),y.s3!==void 0&&(L.s3=y.s3?t.S3Upload.toJSON(y.s3):void 0),y.gcp!==void 0&&(L.gcp=y.gcp?t.GCPUpload.toJSON(y.gcp):void 0),y.azure!==void 0&&(L.azure=y.azure?t.AzureBlobUpload.toJSON(y.azure):void 0),y.aliOSS!==void 0&&(L.aliOSS=y.aliOSS?t.AliOSSUpload.toJSON(y.aliOSS):void 0),L},fromPartial(y){var L,H,fe,j,b;const D=J();return D.protocol=(L=y.protocol)!==null&&L!==void 0?L:0,D.filenamePrefix=(H=y.filenamePrefix)!==null&&H!==void 0?H:"",D.playlistName=(fe=y.playlistName)!==null&&fe!==void 0?fe:"",D.segmentDuration=(j=y.segmentDuration)!==null&&j!==void 0?j:0,D.disableManifest=(b=y.disableManifest)!==null&&b!==void 0?b:!1,D.s3=y.s3!==void 0&&y.s3!==null?t.S3Upload.fromPartial(y.s3):void 0,D.gcp=y.gcp!==void 0&&y.gcp!==null?t.GCPUpload.fromPartial(y.gcp):void 0,D.azure=y.azure!==void 0&&y.azure!==null?t.AzureBlobUpload.fromPartial(y.azure):void 0,D.aliOSS=y.aliOSS!==void 0&&y.aliOSS!==null?t.AliOSSUpload.fromPartial(y.aliOSS):void 0,D}};function G(){return{filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}t.DirectFileOutput={encode(y,L=d.default.Writer.create()){return y.filepath!==void 0&&y.filepath!==""&&L.uint32(10).string(y.filepath),y.disableManifest===!0&&L.uint32(40).bool(y.disableManifest),y.s3!==void 0&&t.S3Upload.encode(y.s3,L.uint32(18).fork()).ldelim(),y.gcp!==void 0&&t.GCPUpload.encode(y.gcp,L.uint32(26).fork()).ldelim(),y.azure!==void 0&&t.AzureBlobUpload.encode(y.azure,L.uint32(34).fork()).ldelim(),y.aliOSS!==void 0&&t.AliOSSUpload.encode(y.aliOSS,L.uint32(50).fork()).ldelim(),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=G();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.filepath=H.string();break;case 5:j.disableManifest=H.bool();break;case 2:j.s3=t.S3Upload.decode(H,H.uint32());break;case 3:j.gcp=t.GCPUpload.decode(H,H.uint32());break;case 4:j.azure=t.AzureBlobUpload.decode(H,H.uint32());break;case 6:j.aliOSS=t.AliOSSUpload.decode(H,H.uint32());break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{filepath:ue(y.filepath)?String(y.filepath):"",disableManifest:ue(y.disableManifest)?!!y.disableManifest:!1,s3:ue(y.s3)?t.S3Upload.fromJSON(y.s3):void 0,gcp:ue(y.gcp)?t.GCPUpload.fromJSON(y.gcp):void 0,azure:ue(y.azure)?t.AzureBlobUpload.fromJSON(y.azure):void 0,aliOSS:ue(y.aliOSS)?t.AliOSSUpload.fromJSON(y.aliOSS):void 0}},toJSON(y){const L={};return y.filepath!==void 0&&(L.filepath=y.filepath),y.disableManifest!==void 0&&(L.disableManifest=y.disableManifest),y.s3!==void 0&&(L.s3=y.s3?t.S3Upload.toJSON(y.s3):void 0),y.gcp!==void 0&&(L.gcp=y.gcp?t.GCPUpload.toJSON(y.gcp):void 0),y.azure!==void 0&&(L.azure=y.azure?t.AzureBlobUpload.toJSON(y.azure):void 0),y.aliOSS!==void 0&&(L.aliOSS=y.aliOSS?t.AliOSSUpload.toJSON(y.aliOSS):void 0),L},fromPartial(y){var L,H;const fe=G();return fe.filepath=(L=y.filepath)!==null&&L!==void 0?L:"",fe.disableManifest=(H=y.disableManifest)!==null&&H!==void 0?H:!1,fe.s3=y.s3!==void 0&&y.s3!==null?t.S3Upload.fromPartial(y.s3):void 0,fe.gcp=y.gcp!==void 0&&y.gcp!==null?t.GCPUpload.fromPartial(y.gcp):void 0,fe.azure=y.azure!==void 0&&y.azure!==null?t.AzureBlobUpload.fromPartial(y.azure):void 0,fe.aliOSS=y.aliOSS!==void 0&&y.aliOSS!==null?t.AliOSSUpload.fromPartial(y.aliOSS):void 0,fe}};function I(){return{accessKey:"",secret:"",region:"",endpoint:"",bucket:"",forcePathStyle:!1,metadata:{},tagging:""}}t.S3Upload={encode(y,L=d.default.Writer.create()){return y.accessKey!==void 0&&y.accessKey!==""&&L.uint32(10).string(y.accessKey),y.secret!==void 0&&y.secret!==""&&L.uint32(18).string(y.secret),y.region!==void 0&&y.region!==""&&L.uint32(26).string(y.region),y.endpoint!==void 0&&y.endpoint!==""&&L.uint32(34).string(y.endpoint),y.bucket!==void 0&&y.bucket!==""&&L.uint32(42).string(y.bucket),y.forcePathStyle===!0&&L.uint32(48).bool(y.forcePathStyle),Object.entries(y.metadata||{}).forEach(([H,fe])=>{t.S3Upload_MetadataEntry.encode({key:H,value:fe},L.uint32(58).fork()).ldelim()}),y.tagging!==void 0&&y.tagging!==""&&L.uint32(66).string(y.tagging),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=I();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.accessKey=H.string();break;case 2:j.secret=H.string();break;case 3:j.region=H.string();break;case 4:j.endpoint=H.string();break;case 5:j.bucket=H.string();break;case 6:j.forcePathStyle=H.bool();break;case 7:const D=t.S3Upload_MetadataEntry.decode(H,H.uint32());D.value!==void 0&&(j.metadata[D.key]=D.value);break;case 8:j.tagging=H.string();break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{accessKey:ue(y.accessKey)?String(y.accessKey):"",secret:ue(y.secret)?String(y.secret):"",region:ue(y.region)?String(y.region):"",endpoint:ue(y.endpoint)?String(y.endpoint):"",bucket:ue(y.bucket)?String(y.bucket):"",forcePathStyle:ue(y.forcePathStyle)?!!y.forcePathStyle:!1,metadata:Se(y.metadata)?Object.entries(y.metadata).reduce((L,[H,fe])=>(L[H]=String(fe),L),{}):{},tagging:ue(y.tagging)?String(y.tagging):""}},toJSON(y){const L={};return y.accessKey!==void 0&&(L.accessKey=y.accessKey),y.secret!==void 0&&(L.secret=y.secret),y.region!==void 0&&(L.region=y.region),y.endpoint!==void 0&&(L.endpoint=y.endpoint),y.bucket!==void 0&&(L.bucket=y.bucket),y.forcePathStyle!==void 0&&(L.forcePathStyle=y.forcePathStyle),L.metadata={},y.metadata&&Object.entries(y.metadata).forEach(([H,fe])=>{L.metadata[H]=fe}),y.tagging!==void 0&&(L.tagging=y.tagging),L},fromPartial(y){var L,H,fe,j,b,D,K,pe;const ae=I();return ae.accessKey=(L=y.accessKey)!==null&&L!==void 0?L:"",ae.secret=(H=y.secret)!==null&&H!==void 0?H:"",ae.region=(fe=y.region)!==null&&fe!==void 0?fe:"",ae.endpoint=(j=y.endpoint)!==null&&j!==void 0?j:"",ae.bucket=(b=y.bucket)!==null&&b!==void 0?b:"",ae.forcePathStyle=(D=y.forcePathStyle)!==null&&D!==void 0?D:!1,ae.metadata=Object.entries((K=y.metadata)!==null&&K!==void 0?K:{}).reduce((_e,[Oe,Pe])=>(Pe!==void 0&&(_e[Oe]=String(Pe)),_e),{}),ae.tagging=(pe=y.tagging)!==null&&pe!==void 0?pe:"",ae}};function V(){return{key:"",value:""}}t.S3Upload_MetadataEntry={encode(y,L=d.default.Writer.create()){return y.key!==""&&L.uint32(10).string(y.key),y.value!==""&&L.uint32(18).string(y.value),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=V();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.key=H.string();break;case 2:j.value=H.string();break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{key:ue(y.key)?String(y.key):"",value:ue(y.value)?String(y.value):""}},toJSON(y){const L={};return y.key!==void 0&&(L.key=y.key),y.value!==void 0&&(L.value=y.value),L},fromPartial(y){var L,H;const fe=V();return fe.key=(L=y.key)!==null&&L!==void 0?L:"",fe.value=(H=y.value)!==null&&H!==void 0?H:"",fe}};function B(){return{credentials:new Uint8Array,bucket:""}}t.GCPUpload={encode(y,L=d.default.Writer.create()){return y.credentials!==void 0&&y.credentials.length!==0&&L.uint32(10).bytes(y.credentials),y.bucket!==void 0&&y.bucket!==""&&L.uint32(18).string(y.bucket),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=B();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.credentials=H.bytes();break;case 2:j.bucket=H.string();break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{credentials:ue(y.credentials)?X(y.credentials):new Uint8Array,bucket:ue(y.bucket)?String(y.bucket):""}},toJSON(y){const L={};return y.credentials!==void 0&&(L.credentials=se(y.credentials!==void 0?y.credentials:new Uint8Array)),y.bucket!==void 0&&(L.bucket=y.bucket),L},fromPartial(y){var L,H;const fe=B();return fe.credentials=(L=y.credentials)!==null&&L!==void 0?L:new Uint8Array,fe.bucket=(H=y.bucket)!==null&&H!==void 0?H:"",fe}};function z(){return{accountName:"",accountKey:"",containerName:""}}t.AzureBlobUpload={encode(y,L=d.default.Writer.create()){return y.accountName!==void 0&&y.accountName!==""&&L.uint32(10).string(y.accountName),y.accountKey!==void 0&&y.accountKey!==""&&L.uint32(18).string(y.accountKey),y.containerName!==void 0&&y.containerName!==""&&L.uint32(26).string(y.containerName),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=z();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.accountName=H.string();break;case 2:j.accountKey=H.string();break;case 3:j.containerName=H.string();break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{accountName:ue(y.accountName)?String(y.accountName):"",accountKey:ue(y.accountKey)?String(y.accountKey):"",containerName:ue(y.containerName)?String(y.containerName):""}},toJSON(y){const L={};return y.accountName!==void 0&&(L.accountName=y.accountName),y.accountKey!==void 0&&(L.accountKey=y.accountKey),y.containerName!==void 0&&(L.containerName=y.containerName),L},fromPartial(y){var L,H,fe;const j=z();return j.accountName=(L=y.accountName)!==null&&L!==void 0?L:"",j.accountKey=(H=y.accountKey)!==null&&H!==void 0?H:"",j.containerName=(fe=y.containerName)!==null&&fe!==void 0?fe:"",j}};function ie(){return{accessKey:"",secret:"",region:"",endpoint:"",bucket:""}}t.AliOSSUpload={encode(y,L=d.default.Writer.create()){return y.accessKey!==void 0&&y.accessKey!==""&&L.uint32(10).string(y.accessKey),y.secret!==void 0&&y.secret!==""&&L.uint32(18).string(y.secret),y.region!==void 0&&y.region!==""&&L.uint32(26).string(y.region),y.endpoint!==void 0&&y.endpoint!==""&&L.uint32(34).string(y.endpoint),y.bucket!==void 0&&y.bucket!==""&&L.uint32(42).string(y.bucket),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=ie();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.accessKey=H.string();break;case 2:j.secret=H.string();break;case 3:j.region=H.string();break;case 4:j.endpoint=H.string();break;case 5:j.bucket=H.string();break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{accessKey:ue(y.accessKey)?String(y.accessKey):"",secret:ue(y.secret)?String(y.secret):"",region:ue(y.region)?String(y.region):"",endpoint:ue(y.endpoint)?String(y.endpoint):"",bucket:ue(y.bucket)?String(y.bucket):""}},toJSON(y){const L={};return y.accessKey!==void 0&&(L.accessKey=y.accessKey),y.secret!==void 0&&(L.secret=y.secret),y.region!==void 0&&(L.region=y.region),y.endpoint!==void 0&&(L.endpoint=y.endpoint),y.bucket!==void 0&&(L.bucket=y.bucket),L},fromPartial(y){var L,H,fe,j,b;const D=ie();return D.accessKey=(L=y.accessKey)!==null&&L!==void 0?L:"",D.secret=(H=y.secret)!==null&&H!==void 0?H:"",D.region=(fe=y.region)!==null&&fe!==void 0?fe:"",D.endpoint=(j=y.endpoint)!==null&&j!==void 0?j:"",D.bucket=(b=y.bucket)!==null&&b!==void 0?b:"",D}};function de(){return{protocol:0,urls:[]}}t.StreamOutput={encode(y,L=d.default.Writer.create()){if(y.protocol!==void 0&&y.protocol!==0&&L.uint32(8).int32(y.protocol),y.urls!==void 0&&y.urls.length!==0)for(const H of y.urls)L.uint32(18).string(H);return L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=de();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.protocol=H.int32();break;case 2:j.urls.push(H.string());break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{protocol:ue(y.protocol)?v(y.protocol):0,urls:Array.isArray(y==null?void 0:y.urls)?y.urls.map(L=>String(L)):[]}},toJSON(y){const L={};return y.protocol!==void 0&&(L.protocol=l(y.protocol)),y.urls?L.urls=y.urls.map(H=>H):L.urls=[],L},fromPartial(y){var L,H;const fe=de();return fe.protocol=(L=y.protocol)!==null&&L!==void 0?L:0,fe.urls=((H=y.urls)===null||H===void 0?void 0:H.map(j=>j))||[],fe}};function me(){return{width:0,height:0,depth:0,framerate:0,audioCodec:0,audioBitrate:0,audioFrequency:0,videoCodec:0,videoBitrate:0}}t.EncodingOptions={encode(y,L=d.default.Writer.create()){return y.width!==void 0&&y.width!==0&&L.uint32(8).int32(y.width),y.height!==void 0&&y.height!==0&&L.uint32(16).int32(y.height),y.depth!==void 0&&y.depth!==0&&L.uint32(24).int32(y.depth),y.framerate!==void 0&&y.framerate!==0&&L.uint32(32).int32(y.framerate),y.audioCodec!==void 0&&y.audioCodec!==0&&L.uint32(40).int32(y.audioCodec),y.audioBitrate!==void 0&&y.audioBitrate!==0&&L.uint32(48).int32(y.audioBitrate),y.audioFrequency!==void 0&&y.audioFrequency!==0&&L.uint32(56).int32(y.audioFrequency),y.videoCodec!==void 0&&y.videoCodec!==0&&L.uint32(64).int32(y.videoCodec),y.videoBitrate!==void 0&&y.videoBitrate!==0&&L.uint32(72).int32(y.videoBitrate),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=me();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.width=H.int32();break;case 2:j.height=H.int32();break;case 3:j.depth=H.int32();break;case 4:j.framerate=H.int32();break;case 5:j.audioCodec=H.int32();break;case 6:j.audioBitrate=H.int32();break;case 7:j.audioFrequency=H.int32();break;case 8:j.videoCodec=H.int32();break;case 9:j.videoBitrate=H.int32();break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{width:ue(y.width)?Number(y.width):0,height:ue(y.height)?Number(y.height):0,depth:ue(y.depth)?Number(y.depth):0,framerate:ue(y.framerate)?Number(y.framerate):0,audioCodec:ue(y.audioCodec)?_(y.audioCodec):0,audioBitrate:ue(y.audioBitrate)?Number(y.audioBitrate):0,audioFrequency:ue(y.audioFrequency)?Number(y.audioFrequency):0,videoCodec:ue(y.videoCodec)?P(y.videoCodec):0,videoBitrate:ue(y.videoBitrate)?Number(y.videoBitrate):0}},toJSON(y){const L={};return y.width!==void 0&&(L.width=Math.round(y.width)),y.height!==void 0&&(L.height=Math.round(y.height)),y.depth!==void 0&&(L.depth=Math.round(y.depth)),y.framerate!==void 0&&(L.framerate=Math.round(y.framerate)),y.audioCodec!==void 0&&(L.audioCodec=C(y.audioCodec)),y.audioBitrate!==void 0&&(L.audioBitrate=Math.round(y.audioBitrate)),y.audioFrequency!==void 0&&(L.audioFrequency=Math.round(y.audioFrequency)),y.videoCodec!==void 0&&(L.videoCodec=M(y.videoCodec)),y.videoBitrate!==void 0&&(L.videoBitrate=Math.round(y.videoBitrate)),L},fromPartial(y){var L,H,fe,j,b,D,K,pe,ae;const _e=me();return _e.width=(L=y.width)!==null&&L!==void 0?L:0,_e.height=(H=y.height)!==null&&H!==void 0?H:0,_e.depth=(fe=y.depth)!==null&&fe!==void 0?fe:0,_e.framerate=(j=y.framerate)!==null&&j!==void 0?j:0,_e.audioCodec=(b=y.audioCodec)!==null&&b!==void 0?b:0,_e.audioBitrate=(D=y.audioBitrate)!==null&&D!==void 0?D:0,_e.audioFrequency=(K=y.audioFrequency)!==null&&K!==void 0?K:0,_e.videoCodec=(pe=y.videoCodec)!==null&&pe!==void 0?pe:0,_e.videoBitrate=(ae=y.videoBitrate)!==null&&ae!==void 0?ae:0,_e}};function be(){return{egressId:"",layout:""}}t.UpdateLayoutRequest={encode(y,L=d.default.Writer.create()){return y.egressId!==void 0&&y.egressId!==""&&L.uint32(10).string(y.egressId),y.layout!==void 0&&y.layout!==""&&L.uint32(18).string(y.layout),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=be();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.egressId=H.string();break;case 2:j.layout=H.string();break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{egressId:ue(y.egressId)?String(y.egressId):"",layout:ue(y.layout)?String(y.layout):""}},toJSON(y){const L={};return y.egressId!==void 0&&(L.egressId=y.egressId),y.layout!==void 0&&(L.layout=y.layout),L},fromPartial(y){var L,H;const fe=be();return fe.egressId=(L=y.egressId)!==null&&L!==void 0?L:"",fe.layout=(H=y.layout)!==null&&H!==void 0?H:"",fe}};function we(){return{egressId:"",addOutputUrls:[],removeOutputUrls:[]}}t.UpdateStreamRequest={encode(y,L=d.default.Writer.create()){if(y.egressId!==void 0&&y.egressId!==""&&L.uint32(10).string(y.egressId),y.addOutputUrls!==void 0&&y.addOutputUrls.length!==0)for(const H of y.addOutputUrls)L.uint32(18).string(H);if(y.removeOutputUrls!==void 0&&y.removeOutputUrls.length!==0)for(const H of y.removeOutputUrls)L.uint32(26).string(H);return L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=we();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.egressId=H.string();break;case 2:j.addOutputUrls.push(H.string());break;case 3:j.removeOutputUrls.push(H.string());break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{egressId:ue(y.egressId)?String(y.egressId):"",addOutputUrls:Array.isArray(y==null?void 0:y.addOutputUrls)?y.addOutputUrls.map(L=>String(L)):[],removeOutputUrls:Array.isArray(y==null?void 0:y.removeOutputUrls)?y.removeOutputUrls.map(L=>String(L)):[]}},toJSON(y){const L={};return y.egressId!==void 0&&(L.egressId=y.egressId),y.addOutputUrls?L.addOutputUrls=y.addOutputUrls.map(H=>H):L.addOutputUrls=[],y.removeOutputUrls?L.removeOutputUrls=y.removeOutputUrls.map(H=>H):L.removeOutputUrls=[],L},fromPartial(y){var L,H,fe;const j=we();return j.egressId=(L=y.egressId)!==null&&L!==void 0?L:"",j.addOutputUrls=((H=y.addOutputUrls)===null||H===void 0?void 0:H.map(b=>b))||[],j.removeOutputUrls=((fe=y.removeOutputUrls)===null||fe===void 0?void 0:fe.map(b=>b))||[],j}};function oe(){return{roomName:""}}t.ListEgressRequest={encode(y,L=d.default.Writer.create()){return y.roomName!==void 0&&y.roomName!==""&&L.uint32(10).string(y.roomName),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=oe();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.roomName=H.string();break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{roomName:ue(y.roomName)?String(y.roomName):""}},toJSON(y){const L={};return y.roomName!==void 0&&(L.roomName=y.roomName),L},fromPartial(y){var L;const H=oe();return H.roomName=(L=y.roomName)!==null&&L!==void 0?L:"",H}};function ce(){return{items:[]}}t.ListEgressResponse={encode(y,L=d.default.Writer.create()){if(y.items!==void 0&&y.items.length!==0)for(const H of y.items)t.EgressInfo.encode(H,L.uint32(10).fork()).ldelim();return L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=ce();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.items.push(t.EgressInfo.decode(H,H.uint32()));break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{items:Array.isArray(y==null?void 0:y.items)?y.items.map(L=>t.EgressInfo.fromJSON(L)):[]}},toJSON(y){const L={};return y.items?L.items=y.items.map(H=>H?t.EgressInfo.toJSON(H):void 0):L.items=[],L},fromPartial(y){var L;const H=ce();return H.items=((L=y.items)===null||L===void 0?void 0:L.map(fe=>t.EgressInfo.fromPartial(fe)))||[],H}};function ge(){return{egressId:""}}t.StopEgressRequest={encode(y,L=d.default.Writer.create()){return y.egressId!==void 0&&y.egressId!==""&&L.uint32(10).string(y.egressId),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=ge();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.egressId=H.string();break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{egressId:ue(y.egressId)?String(y.egressId):""}},toJSON(y){const L={};return y.egressId!==void 0&&(L.egressId=y.egressId),L},fromPartial(y){var L;const H=ge();return H.egressId=(L=y.egressId)!==null&&L!==void 0?L:"",H}};function ke(){return{egressId:"",roomId:"",roomName:"",status:0,startedAt:0,endedAt:0,error:"",roomComposite:void 0,trackComposite:void 0,track:void 0,web:void 0,stream:void 0,file:void 0,segments:void 0}}t.EgressInfo={encode(y,L=d.default.Writer.create()){return y.egressId!==void 0&&y.egressId!==""&&L.uint32(10).string(y.egressId),y.roomId!==void 0&&y.roomId!==""&&L.uint32(18).string(y.roomId),y.roomName!==void 0&&y.roomName!==""&&L.uint32(106).string(y.roomName),y.status!==void 0&&y.status!==0&&L.uint32(24).int32(y.status),y.startedAt!==void 0&&y.startedAt!==0&&L.uint32(80).int64(y.startedAt),y.endedAt!==void 0&&y.endedAt!==0&&L.uint32(88).int64(y.endedAt),y.error!==void 0&&y.error!==""&&L.uint32(74).string(y.error),y.roomComposite!==void 0&&t.RoomCompositeEgressRequest.encode(y.roomComposite,L.uint32(34).fork()).ldelim(),y.trackComposite!==void 0&&t.TrackCompositeEgressRequest.encode(y.trackComposite,L.uint32(42).fork()).ldelim(),y.track!==void 0&&t.TrackEgressRequest.encode(y.track,L.uint32(50).fork()).ldelim(),y.web!==void 0&&t.WebEgressRequest.encode(y.web,L.uint32(114).fork()).ldelim(),y.stream!==void 0&&t.StreamInfoList.encode(y.stream,L.uint32(58).fork()).ldelim(),y.file!==void 0&&t.FileInfo.encode(y.file,L.uint32(66).fork()).ldelim(),y.segments!==void 0&&t.SegmentsInfo.encode(y.segments,L.uint32(98).fork()).ldelim(),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=ke();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.egressId=H.string();break;case 2:j.roomId=H.string();break;case 13:j.roomName=H.string();break;case 3:j.status=H.int32();break;case 10:j.startedAt=ve(H.int64());break;case 11:j.endedAt=ve(H.int64());break;case 9:j.error=H.string();break;case 4:j.roomComposite=t.RoomCompositeEgressRequest.decode(H,H.uint32());break;case 5:j.trackComposite=t.TrackCompositeEgressRequest.decode(H,H.uint32());break;case 6:j.track=t.TrackEgressRequest.decode(H,H.uint32());break;case 14:j.web=t.WebEgressRequest.decode(H,H.uint32());break;case 7:j.stream=t.StreamInfoList.decode(H,H.uint32());break;case 8:j.file=t.FileInfo.decode(H,H.uint32());break;case 12:j.segments=t.SegmentsInfo.decode(H,H.uint32());break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{egressId:ue(y.egressId)?String(y.egressId):"",roomId:ue(y.roomId)?String(y.roomId):"",roomName:ue(y.roomName)?String(y.roomName):"",status:ue(y.status)?re(y.status):0,startedAt:ue(y.startedAt)?Number(y.startedAt):0,endedAt:ue(y.endedAt)?Number(y.endedAt):0,error:ue(y.error)?String(y.error):"",roomComposite:ue(y.roomComposite)?t.RoomCompositeEgressRequest.fromJSON(y.roomComposite):void 0,trackComposite:ue(y.trackComposite)?t.TrackCompositeEgressRequest.fromJSON(y.trackComposite):void 0,track:ue(y.track)?t.TrackEgressRequest.fromJSON(y.track):void 0,web:ue(y.web)?t.WebEgressRequest.fromJSON(y.web):void 0,stream:ue(y.stream)?t.StreamInfoList.fromJSON(y.stream):void 0,file:ue(y.file)?t.FileInfo.fromJSON(y.file):void 0,segments:ue(y.segments)?t.SegmentsInfo.fromJSON(y.segments):void 0}},toJSON(y){const L={};return y.egressId!==void 0&&(L.egressId=y.egressId),y.roomId!==void 0&&(L.roomId=y.roomId),y.roomName!==void 0&&(L.roomName=y.roomName),y.status!==void 0&&(L.status=Y(y.status)),y.startedAt!==void 0&&(L.startedAt=Math.round(y.startedAt)),y.endedAt!==void 0&&(L.endedAt=Math.round(y.endedAt)),y.error!==void 0&&(L.error=y.error),y.roomComposite!==void 0&&(L.roomComposite=y.roomComposite?t.RoomCompositeEgressRequest.toJSON(y.roomComposite):void 0),y.trackComposite!==void 0&&(L.trackComposite=y.trackComposite?t.TrackCompositeEgressRequest.toJSON(y.trackComposite):void 0),y.track!==void 0&&(L.track=y.track?t.TrackEgressRequest.toJSON(y.track):void 0),y.web!==void 0&&(L.web=y.web?t.WebEgressRequest.toJSON(y.web):void 0),y.stream!==void 0&&(L.stream=y.stream?t.StreamInfoList.toJSON(y.stream):void 0),y.file!==void 0&&(L.file=y.file?t.FileInfo.toJSON(y.file):void 0),y.segments!==void 0&&(L.segments=y.segments?t.SegmentsInfo.toJSON(y.segments):void 0),L},fromPartial(y){var L,H,fe,j,b,D,K;const pe=ke();return pe.egressId=(L=y.egressId)!==null&&L!==void 0?L:"",pe.roomId=(H=y.roomId)!==null&&H!==void 0?H:"",pe.roomName=(fe=y.roomName)!==null&&fe!==void 0?fe:"",pe.status=(j=y.status)!==null&&j!==void 0?j:0,pe.startedAt=(b=y.startedAt)!==null&&b!==void 0?b:0,pe.endedAt=(D=y.endedAt)!==null&&D!==void 0?D:0,pe.error=(K=y.error)!==null&&K!==void 0?K:"",pe.roomComposite=y.roomComposite!==void 0&&y.roomComposite!==null?t.RoomCompositeEgressRequest.fromPartial(y.roomComposite):void 0,pe.trackComposite=y.trackComposite!==void 0&&y.trackComposite!==null?t.TrackCompositeEgressRequest.fromPartial(y.trackComposite):void 0,pe.track=y.track!==void 0&&y.track!==null?t.TrackEgressRequest.fromPartial(y.track):void 0,pe.web=y.web!==void 0&&y.web!==null?t.WebEgressRequest.fromPartial(y.web):void 0,pe.stream=y.stream!==void 0&&y.stream!==null?t.StreamInfoList.fromPartial(y.stream):void 0,pe.file=y.file!==void 0&&y.file!==null?t.FileInfo.fromPartial(y.file):void 0,pe.segments=y.segments!==void 0&&y.segments!==null?t.SegmentsInfo.fromPartial(y.segments):void 0,pe}};function le(){return{info:[]}}t.StreamInfoList={encode(y,L=d.default.Writer.create()){if(y.info!==void 0&&y.info.length!==0)for(const H of y.info)t.StreamInfo.encode(H,L.uint32(10).fork()).ldelim();return L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=le();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.info.push(t.StreamInfo.decode(H,H.uint32()));break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{info:Array.isArray(y==null?void 0:y.info)?y.info.map(L=>t.StreamInfo.fromJSON(L)):[]}},toJSON(y){const L={};return y.info?L.info=y.info.map(H=>H?t.StreamInfo.toJSON(H):void 0):L.info=[],L},fromPartial(y){var L;const H=le();return H.info=((L=y.info)===null||L===void 0?void 0:L.map(fe=>t.StreamInfo.fromPartial(fe)))||[],H}};function te(){return{url:"",startedAt:0,endedAt:0,duration:0,status:0}}t.StreamInfo={encode(y,L=d.default.Writer.create()){return y.url!==void 0&&y.url!==""&&L.uint32(10).string(y.url),y.startedAt!==void 0&&y.startedAt!==0&&L.uint32(16).int64(y.startedAt),y.endedAt!==void 0&&y.endedAt!==0&&L.uint32(24).int64(y.endedAt),y.duration!==void 0&&y.duration!==0&&L.uint32(32).int64(y.duration),y.status!==void 0&&y.status!==0&&L.uint32(40).int32(y.status),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=te();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.url=H.string();break;case 2:j.startedAt=ve(H.int64());break;case 3:j.endedAt=ve(H.int64());break;case 4:j.duration=ve(H.int64());break;case 5:j.status=H.int32();break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{url:ue(y.url)?String(y.url):"",startedAt:ue(y.startedAt)?Number(y.startedAt):0,endedAt:ue(y.endedAt)?Number(y.endedAt):0,duration:ue(y.duration)?Number(y.duration):0,status:ue(y.status)?x(y.status):0}},toJSON(y){const L={};return y.url!==void 0&&(L.url=y.url),y.startedAt!==void 0&&(L.startedAt=Math.round(y.startedAt)),y.endedAt!==void 0&&(L.endedAt=Math.round(y.endedAt)),y.duration!==void 0&&(L.duration=Math.round(y.duration)),y.status!==void 0&&(L.status=S(y.status)),L},fromPartial(y){var L,H,fe,j,b;const D=te();return D.url=(L=y.url)!==null&&L!==void 0?L:"",D.startedAt=(H=y.startedAt)!==null&&H!==void 0?H:0,D.endedAt=(fe=y.endedAt)!==null&&fe!==void 0?fe:0,D.duration=(j=y.duration)!==null&&j!==void 0?j:0,D.status=(b=y.status)!==null&&b!==void 0?b:0,D}};function ee(){return{filename:"",startedAt:0,endedAt:0,duration:0,size:0,location:""}}t.FileInfo={encode(y,L=d.default.Writer.create()){return y.filename!==void 0&&y.filename!==""&&L.uint32(10).string(y.filename),y.startedAt!==void 0&&y.startedAt!==0&&L.uint32(16).int64(y.startedAt),y.endedAt!==void 0&&y.endedAt!==0&&L.uint32(24).int64(y.endedAt),y.duration!==void 0&&y.duration!==0&&L.uint32(48).int64(y.duration),y.size!==void 0&&y.size!==0&&L.uint32(32).int64(y.size),y.location!==void 0&&y.location!==""&&L.uint32(42).string(y.location),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=ee();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.filename=H.string();break;case 2:j.startedAt=ve(H.int64());break;case 3:j.endedAt=ve(H.int64());break;case 6:j.duration=ve(H.int64());break;case 4:j.size=ve(H.int64());break;case 5:j.location=H.string();break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{filename:ue(y.filename)?String(y.filename):"",startedAt:ue(y.startedAt)?Number(y.startedAt):0,endedAt:ue(y.endedAt)?Number(y.endedAt):0,duration:ue(y.duration)?Number(y.duration):0,size:ue(y.size)?Number(y.size):0,location:ue(y.location)?String(y.location):""}},toJSON(y){const L={};return y.filename!==void 0&&(L.filename=y.filename),y.startedAt!==void 0&&(L.startedAt=Math.round(y.startedAt)),y.endedAt!==void 0&&(L.endedAt=Math.round(y.endedAt)),y.duration!==void 0&&(L.duration=Math.round(y.duration)),y.size!==void 0&&(L.size=Math.round(y.size)),y.location!==void 0&&(L.location=y.location),L},fromPartial(y){var L,H,fe,j,b,D;const K=ee();return K.filename=(L=y.filename)!==null&&L!==void 0?L:"",K.startedAt=(H=y.startedAt)!==null&&H!==void 0?H:0,K.endedAt=(fe=y.endedAt)!==null&&fe!==void 0?fe:0,K.duration=(j=y.duration)!==null&&j!==void 0?j:0,K.size=(b=y.size)!==null&&b!==void 0?b:0,K.location=(D=y.location)!==null&&D!==void 0?D:"",K}};function Q(){return{playlistName:"",duration:0,size:0,playlistLocation:"",segmentCount:0,startedAt:0,endedAt:0}}t.SegmentsInfo={encode(y,L=d.default.Writer.create()){return y.playlistName!==void 0&&y.playlistName!==""&&L.uint32(10).string(y.playlistName),y.duration!==void 0&&y.duration!==0&&L.uint32(16).int64(y.duration),y.size!==void 0&&y.size!==0&&L.uint32(24).int64(y.size),y.playlistLocation!==void 0&&y.playlistLocation!==""&&L.uint32(34).string(y.playlistLocation),y.segmentCount!==void 0&&y.segmentCount!==0&&L.uint32(40).int64(y.segmentCount),y.startedAt!==void 0&&y.startedAt!==0&&L.uint32(48).int64(y.startedAt),y.endedAt!==void 0&&y.endedAt!==0&&L.uint32(56).int64(y.endedAt),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=Q();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.playlistName=H.string();break;case 2:j.duration=ve(H.int64());break;case 3:j.size=ve(H.int64());break;case 4:j.playlistLocation=H.string();break;case 5:j.segmentCount=ve(H.int64());break;case 6:j.startedAt=ve(H.int64());break;case 7:j.endedAt=ve(H.int64());break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{playlistName:ue(y.playlistName)?String(y.playlistName):"",duration:ue(y.duration)?Number(y.duration):0,size:ue(y.size)?Number(y.size):0,playlistLocation:ue(y.playlistLocation)?String(y.playlistLocation):"",segmentCount:ue(y.segmentCount)?Number(y.segmentCount):0,startedAt:ue(y.startedAt)?Number(y.startedAt):0,endedAt:ue(y.endedAt)?Number(y.endedAt):0}},toJSON(y){const L={};return y.playlistName!==void 0&&(L.playlistName=y.playlistName),y.duration!==void 0&&(L.duration=Math.round(y.duration)),y.size!==void 0&&(L.size=Math.round(y.size)),y.playlistLocation!==void 0&&(L.playlistLocation=y.playlistLocation),y.segmentCount!==void 0&&(L.segmentCount=Math.round(y.segmentCount)),y.startedAt!==void 0&&(L.startedAt=Math.round(y.startedAt)),y.endedAt!==void 0&&(L.endedAt=Math.round(y.endedAt)),L},fromPartial(y){var L,H,fe,j,b,D,K;const pe=Q();return pe.playlistName=(L=y.playlistName)!==null&&L!==void 0?L:"",pe.duration=(H=y.duration)!==null&&H!==void 0?H:0,pe.size=(fe=y.size)!==null&&fe!==void 0?fe:0,pe.playlistLocation=(j=y.playlistLocation)!==null&&j!==void 0?j:"",pe.segmentCount=(b=y.segmentCount)!==null&&b!==void 0?b:0,pe.startedAt=(D=y.startedAt)!==null&&D!==void 0?D:0,pe.endedAt=(K=y.endedAt)!==null&&K!==void 0?K:0,pe}};function F(){return{filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0}}t.AutoTrackEgress={encode(y,L=d.default.Writer.create()){return y.filepath!==void 0&&y.filepath!==""&&L.uint32(10).string(y.filepath),y.disableManifest===!0&&L.uint32(40).bool(y.disableManifest),y.s3!==void 0&&t.S3Upload.encode(y.s3,L.uint32(18).fork()).ldelim(),y.gcp!==void 0&&t.GCPUpload.encode(y.gcp,L.uint32(26).fork()).ldelim(),y.azure!==void 0&&t.AzureBlobUpload.encode(y.azure,L.uint32(34).fork()).ldelim(),L},decode(y,L){const H=y instanceof d.default.Reader?y:new d.default.Reader(y);let fe=L===void 0?H.len:H.pos+L;const j=F();for(;H.pos<fe;){const b=H.uint32();switch(b>>>3){case 1:j.filepath=H.string();break;case 5:j.disableManifest=H.bool();break;case 2:j.s3=t.S3Upload.decode(H,H.uint32());break;case 3:j.gcp=t.GCPUpload.decode(H,H.uint32());break;case 4:j.azure=t.AzureBlobUpload.decode(H,H.uint32());break;default:H.skipType(b&7);break}}return j},fromJSON(y){return{filepath:ue(y.filepath)?String(y.filepath):"",disableManifest:ue(y.disableManifest)?!!y.disableManifest:!1,s3:ue(y.s3)?t.S3Upload.fromJSON(y.s3):void 0,gcp:ue(y.gcp)?t.GCPUpload.fromJSON(y.gcp):void 0,azure:ue(y.azure)?t.AzureBlobUpload.fromJSON(y.azure):void 0}},toJSON(y){const L={};return y.filepath!==void 0&&(L.filepath=y.filepath),y.disableManifest!==void 0&&(L.disableManifest=y.disableManifest),y.s3!==void 0&&(L.s3=y.s3?t.S3Upload.toJSON(y.s3):void 0),y.gcp!==void 0&&(L.gcp=y.gcp?t.GCPUpload.toJSON(y.gcp):void 0),y.azure!==void 0&&(L.azure=y.azure?t.AzureBlobUpload.toJSON(y.azure):void 0),L},fromPartial(y){var L,H;const fe=F();return fe.filepath=(L=y.filepath)!==null&&L!==void 0?L:"",fe.disableManifest=(H=y.disableManifest)!==null&&H!==void 0?H:!1,fe.s3=y.s3!==void 0&&y.s3!==null?t.S3Upload.fromPartial(y.s3):void 0,fe.gcp=y.gcp!==void 0&&y.gcp!==null?t.GCPUpload.fromPartial(y.gcp):void 0,fe.azure=y.azure!==void 0&&y.azure!==null?t.AzureBlobUpload.fromPartial(y.azure):void 0,fe}};var $=(()=>{if(typeof $<"u")return $;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function X(y){if($.Buffer)return Uint8Array.from($.Buffer.from(y,"base64"));{const L=$.atob(y),H=new Uint8Array(L.length);for(let fe=0;fe<L.length;++fe)H[fe]=L.charCodeAt(fe);return H}}function se(y){if($.Buffer)return $.Buffer.from(y).toString("base64");{const L=[];return y.forEach(H=>{L.push(String.fromCharCode(H))}),$.btoa(L.join(""))}}function ve(y){if(y.gt(Number.MAX_SAFE_INTEGER))throw new $.Error("Value is larger than Number.MAX_SAFE_INTEGER");return y.toNumber()}d.default.util.Long!==o.default&&(d.default.util.Long=o.default,d.default.configure());function Se(y){return typeof y=="object"&&y!==null}function ue(y){return y!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{long:85,"protobufjs/minimal":89}],74:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteIngressRequest=t.ListIngressResponse=t.ListIngressRequest=t.UpdateIngressRequest=t.InputAudioState=t.InputVideoState=t.IngressState=t.IngressInfo=t.IngressVideoOptions=t.IngressAudioOptions=t.CreateIngressRequest=t.ingressState_StatusToJSON=t.ingressState_StatusFromJSON=t.IngressState_Status=t.ingressInputToJSON=t.ingressInputFromJSON=t.IngressInput=t.protobufPackage=void 0;const o=a(e("long")),d=a(e("protobufjs/minimal")),s=e("./livekit_models");t.protobufPackage="livekit";var f;(function(O){O[O.RTMP_INPUT=0]="RTMP_INPUT",O[O.UNRECOGNIZED=-1]="UNRECOGNIZED"})(f=t.IngressInput||(t.IngressInput={}));function c(O){switch(O){case 0:case"RTMP_INPUT":return f.RTMP_INPUT;case-1:case"UNRECOGNIZED":default:return f.UNRECOGNIZED}}t.ingressInputFromJSON=c;function h(O){switch(O){case f.RTMP_INPUT:return"RTMP_INPUT";case f.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.ingressInputToJSON=h;var v;(function(O){O[O.ENDPOINT_INACTIVE=0]="ENDPOINT_INACTIVE",O[O.ENDPOINT_BUFFERING=1]="ENDPOINT_BUFFERING",O[O.ENDPOINT_PUBLISHING=2]="ENDPOINT_PUBLISHING",O[O.ENDPOINT_ERROR=3]="ENDPOINT_ERROR",O[O.UNRECOGNIZED=-1]="UNRECOGNIZED"})(v=t.IngressState_Status||(t.IngressState_Status={}));function l(O){switch(O){case 0:case"ENDPOINT_INACTIVE":return v.ENDPOINT_INACTIVE;case 1:case"ENDPOINT_BUFFERING":return v.ENDPOINT_BUFFERING;case 2:case"ENDPOINT_PUBLISHING":return v.ENDPOINT_PUBLISHING;case 3:case"ENDPOINT_ERROR":return v.ENDPOINT_ERROR;case-1:case"UNRECOGNIZED":default:return v.UNRECOGNIZED}}t.ingressState_StatusFromJSON=l;function u(O){switch(O){case v.ENDPOINT_INACTIVE:return"ENDPOINT_INACTIVE";case v.ENDPOINT_BUFFERING:return"ENDPOINT_BUFFERING";case v.ENDPOINT_PUBLISHING:return"ENDPOINT_PUBLISHING";case v.ENDPOINT_ERROR:return"ENDPOINT_ERROR";case v.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.ingressState_StatusToJSON=u;function p(){return{inputType:0,name:"",roomName:"",participantIdentity:"",participantName:"",audio:void 0,video:void 0}}t.CreateIngressRequest={encode(O,x=d.default.Writer.create()){return O.inputType!==void 0&&O.inputType!==0&&x.uint32(8).int32(O.inputType),O.name!==void 0&&O.name!==""&&x.uint32(18).string(O.name),O.roomName!==void 0&&O.roomName!==""&&x.uint32(26).string(O.roomName),O.participantIdentity!==void 0&&O.participantIdentity!==""&&x.uint32(34).string(O.participantIdentity),O.participantName!==void 0&&O.participantName!==""&&x.uint32(42).string(O.participantName),O.audio!==void 0&&t.IngressAudioOptions.encode(O.audio,x.uint32(50).fork()).ldelim(),O.video!==void 0&&t.IngressVideoOptions.encode(O.video,x.uint32(58).fork()).ldelim(),x},decode(O,x){const S=O instanceof d.default.Reader?O:new d.default.Reader(O);let k=x===void 0?S.len:S.pos+x;const g=p();for(;S.pos<k;){const E=S.uint32();switch(E>>>3){case 1:g.inputType=S.int32();break;case 2:g.name=S.string();break;case 3:g.roomName=S.string();break;case 4:g.participantIdentity=S.string();break;case 5:g.participantName=S.string();break;case 6:g.audio=t.IngressAudioOptions.decode(S,S.uint32());break;case 7:g.video=t.IngressVideoOptions.decode(S,S.uint32());break;default:S.skipType(E&7);break}}return g},fromJSON(O){return{inputType:Y(O.inputType)?c(O.inputType):0,name:Y(O.name)?String(O.name):"",roomName:Y(O.roomName)?String(O.roomName):"",participantIdentity:Y(O.participantIdentity)?String(O.participantIdentity):"",participantName:Y(O.participantName)?String(O.participantName):"",audio:Y(O.audio)?t.IngressAudioOptions.fromJSON(O.audio):void 0,video:Y(O.video)?t.IngressVideoOptions.fromJSON(O.video):void 0}},toJSON(O){const x={};return O.inputType!==void 0&&(x.inputType=h(O.inputType)),O.name!==void 0&&(x.name=O.name),O.roomName!==void 0&&(x.roomName=O.roomName),O.participantIdentity!==void 0&&(x.participantIdentity=O.participantIdentity),O.participantName!==void 0&&(x.participantName=O.participantName),O.audio!==void 0&&(x.audio=O.audio?t.IngressAudioOptions.toJSON(O.audio):void 0),O.video!==void 0&&(x.video=O.video?t.IngressVideoOptions.toJSON(O.video):void 0),x},fromPartial(O){var x,S,k,g,E;const T=p();return T.inputType=(x=O.inputType)!==null&&x!==void 0?x:0,T.name=(S=O.name)!==null&&S!==void 0?S:"",T.roomName=(k=O.roomName)!==null&&k!==void 0?k:"",T.participantIdentity=(g=O.participantIdentity)!==null&&g!==void 0?g:"",T.participantName=(E=O.participantName)!==null&&E!==void 0?E:"",T.audio=O.audio!==void 0&&O.audio!==null?t.IngressAudioOptions.fromPartial(O.audio):void 0,T.video=O.video!==void 0&&O.video!==null?t.IngressVideoOptions.fromPartial(O.video):void 0,T}};function m(){return{name:"",source:0,mimeType:"",bitrate:0,disableDtx:!1,channels:0}}t.IngressAudioOptions={encode(O,x=d.default.Writer.create()){return O.name!==void 0&&O.name!==""&&x.uint32(10).string(O.name),O.source!==void 0&&O.source!==0&&x.uint32(16).int32(O.source),O.mimeType!==void 0&&O.mimeType!==""&&x.uint32(26).string(O.mimeType),O.bitrate!==void 0&&O.bitrate!==0&&x.uint32(32).uint32(O.bitrate),O.disableDtx===!0&&x.uint32(40).bool(O.disableDtx),O.channels!==void 0&&O.channels!==0&&x.uint32(48).uint32(O.channels),x},decode(O,x){const S=O instanceof d.default.Reader?O:new d.default.Reader(O);let k=x===void 0?S.len:S.pos+x;const g=m();for(;S.pos<k;){const E=S.uint32();switch(E>>>3){case 1:g.name=S.string();break;case 2:g.source=S.int32();break;case 3:g.mimeType=S.string();break;case 4:g.bitrate=S.uint32();break;case 5:g.disableDtx=S.bool();break;case 6:g.channels=S.uint32();break;default:S.skipType(E&7);break}}return g},fromJSON(O){return{name:Y(O.name)?String(O.name):"",source:Y(O.source)?s.trackSourceFromJSON(O.source):0,mimeType:Y(O.mimeType)?String(O.mimeType):"",bitrate:Y(O.bitrate)?Number(O.bitrate):0,disableDtx:Y(O.disableDtx)?!!O.disableDtx:!1,channels:Y(O.channels)?Number(O.channels):0}},toJSON(O){const x={};return O.name!==void 0&&(x.name=O.name),O.source!==void 0&&(x.source=s.trackSourceToJSON(O.source)),O.mimeType!==void 0&&(x.mimeType=O.mimeType),O.bitrate!==void 0&&(x.bitrate=Math.round(O.bitrate)),O.disableDtx!==void 0&&(x.disableDtx=O.disableDtx),O.channels!==void 0&&(x.channels=Math.round(O.channels)),x},fromPartial(O){var x,S,k,g,E,T;const A=m();return A.name=(x=O.name)!==null&&x!==void 0?x:"",A.source=(S=O.source)!==null&&S!==void 0?S:0,A.mimeType=(k=O.mimeType)!==null&&k!==void 0?k:"",A.bitrate=(g=O.bitrate)!==null&&g!==void 0?g:0,A.disableDtx=(E=O.disableDtx)!==null&&E!==void 0?E:!1,A.channels=(T=O.channels)!==null&&T!==void 0?T:0,A}};function w(){return{name:"",source:0,mimeType:"",layers:[]}}t.IngressVideoOptions={encode(O,x=d.default.Writer.create()){if(O.name!==void 0&&O.name!==""&&x.uint32(10).string(O.name),O.source!==void 0&&O.source!==0&&x.uint32(16).int32(O.source),O.mimeType!==void 0&&O.mimeType!==""&&x.uint32(26).string(O.mimeType),O.layers!==void 0&&O.layers.length!==0)for(const S of O.layers)s.VideoLayer.encode(S,x.uint32(34).fork()).ldelim();return x},decode(O,x){const S=O instanceof d.default.Reader?O:new d.default.Reader(O);let k=x===void 0?S.len:S.pos+x;const g=w();for(;S.pos<k;){const E=S.uint32();switch(E>>>3){case 1:g.name=S.string();break;case 2:g.source=S.int32();break;case 3:g.mimeType=S.string();break;case 4:g.layers.push(s.VideoLayer.decode(S,S.uint32()));break;default:S.skipType(E&7);break}}return g},fromJSON(O){return{name:Y(O.name)?String(O.name):"",source:Y(O.source)?s.trackSourceFromJSON(O.source):0,mimeType:Y(O.mimeType)?String(O.mimeType):"",layers:Array.isArray(O==null?void 0:O.layers)?O.layers.map(x=>s.VideoLayer.fromJSON(x)):[]}},toJSON(O){const x={};return O.name!==void 0&&(x.name=O.name),O.source!==void 0&&(x.source=s.trackSourceToJSON(O.source)),O.mimeType!==void 0&&(x.mimeType=O.mimeType),O.layers?x.layers=O.layers.map(S=>S?s.VideoLayer.toJSON(S):void 0):x.layers=[],x},fromPartial(O){var x,S,k,g;const E=w();return E.name=(x=O.name)!==null&&x!==void 0?x:"",E.source=(S=O.source)!==null&&S!==void 0?S:0,E.mimeType=(k=O.mimeType)!==null&&k!==void 0?k:"",E.layers=((g=O.layers)===null||g===void 0?void 0:g.map(T=>s.VideoLayer.fromPartial(T)))||[],E}};function _(){return{ingressId:"",name:"",streamKey:"",url:"",inputType:0,audio:void 0,video:void 0,roomName:"",participantIdentity:"",participantName:"",reusable:!1,state:void 0}}t.IngressInfo={encode(O,x=d.default.Writer.create()){return O.ingressId!==void 0&&O.ingressId!==""&&x.uint32(10).string(O.ingressId),O.name!==void 0&&O.name!==""&&x.uint32(18).string(O.name),O.streamKey!==void 0&&O.streamKey!==""&&x.uint32(26).string(O.streamKey),O.url!==void 0&&O.url!==""&&x.uint32(34).string(O.url),O.inputType!==void 0&&O.inputType!==0&&x.uint32(40).int32(O.inputType),O.audio!==void 0&&t.IngressAudioOptions.encode(O.audio,x.uint32(50).fork()).ldelim(),O.video!==void 0&&t.IngressVideoOptions.encode(O.video,x.uint32(58).fork()).ldelim(),O.roomName!==void 0&&O.roomName!==""&&x.uint32(66).string(O.roomName),O.participantIdentity!==void 0&&O.participantIdentity!==""&&x.uint32(74).string(O.participantIdentity),O.participantName!==void 0&&O.participantName!==""&&x.uint32(82).string(O.participantName),O.reusable===!0&&x.uint32(88).bool(O.reusable),O.state!==void 0&&t.IngressState.encode(O.state,x.uint32(98).fork()).ldelim(),x},decode(O,x){const S=O instanceof d.default.Reader?O:new d.default.Reader(O);let k=x===void 0?S.len:S.pos+x;const g=_();for(;S.pos<k;){const E=S.uint32();switch(E>>>3){case 1:g.ingressId=S.string();break;case 2:g.name=S.string();break;case 3:g.streamKey=S.string();break;case 4:g.url=S.string();break;case 5:g.inputType=S.int32();break;case 6:g.audio=t.IngressAudioOptions.decode(S,S.uint32());break;case 7:g.video=t.IngressVideoOptions.decode(S,S.uint32());break;case 8:g.roomName=S.string();break;case 9:g.participantIdentity=S.string();break;case 10:g.participantName=S.string();break;case 11:g.reusable=S.bool();break;case 12:g.state=t.IngressState.decode(S,S.uint32());break;default:S.skipType(E&7);break}}return g},fromJSON(O){return{ingressId:Y(O.ingressId)?String(O.ingressId):"",name:Y(O.name)?String(O.name):"",streamKey:Y(O.streamKey)?String(O.streamKey):"",url:Y(O.url)?String(O.url):"",inputType:Y(O.inputType)?c(O.inputType):0,audio:Y(O.audio)?t.IngressAudioOptions.fromJSON(O.audio):void 0,video:Y(O.video)?t.IngressVideoOptions.fromJSON(O.video):void 0,roomName:Y(O.roomName)?String(O.roomName):"",participantIdentity:Y(O.participantIdentity)?String(O.participantIdentity):"",participantName:Y(O.participantName)?String(O.participantName):"",reusable:Y(O.reusable)?!!O.reusable:!1,state:Y(O.state)?t.IngressState.fromJSON(O.state):void 0}},toJSON(O){const x={};return O.ingressId!==void 0&&(x.ingressId=O.ingressId),O.name!==void 0&&(x.name=O.name),O.streamKey!==void 0&&(x.streamKey=O.streamKey),O.url!==void 0&&(x.url=O.url),O.inputType!==void 0&&(x.inputType=h(O.inputType)),O.audio!==void 0&&(x.audio=O.audio?t.IngressAudioOptions.toJSON(O.audio):void 0),O.video!==void 0&&(x.video=O.video?t.IngressVideoOptions.toJSON(O.video):void 0),O.roomName!==void 0&&(x.roomName=O.roomName),O.participantIdentity!==void 0&&(x.participantIdentity=O.participantIdentity),O.participantName!==void 0&&(x.participantName=O.participantName),O.reusable!==void 0&&(x.reusable=O.reusable),O.state!==void 0&&(x.state=O.state?t.IngressState.toJSON(O.state):void 0),x},fromPartial(O){var x,S,k,g,E,T,A,J,G;const I=_();return I.ingressId=(x=O.ingressId)!==null&&x!==void 0?x:"",I.name=(S=O.name)!==null&&S!==void 0?S:"",I.streamKey=(k=O.streamKey)!==null&&k!==void 0?k:"",I.url=(g=O.url)!==null&&g!==void 0?g:"",I.inputType=(E=O.inputType)!==null&&E!==void 0?E:0,I.audio=O.audio!==void 0&&O.audio!==null?t.IngressAudioOptions.fromPartial(O.audio):void 0,I.video=O.video!==void 0&&O.video!==null?t.IngressVideoOptions.fromPartial(O.video):void 0,I.roomName=(T=O.roomName)!==null&&T!==void 0?T:"",I.participantIdentity=(A=O.participantIdentity)!==null&&A!==void 0?A:"",I.participantName=(J=O.participantName)!==null&&J!==void 0?J:"",I.reusable=(G=O.reusable)!==null&&G!==void 0?G:!1,I.state=O.state!==void 0&&O.state!==null?t.IngressState.fromPartial(O.state):void 0,I}};function C(){return{status:0,error:"",video:void 0,audio:void 0,roomId:"",startedAt:0,tracks:[]}}t.IngressState={encode(O,x=d.default.Writer.create()){if(O.status!==void 0&&O.status!==0&&x.uint32(8).int32(O.status),O.error!==void 0&&O.error!==""&&x.uint32(18).string(O.error),O.video!==void 0&&t.InputVideoState.encode(O.video,x.uint32(26).fork()).ldelim(),O.audio!==void 0&&t.InputAudioState.encode(O.audio,x.uint32(34).fork()).ldelim(),O.roomId!==void 0&&O.roomId!==""&&x.uint32(42).string(O.roomId),O.startedAt!==void 0&&O.startedAt!==0&&x.uint32(56).int64(O.startedAt),O.tracks!==void 0&&O.tracks.length!==0)for(const S of O.tracks)s.TrackInfo.encode(S,x.uint32(50).fork()).ldelim();return x},decode(O,x){const S=O instanceof d.default.Reader?O:new d.default.Reader(O);let k=x===void 0?S.len:S.pos+x;const g=C();for(;S.pos<k;){const E=S.uint32();switch(E>>>3){case 1:g.status=S.int32();break;case 2:g.error=S.string();break;case 3:g.video=t.InputVideoState.decode(S,S.uint32());break;case 4:g.audio=t.InputAudioState.decode(S,S.uint32());break;case 5:g.roomId=S.string();break;case 7:g.startedAt=re(S.int64());break;case 6:g.tracks.push(s.TrackInfo.decode(S,S.uint32()));break;default:S.skipType(E&7);break}}return g},fromJSON(O){return{status:Y(O.status)?l(O.status):0,error:Y(O.error)?String(O.error):"",video:Y(O.video)?t.InputVideoState.fromJSON(O.video):void 0,audio:Y(O.audio)?t.InputAudioState.fromJSON(O.audio):void 0,roomId:Y(O.roomId)?String(O.roomId):"",startedAt:Y(O.startedAt)?Number(O.startedAt):0,tracks:Array.isArray(O==null?void 0:O.tracks)?O.tracks.map(x=>s.TrackInfo.fromJSON(x)):[]}},toJSON(O){const x={};return O.status!==void 0&&(x.status=u(O.status)),O.error!==void 0&&(x.error=O.error),O.video!==void 0&&(x.video=O.video?t.InputVideoState.toJSON(O.video):void 0),O.audio!==void 0&&(x.audio=O.audio?t.InputAudioState.toJSON(O.audio):void 0),O.roomId!==void 0&&(x.roomId=O.roomId),O.startedAt!==void 0&&(x.startedAt=Math.round(O.startedAt)),O.tracks?x.tracks=O.tracks.map(S=>S?s.TrackInfo.toJSON(S):void 0):x.tracks=[],x},fromPartial(O){var x,S,k,g,E;const T=C();return T.status=(x=O.status)!==null&&x!==void 0?x:0,T.error=(S=O.error)!==null&&S!==void 0?S:"",T.video=O.video!==void 0&&O.video!==null?t.InputVideoState.fromPartial(O.video):void 0,T.audio=O.audio!==void 0&&O.audio!==null?t.InputAudioState.fromPartial(O.audio):void 0,T.roomId=(k=O.roomId)!==null&&k!==void 0?k:"",T.startedAt=(g=O.startedAt)!==null&&g!==void 0?g:0,T.tracks=((E=O.tracks)===null||E===void 0?void 0:E.map(A=>s.TrackInfo.fromPartial(A)))||[],T}};function N(){return{mimeType:0,width:0,height:0,framerate:0}}t.InputVideoState={encode(O,x=d.default.Writer.create()){return O.mimeType!==void 0&&O.mimeType!==0&&x.uint32(8).uint32(O.mimeType),O.width!==void 0&&O.width!==0&&x.uint32(24).uint32(O.width),O.height!==void 0&&O.height!==0&&x.uint32(32).uint32(O.height),O.framerate!==void 0&&O.framerate!==0&&x.uint32(40).uint32(O.framerate),x},decode(O,x){const S=O instanceof d.default.Reader?O:new d.default.Reader(O);let k=x===void 0?S.len:S.pos+x;const g=N();for(;S.pos<k;){const E=S.uint32();switch(E>>>3){case 1:g.mimeType=S.uint32();break;case 3:g.width=S.uint32();break;case 4:g.height=S.uint32();break;case 5:g.framerate=S.uint32();break;default:S.skipType(E&7);break}}return g},fromJSON(O){return{mimeType:Y(O.mimeType)?Number(O.mimeType):0,width:Y(O.width)?Number(O.width):0,height:Y(O.height)?Number(O.height):0,framerate:Y(O.framerate)?Number(O.framerate):0}},toJSON(O){const x={};return O.mimeType!==void 0&&(x.mimeType=Math.round(O.mimeType)),O.width!==void 0&&(x.width=Math.round(O.width)),O.height!==void 0&&(x.height=Math.round(O.height)),O.framerate!==void 0&&(x.framerate=Math.round(O.framerate)),x},fromPartial(O){var x,S,k,g;const E=N();return E.mimeType=(x=O.mimeType)!==null&&x!==void 0?x:0,E.width=(S=O.width)!==null&&S!==void 0?S:0,E.height=(k=O.height)!==null&&k!==void 0?k:0,E.framerate=(g=O.framerate)!==null&&g!==void 0?g:0,E}};function P(){return{mimeType:0,channels:0,sampleRate:0}}t.InputAudioState={encode(O,x=d.default.Writer.create()){return O.mimeType!==void 0&&O.mimeType!==0&&x.uint32(8).uint32(O.mimeType),O.channels!==void 0&&O.channels!==0&&x.uint32(24).uint32(O.channels),O.sampleRate!==void 0&&O.sampleRate!==0&&x.uint32(32).uint32(O.sampleRate),x},decode(O,x){const S=O instanceof d.default.Reader?O:new d.default.Reader(O);let k=x===void 0?S.len:S.pos+x;const g=P();for(;S.pos<k;){const E=S.uint32();switch(E>>>3){case 1:g.mimeType=S.uint32();break;case 3:g.channels=S.uint32();break;case 4:g.sampleRate=S.uint32();break;default:S.skipType(E&7);break}}return g},fromJSON(O){return{mimeType:Y(O.mimeType)?Number(O.mimeType):0,channels:Y(O.channels)?Number(O.channels):0,sampleRate:Y(O.sampleRate)?Number(O.sampleRate):0}},toJSON(O){const x={};return O.mimeType!==void 0&&(x.mimeType=Math.round(O.mimeType)),O.channels!==void 0&&(x.channels=Math.round(O.channels)),O.sampleRate!==void 0&&(x.sampleRate=Math.round(O.sampleRate)),x},fromPartial(O){var x,S,k;const g=P();return g.mimeType=(x=O.mimeType)!==null&&x!==void 0?x:0,g.channels=(S=O.channels)!==null&&S!==void 0?S:0,g.sampleRate=(k=O.sampleRate)!==null&&k!==void 0?k:0,g}};function M(){return{ingressId:"",name:"",roomName:"",participantIdentity:"",participantName:"",audio:void 0,video:void 0}}t.UpdateIngressRequest={encode(O,x=d.default.Writer.create()){return O.ingressId!==void 0&&O.ingressId!==""&&x.uint32(10).string(O.ingressId),O.name!==void 0&&O.name!==""&&x.uint32(18).string(O.name),O.roomName!==void 0&&O.roomName!==""&&x.uint32(26).string(O.roomName),O.participantIdentity!==void 0&&O.participantIdentity!==""&&x.uint32(34).string(O.participantIdentity),O.participantName!==void 0&&O.participantName!==""&&x.uint32(42).string(O.participantName),O.audio!==void 0&&t.IngressAudioOptions.encode(O.audio,x.uint32(50).fork()).ldelim(),O.video!==void 0&&t.IngressVideoOptions.encode(O.video,x.uint32(58).fork()).ldelim(),x},decode(O,x){const S=O instanceof d.default.Reader?O:new d.default.Reader(O);let k=x===void 0?S.len:S.pos+x;const g=M();for(;S.pos<k;){const E=S.uint32();switch(E>>>3){case 1:g.ingressId=S.string();break;case 2:g.name=S.string();break;case 3:g.roomName=S.string();break;case 4:g.participantIdentity=S.string();break;case 5:g.participantName=S.string();break;case 6:g.audio=t.IngressAudioOptions.decode(S,S.uint32());break;case 7:g.video=t.IngressVideoOptions.decode(S,S.uint32());break;default:S.skipType(E&7);break}}return g},fromJSON(O){return{ingressId:Y(O.ingressId)?String(O.ingressId):"",name:Y(O.name)?String(O.name):"",roomName:Y(O.roomName)?String(O.roomName):"",participantIdentity:Y(O.participantIdentity)?String(O.participantIdentity):"",participantName:Y(O.participantName)?String(O.participantName):"",audio:Y(O.audio)?t.IngressAudioOptions.fromJSON(O.audio):void 0,video:Y(O.video)?t.IngressVideoOptions.fromJSON(O.video):void 0}},toJSON(O){const x={};return O.ingressId!==void 0&&(x.ingressId=O.ingressId),O.name!==void 0&&(x.name=O.name),O.roomName!==void 0&&(x.roomName=O.roomName),O.participantIdentity!==void 0&&(x.participantIdentity=O.participantIdentity),O.participantName!==void 0&&(x.participantName=O.participantName),O.audio!==void 0&&(x.audio=O.audio?t.IngressAudioOptions.toJSON(O.audio):void 0),O.video!==void 0&&(x.video=O.video?t.IngressVideoOptions.toJSON(O.video):void 0),x},fromPartial(O){var x,S,k,g,E;const T=M();return T.ingressId=(x=O.ingressId)!==null&&x!==void 0?x:"",T.name=(S=O.name)!==null&&S!==void 0?S:"",T.roomName=(k=O.roomName)!==null&&k!==void 0?k:"",T.participantIdentity=(g=O.participantIdentity)!==null&&g!==void 0?g:"",T.participantName=(E=O.participantName)!==null&&E!==void 0?E:"",T.audio=O.audio!==void 0&&O.audio!==null?t.IngressAudioOptions.fromPartial(O.audio):void 0,T.video=O.video!==void 0&&O.video!==null?t.IngressVideoOptions.fromPartial(O.video):void 0,T}};function U(){return{roomName:""}}t.ListIngressRequest={encode(O,x=d.default.Writer.create()){return O.roomName!==void 0&&O.roomName!==""&&x.uint32(10).string(O.roomName),x},decode(O,x){const S=O instanceof d.default.Reader?O:new d.default.Reader(O);let k=x===void 0?S.len:S.pos+x;const g=U();for(;S.pos<k;){const E=S.uint32();switch(E>>>3){case 1:g.roomName=S.string();break;default:S.skipType(E&7);break}}return g},fromJSON(O){return{roomName:Y(O.roomName)?String(O.roomName):""}},toJSON(O){const x={};return O.roomName!==void 0&&(x.roomName=O.roomName),x},fromPartial(O){var x;const S=U();return S.roomName=(x=O.roomName)!==null&&x!==void 0?x:"",S}};function W(){return{items:[]}}t.ListIngressResponse={encode(O,x=d.default.Writer.create()){if(O.items!==void 0&&O.items.length!==0)for(const S of O.items)t.IngressInfo.encode(S,x.uint32(10).fork()).ldelim();return x},decode(O,x){const S=O instanceof d.default.Reader?O:new d.default.Reader(O);let k=x===void 0?S.len:S.pos+x;const g=W();for(;S.pos<k;){const E=S.uint32();switch(E>>>3){case 1:g.items.push(t.IngressInfo.decode(S,S.uint32()));break;default:S.skipType(E&7);break}}return g},fromJSON(O){return{items:Array.isArray(O==null?void 0:O.items)?O.items.map(x=>t.IngressInfo.fromJSON(x)):[]}},toJSON(O){const x={};return O.items?x.items=O.items.map(S=>S?t.IngressInfo.toJSON(S):void 0):x.items=[],x},fromPartial(O){var x;const S=W();return S.items=((x=O.items)===null||x===void 0?void 0:x.map(k=>t.IngressInfo.fromPartial(k)))||[],S}};function q(){return{ingressId:""}}t.DeleteIngressRequest={encode(O,x=d.default.Writer.create()){return O.ingressId!==void 0&&O.ingressId!==""&&x.uint32(10).string(O.ingressId),x},decode(O,x){const S=O instanceof d.default.Reader?O:new d.default.Reader(O);let k=x===void 0?S.len:S.pos+x;const g=q();for(;S.pos<k;){const E=S.uint32();switch(E>>>3){case 1:g.ingressId=S.string();break;default:S.skipType(E&7);break}}return g},fromJSON(O){return{ingressId:Y(O.ingressId)?String(O.ingressId):""}},toJSON(O){const x={};return O.ingressId!==void 0&&(x.ingressId=O.ingressId),x},fromPartial(O){var x;const S=q();return S.ingressId=(x=O.ingressId)!==null&&x!==void 0?x:"",S}};var Z=(()=>{if(typeof Z<"u")return Z;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function re(O){if(O.gt(Number.MAX_SAFE_INTEGER))throw new Z.Error("Value is larger than Number.MAX_SAFE_INTEGER");return O.toNumber()}d.default.util.Long!==o.default&&(d.default.util.Long=o.default,d.default.configure());function Y(O){return O!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./livekit_models":75,long:85,"protobufjs/minimal":89}],75:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(t,"__esModule",{value:!0}),t.RTPStats_GapHistogramEntry=t.RTPStats=t.DisabledCodecs=t.VideoConfiguration=t.ClientConfiguration=t.ClientInfo=t.ServerInfo=t.ParticipantTracks=t.UserPacket=t.SpeakerInfo=t.ActiveSpeakerUpdate=t.DataPacket=t.VideoLayer=t.TrackInfo=t.SimulcastCodecInfo=t.ParticipantInfo=t.ParticipantPermission=t.Codec=t.Room=t.clientInfo_SDKToJSON=t.clientInfo_SDKFromJSON=t.ClientInfo_SDK=t.serverInfo_EditionToJSON=t.serverInfo_EditionFromJSON=t.ServerInfo_Edition=t.dataPacket_KindToJSON=t.dataPacket_KindFromJSON=t.DataPacket_Kind=t.participantInfo_StateToJSON=t.participantInfo_StateFromJSON=t.ParticipantInfo_State=t.disconnectReasonToJSON=t.disconnectReasonFromJSON=t.DisconnectReason=t.clientConfigSettingToJSON=t.clientConfigSettingFromJSON=t.ClientConfigSetting=t.connectionQualityToJSON=t.connectionQualityFromJSON=t.ConnectionQuality=t.videoQualityToJSON=t.videoQualityFromJSON=t.VideoQuality=t.trackSourceToJSON=t.trackSourceFromJSON=t.TrackSource=t.trackTypeToJSON=t.trackTypeFromJSON=t.TrackType=t.protobufPackage=void 0,t.TimedVersion=void 0;const o=a(e("long")),d=a(e("protobufjs/minimal")),s=e("./google/protobuf/timestamp");t.protobufPackage="livekit";var f;(function(b){b[b.AUDIO=0]="AUDIO",b[b.VIDEO=1]="VIDEO",b[b.DATA=2]="DATA",b[b.UNRECOGNIZED=-1]="UNRECOGNIZED"})(f=t.TrackType||(t.TrackType={}));function c(b){switch(b){case 0:case"AUDIO":return f.AUDIO;case 1:case"VIDEO":return f.VIDEO;case 2:case"DATA":return f.DATA;case-1:case"UNRECOGNIZED":default:return f.UNRECOGNIZED}}t.trackTypeFromJSON=c;function h(b){switch(b){case f.AUDIO:return"AUDIO";case f.VIDEO:return"VIDEO";case f.DATA:return"DATA";case f.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.trackTypeToJSON=h;var v;(function(b){b[b.UNKNOWN=0]="UNKNOWN",b[b.CAMERA=1]="CAMERA",b[b.MICROPHONE=2]="MICROPHONE",b[b.SCREEN_SHARE=3]="SCREEN_SHARE",b[b.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",b[b.UNRECOGNIZED=-1]="UNRECOGNIZED"})(v=t.TrackSource||(t.TrackSource={}));function l(b){switch(b){case 0:case"UNKNOWN":return v.UNKNOWN;case 1:case"CAMERA":return v.CAMERA;case 2:case"MICROPHONE":return v.MICROPHONE;case 3:case"SCREEN_SHARE":return v.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return v.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return v.UNRECOGNIZED}}t.trackSourceFromJSON=l;function u(b){switch(b){case v.UNKNOWN:return"UNKNOWN";case v.CAMERA:return"CAMERA";case v.MICROPHONE:return"MICROPHONE";case v.SCREEN_SHARE:return"SCREEN_SHARE";case v.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";case v.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.trackSourceToJSON=u;var p;(function(b){b[b.LOW=0]="LOW",b[b.MEDIUM=1]="MEDIUM",b[b.HIGH=2]="HIGH",b[b.OFF=3]="OFF",b[b.UNRECOGNIZED=-1]="UNRECOGNIZED"})(p=t.VideoQuality||(t.VideoQuality={}));function m(b){switch(b){case 0:case"LOW":return p.LOW;case 1:case"MEDIUM":return p.MEDIUM;case 2:case"HIGH":return p.HIGH;case 3:case"OFF":return p.OFF;case-1:case"UNRECOGNIZED":default:return p.UNRECOGNIZED}}t.videoQualityFromJSON=m;function w(b){switch(b){case p.LOW:return"LOW";case p.MEDIUM:return"MEDIUM";case p.HIGH:return"HIGH";case p.OFF:return"OFF";case p.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.videoQualityToJSON=w;var _;(function(b){b[b.POOR=0]="POOR",b[b.GOOD=1]="GOOD",b[b.EXCELLENT=2]="EXCELLENT",b[b.UNRECOGNIZED=-1]="UNRECOGNIZED"})(_=t.ConnectionQuality||(t.ConnectionQuality={}));function C(b){switch(b){case 0:case"POOR":return _.POOR;case 1:case"GOOD":return _.GOOD;case 2:case"EXCELLENT":return _.EXCELLENT;case-1:case"UNRECOGNIZED":default:return _.UNRECOGNIZED}}t.connectionQualityFromJSON=C;function N(b){switch(b){case _.POOR:return"POOR";case _.GOOD:return"GOOD";case _.EXCELLENT:return"EXCELLENT";case _.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.connectionQualityToJSON=N;var P;(function(b){b[b.UNSET=0]="UNSET",b[b.DISABLED=1]="DISABLED",b[b.ENABLED=2]="ENABLED",b[b.UNRECOGNIZED=-1]="UNRECOGNIZED"})(P=t.ClientConfigSetting||(t.ClientConfigSetting={}));function M(b){switch(b){case 0:case"UNSET":return P.UNSET;case 1:case"DISABLED":return P.DISABLED;case 2:case"ENABLED":return P.ENABLED;case-1:case"UNRECOGNIZED":default:return P.UNRECOGNIZED}}t.clientConfigSettingFromJSON=M;function U(b){switch(b){case P.UNSET:return"UNSET";case P.DISABLED:return"DISABLED";case P.ENABLED:return"ENABLED";case P.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.clientConfigSettingToJSON=U;var W;(function(b){b[b.UNKNOWN_REASON=0]="UNKNOWN_REASON",b[b.CLIENT_INITIATED=1]="CLIENT_INITIATED",b[b.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",b[b.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",b[b.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",b[b.ROOM_DELETED=5]="ROOM_DELETED",b[b.STATE_MISMATCH=6]="STATE_MISMATCH",b[b.JOIN_FAILURE=7]="JOIN_FAILURE",b[b.UNRECOGNIZED=-1]="UNRECOGNIZED"})(W=t.DisconnectReason||(t.DisconnectReason={}));function q(b){switch(b){case 0:case"UNKNOWN_REASON":return W.UNKNOWN_REASON;case 1:case"CLIENT_INITIATED":return W.CLIENT_INITIATED;case 2:case"DUPLICATE_IDENTITY":return W.DUPLICATE_IDENTITY;case 3:case"SERVER_SHUTDOWN":return W.SERVER_SHUTDOWN;case 4:case"PARTICIPANT_REMOVED":return W.PARTICIPANT_REMOVED;case 5:case"ROOM_DELETED":return W.ROOM_DELETED;case 6:case"STATE_MISMATCH":return W.STATE_MISMATCH;case 7:case"JOIN_FAILURE":return W.JOIN_FAILURE;case-1:case"UNRECOGNIZED":default:return W.UNRECOGNIZED}}t.disconnectReasonFromJSON=q;function Z(b){switch(b){case W.UNKNOWN_REASON:return"UNKNOWN_REASON";case W.CLIENT_INITIATED:return"CLIENT_INITIATED";case W.DUPLICATE_IDENTITY:return"DUPLICATE_IDENTITY";case W.SERVER_SHUTDOWN:return"SERVER_SHUTDOWN";case W.PARTICIPANT_REMOVED:return"PARTICIPANT_REMOVED";case W.ROOM_DELETED:return"ROOM_DELETED";case W.STATE_MISMATCH:return"STATE_MISMATCH";case W.JOIN_FAILURE:return"JOIN_FAILURE";case W.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.disconnectReasonToJSON=Z;var re;(function(b){b[b.JOINING=0]="JOINING",b[b.JOINED=1]="JOINED",b[b.ACTIVE=2]="ACTIVE",b[b.DISCONNECTED=3]="DISCONNECTED",b[b.UNRECOGNIZED=-1]="UNRECOGNIZED"})(re=t.ParticipantInfo_State||(t.ParticipantInfo_State={}));function Y(b){switch(b){case 0:case"JOINING":return re.JOINING;case 1:case"JOINED":return re.JOINED;case 2:case"ACTIVE":return re.ACTIVE;case 3:case"DISCONNECTED":return re.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return re.UNRECOGNIZED}}t.participantInfo_StateFromJSON=Y;function O(b){switch(b){case re.JOINING:return"JOINING";case re.JOINED:return"JOINED";case re.ACTIVE:return"ACTIVE";case re.DISCONNECTED:return"DISCONNECTED";case re.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.participantInfo_StateToJSON=O;var x;(function(b){b[b.RELIABLE=0]="RELIABLE",b[b.LOSSY=1]="LOSSY",b[b.UNRECOGNIZED=-1]="UNRECOGNIZED"})(x=t.DataPacket_Kind||(t.DataPacket_Kind={}));function S(b){switch(b){case 0:case"RELIABLE":return x.RELIABLE;case 1:case"LOSSY":return x.LOSSY;case-1:case"UNRECOGNIZED":default:return x.UNRECOGNIZED}}t.dataPacket_KindFromJSON=S;function k(b){switch(b){case x.RELIABLE:return"RELIABLE";case x.LOSSY:return"LOSSY";case x.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.dataPacket_KindToJSON=k;var g;(function(b){b[b.Standard=0]="Standard",b[b.Cloud=1]="Cloud",b[b.UNRECOGNIZED=-1]="UNRECOGNIZED"})(g=t.ServerInfo_Edition||(t.ServerInfo_Edition={}));function E(b){switch(b){case 0:case"Standard":return g.Standard;case 1:case"Cloud":return g.Cloud;case-1:case"UNRECOGNIZED":default:return g.UNRECOGNIZED}}t.serverInfo_EditionFromJSON=E;function T(b){switch(b){case g.Standard:return"Standard";case g.Cloud:return"Cloud";case g.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.serverInfo_EditionToJSON=T;var A;(function(b){b[b.UNKNOWN=0]="UNKNOWN",b[b.JS=1]="JS",b[b.SWIFT=2]="SWIFT",b[b.ANDROID=3]="ANDROID",b[b.FLUTTER=4]="FLUTTER",b[b.GO=5]="GO",b[b.UNITY=6]="UNITY",b[b.UNRECOGNIZED=-1]="UNRECOGNIZED"})(A=t.ClientInfo_SDK||(t.ClientInfo_SDK={}));function J(b){switch(b){case 0:case"UNKNOWN":return A.UNKNOWN;case 1:case"JS":return A.JS;case 2:case"SWIFT":return A.SWIFT;case 3:case"ANDROID":return A.ANDROID;case 4:case"FLUTTER":return A.FLUTTER;case 5:case"GO":return A.GO;case 6:case"UNITY":return A.UNITY;case-1:case"UNRECOGNIZED":default:return A.UNRECOGNIZED}}t.clientInfo_SDKFromJSON=J;function G(b){switch(b){case A.UNKNOWN:return"UNKNOWN";case A.JS:return"JS";case A.SWIFT:return"SWIFT";case A.ANDROID:return"ANDROID";case A.FLUTTER:return"FLUTTER";case A.GO:return"GO";case A.UNITY:return"UNITY";case A.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.clientInfo_SDKToJSON=G;function I(){return{sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,activeRecording:!1}}t.Room={encode(b,D=d.default.Writer.create()){b.sid!==""&&D.uint32(10).string(b.sid),b.name!==""&&D.uint32(18).string(b.name),b.emptyTimeout!==0&&D.uint32(24).uint32(b.emptyTimeout),b.maxParticipants!==0&&D.uint32(32).uint32(b.maxParticipants),b.creationTime!==0&&D.uint32(40).int64(b.creationTime),b.turnPassword!==""&&D.uint32(50).string(b.turnPassword);for(const K of b.enabledCodecs)t.Codec.encode(K,D.uint32(58).fork()).ldelim();return b.metadata!==""&&D.uint32(66).string(b.metadata),b.numParticipants!==0&&D.uint32(72).uint32(b.numParticipants),b.activeRecording===!0&&D.uint32(80).bool(b.activeRecording),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=I();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sid=K.string();break;case 2:ae.name=K.string();break;case 3:ae.emptyTimeout=K.uint32();break;case 4:ae.maxParticipants=K.uint32();break;case 5:ae.creationTime=H(K.int64());break;case 6:ae.turnPassword=K.string();break;case 7:ae.enabledCodecs.push(t.Codec.decode(K,K.uint32()));break;case 8:ae.metadata=K.string();break;case 9:ae.numParticipants=K.uint32();break;case 10:ae.activeRecording=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{sid:j(b.sid)?String(b.sid):"",name:j(b.name)?String(b.name):"",emptyTimeout:j(b.emptyTimeout)?Number(b.emptyTimeout):0,maxParticipants:j(b.maxParticipants)?Number(b.maxParticipants):0,creationTime:j(b.creationTime)?Number(b.creationTime):0,turnPassword:j(b.turnPassword)?String(b.turnPassword):"",enabledCodecs:Array.isArray(b==null?void 0:b.enabledCodecs)?b.enabledCodecs.map(D=>t.Codec.fromJSON(D)):[],metadata:j(b.metadata)?String(b.metadata):"",numParticipants:j(b.numParticipants)?Number(b.numParticipants):0,activeRecording:j(b.activeRecording)?!!b.activeRecording:!1}},toJSON(b){const D={};return b.sid!==void 0&&(D.sid=b.sid),b.name!==void 0&&(D.name=b.name),b.emptyTimeout!==void 0&&(D.emptyTimeout=Math.round(b.emptyTimeout)),b.maxParticipants!==void 0&&(D.maxParticipants=Math.round(b.maxParticipants)),b.creationTime!==void 0&&(D.creationTime=Math.round(b.creationTime)),b.turnPassword!==void 0&&(D.turnPassword=b.turnPassword),b.enabledCodecs?D.enabledCodecs=b.enabledCodecs.map(K=>K?t.Codec.toJSON(K):void 0):D.enabledCodecs=[],b.metadata!==void 0&&(D.metadata=b.metadata),b.numParticipants!==void 0&&(D.numParticipants=Math.round(b.numParticipants)),b.activeRecording!==void 0&&(D.activeRecording=b.activeRecording),D},fromPartial(b){var D,K,pe,ae,_e,Oe,Pe,Ue,xe,Ae;const Re=I();return Re.sid=(D=b.sid)!==null&&D!==void 0?D:"",Re.name=(K=b.name)!==null&&K!==void 0?K:"",Re.emptyTimeout=(pe=b.emptyTimeout)!==null&&pe!==void 0?pe:0,Re.maxParticipants=(ae=b.maxParticipants)!==null&&ae!==void 0?ae:0,Re.creationTime=(_e=b.creationTime)!==null&&_e!==void 0?_e:0,Re.turnPassword=(Oe=b.turnPassword)!==null&&Oe!==void 0?Oe:"",Re.enabledCodecs=((Pe=b.enabledCodecs)===null||Pe===void 0?void 0:Pe.map(We=>t.Codec.fromPartial(We)))||[],Re.metadata=(Ue=b.metadata)!==null&&Ue!==void 0?Ue:"",Re.numParticipants=(xe=b.numParticipants)!==null&&xe!==void 0?xe:0,Re.activeRecording=(Ae=b.activeRecording)!==null&&Ae!==void 0?Ae:!1,Re}};function V(){return{mime:"",fmtpLine:""}}t.Codec={encode(b,D=d.default.Writer.create()){return b.mime!==""&&D.uint32(10).string(b.mime),b.fmtpLine!==""&&D.uint32(18).string(b.fmtpLine),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=V();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.mime=K.string();break;case 2:ae.fmtpLine=K.string();break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{mime:j(b.mime)?String(b.mime):"",fmtpLine:j(b.fmtpLine)?String(b.fmtpLine):""}},toJSON(b){const D={};return b.mime!==void 0&&(D.mime=b.mime),b.fmtpLine!==void 0&&(D.fmtpLine=b.fmtpLine),D},fromPartial(b){var D,K;const pe=V();return pe.mime=(D=b.mime)!==null&&D!==void 0?D:"",pe.fmtpLine=(K=b.fmtpLine)!==null&&K!==void 0?K:"",pe}};function B(){return{canSubscribe:!1,canPublish:!1,canPublishData:!1,hidden:!1,recorder:!1}}t.ParticipantPermission={encode(b,D=d.default.Writer.create()){return b.canSubscribe===!0&&D.uint32(8).bool(b.canSubscribe),b.canPublish===!0&&D.uint32(16).bool(b.canPublish),b.canPublishData===!0&&D.uint32(24).bool(b.canPublishData),b.hidden===!0&&D.uint32(56).bool(b.hidden),b.recorder===!0&&D.uint32(64).bool(b.recorder),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=B();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.canSubscribe=K.bool();break;case 2:ae.canPublish=K.bool();break;case 3:ae.canPublishData=K.bool();break;case 7:ae.hidden=K.bool();break;case 8:ae.recorder=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{canSubscribe:j(b.canSubscribe)?!!b.canSubscribe:!1,canPublish:j(b.canPublish)?!!b.canPublish:!1,canPublishData:j(b.canPublishData)?!!b.canPublishData:!1,hidden:j(b.hidden)?!!b.hidden:!1,recorder:j(b.recorder)?!!b.recorder:!1}},toJSON(b){const D={};return b.canSubscribe!==void 0&&(D.canSubscribe=b.canSubscribe),b.canPublish!==void 0&&(D.canPublish=b.canPublish),b.canPublishData!==void 0&&(D.canPublishData=b.canPublishData),b.hidden!==void 0&&(D.hidden=b.hidden),b.recorder!==void 0&&(D.recorder=b.recorder),D},fromPartial(b){var D,K,pe,ae,_e;const Oe=B();return Oe.canSubscribe=(D=b.canSubscribe)!==null&&D!==void 0?D:!1,Oe.canPublish=(K=b.canPublish)!==null&&K!==void 0?K:!1,Oe.canPublishData=(pe=b.canPublishData)!==null&&pe!==void 0?pe:!1,Oe.hidden=(ae=b.hidden)!==null&&ae!==void 0?ae:!1,Oe.recorder=(_e=b.recorder)!==null&&_e!==void 0?_e:!1,Oe}};function z(){return{sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1}}t.ParticipantInfo={encode(b,D=d.default.Writer.create()){b.sid!==""&&D.uint32(10).string(b.sid),b.identity!==""&&D.uint32(18).string(b.identity),b.state!==0&&D.uint32(24).int32(b.state);for(const K of b.tracks)t.TrackInfo.encode(K,D.uint32(34).fork()).ldelim();return b.metadata!==""&&D.uint32(42).string(b.metadata),b.joinedAt!==0&&D.uint32(48).int64(b.joinedAt),b.name!==""&&D.uint32(74).string(b.name),b.version!==0&&D.uint32(80).uint32(b.version),b.permission!==void 0&&t.ParticipantPermission.encode(b.permission,D.uint32(90).fork()).ldelim(),b.region!==""&&D.uint32(98).string(b.region),b.isPublisher===!0&&D.uint32(104).bool(b.isPublisher),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=z();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sid=K.string();break;case 2:ae.identity=K.string();break;case 3:ae.state=K.int32();break;case 4:ae.tracks.push(t.TrackInfo.decode(K,K.uint32()));break;case 5:ae.metadata=K.string();break;case 6:ae.joinedAt=H(K.int64());break;case 9:ae.name=K.string();break;case 10:ae.version=K.uint32();break;case 11:ae.permission=t.ParticipantPermission.decode(K,K.uint32());break;case 12:ae.region=K.string();break;case 13:ae.isPublisher=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{sid:j(b.sid)?String(b.sid):"",identity:j(b.identity)?String(b.identity):"",state:j(b.state)?Y(b.state):0,tracks:Array.isArray(b==null?void 0:b.tracks)?b.tracks.map(D=>t.TrackInfo.fromJSON(D)):[],metadata:j(b.metadata)?String(b.metadata):"",joinedAt:j(b.joinedAt)?Number(b.joinedAt):0,name:j(b.name)?String(b.name):"",version:j(b.version)?Number(b.version):0,permission:j(b.permission)?t.ParticipantPermission.fromJSON(b.permission):void 0,region:j(b.region)?String(b.region):"",isPublisher:j(b.isPublisher)?!!b.isPublisher:!1}},toJSON(b){const D={};return b.sid!==void 0&&(D.sid=b.sid),b.identity!==void 0&&(D.identity=b.identity),b.state!==void 0&&(D.state=O(b.state)),b.tracks?D.tracks=b.tracks.map(K=>K?t.TrackInfo.toJSON(K):void 0):D.tracks=[],b.metadata!==void 0&&(D.metadata=b.metadata),b.joinedAt!==void 0&&(D.joinedAt=Math.round(b.joinedAt)),b.name!==void 0&&(D.name=b.name),b.version!==void 0&&(D.version=Math.round(b.version)),b.permission!==void 0&&(D.permission=b.permission?t.ParticipantPermission.toJSON(b.permission):void 0),b.region!==void 0&&(D.region=b.region),b.isPublisher!==void 0&&(D.isPublisher=b.isPublisher),D},fromPartial(b){var D,K,pe,ae,_e,Oe,Pe,Ue,xe,Ae;const Re=z();return Re.sid=(D=b.sid)!==null&&D!==void 0?D:"",Re.identity=(K=b.identity)!==null&&K!==void 0?K:"",Re.state=(pe=b.state)!==null&&pe!==void 0?pe:0,Re.tracks=((ae=b.tracks)===null||ae===void 0?void 0:ae.map(We=>t.TrackInfo.fromPartial(We)))||[],Re.metadata=(_e=b.metadata)!==null&&_e!==void 0?_e:"",Re.joinedAt=(Oe=b.joinedAt)!==null&&Oe!==void 0?Oe:0,Re.name=(Pe=b.name)!==null&&Pe!==void 0?Pe:"",Re.version=(Ue=b.version)!==null&&Ue!==void 0?Ue:0,Re.permission=b.permission!==void 0&&b.permission!==null?t.ParticipantPermission.fromPartial(b.permission):void 0,Re.region=(xe=b.region)!==null&&xe!==void 0?xe:"",Re.isPublisher=(Ae=b.isPublisher)!==null&&Ae!==void 0?Ae:!1,Re}};function ie(){return{mimeType:"",mid:"",cid:"",layers:[]}}t.SimulcastCodecInfo={encode(b,D=d.default.Writer.create()){b.mimeType!==""&&D.uint32(10).string(b.mimeType),b.mid!==""&&D.uint32(18).string(b.mid),b.cid!==""&&D.uint32(26).string(b.cid);for(const K of b.layers)t.VideoLayer.encode(K,D.uint32(34).fork()).ldelim();return D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=ie();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.mimeType=K.string();break;case 2:ae.mid=K.string();break;case 3:ae.cid=K.string();break;case 4:ae.layers.push(t.VideoLayer.decode(K,K.uint32()));break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{mimeType:j(b.mimeType)?String(b.mimeType):"",mid:j(b.mid)?String(b.mid):"",cid:j(b.cid)?String(b.cid):"",layers:Array.isArray(b==null?void 0:b.layers)?b.layers.map(D=>t.VideoLayer.fromJSON(D)):[]}},toJSON(b){const D={};return b.mimeType!==void 0&&(D.mimeType=b.mimeType),b.mid!==void 0&&(D.mid=b.mid),b.cid!==void 0&&(D.cid=b.cid),b.layers?D.layers=b.layers.map(K=>K?t.VideoLayer.toJSON(K):void 0):D.layers=[],D},fromPartial(b){var D,K,pe,ae;const _e=ie();return _e.mimeType=(D=b.mimeType)!==null&&D!==void 0?D:"",_e.mid=(K=b.mid)!==null&&K!==void 0?K:"",_e.cid=(pe=b.cid)!==null&&pe!==void 0?pe:"",_e.layers=((ae=b.layers)===null||ae===void 0?void 0:ae.map(Oe=>t.VideoLayer.fromPartial(Oe)))||[],_e}};function de(){return{sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:"",codecs:[],stereo:!1,disableRed:!1}}t.TrackInfo={encode(b,D=d.default.Writer.create()){b.sid!==""&&D.uint32(10).string(b.sid),b.type!==0&&D.uint32(16).int32(b.type),b.name!==""&&D.uint32(26).string(b.name),b.muted===!0&&D.uint32(32).bool(b.muted),b.width!==0&&D.uint32(40).uint32(b.width),b.height!==0&&D.uint32(48).uint32(b.height),b.simulcast===!0&&D.uint32(56).bool(b.simulcast),b.disableDtx===!0&&D.uint32(64).bool(b.disableDtx),b.source!==0&&D.uint32(72).int32(b.source);for(const K of b.layers)t.VideoLayer.encode(K,D.uint32(82).fork()).ldelim();b.mimeType!==""&&D.uint32(90).string(b.mimeType),b.mid!==""&&D.uint32(98).string(b.mid);for(const K of b.codecs)t.SimulcastCodecInfo.encode(K,D.uint32(106).fork()).ldelim();return b.stereo===!0&&D.uint32(112).bool(b.stereo),b.disableRed===!0&&D.uint32(120).bool(b.disableRed),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=de();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sid=K.string();break;case 2:ae.type=K.int32();break;case 3:ae.name=K.string();break;case 4:ae.muted=K.bool();break;case 5:ae.width=K.uint32();break;case 6:ae.height=K.uint32();break;case 7:ae.simulcast=K.bool();break;case 8:ae.disableDtx=K.bool();break;case 9:ae.source=K.int32();break;case 10:ae.layers.push(t.VideoLayer.decode(K,K.uint32()));break;case 11:ae.mimeType=K.string();break;case 12:ae.mid=K.string();break;case 13:ae.codecs.push(t.SimulcastCodecInfo.decode(K,K.uint32()));break;case 14:ae.stereo=K.bool();break;case 15:ae.disableRed=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{sid:j(b.sid)?String(b.sid):"",type:j(b.type)?c(b.type):0,name:j(b.name)?String(b.name):"",muted:j(b.muted)?!!b.muted:!1,width:j(b.width)?Number(b.width):0,height:j(b.height)?Number(b.height):0,simulcast:j(b.simulcast)?!!b.simulcast:!1,disableDtx:j(b.disableDtx)?!!b.disableDtx:!1,source:j(b.source)?l(b.source):0,layers:Array.isArray(b==null?void 0:b.layers)?b.layers.map(D=>t.VideoLayer.fromJSON(D)):[],mimeType:j(b.mimeType)?String(b.mimeType):"",mid:j(b.mid)?String(b.mid):"",codecs:Array.isArray(b==null?void 0:b.codecs)?b.codecs.map(D=>t.SimulcastCodecInfo.fromJSON(D)):[],stereo:j(b.stereo)?!!b.stereo:!1,disableRed:j(b.disableRed)?!!b.disableRed:!1}},toJSON(b){const D={};return b.sid!==void 0&&(D.sid=b.sid),b.type!==void 0&&(D.type=h(b.type)),b.name!==void 0&&(D.name=b.name),b.muted!==void 0&&(D.muted=b.muted),b.width!==void 0&&(D.width=Math.round(b.width)),b.height!==void 0&&(D.height=Math.round(b.height)),b.simulcast!==void 0&&(D.simulcast=b.simulcast),b.disableDtx!==void 0&&(D.disableDtx=b.disableDtx),b.source!==void 0&&(D.source=u(b.source)),b.layers?D.layers=b.layers.map(K=>K?t.VideoLayer.toJSON(K):void 0):D.layers=[],b.mimeType!==void 0&&(D.mimeType=b.mimeType),b.mid!==void 0&&(D.mid=b.mid),b.codecs?D.codecs=b.codecs.map(K=>K?t.SimulcastCodecInfo.toJSON(K):void 0):D.codecs=[],b.stereo!==void 0&&(D.stereo=b.stereo),b.disableRed!==void 0&&(D.disableRed=b.disableRed),D},fromPartial(b){var D,K,pe,ae,_e,Oe,Pe,Ue,xe,Ae,Re,We,De,Be,He;const Me=de();return Me.sid=(D=b.sid)!==null&&D!==void 0?D:"",Me.type=(K=b.type)!==null&&K!==void 0?K:0,Me.name=(pe=b.name)!==null&&pe!==void 0?pe:"",Me.muted=(ae=b.muted)!==null&&ae!==void 0?ae:!1,Me.width=(_e=b.width)!==null&&_e!==void 0?_e:0,Me.height=(Oe=b.height)!==null&&Oe!==void 0?Oe:0,Me.simulcast=(Pe=b.simulcast)!==null&&Pe!==void 0?Pe:!1,Me.disableDtx=(Ue=b.disableDtx)!==null&&Ue!==void 0?Ue:!1,Me.source=(xe=b.source)!==null&&xe!==void 0?xe:0,Me.layers=((Ae=b.layers)===null||Ae===void 0?void 0:Ae.map(qe=>t.VideoLayer.fromPartial(qe)))||[],Me.mimeType=(Re=b.mimeType)!==null&&Re!==void 0?Re:"",Me.mid=(We=b.mid)!==null&&We!==void 0?We:"",Me.codecs=((De=b.codecs)===null||De===void 0?void 0:De.map(qe=>t.SimulcastCodecInfo.fromPartial(qe)))||[],Me.stereo=(Be=b.stereo)!==null&&Be!==void 0?Be:!1,Me.disableRed=(He=b.disableRed)!==null&&He!==void 0?He:!1,Me}};function me(){return{quality:0,width:0,height:0,bitrate:0,ssrc:0}}t.VideoLayer={encode(b,D=d.default.Writer.create()){return b.quality!==0&&D.uint32(8).int32(b.quality),b.width!==0&&D.uint32(16).uint32(b.width),b.height!==0&&D.uint32(24).uint32(b.height),b.bitrate!==0&&D.uint32(32).uint32(b.bitrate),b.ssrc!==0&&D.uint32(40).uint32(b.ssrc),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=me();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.quality=K.int32();break;case 2:ae.width=K.uint32();break;case 3:ae.height=K.uint32();break;case 4:ae.bitrate=K.uint32();break;case 5:ae.ssrc=K.uint32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{quality:j(b.quality)?m(b.quality):0,width:j(b.width)?Number(b.width):0,height:j(b.height)?Number(b.height):0,bitrate:j(b.bitrate)?Number(b.bitrate):0,ssrc:j(b.ssrc)?Number(b.ssrc):0}},toJSON(b){const D={};return b.quality!==void 0&&(D.quality=w(b.quality)),b.width!==void 0&&(D.width=Math.round(b.width)),b.height!==void 0&&(D.height=Math.round(b.height)),b.bitrate!==void 0&&(D.bitrate=Math.round(b.bitrate)),b.ssrc!==void 0&&(D.ssrc=Math.round(b.ssrc)),D},fromPartial(b){var D,K,pe,ae,_e;const Oe=me();return Oe.quality=(D=b.quality)!==null&&D!==void 0?D:0,Oe.width=(K=b.width)!==null&&K!==void 0?K:0,Oe.height=(pe=b.height)!==null&&pe!==void 0?pe:0,Oe.bitrate=(ae=b.bitrate)!==null&&ae!==void 0?ae:0,Oe.ssrc=(_e=b.ssrc)!==null&&_e!==void 0?_e:0,Oe}};function be(){return{kind:0,user:void 0,speaker:void 0}}t.DataPacket={encode(b,D=d.default.Writer.create()){return b.kind!==0&&D.uint32(8).int32(b.kind),b.user!==void 0&&t.UserPacket.encode(b.user,D.uint32(18).fork()).ldelim(),b.speaker!==void 0&&t.ActiveSpeakerUpdate.encode(b.speaker,D.uint32(26).fork()).ldelim(),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=be();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.kind=K.int32();break;case 2:ae.user=t.UserPacket.decode(K,K.uint32());break;case 3:ae.speaker=t.ActiveSpeakerUpdate.decode(K,K.uint32());break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{kind:j(b.kind)?S(b.kind):0,user:j(b.user)?t.UserPacket.fromJSON(b.user):void 0,speaker:j(b.speaker)?t.ActiveSpeakerUpdate.fromJSON(b.speaker):void 0}},toJSON(b){const D={};return b.kind!==void 0&&(D.kind=k(b.kind)),b.user!==void 0&&(D.user=b.user?t.UserPacket.toJSON(b.user):void 0),b.speaker!==void 0&&(D.speaker=b.speaker?t.ActiveSpeakerUpdate.toJSON(b.speaker):void 0),D},fromPartial(b){var D;const K=be();return K.kind=(D=b.kind)!==null&&D!==void 0?D:0,K.user=b.user!==void 0&&b.user!==null?t.UserPacket.fromPartial(b.user):void 0,K.speaker=b.speaker!==void 0&&b.speaker!==null?t.ActiveSpeakerUpdate.fromPartial(b.speaker):void 0,K}};function we(){return{speakers:[]}}t.ActiveSpeakerUpdate={encode(b,D=d.default.Writer.create()){for(const K of b.speakers)t.SpeakerInfo.encode(K,D.uint32(10).fork()).ldelim();return D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=we();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.speakers.push(t.SpeakerInfo.decode(K,K.uint32()));break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{speakers:Array.isArray(b==null?void 0:b.speakers)?b.speakers.map(D=>t.SpeakerInfo.fromJSON(D)):[]}},toJSON(b){const D={};return b.speakers?D.speakers=b.speakers.map(K=>K?t.SpeakerInfo.toJSON(K):void 0):D.speakers=[],D},fromPartial(b){var D;const K=we();return K.speakers=((D=b.speakers)===null||D===void 0?void 0:D.map(pe=>t.SpeakerInfo.fromPartial(pe)))||[],K}};function oe(){return{sid:"",level:0,active:!1}}t.SpeakerInfo={encode(b,D=d.default.Writer.create()){return b.sid!==""&&D.uint32(10).string(b.sid),b.level!==0&&D.uint32(21).float(b.level),b.active===!0&&D.uint32(24).bool(b.active),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=oe();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sid=K.string();break;case 2:ae.level=K.float();break;case 3:ae.active=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{sid:j(b.sid)?String(b.sid):"",level:j(b.level)?Number(b.level):0,active:j(b.active)?!!b.active:!1}},toJSON(b){const D={};return b.sid!==void 0&&(D.sid=b.sid),b.level!==void 0&&(D.level=b.level),b.active!==void 0&&(D.active=b.active),D},fromPartial(b){var D,K,pe;const ae=oe();return ae.sid=(D=b.sid)!==null&&D!==void 0?D:"",ae.level=(K=b.level)!==null&&K!==void 0?K:0,ae.active=(pe=b.active)!==null&&pe!==void 0?pe:!1,ae}};function ce(){return{participantSid:"",payload:new Uint8Array,destinationSids:[]}}t.UserPacket={encode(b,D=d.default.Writer.create()){b.participantSid!==""&&D.uint32(10).string(b.participantSid),b.payload.length!==0&&D.uint32(18).bytes(b.payload);for(const K of b.destinationSids)D.uint32(26).string(K);return D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=ce();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.participantSid=K.string();break;case 2:ae.payload=K.bytes();break;case 3:ae.destinationSids.push(K.string());break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{participantSid:j(b.participantSid)?String(b.participantSid):"",payload:j(b.payload)?ve(b.payload):new Uint8Array,destinationSids:Array.isArray(b==null?void 0:b.destinationSids)?b.destinationSids.map(D=>String(D)):[]}},toJSON(b){const D={};return b.participantSid!==void 0&&(D.participantSid=b.participantSid),b.payload!==void 0&&(D.payload=Se(b.payload!==void 0?b.payload:new Uint8Array)),b.destinationSids?D.destinationSids=b.destinationSids.map(K=>K):D.destinationSids=[],D},fromPartial(b){var D,K,pe;const ae=ce();return ae.participantSid=(D=b.participantSid)!==null&&D!==void 0?D:"",ae.payload=(K=b.payload)!==null&&K!==void 0?K:new Uint8Array,ae.destinationSids=((pe=b.destinationSids)===null||pe===void 0?void 0:pe.map(_e=>_e))||[],ae}};function ge(){return{participantSid:"",trackSids:[]}}t.ParticipantTracks={encode(b,D=d.default.Writer.create()){b.participantSid!==""&&D.uint32(10).string(b.participantSid);for(const K of b.trackSids)D.uint32(18).string(K);return D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=ge();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.participantSid=K.string();break;case 2:ae.trackSids.push(K.string());break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{participantSid:j(b.participantSid)?String(b.participantSid):"",trackSids:Array.isArray(b==null?void 0:b.trackSids)?b.trackSids.map(D=>String(D)):[]}},toJSON(b){const D={};return b.participantSid!==void 0&&(D.participantSid=b.participantSid),b.trackSids?D.trackSids=b.trackSids.map(K=>K):D.trackSids=[],D},fromPartial(b){var D,K;const pe=ge();return pe.participantSid=(D=b.participantSid)!==null&&D!==void 0?D:"",pe.trackSids=((K=b.trackSids)===null||K===void 0?void 0:K.map(ae=>ae))||[],pe}};function ke(){return{edition:0,version:"",protocol:0,region:"",nodeId:"",debugInfo:""}}t.ServerInfo={encode(b,D=d.default.Writer.create()){return b.edition!==0&&D.uint32(8).int32(b.edition),b.version!==""&&D.uint32(18).string(b.version),b.protocol!==0&&D.uint32(24).int32(b.protocol),b.region!==""&&D.uint32(34).string(b.region),b.nodeId!==""&&D.uint32(42).string(b.nodeId),b.debugInfo!==""&&D.uint32(50).string(b.debugInfo),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=ke();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.edition=K.int32();break;case 2:ae.version=K.string();break;case 3:ae.protocol=K.int32();break;case 4:ae.region=K.string();break;case 5:ae.nodeId=K.string();break;case 6:ae.debugInfo=K.string();break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{edition:j(b.edition)?E(b.edition):0,version:j(b.version)?String(b.version):"",protocol:j(b.protocol)?Number(b.protocol):0,region:j(b.region)?String(b.region):"",nodeId:j(b.nodeId)?String(b.nodeId):"",debugInfo:j(b.debugInfo)?String(b.debugInfo):""}},toJSON(b){const D={};return b.edition!==void 0&&(D.edition=T(b.edition)),b.version!==void 0&&(D.version=b.version),b.protocol!==void 0&&(D.protocol=Math.round(b.protocol)),b.region!==void 0&&(D.region=b.region),b.nodeId!==void 0&&(D.nodeId=b.nodeId),b.debugInfo!==void 0&&(D.debugInfo=b.debugInfo),D},fromPartial(b){var D,K,pe,ae,_e,Oe;const Pe=ke();return Pe.edition=(D=b.edition)!==null&&D!==void 0?D:0,Pe.version=(K=b.version)!==null&&K!==void 0?K:"",Pe.protocol=(pe=b.protocol)!==null&&pe!==void 0?pe:0,Pe.region=(ae=b.region)!==null&&ae!==void 0?ae:"",Pe.nodeId=(_e=b.nodeId)!==null&&_e!==void 0?_e:"",Pe.debugInfo=(Oe=b.debugInfo)!==null&&Oe!==void 0?Oe:"",Pe}};function le(){return{sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:"",network:""}}t.ClientInfo={encode(b,D=d.default.Writer.create()){return b.sdk!==0&&D.uint32(8).int32(b.sdk),b.version!==""&&D.uint32(18).string(b.version),b.protocol!==0&&D.uint32(24).int32(b.protocol),b.os!==""&&D.uint32(34).string(b.os),b.osVersion!==""&&D.uint32(42).string(b.osVersion),b.deviceModel!==""&&D.uint32(50).string(b.deviceModel),b.browser!==""&&D.uint32(58).string(b.browser),b.browserVersion!==""&&D.uint32(66).string(b.browserVersion),b.address!==""&&D.uint32(74).string(b.address),b.network!==""&&D.uint32(82).string(b.network),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=le();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sdk=K.int32();break;case 2:ae.version=K.string();break;case 3:ae.protocol=K.int32();break;case 4:ae.os=K.string();break;case 5:ae.osVersion=K.string();break;case 6:ae.deviceModel=K.string();break;case 7:ae.browser=K.string();break;case 8:ae.browserVersion=K.string();break;case 9:ae.address=K.string();break;case 10:ae.network=K.string();break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{sdk:j(b.sdk)?J(b.sdk):0,version:j(b.version)?String(b.version):"",protocol:j(b.protocol)?Number(b.protocol):0,os:j(b.os)?String(b.os):"",osVersion:j(b.osVersion)?String(b.osVersion):"",deviceModel:j(b.deviceModel)?String(b.deviceModel):"",browser:j(b.browser)?String(b.browser):"",browserVersion:j(b.browserVersion)?String(b.browserVersion):"",address:j(b.address)?String(b.address):"",network:j(b.network)?String(b.network):""}},toJSON(b){const D={};return b.sdk!==void 0&&(D.sdk=G(b.sdk)),b.version!==void 0&&(D.version=b.version),b.protocol!==void 0&&(D.protocol=Math.round(b.protocol)),b.os!==void 0&&(D.os=b.os),b.osVersion!==void 0&&(D.osVersion=b.osVersion),b.deviceModel!==void 0&&(D.deviceModel=b.deviceModel),b.browser!==void 0&&(D.browser=b.browser),b.browserVersion!==void 0&&(D.browserVersion=b.browserVersion),b.address!==void 0&&(D.address=b.address),b.network!==void 0&&(D.network=b.network),D},fromPartial(b){var D,K,pe,ae,_e,Oe,Pe,Ue,xe,Ae;const Re=le();return Re.sdk=(D=b.sdk)!==null&&D!==void 0?D:0,Re.version=(K=b.version)!==null&&K!==void 0?K:"",Re.protocol=(pe=b.protocol)!==null&&pe!==void 0?pe:0,Re.os=(ae=b.os)!==null&&ae!==void 0?ae:"",Re.osVersion=(_e=b.osVersion)!==null&&_e!==void 0?_e:"",Re.deviceModel=(Oe=b.deviceModel)!==null&&Oe!==void 0?Oe:"",Re.browser=(Pe=b.browser)!==null&&Pe!==void 0?Pe:"",Re.browserVersion=(Ue=b.browserVersion)!==null&&Ue!==void 0?Ue:"",Re.address=(xe=b.address)!==null&&xe!==void 0?xe:"",Re.network=(Ae=b.network)!==null&&Ae!==void 0?Ae:"",Re}};function te(){return{video:void 0,screen:void 0,resumeConnection:0,disabledCodecs:void 0,forceRelay:0}}t.ClientConfiguration={encode(b,D=d.default.Writer.create()){return b.video!==void 0&&t.VideoConfiguration.encode(b.video,D.uint32(10).fork()).ldelim(),b.screen!==void 0&&t.VideoConfiguration.encode(b.screen,D.uint32(18).fork()).ldelim(),b.resumeConnection!==0&&D.uint32(24).int32(b.resumeConnection),b.disabledCodecs!==void 0&&t.DisabledCodecs.encode(b.disabledCodecs,D.uint32(34).fork()).ldelim(),b.forceRelay!==0&&D.uint32(40).int32(b.forceRelay),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=te();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.video=t.VideoConfiguration.decode(K,K.uint32());break;case 2:ae.screen=t.VideoConfiguration.decode(K,K.uint32());break;case 3:ae.resumeConnection=K.int32();break;case 4:ae.disabledCodecs=t.DisabledCodecs.decode(K,K.uint32());break;case 5:ae.forceRelay=K.int32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{video:j(b.video)?t.VideoConfiguration.fromJSON(b.video):void 0,screen:j(b.screen)?t.VideoConfiguration.fromJSON(b.screen):void 0,resumeConnection:j(b.resumeConnection)?M(b.resumeConnection):0,disabledCodecs:j(b.disabledCodecs)?t.DisabledCodecs.fromJSON(b.disabledCodecs):void 0,forceRelay:j(b.forceRelay)?M(b.forceRelay):0}},toJSON(b){const D={};return b.video!==void 0&&(D.video=b.video?t.VideoConfiguration.toJSON(b.video):void 0),b.screen!==void 0&&(D.screen=b.screen?t.VideoConfiguration.toJSON(b.screen):void 0),b.resumeConnection!==void 0&&(D.resumeConnection=U(b.resumeConnection)),b.disabledCodecs!==void 0&&(D.disabledCodecs=b.disabledCodecs?t.DisabledCodecs.toJSON(b.disabledCodecs):void 0),b.forceRelay!==void 0&&(D.forceRelay=U(b.forceRelay)),D},fromPartial(b){var D,K;const pe=te();return pe.video=b.video!==void 0&&b.video!==null?t.VideoConfiguration.fromPartial(b.video):void 0,pe.screen=b.screen!==void 0&&b.screen!==null?t.VideoConfiguration.fromPartial(b.screen):void 0,pe.resumeConnection=(D=b.resumeConnection)!==null&&D!==void 0?D:0,pe.disabledCodecs=b.disabledCodecs!==void 0&&b.disabledCodecs!==null?t.DisabledCodecs.fromPartial(b.disabledCodecs):void 0,pe.forceRelay=(K=b.forceRelay)!==null&&K!==void 0?K:0,pe}};function ee(){return{hardwareEncoder:0}}t.VideoConfiguration={encode(b,D=d.default.Writer.create()){return b.hardwareEncoder!==0&&D.uint32(8).int32(b.hardwareEncoder),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=ee();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.hardwareEncoder=K.int32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{hardwareEncoder:j(b.hardwareEncoder)?M(b.hardwareEncoder):0}},toJSON(b){const D={};return b.hardwareEncoder!==void 0&&(D.hardwareEncoder=U(b.hardwareEncoder)),D},fromPartial(b){var D;const K=ee();return K.hardwareEncoder=(D=b.hardwareEncoder)!==null&&D!==void 0?D:0,K}};function Q(){return{codecs:[]}}t.DisabledCodecs={encode(b,D=d.default.Writer.create()){for(const K of b.codecs)t.Codec.encode(K,D.uint32(10).fork()).ldelim();return D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=Q();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.codecs.push(t.Codec.decode(K,K.uint32()));break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{codecs:Array.isArray(b==null?void 0:b.codecs)?b.codecs.map(D=>t.Codec.fromJSON(D)):[]}},toJSON(b){const D={};return b.codecs?D.codecs=b.codecs.map(K=>K?t.Codec.toJSON(K):void 0):D.codecs=[],D},fromPartial(b){var D;const K=Q();return K.codecs=((D=b.codecs)===null||D===void 0?void 0:D.map(pe=>t.Codec.fromPartial(pe)))||[],K}};function F(){return{startTime:void 0,endTime:void 0,duration:0,packets:0,packetRate:0,bytes:0,headerBytes:0,bitrate:0,packetsLost:0,packetLossRate:0,packetLossPercentage:0,packetsDuplicate:0,packetDuplicateRate:0,bytesDuplicate:0,headerBytesDuplicate:0,bitrateDuplicate:0,packetsPadding:0,packetPaddingRate:0,bytesPadding:0,headerBytesPadding:0,bitratePadding:0,packetsOutOfOrder:0,frames:0,frameRate:0,jitterCurrent:0,jitterMax:0,gapHistogram:{},nacks:0,nackAcks:0,nackMisses:0,nackRepeated:0,plis:0,lastPli:void 0,firs:0,lastFir:void 0,rttCurrent:0,rttMax:0,keyFrames:0,lastKeyFrame:void 0,layerLockPlis:0,lastLayerLockPli:void 0}}t.RTPStats={encode(b,D=d.default.Writer.create()){return b.startTime!==void 0&&s.Timestamp.encode(ue(b.startTime),D.uint32(10).fork()).ldelim(),b.endTime!==void 0&&s.Timestamp.encode(ue(b.endTime),D.uint32(18).fork()).ldelim(),b.duration!==0&&D.uint32(25).double(b.duration),b.packets!==0&&D.uint32(32).uint32(b.packets),b.packetRate!==0&&D.uint32(41).double(b.packetRate),b.bytes!==0&&D.uint32(48).uint64(b.bytes),b.headerBytes!==0&&D.uint32(312).uint64(b.headerBytes),b.bitrate!==0&&D.uint32(57).double(b.bitrate),b.packetsLost!==0&&D.uint32(64).uint32(b.packetsLost),b.packetLossRate!==0&&D.uint32(73).double(b.packetLossRate),b.packetLossPercentage!==0&&D.uint32(85).float(b.packetLossPercentage),b.packetsDuplicate!==0&&D.uint32(88).uint32(b.packetsDuplicate),b.packetDuplicateRate!==0&&D.uint32(97).double(b.packetDuplicateRate),b.bytesDuplicate!==0&&D.uint32(104).uint64(b.bytesDuplicate),b.headerBytesDuplicate!==0&&D.uint32(320).uint64(b.headerBytesDuplicate),b.bitrateDuplicate!==0&&D.uint32(113).double(b.bitrateDuplicate),b.packetsPadding!==0&&D.uint32(120).uint32(b.packetsPadding),b.packetPaddingRate!==0&&D.uint32(129).double(b.packetPaddingRate),b.bytesPadding!==0&&D.uint32(136).uint64(b.bytesPadding),b.headerBytesPadding!==0&&D.uint32(328).uint64(b.headerBytesPadding),b.bitratePadding!==0&&D.uint32(145).double(b.bitratePadding),b.packetsOutOfOrder!==0&&D.uint32(152).uint32(b.packetsOutOfOrder),b.frames!==0&&D.uint32(160).uint32(b.frames),b.frameRate!==0&&D.uint32(169).double(b.frameRate),b.jitterCurrent!==0&&D.uint32(177).double(b.jitterCurrent),b.jitterMax!==0&&D.uint32(185).double(b.jitterMax),Object.entries(b.gapHistogram).forEach(([K,pe])=>{t.RTPStats_GapHistogramEntry.encode({key:K,value:pe},D.uint32(194).fork()).ldelim()}),b.nacks!==0&&D.uint32(200).uint32(b.nacks),b.nackAcks!==0&&D.uint32(296).uint32(b.nackAcks),b.nackMisses!==0&&D.uint32(208).uint32(b.nackMisses),b.nackRepeated!==0&&D.uint32(304).uint32(b.nackRepeated),b.plis!==0&&D.uint32(216).uint32(b.plis),b.lastPli!==void 0&&s.Timestamp.encode(ue(b.lastPli),D.uint32(226).fork()).ldelim(),b.firs!==0&&D.uint32(232).uint32(b.firs),b.lastFir!==void 0&&s.Timestamp.encode(ue(b.lastFir),D.uint32(242).fork()).ldelim(),b.rttCurrent!==0&&D.uint32(248).uint32(b.rttCurrent),b.rttMax!==0&&D.uint32(256).uint32(b.rttMax),b.keyFrames!==0&&D.uint32(264).uint32(b.keyFrames),b.lastKeyFrame!==void 0&&s.Timestamp.encode(ue(b.lastKeyFrame),D.uint32(274).fork()).ldelim(),b.layerLockPlis!==0&&D.uint32(280).uint32(b.layerLockPlis),b.lastLayerLockPli!==void 0&&s.Timestamp.encode(ue(b.lastLayerLockPli),D.uint32(290).fork()).ldelim(),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=F();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.startTime=y(s.Timestamp.decode(K,K.uint32()));break;case 2:ae.endTime=y(s.Timestamp.decode(K,K.uint32()));break;case 3:ae.duration=K.double();break;case 4:ae.packets=K.uint32();break;case 5:ae.packetRate=K.double();break;case 6:ae.bytes=H(K.uint64());break;case 39:ae.headerBytes=H(K.uint64());break;case 7:ae.bitrate=K.double();break;case 8:ae.packetsLost=K.uint32();break;case 9:ae.packetLossRate=K.double();break;case 10:ae.packetLossPercentage=K.float();break;case 11:ae.packetsDuplicate=K.uint32();break;case 12:ae.packetDuplicateRate=K.double();break;case 13:ae.bytesDuplicate=H(K.uint64());break;case 40:ae.headerBytesDuplicate=H(K.uint64());break;case 14:ae.bitrateDuplicate=K.double();break;case 15:ae.packetsPadding=K.uint32();break;case 16:ae.packetPaddingRate=K.double();break;case 17:ae.bytesPadding=H(K.uint64());break;case 41:ae.headerBytesPadding=H(K.uint64());break;case 18:ae.bitratePadding=K.double();break;case 19:ae.packetsOutOfOrder=K.uint32();break;case 20:ae.frames=K.uint32();break;case 21:ae.frameRate=K.double();break;case 22:ae.jitterCurrent=K.double();break;case 23:ae.jitterMax=K.double();break;case 24:const Oe=t.RTPStats_GapHistogramEntry.decode(K,K.uint32());Oe.value!==void 0&&(ae.gapHistogram[Oe.key]=Oe.value);break;case 25:ae.nacks=K.uint32();break;case 37:ae.nackAcks=K.uint32();break;case 26:ae.nackMisses=K.uint32();break;case 38:ae.nackRepeated=K.uint32();break;case 27:ae.plis=K.uint32();break;case 28:ae.lastPli=y(s.Timestamp.decode(K,K.uint32()));break;case 29:ae.firs=K.uint32();break;case 30:ae.lastFir=y(s.Timestamp.decode(K,K.uint32()));break;case 31:ae.rttCurrent=K.uint32();break;case 32:ae.rttMax=K.uint32();break;case 33:ae.keyFrames=K.uint32();break;case 34:ae.lastKeyFrame=y(s.Timestamp.decode(K,K.uint32()));break;case 35:ae.layerLockPlis=K.uint32();break;case 36:ae.lastLayerLockPli=y(s.Timestamp.decode(K,K.uint32()));break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{startTime:j(b.startTime)?L(b.startTime):void 0,endTime:j(b.endTime)?L(b.endTime):void 0,duration:j(b.duration)?Number(b.duration):0,packets:j(b.packets)?Number(b.packets):0,packetRate:j(b.packetRate)?Number(b.packetRate):0,bytes:j(b.bytes)?Number(b.bytes):0,headerBytes:j(b.headerBytes)?Number(b.headerBytes):0,bitrate:j(b.bitrate)?Number(b.bitrate):0,packetsLost:j(b.packetsLost)?Number(b.packetsLost):0,packetLossRate:j(b.packetLossRate)?Number(b.packetLossRate):0,packetLossPercentage:j(b.packetLossPercentage)?Number(b.packetLossPercentage):0,packetsDuplicate:j(b.packetsDuplicate)?Number(b.packetsDuplicate):0,packetDuplicateRate:j(b.packetDuplicateRate)?Number(b.packetDuplicateRate):0,bytesDuplicate:j(b.bytesDuplicate)?Number(b.bytesDuplicate):0,headerBytesDuplicate:j(b.headerBytesDuplicate)?Number(b.headerBytesDuplicate):0,bitrateDuplicate:j(b.bitrateDuplicate)?Number(b.bitrateDuplicate):0,packetsPadding:j(b.packetsPadding)?Number(b.packetsPadding):0,packetPaddingRate:j(b.packetPaddingRate)?Number(b.packetPaddingRate):0,bytesPadding:j(b.bytesPadding)?Number(b.bytesPadding):0,headerBytesPadding:j(b.headerBytesPadding)?Number(b.headerBytesPadding):0,bitratePadding:j(b.bitratePadding)?Number(b.bitratePadding):0,packetsOutOfOrder:j(b.packetsOutOfOrder)?Number(b.packetsOutOfOrder):0,frames:j(b.frames)?Number(b.frames):0,frameRate:j(b.frameRate)?Number(b.frameRate):0,jitterCurrent:j(b.jitterCurrent)?Number(b.jitterCurrent):0,jitterMax:j(b.jitterMax)?Number(b.jitterMax):0,gapHistogram:fe(b.gapHistogram)?Object.entries(b.gapHistogram).reduce((D,[K,pe])=>(D[Number(K)]=Number(pe),D),{}):{},nacks:j(b.nacks)?Number(b.nacks):0,nackAcks:j(b.nackAcks)?Number(b.nackAcks):0,nackMisses:j(b.nackMisses)?Number(b.nackMisses):0,nackRepeated:j(b.nackRepeated)?Number(b.nackRepeated):0,plis:j(b.plis)?Number(b.plis):0,lastPli:j(b.lastPli)?L(b.lastPli):void 0,firs:j(b.firs)?Number(b.firs):0,lastFir:j(b.lastFir)?L(b.lastFir):void 0,rttCurrent:j(b.rttCurrent)?Number(b.rttCurrent):0,rttMax:j(b.rttMax)?Number(b.rttMax):0,keyFrames:j(b.keyFrames)?Number(b.keyFrames):0,lastKeyFrame:j(b.lastKeyFrame)?L(b.lastKeyFrame):void 0,layerLockPlis:j(b.layerLockPlis)?Number(b.layerLockPlis):0,lastLayerLockPli:j(b.lastLayerLockPli)?L(b.lastLayerLockPli):void 0}},toJSON(b){const D={};return b.startTime!==void 0&&(D.startTime=b.startTime.toISOString()),b.endTime!==void 0&&(D.endTime=b.endTime.toISOString()),b.duration!==void 0&&(D.duration=b.duration),b.packets!==void 0&&(D.packets=Math.round(b.packets)),b.packetRate!==void 0&&(D.packetRate=b.packetRate),b.bytes!==void 0&&(D.bytes=Math.round(b.bytes)),b.headerBytes!==void 0&&(D.headerBytes=Math.round(b.headerBytes)),b.bitrate!==void 0&&(D.bitrate=b.bitrate),b.packetsLost!==void 0&&(D.packetsLost=Math.round(b.packetsLost)),b.packetLossRate!==void 0&&(D.packetLossRate=b.packetLossRate),b.packetLossPercentage!==void 0&&(D.packetLossPercentage=b.packetLossPercentage),b.packetsDuplicate!==void 0&&(D.packetsDuplicate=Math.round(b.packetsDuplicate)),b.packetDuplicateRate!==void 0&&(D.packetDuplicateRate=b.packetDuplicateRate),b.bytesDuplicate!==void 0&&(D.bytesDuplicate=Math.round(b.bytesDuplicate)),b.headerBytesDuplicate!==void 0&&(D.headerBytesDuplicate=Math.round(b.headerBytesDuplicate)),b.bitrateDuplicate!==void 0&&(D.bitrateDuplicate=b.bitrateDuplicate),b.packetsPadding!==void 0&&(D.packetsPadding=Math.round(b.packetsPadding)),b.packetPaddingRate!==void 0&&(D.packetPaddingRate=b.packetPaddingRate),b.bytesPadding!==void 0&&(D.bytesPadding=Math.round(b.bytesPadding)),b.headerBytesPadding!==void 0&&(D.headerBytesPadding=Math.round(b.headerBytesPadding)),b.bitratePadding!==void 0&&(D.bitratePadding=b.bitratePadding),b.packetsOutOfOrder!==void 0&&(D.packetsOutOfOrder=Math.round(b.packetsOutOfOrder)),b.frames!==void 0&&(D.frames=Math.round(b.frames)),b.frameRate!==void 0&&(D.frameRate=b.frameRate),b.jitterCurrent!==void 0&&(D.jitterCurrent=b.jitterCurrent),b.jitterMax!==void 0&&(D.jitterMax=b.jitterMax),D.gapHistogram={},b.gapHistogram&&Object.entries(b.gapHistogram).forEach(([K,pe])=>{D.gapHistogram[K]=Math.round(pe)}),b.nacks!==void 0&&(D.nacks=Math.round(b.nacks)),b.nackAcks!==void 0&&(D.nackAcks=Math.round(b.nackAcks)),b.nackMisses!==void 0&&(D.nackMisses=Math.round(b.nackMisses)),b.nackRepeated!==void 0&&(D.nackRepeated=Math.round(b.nackRepeated)),b.plis!==void 0&&(D.plis=Math.round(b.plis)),b.lastPli!==void 0&&(D.lastPli=b.lastPli.toISOString()),b.firs!==void 0&&(D.firs=Math.round(b.firs)),b.lastFir!==void 0&&(D.lastFir=b.lastFir.toISOString()),b.rttCurrent!==void 0&&(D.rttCurrent=Math.round(b.rttCurrent)),b.rttMax!==void 0&&(D.rttMax=Math.round(b.rttMax)),b.keyFrames!==void 0&&(D.keyFrames=Math.round(b.keyFrames)),b.lastKeyFrame!==void 0&&(D.lastKeyFrame=b.lastKeyFrame.toISOString()),b.layerLockPlis!==void 0&&(D.layerLockPlis=Math.round(b.layerLockPlis)),b.lastLayerLockPli!==void 0&&(D.lastLayerLockPli=b.lastLayerLockPli.toISOString()),D},fromPartial(b){var D,K,pe,ae,_e,Oe,Pe,Ue,xe,Ae,Re,We,De,Be,He,Me,qe,Qe,Fe,Ye,Xe,Je,je,ze,Ve,et,tt,Ge,rt,it,Le,nt,Ke,Ze,ne,he,ye,Ee,Te,Ne,Ie;const Ce=F();return Ce.startTime=(D=b.startTime)!==null&&D!==void 0?D:void 0,Ce.endTime=(K=b.endTime)!==null&&K!==void 0?K:void 0,Ce.duration=(pe=b.duration)!==null&&pe!==void 0?pe:0,Ce.packets=(ae=b.packets)!==null&&ae!==void 0?ae:0,Ce.packetRate=(_e=b.packetRate)!==null&&_e!==void 0?_e:0,Ce.bytes=(Oe=b.bytes)!==null&&Oe!==void 0?Oe:0,Ce.headerBytes=(Pe=b.headerBytes)!==null&&Pe!==void 0?Pe:0,Ce.bitrate=(Ue=b.bitrate)!==null&&Ue!==void 0?Ue:0,Ce.packetsLost=(xe=b.packetsLost)!==null&&xe!==void 0?xe:0,Ce.packetLossRate=(Ae=b.packetLossRate)!==null&&Ae!==void 0?Ae:0,Ce.packetLossPercentage=(Re=b.packetLossPercentage)!==null&&Re!==void 0?Re:0,Ce.packetsDuplicate=(We=b.packetsDuplicate)!==null&&We!==void 0?We:0,Ce.packetDuplicateRate=(De=b.packetDuplicateRate)!==null&&De!==void 0?De:0,Ce.bytesDuplicate=(Be=b.bytesDuplicate)!==null&&Be!==void 0?Be:0,Ce.headerBytesDuplicate=(He=b.headerBytesDuplicate)!==null&&He!==void 0?He:0,Ce.bitrateDuplicate=(Me=b.bitrateDuplicate)!==null&&Me!==void 0?Me:0,Ce.packetsPadding=(qe=b.packetsPadding)!==null&&qe!==void 0?qe:0,Ce.packetPaddingRate=(Qe=b.packetPaddingRate)!==null&&Qe!==void 0?Qe:0,Ce.bytesPadding=(Fe=b.bytesPadding)!==null&&Fe!==void 0?Fe:0,Ce.headerBytesPadding=(Ye=b.headerBytesPadding)!==null&&Ye!==void 0?Ye:0,Ce.bitratePadding=(Xe=b.bitratePadding)!==null&&Xe!==void 0?Xe:0,Ce.packetsOutOfOrder=(Je=b.packetsOutOfOrder)!==null&&Je!==void 0?Je:0,Ce.frames=(je=b.frames)!==null&&je!==void 0?je:0,Ce.frameRate=(ze=b.frameRate)!==null&&ze!==void 0?ze:0,Ce.jitterCurrent=(Ve=b.jitterCurrent)!==null&&Ve!==void 0?Ve:0,Ce.jitterMax=(et=b.jitterMax)!==null&&et!==void 0?et:0,Ce.gapHistogram=Object.entries((tt=b.gapHistogram)!==null&&tt!==void 0?tt:{}).reduce(($e,[st,at])=>(at!==void 0&&($e[Number(st)]=Number(at)),$e),{}),Ce.nacks=(Ge=b.nacks)!==null&&Ge!==void 0?Ge:0,Ce.nackAcks=(rt=b.nackAcks)!==null&&rt!==void 0?rt:0,Ce.nackMisses=(it=b.nackMisses)!==null&&it!==void 0?it:0,Ce.nackRepeated=(Le=b.nackRepeated)!==null&&Le!==void 0?Le:0,Ce.plis=(nt=b.plis)!==null&&nt!==void 0?nt:0,Ce.lastPli=(Ke=b.lastPli)!==null&&Ke!==void 0?Ke:void 0,Ce.firs=(Ze=b.firs)!==null&&Ze!==void 0?Ze:0,Ce.lastFir=(ne=b.lastFir)!==null&&ne!==void 0?ne:void 0,Ce.rttCurrent=(he=b.rttCurrent)!==null&&he!==void 0?he:0,Ce.rttMax=(ye=b.rttMax)!==null&&ye!==void 0?ye:0,Ce.keyFrames=(Ee=b.keyFrames)!==null&&Ee!==void 0?Ee:0,Ce.lastKeyFrame=(Te=b.lastKeyFrame)!==null&&Te!==void 0?Te:void 0,Ce.layerLockPlis=(Ne=b.layerLockPlis)!==null&&Ne!==void 0?Ne:0,Ce.lastLayerLockPli=(Ie=b.lastLayerLockPli)!==null&&Ie!==void 0?Ie:void 0,Ce}};function $(){return{key:0,value:0}}t.RTPStats_GapHistogramEntry={encode(b,D=d.default.Writer.create()){return b.key!==0&&D.uint32(8).int32(b.key),b.value!==0&&D.uint32(16).uint32(b.value),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=$();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.key=K.int32();break;case 2:ae.value=K.uint32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{key:j(b.key)?Number(b.key):0,value:j(b.value)?Number(b.value):0}},toJSON(b){const D={};return b.key!==void 0&&(D.key=Math.round(b.key)),b.value!==void 0&&(D.value=Math.round(b.value)),D},fromPartial(b){var D,K;const pe=$();return pe.key=(D=b.key)!==null&&D!==void 0?D:0,pe.value=(K=b.value)!==null&&K!==void 0?K:0,pe}};function X(){return{unixMicro:0,ticks:0}}t.TimedVersion={encode(b,D=d.default.Writer.create()){return b.unixMicro!==0&&D.uint32(8).int64(b.unixMicro),b.ticks!==0&&D.uint32(16).int32(b.ticks),D},decode(b,D){const K=b instanceof d.default.Reader?b:new d.default.Reader(b);let pe=D===void 0?K.len:K.pos+D;const ae=X();for(;K.pos<pe;){const _e=K.uint32();switch(_e>>>3){case 1:ae.unixMicro=H(K.int64());break;case 2:ae.ticks=K.int32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(b){return{unixMicro:j(b.unixMicro)?Number(b.unixMicro):0,ticks:j(b.ticks)?Number(b.ticks):0}},toJSON(b){const D={};return b.unixMicro!==void 0&&(D.unixMicro=Math.round(b.unixMicro)),b.ticks!==void 0&&(D.ticks=Math.round(b.ticks)),D},fromPartial(b){var D,K;const pe=X();return pe.unixMicro=(D=b.unixMicro)!==null&&D!==void 0?D:0,pe.ticks=(K=b.ticks)!==null&&K!==void 0?K:0,pe}};var se=(()=>{if(typeof se<"u")return se;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function ve(b){if(se.Buffer)return Uint8Array.from(se.Buffer.from(b,"base64"));{const D=se.atob(b),K=new Uint8Array(D.length);for(let pe=0;pe<D.length;++pe)K[pe]=D.charCodeAt(pe);return K}}function Se(b){if(se.Buffer)return se.Buffer.from(b).toString("base64");{const D=[];return b.forEach(K=>{D.push(String.fromCharCode(K))}),se.btoa(D.join(""))}}function ue(b){const D=b.getTime()/1e3,K=b.getTime()%1e3*1e6;return{seconds:D,nanos:K}}function y(b){let D=b.seconds*1e3;return D+=b.nanos/1e6,new Date(D)}function L(b){return b instanceof Date?b:typeof b=="string"?new Date(b):y(s.Timestamp.fromJSON(b))}function H(b){if(b.gt(Number.MAX_SAFE_INTEGER))throw new se.Error("Value is larger than Number.MAX_SAFE_INTEGER");return b.toNumber()}d.default.util.Long!==o.default&&(d.default.util.Long=o.default,d.default.configure());function fe(b){return typeof b=="object"&&b!==null}function j(b){return b!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./google/protobuf/timestamp":72,long:85,"protobufjs/minimal":89}],76:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateRoomMetadataRequest=t.SendDataResponse=t.SendDataRequest=t.UpdateSubscriptionsResponse=t.UpdateSubscriptionsRequest=t.UpdateParticipantRequest=t.MuteRoomTrackResponse=t.MuteRoomTrackRequest=t.RemoveParticipantResponse=t.RoomParticipantIdentity=t.ListParticipantsResponse=t.ListParticipantsRequest=t.DeleteRoomResponse=t.DeleteRoomRequest=t.ListRoomsResponse=t.ListRoomsRequest=t.RoomEgress=t.CreateRoomRequest=t.protobufPackage=void 0;const o=a(e("protobufjs/minimal")),d=e("./livekit_egress"),s=e("./livekit_models");t.protobufPackage="livekit";function f(){return{name:"",emptyTimeout:0,maxParticipants:0,nodeId:"",metadata:"",egress:void 0}}t.CreateRoomRequest={encode(S,k=o.default.Writer.create()){return S.name!==void 0&&S.name!==""&&k.uint32(10).string(S.name),S.emptyTimeout!==void 0&&S.emptyTimeout!==0&&k.uint32(16).uint32(S.emptyTimeout),S.maxParticipants!==void 0&&S.maxParticipants!==0&&k.uint32(24).uint32(S.maxParticipants),S.nodeId!==void 0&&S.nodeId!==""&&k.uint32(34).string(S.nodeId),S.metadata!==void 0&&S.metadata!==""&&k.uint32(42).string(S.metadata),S.egress!==void 0&&t.RoomEgress.encode(S.egress,k.uint32(50).fork()).ldelim(),k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=f();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.name=g.string();break;case 2:T.emptyTimeout=g.uint32();break;case 3:T.maxParticipants=g.uint32();break;case 4:T.nodeId=g.string();break;case 5:T.metadata=g.string();break;case 6:T.egress=t.RoomEgress.decode(g,g.uint32());break;default:g.skipType(A&7);break}}return T},fromJSON(S){return{name:x(S.name)?String(S.name):"",emptyTimeout:x(S.emptyTimeout)?Number(S.emptyTimeout):0,maxParticipants:x(S.maxParticipants)?Number(S.maxParticipants):0,nodeId:x(S.nodeId)?String(S.nodeId):"",metadata:x(S.metadata)?String(S.metadata):"",egress:x(S.egress)?t.RoomEgress.fromJSON(S.egress):void 0}},toJSON(S){const k={};return S.name!==void 0&&(k.name=S.name),S.emptyTimeout!==void 0&&(k.emptyTimeout=Math.round(S.emptyTimeout)),S.maxParticipants!==void 0&&(k.maxParticipants=Math.round(S.maxParticipants)),S.nodeId!==void 0&&(k.nodeId=S.nodeId),S.metadata!==void 0&&(k.metadata=S.metadata),S.egress!==void 0&&(k.egress=S.egress?t.RoomEgress.toJSON(S.egress):void 0),k},fromPartial(S){var k,g,E,T,A;const J=f();return J.name=(k=S.name)!==null&&k!==void 0?k:"",J.emptyTimeout=(g=S.emptyTimeout)!==null&&g!==void 0?g:0,J.maxParticipants=(E=S.maxParticipants)!==null&&E!==void 0?E:0,J.nodeId=(T=S.nodeId)!==null&&T!==void 0?T:"",J.metadata=(A=S.metadata)!==null&&A!==void 0?A:"",J.egress=S.egress!==void 0&&S.egress!==null?t.RoomEgress.fromPartial(S.egress):void 0,J}};function c(){return{room:void 0,tracks:void 0}}t.RoomEgress={encode(S,k=o.default.Writer.create()){return S.room!==void 0&&d.RoomCompositeEgressRequest.encode(S.room,k.uint32(10).fork()).ldelim(),S.tracks!==void 0&&d.AutoTrackEgress.encode(S.tracks,k.uint32(18).fork()).ldelim(),k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=c();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=d.RoomCompositeEgressRequest.decode(g,g.uint32());break;case 2:T.tracks=d.AutoTrackEgress.decode(g,g.uint32());break;default:g.skipType(A&7);break}}return T},fromJSON(S){return{room:x(S.room)?d.RoomCompositeEgressRequest.fromJSON(S.room):void 0,tracks:x(S.tracks)?d.AutoTrackEgress.fromJSON(S.tracks):void 0}},toJSON(S){const k={};return S.room!==void 0&&(k.room=S.room?d.RoomCompositeEgressRequest.toJSON(S.room):void 0),S.tracks!==void 0&&(k.tracks=S.tracks?d.AutoTrackEgress.toJSON(S.tracks):void 0),k},fromPartial(S){const k=c();return k.room=S.room!==void 0&&S.room!==null?d.RoomCompositeEgressRequest.fromPartial(S.room):void 0,k.tracks=S.tracks!==void 0&&S.tracks!==null?d.AutoTrackEgress.fromPartial(S.tracks):void 0,k}};function h(){return{names:[]}}t.ListRoomsRequest={encode(S,k=o.default.Writer.create()){if(S.names!==void 0&&S.names.length!==0)for(const g of S.names)k.uint32(10).string(g);return k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=h();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.names.push(g.string());break;default:g.skipType(A&7);break}}return T},fromJSON(S){return{names:Array.isArray(S==null?void 0:S.names)?S.names.map(k=>String(k)):[]}},toJSON(S){const k={};return S.names?k.names=S.names.map(g=>g):k.names=[],k},fromPartial(S){var k;const g=h();return g.names=((k=S.names)===null||k===void 0?void 0:k.map(E=>E))||[],g}};function v(){return{rooms:[]}}t.ListRoomsResponse={encode(S,k=o.default.Writer.create()){if(S.rooms!==void 0&&S.rooms.length!==0)for(const g of S.rooms)s.Room.encode(g,k.uint32(10).fork()).ldelim();return k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=v();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.rooms.push(s.Room.decode(g,g.uint32()));break;default:g.skipType(A&7);break}}return T},fromJSON(S){return{rooms:Array.isArray(S==null?void 0:S.rooms)?S.rooms.map(k=>s.Room.fromJSON(k)):[]}},toJSON(S){const k={};return S.rooms?k.rooms=S.rooms.map(g=>g?s.Room.toJSON(g):void 0):k.rooms=[],k},fromPartial(S){var k;const g=v();return g.rooms=((k=S.rooms)===null||k===void 0?void 0:k.map(E=>s.Room.fromPartial(E)))||[],g}};function l(){return{room:""}}t.DeleteRoomRequest={encode(S,k=o.default.Writer.create()){return S.room!==void 0&&S.room!==""&&k.uint32(10).string(S.room),k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=l();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(S){return{room:x(S.room)?String(S.room):""}},toJSON(S){const k={};return S.room!==void 0&&(k.room=S.room),k},fromPartial(S){var k;const g=l();return g.room=(k=S.room)!==null&&k!==void 0?k:"",g}};function u(){return{}}t.DeleteRoomResponse={encode(S,k=o.default.Writer.create()){return k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=u();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){default:g.skipType(A&7);break}}return T},fromJSON(S){return{}},toJSON(S){return{}},fromPartial(S){return u()}};function p(){return{room:""}}t.ListParticipantsRequest={encode(S,k=o.default.Writer.create()){return S.room!==void 0&&S.room!==""&&k.uint32(10).string(S.room),k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=p();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(S){return{room:x(S.room)?String(S.room):""}},toJSON(S){const k={};return S.room!==void 0&&(k.room=S.room),k},fromPartial(S){var k;const g=p();return g.room=(k=S.room)!==null&&k!==void 0?k:"",g}};function m(){return{participants:[]}}t.ListParticipantsResponse={encode(S,k=o.default.Writer.create()){if(S.participants!==void 0&&S.participants.length!==0)for(const g of S.participants)s.ParticipantInfo.encode(g,k.uint32(10).fork()).ldelim();return k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=m();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.participants.push(s.ParticipantInfo.decode(g,g.uint32()));break;default:g.skipType(A&7);break}}return T},fromJSON(S){return{participants:Array.isArray(S==null?void 0:S.participants)?S.participants.map(k=>s.ParticipantInfo.fromJSON(k)):[]}},toJSON(S){const k={};return S.participants?k.participants=S.participants.map(g=>g?s.ParticipantInfo.toJSON(g):void 0):k.participants=[],k},fromPartial(S){var k;const g=m();return g.participants=((k=S.participants)===null||k===void 0?void 0:k.map(E=>s.ParticipantInfo.fromPartial(E)))||[],g}};function w(){return{room:"",identity:""}}t.RoomParticipantIdentity={encode(S,k=o.default.Writer.create()){return S.room!==void 0&&S.room!==""&&k.uint32(10).string(S.room),S.identity!==void 0&&S.identity!==""&&k.uint32(18).string(S.identity),k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=w();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.identity=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(S){return{room:x(S.room)?String(S.room):"",identity:x(S.identity)?String(S.identity):""}},toJSON(S){const k={};return S.room!==void 0&&(k.room=S.room),S.identity!==void 0&&(k.identity=S.identity),k},fromPartial(S){var k,g;const E=w();return E.room=(k=S.room)!==null&&k!==void 0?k:"",E.identity=(g=S.identity)!==null&&g!==void 0?g:"",E}};function _(){return{}}t.RemoveParticipantResponse={encode(S,k=o.default.Writer.create()){return k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=_();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){default:g.skipType(A&7);break}}return T},fromJSON(S){return{}},toJSON(S){return{}},fromPartial(S){return _()}};function C(){return{room:"",identity:"",trackSid:"",muted:!1}}t.MuteRoomTrackRequest={encode(S,k=o.default.Writer.create()){return S.room!==void 0&&S.room!==""&&k.uint32(10).string(S.room),S.identity!==void 0&&S.identity!==""&&k.uint32(18).string(S.identity),S.trackSid!==void 0&&S.trackSid!==""&&k.uint32(26).string(S.trackSid),S.muted===!0&&k.uint32(32).bool(S.muted),k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=C();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.identity=g.string();break;case 3:T.trackSid=g.string();break;case 4:T.muted=g.bool();break;default:g.skipType(A&7);break}}return T},fromJSON(S){return{room:x(S.room)?String(S.room):"",identity:x(S.identity)?String(S.identity):"",trackSid:x(S.trackSid)?String(S.trackSid):"",muted:x(S.muted)?!!S.muted:!1}},toJSON(S){const k={};return S.room!==void 0&&(k.room=S.room),S.identity!==void 0&&(k.identity=S.identity),S.trackSid!==void 0&&(k.trackSid=S.trackSid),S.muted!==void 0&&(k.muted=S.muted),k},fromPartial(S){var k,g,E,T;const A=C();return A.room=(k=S.room)!==null&&k!==void 0?k:"",A.identity=(g=S.identity)!==null&&g!==void 0?g:"",A.trackSid=(E=S.trackSid)!==null&&E!==void 0?E:"",A.muted=(T=S.muted)!==null&&T!==void 0?T:!1,A}};function N(){return{track:void 0}}t.MuteRoomTrackResponse={encode(S,k=o.default.Writer.create()){return S.track!==void 0&&s.TrackInfo.encode(S.track,k.uint32(10).fork()).ldelim(),k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=N();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.track=s.TrackInfo.decode(g,g.uint32());break;default:g.skipType(A&7);break}}return T},fromJSON(S){return{track:x(S.track)?s.TrackInfo.fromJSON(S.track):void 0}},toJSON(S){const k={};return S.track!==void 0&&(k.track=S.track?s.TrackInfo.toJSON(S.track):void 0),k},fromPartial(S){const k=N();return k.track=S.track!==void 0&&S.track!==null?s.TrackInfo.fromPartial(S.track):void 0,k}};function P(){return{room:"",identity:"",metadata:"",permission:void 0,name:""}}t.UpdateParticipantRequest={encode(S,k=o.default.Writer.create()){return S.room!==void 0&&S.room!==""&&k.uint32(10).string(S.room),S.identity!==void 0&&S.identity!==""&&k.uint32(18).string(S.identity),S.metadata!==void 0&&S.metadata!==""&&k.uint32(26).string(S.metadata),S.permission!==void 0&&s.ParticipantPermission.encode(S.permission,k.uint32(34).fork()).ldelim(),S.name!==void 0&&S.name!==""&&k.uint32(42).string(S.name),k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=P();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.identity=g.string();break;case 3:T.metadata=g.string();break;case 4:T.permission=s.ParticipantPermission.decode(g,g.uint32());break;case 5:T.name=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(S){return{room:x(S.room)?String(S.room):"",identity:x(S.identity)?String(S.identity):"",metadata:x(S.metadata)?String(S.metadata):"",permission:x(S.permission)?s.ParticipantPermission.fromJSON(S.permission):void 0,name:x(S.name)?String(S.name):""}},toJSON(S){const k={};return S.room!==void 0&&(k.room=S.room),S.identity!==void 0&&(k.identity=S.identity),S.metadata!==void 0&&(k.metadata=S.metadata),S.permission!==void 0&&(k.permission=S.permission?s.ParticipantPermission.toJSON(S.permission):void 0),S.name!==void 0&&(k.name=S.name),k},fromPartial(S){var k,g,E,T;const A=P();return A.room=(k=S.room)!==null&&k!==void 0?k:"",A.identity=(g=S.identity)!==null&&g!==void 0?g:"",A.metadata=(E=S.metadata)!==null&&E!==void 0?E:"",A.permission=S.permission!==void 0&&S.permission!==null?s.ParticipantPermission.fromPartial(S.permission):void 0,A.name=(T=S.name)!==null&&T!==void 0?T:"",A}};function M(){return{room:"",identity:"",trackSids:[],subscribe:!1,participantTracks:[]}}t.UpdateSubscriptionsRequest={encode(S,k=o.default.Writer.create()){if(S.room!==void 0&&S.room!==""&&k.uint32(10).string(S.room),S.identity!==void 0&&S.identity!==""&&k.uint32(18).string(S.identity),S.trackSids!==void 0&&S.trackSids.length!==0)for(const g of S.trackSids)k.uint32(26).string(g);if(S.subscribe===!0&&k.uint32(32).bool(S.subscribe),S.participantTracks!==void 0&&S.participantTracks.length!==0)for(const g of S.participantTracks)s.ParticipantTracks.encode(g,k.uint32(42).fork()).ldelim();return k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=M();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.identity=g.string();break;case 3:T.trackSids.push(g.string());break;case 4:T.subscribe=g.bool();break;case 5:T.participantTracks.push(s.ParticipantTracks.decode(g,g.uint32()));break;default:g.skipType(A&7);break}}return T},fromJSON(S){return{room:x(S.room)?String(S.room):"",identity:x(S.identity)?String(S.identity):"",trackSids:Array.isArray(S==null?void 0:S.trackSids)?S.trackSids.map(k=>String(k)):[],subscribe:x(S.subscribe)?!!S.subscribe:!1,participantTracks:Array.isArray(S==null?void 0:S.participantTracks)?S.participantTracks.map(k=>s.ParticipantTracks.fromJSON(k)):[]}},toJSON(S){const k={};return S.room!==void 0&&(k.room=S.room),S.identity!==void 0&&(k.identity=S.identity),S.trackSids?k.trackSids=S.trackSids.map(g=>g):k.trackSids=[],S.subscribe!==void 0&&(k.subscribe=S.subscribe),S.participantTracks?k.participantTracks=S.participantTracks.map(g=>g?s.ParticipantTracks.toJSON(g):void 0):k.participantTracks=[],k},fromPartial(S){var k,g,E,T,A;const J=M();return J.room=(k=S.room)!==null&&k!==void 0?k:"",J.identity=(g=S.identity)!==null&&g!==void 0?g:"",J.trackSids=((E=S.trackSids)===null||E===void 0?void 0:E.map(G=>G))||[],J.subscribe=(T=S.subscribe)!==null&&T!==void 0?T:!1,J.participantTracks=((A=S.participantTracks)===null||A===void 0?void 0:A.map(G=>s.ParticipantTracks.fromPartial(G)))||[],J}};function U(){return{}}t.UpdateSubscriptionsResponse={encode(S,k=o.default.Writer.create()){return k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=U();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){default:g.skipType(A&7);break}}return T},fromJSON(S){return{}},toJSON(S){return{}},fromPartial(S){return U()}};function W(){return{room:"",data:new Uint8Array,kind:0,destinationSids:[]}}t.SendDataRequest={encode(S,k=o.default.Writer.create()){if(S.room!==void 0&&S.room!==""&&k.uint32(10).string(S.room),S.data!==void 0&&S.data.length!==0&&k.uint32(18).bytes(S.data),S.kind!==void 0&&S.kind!==0&&k.uint32(24).int32(S.kind),S.destinationSids!==void 0&&S.destinationSids.length!==0)for(const g of S.destinationSids)k.uint32(34).string(g);return k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=W();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.data=g.bytes();break;case 3:T.kind=g.int32();break;case 4:T.destinationSids.push(g.string());break;default:g.skipType(A&7);break}}return T},fromJSON(S){return{room:x(S.room)?String(S.room):"",data:x(S.data)?Y(S.data):new Uint8Array,kind:x(S.kind)?s.dataPacket_KindFromJSON(S.kind):0,destinationSids:Array.isArray(S==null?void 0:S.destinationSids)?S.destinationSids.map(k=>String(k)):[]}},toJSON(S){const k={};return S.room!==void 0&&(k.room=S.room),S.data!==void 0&&(k.data=O(S.data!==void 0?S.data:new Uint8Array)),S.kind!==void 0&&(k.kind=s.dataPacket_KindToJSON(S.kind)),S.destinationSids?k.destinationSids=S.destinationSids.map(g=>g):k.destinationSids=[],k},fromPartial(S){var k,g,E,T;const A=W();return A.room=(k=S.room)!==null&&k!==void 0?k:"",A.data=(g=S.data)!==null&&g!==void 0?g:new Uint8Array,A.kind=(E=S.kind)!==null&&E!==void 0?E:0,A.destinationSids=((T=S.destinationSids)===null||T===void 0?void 0:T.map(J=>J))||[],A}};function q(){return{}}t.SendDataResponse={encode(S,k=o.default.Writer.create()){return k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=q();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){default:g.skipType(A&7);break}}return T},fromJSON(S){return{}},toJSON(S){return{}},fromPartial(S){return q()}};function Z(){return{room:"",metadata:""}}t.UpdateRoomMetadataRequest={encode(S,k=o.default.Writer.create()){return S.room!==void 0&&S.room!==""&&k.uint32(10).string(S.room),S.metadata!==void 0&&S.metadata!==""&&k.uint32(18).string(S.metadata),k},decode(S,k){const g=S instanceof o.default.Reader?S:new o.default.Reader(S);let E=k===void 0?g.len:g.pos+k;const T=Z();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.metadata=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(S){return{room:x(S.room)?String(S.room):"",metadata:x(S.metadata)?String(S.metadata):""}},toJSON(S){const k={};return S.room!==void 0&&(k.room=S.room),S.metadata!==void 0&&(k.metadata=S.metadata),k},fromPartial(S){var k,g;const E=Z();return E.room=(k=S.room)!==null&&k!==void 0?k:"",E.metadata=(g=S.metadata)!==null&&g!==void 0?g:"",E}};var re=(()=>{if(typeof re<"u")return re;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function Y(S){if(re.Buffer)return Uint8Array.from(re.Buffer.from(S,"base64"));{const k=re.atob(S),g=new Uint8Array(k.length);for(let E=0;E<k.length;++E)g[E]=k.charCodeAt(E);return g}}function O(S){if(re.Buffer)return re.Buffer.from(S).toString("base64");{const k=[];return S.forEach(g=>{k.push(String.fromCharCode(g))}),re.btoa(k.join(""))}}function x(S){return S!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./livekit_egress":73,"./livekit_models":75,"protobufjs/minimal":89}],77:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebhookEvent=t.protobufPackage=void 0;const o=a(e("long")),d=a(e("protobufjs/minimal")),s=e("./livekit_egress"),f=e("./livekit_ingress"),c=e("./livekit_models");t.protobufPackage="livekit";function h(){return{event:"",room:void 0,participant:void 0,egressInfo:void 0,ingressInfo:void 0,track:void 0,id:"",createdAt:0}}t.WebhookEvent={encode(p,m=d.default.Writer.create()){return p.event!==void 0&&p.event!==""&&m.uint32(10).string(p.event),p.room!==void 0&&c.Room.encode(p.room,m.uint32(18).fork()).ldelim(),p.participant!==void 0&&c.ParticipantInfo.encode(p.participant,m.uint32(26).fork()).ldelim(),p.egressInfo!==void 0&&s.EgressInfo.encode(p.egressInfo,m.uint32(74).fork()).ldelim(),p.ingressInfo!==void 0&&f.IngressInfo.encode(p.ingressInfo,m.uint32(82).fork()).ldelim(),p.track!==void 0&&c.TrackInfo.encode(p.track,m.uint32(66).fork()).ldelim(),p.id!==void 0&&p.id!==""&&m.uint32(50).string(p.id),p.createdAt!==void 0&&p.createdAt!==0&&m.uint32(56).int64(p.createdAt),m},decode(p,m){const w=p instanceof d.default.Reader?p:new d.default.Reader(p);let _=m===void 0?w.len:w.pos+m;const C=h();for(;w.pos<_;){const N=w.uint32();switch(N>>>3){case 1:C.event=w.string();break;case 2:C.room=c.Room.decode(w,w.uint32());break;case 3:C.participant=c.ParticipantInfo.decode(w,w.uint32());break;case 9:C.egressInfo=s.EgressInfo.decode(w,w.uint32());break;case 10:C.ingressInfo=f.IngressInfo.decode(w,w.uint32());break;case 8:C.track=c.TrackInfo.decode(w,w.uint32());break;case 6:C.id=w.string();break;case 7:C.createdAt=l(w.int64());break;default:w.skipType(N&7);break}}return C},fromJSON(p){return{event:u(p.event)?String(p.event):"",room:u(p.room)?c.Room.fromJSON(p.room):void 0,participant:u(p.participant)?c.ParticipantInfo.fromJSON(p.participant):void 0,egressInfo:u(p.egressInfo)?s.EgressInfo.fromJSON(p.egressInfo):void 0,ingressInfo:u(p.ingressInfo)?f.IngressInfo.fromJSON(p.ingressInfo):void 0,track:u(p.track)?c.TrackInfo.fromJSON(p.track):void 0,id:u(p.id)?String(p.id):"",createdAt:u(p.createdAt)?Number(p.createdAt):0}},toJSON(p){const m={};return p.event!==void 0&&(m.event=p.event),p.room!==void 0&&(m.room=p.room?c.Room.toJSON(p.room):void 0),p.participant!==void 0&&(m.participant=p.participant?c.ParticipantInfo.toJSON(p.participant):void 0),p.egressInfo!==void 0&&(m.egressInfo=p.egressInfo?s.EgressInfo.toJSON(p.egressInfo):void 0),p.ingressInfo!==void 0&&(m.ingressInfo=p.ingressInfo?f.IngressInfo.toJSON(p.ingressInfo):void 0),p.track!==void 0&&(m.track=p.track?c.TrackInfo.toJSON(p.track):void 0),p.id!==void 0&&(m.id=p.id),p.createdAt!==void 0&&(m.createdAt=Math.round(p.createdAt)),m},fromPartial(p){var m,w,_;const C=h();return C.event=(m=p.event)!==null&&m!==void 0?m:"",C.room=p.room!==void 0&&p.room!==null?c.Room.fromPartial(p.room):void 0,C.participant=p.participant!==void 0&&p.participant!==null?c.ParticipantInfo.fromPartial(p.participant):void 0,C.egressInfo=p.egressInfo!==void 0&&p.egressInfo!==null?s.EgressInfo.fromPartial(p.egressInfo):void 0,C.ingressInfo=p.ingressInfo!==void 0&&p.ingressInfo!==null?f.IngressInfo.fromPartial(p.ingressInfo):void 0,C.track=p.track!==void 0&&p.track!==null?c.TrackInfo.fromPartial(p.track):void 0,C.id=(w=p.id)!==null&&w!==void 0?w:"",C.createdAt=(_=p.createdAt)!==null&&_!==void 0?_:0,C}};var v=(()=>{if(typeof v<"u")return v;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function l(p){if(p.gt(Number.MAX_SAFE_INTEGER))throw new v.Error("Value is larger than Number.MAX_SAFE_INTEGER");return p.toNumber()}d.default.util.Long!==o.default&&(d.default.util.Long=o.default,d.default.configure());function u(p){return p!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./livekit_egress":73,"./livekit_ingress":74,"./livekit_models":75,long:85,"protobufjs/minimal":89}],78:[function(e,i,t){var n=1/0,a=9007199254740991,o=17976931348623157e292,d=0/0,s="[object Arguments]",f="[object Function]",c="[object GeneratorFunction]",h="[object String]",v="[object Symbol]",l=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,m=/^0o[0-7]+$/i,w=/^(?:0|[1-9]\d*)$/,_=parseInt;function C(le,te){for(var ee=-1,Q=le?le.length:0,F=Array(Q);++ee<Q;)F[ee]=te(le[ee],ee,le);return F}function N(le,te,ee,Q){for(var F=le.length,$=ee+(Q?1:-1);Q?$--:++$<F;)if(te(le[$],$,le))return $;return-1}function P(le,te,ee){if(te!==te)return N(le,M,ee);for(var Q=ee-1,F=le.length;++Q<F;)if(le[Q]===te)return Q;return-1}function M(le){return le!==le}function U(le,te){for(var ee=-1,Q=Array(le);++ee<le;)Q[ee]=te(ee);return Q}function W(le,te){return C(te,function(ee){return le[ee]})}function q(le,te){return function(ee){return le(te(ee))}}var Z=Object.prototype,re=Z.hasOwnProperty,Y=Z.toString,O=Z.propertyIsEnumerable,x=q(Object.keys,Object),S=Math.max;function k(le,te){var ee=G(le)||J(le)?U(le.length,String):[],Q=ee.length,F=!!Q;for(var $ in le)(te||re.call(le,$))&&!(F&&($=="length"||E($,Q)))&&ee.push($);return ee}function g(le){if(!T(le))return x(le);var te=[];for(var ee in Object(le))re.call(le,ee)&&ee!="constructor"&&te.push(ee);return te}function E(le,te){return te=te??a,!!te&&(typeof le=="number"||w.test(le))&&le>-1&&le%1==0&&le<te}function T(le){var te=le&&le.constructor,ee=typeof te=="function"&&te.prototype||Z;return le===ee}function A(le,te,ee,Q){le=I(le)?le:ke(le),ee=ee&&!Q?oe(ee):0;var F=le.length;return ee<0&&(ee=S(F+ee,0)),me(le)?ee<=F&&le.indexOf(te,ee)>-1:!!F&&P(le,te,ee)>-1}function J(le){return V(le)&&re.call(le,"callee")&&(!O.call(le,"callee")||Y.call(le)==s)}var G=Array.isArray;function I(le){return le!=null&&z(le.length)&&!B(le)}function V(le){return de(le)&&I(le)}function B(le){var te=ie(le)?Y.call(le):"";return te==f||te==c}function z(le){return typeof le=="number"&&le>-1&&le%1==0&&le<=a}function ie(le){var te=typeof le;return!!le&&(te=="object"||te=="function")}function de(le){return!!le&&typeof le=="object"}function me(le){return typeof le=="string"||!G(le)&&de(le)&&Y.call(le)==h}function be(le){return typeof le=="symbol"||de(le)&&Y.call(le)==v}function we(le){if(!le)return le===0?le:0;if(le=ce(le),le===n||le===-n){var te=le<0?-1:1;return te*o}return le===le?le:0}function oe(le){var te=we(le),ee=te%1;return te===te?ee?te-ee:te:0}function ce(le){if(typeof le=="number")return le;if(be(le))return d;if(ie(le)){var te=typeof le.valueOf=="function"?le.valueOf():le;le=ie(te)?te+"":te}if(typeof le!="string")return le===0?le:+le;le=le.replace(l,"");var ee=p.test(le);return ee||m.test(le)?_(le.slice(2),ee?2:8):u.test(le)?d:+le}function ge(le){return I(le)?k(le):g(le)}function ke(le){return le?W(le,ge(le)):[]}i.exports=A},{}],79:[function(e,i,t){var n="[object Boolean]",a=Object.prototype,o=a.toString;function d(f){return f===!0||f===!1||s(f)&&o.call(f)==n}function s(f){return!!f&&typeof f=="object"}i.exports=d},{}],80:[function(e,i,t){var n=1/0,a=17976931348623157e292,o=0/0,d="[object Symbol]",s=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,h=/^0o[0-7]+$/i,v=parseInt,l=Object.prototype,u=l.toString;function p(M){return typeof M=="number"&&M==N(M)}function m(M){var U=typeof M;return!!M&&(U=="object"||U=="function")}function w(M){return!!M&&typeof M=="object"}function _(M){return typeof M=="symbol"||w(M)&&u.call(M)==d}function C(M){if(!M)return M===0?M:0;if(M=P(M),M===n||M===-n){var U=M<0?-1:1;return U*a}return M===M?M:0}function N(M){var U=C(M),W=U%1;return U===U?W?U-W:U:0}function P(M){if(typeof M=="number")return M;if(_(M))return o;if(m(M)){var U=typeof M.valueOf=="function"?M.valueOf():M;M=m(U)?U+"":U}if(typeof M!="string")return M===0?M:+M;M=M.replace(s,"");var W=c.test(M);return W||h.test(M)?v(M.slice(2),W?2:8):f.test(M)?o:+M}i.exports=p},{}],81:[function(e,i,t){var n="[object Number]",a=Object.prototype,o=a.toString;function d(f){return!!f&&typeof f=="object"}function s(f){return typeof f=="number"||d(f)&&o.call(f)==n}i.exports=s},{}],82:[function(e,i,t){var n="[object Object]";function a(m){var w=!1;if(m!=null&&typeof m.toString!="function")try{w=!!(m+"")}catch{}return w}function o(m,w){return function(_){return m(w(_))}}var d=Function.prototype,s=Object.prototype,f=d.toString,c=s.hasOwnProperty,h=f.call(Object),v=s.toString,l=o(Object.getPrototypeOf,Object);function u(m){return!!m&&typeof m=="object"}function p(m){if(!u(m)||v.call(m)!=n||a(m))return!1;var w=l(m);if(w===null)return!0;var _=c.call(w,"constructor")&&w.constructor;return typeof _=="function"&&_ instanceof _&&f.call(_)==h}i.exports=p},{}],83:[function(e,i,t){var n="[object String]",a=Object.prototype,o=a.toString,d=Array.isArray;function s(c){return!!c&&typeof c=="object"}function f(c){return typeof c=="string"||!d(c)&&s(c)&&o.call(c)==n}i.exports=f},{}],84:[function(e,i,t){var n="Expected a function",a=1/0,o=17976931348623157e292,d=0/0,s="[object Symbol]",f=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,v=/^0o[0-7]+$/i,l=parseInt,u=Object.prototype,p=u.toString;function m(W,q){var Z;if(typeof q!="function")throw new TypeError(n);return W=M(W),function(){return--W>0&&(Z=q.apply(this,arguments)),W<=1&&(q=void 0),Z}}function w(W){return m(2,W)}function _(W){var q=typeof W;return!!W&&(q=="object"||q=="function")}function C(W){return!!W&&typeof W=="object"}function N(W){return typeof W=="symbol"||C(W)&&p.call(W)==s}function P(W){if(!W)return W===0?W:0;if(W=U(W),W===a||W===-a){var q=W<0?-1:1;return q*o}return W===W?W:0}function M(W){var q=P(W),Z=q%1;return q===q?Z?q-Z:q:0}function U(W){if(typeof W=="number")return W;if(N(W))return d;if(_(W)){var q=typeof W.valueOf=="function"?W.valueOf():W;W=_(q)?q+"":q}if(typeof W!="string")return W===0?W:+W;W=W.replace(f,"");var Z=h.test(W);return Z||v.test(W)?l(W.slice(2),Z?2:8):c.test(W)?d:+W}i.exports=w},{}],85:[function(e,i,t){var n=function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var o=null;try{o=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function d(E,T,A){this.low=E|0,this.high=T|0,this.unsigned=!!A}d.prototype.__isLong__,Object.defineProperty(d.prototype,"__isLong__",{value:!0});function s(E){return(E&&E.__isLong__)===!0}function f(E){var T=Math.clz32(E&-E);return E?31-T:T}d.isLong=s;var c={},h={};function v(E,T){var A,J,G;return T?(E>>>=0,(G=0<=E&&E<256)&&(J=h[E],J)?J:(A=u(E,0,!0),G&&(h[E]=A),A)):(E|=0,(G=-128<=E&&E<128)&&(J=c[E],J)?J:(A=u(E,E<0?-1:0,!1),G&&(c[E]=A),A))}d.fromInt=v;function l(E,T){if(isNaN(E))return T?q:W;if(T){if(E<0)return q;if(E>=P)return x}else{if(E<=-M)return S;if(E+1>=M)return O}return E<0?l(-E,T).neg():u(E%N|0,E/N|0,T)}d.fromNumber=l;function u(E,T,A){return new d(E,T,A)}d.fromBits=u;var p=Math.pow;function m(E,T,A){if(E.length===0)throw Error("empty string");if(typeof T=="number"?(A=T,T=!1):T=!!T,E==="NaN"||E==="Infinity"||E==="+Infinity"||E==="-Infinity")return T?q:W;if(A=A||10,A<2||36<A)throw RangeError("radix");var J;if((J=E.indexOf("-"))>0)throw Error("interior hyphen");if(J===0)return m(E.substring(1),T,A).neg();for(var G=l(p(A,8)),I=W,V=0;V<E.length;V+=8){var B=Math.min(8,E.length-V),z=parseInt(E.substring(V,V+B),A);if(B<8){var ie=l(p(A,B));I=I.mul(ie).add(l(z))}else I=I.mul(G),I=I.add(l(z))}return I.unsigned=T,I}d.fromString=m;function w(E,T){return typeof E=="number"?l(E,T):typeof E=="string"?m(E,T):u(E.low,E.high,typeof T=="boolean"?T:E.unsigned)}d.fromValue=w;var _=1<<16,C=1<<24,N=_*_,P=N*N,M=P/2,U=v(C),W=v(0);d.ZERO=W;var q=v(0,!0);d.UZERO=q;var Z=v(1);d.ONE=Z;var re=v(1,!0);d.UONE=re;var Y=v(-1);d.NEG_ONE=Y;var O=u(-1,2147483647,!1);d.MAX_VALUE=O;var x=u(-1,-1,!0);d.MAX_UNSIGNED_VALUE=x;var S=u(0,-2147483648,!1);d.MIN_VALUE=S;var k=d.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*N+(this.low>>>0):this.high*N+(this.low>>>0)},k.toString=function(T){if(T=T||10,T<2||36<T)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(S)){var A=l(T),J=this.div(A),G=J.mul(A).sub(this);return J.toString(T)+G.toInt().toString(T)}else return"-"+this.neg().toString(T);for(var I=l(p(T,6),this.unsigned),V=this,B="";;){var z=V.div(I),ie=V.sub(z.mul(I)).toInt()>>>0,de=ie.toString(T);if(V=z,V.isZero())return de+B;for(;de.length<6;)de="0"+de;B=""+de+B}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var T=this.high!=0?this.high:this.low,A=31;A>0&&!(T&1<<A);A--);return this.high!=0?A+33:A+1},k.isZero=function(){return this.high===0&&this.low===0},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return(this.low&1)===1},k.isEven=function(){return(this.low&1)===0},k.equals=function(T){return s(T)||(T=w(T)),this.unsigned!==T.unsigned&&this.high>>>31===1&&T.high>>>31===1?!1:this.high===T.high&&this.low===T.low},k.eq=k.equals,k.notEquals=function(T){return!this.eq(T)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(T){return this.comp(T)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(T){return this.comp(T)<=0},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(T){return this.comp(T)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(T){return this.comp(T)>=0},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(T){if(s(T)||(T=w(T)),this.eq(T))return 0;var A=this.isNegative(),J=T.isNegative();return A&&!J?-1:!A&&J?1:this.unsigned?T.high>>>0>this.high>>>0||T.high===this.high&&T.low>>>0>this.low>>>0?-1:1:this.sub(T).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(Z)},k.neg=k.negate,k.add=function(T){s(T)||(T=w(T));var A=this.high>>>16,J=this.high&65535,G=this.low>>>16,I=this.low&65535,V=T.high>>>16,B=T.high&65535,z=T.low>>>16,ie=T.low&65535,de=0,me=0,be=0,we=0;return we+=I+ie,be+=we>>>16,we&=65535,be+=G+z,me+=be>>>16,be&=65535,me+=J+B,de+=me>>>16,me&=65535,de+=A+V,de&=65535,u(be<<16|we,de<<16|me,this.unsigned)},k.subtract=function(T){return s(T)||(T=w(T)),this.add(T.neg())},k.sub=k.subtract,k.multiply=function(T){if(this.isZero())return this;if(s(T)||(T=w(T)),o){var A=o.mul(this.low,this.high,T.low,T.high);return u(A,o.get_high(),this.unsigned)}if(T.isZero())return this.unsigned?q:W;if(this.eq(S))return T.isOdd()?S:W;if(T.eq(S))return this.isOdd()?S:W;if(this.isNegative())return T.isNegative()?this.neg().mul(T.neg()):this.neg().mul(T).neg();if(T.isNegative())return this.mul(T.neg()).neg();if(this.lt(U)&&T.lt(U))return l(this.toNumber()*T.toNumber(),this.unsigned);var J=this.high>>>16,G=this.high&65535,I=this.low>>>16,V=this.low&65535,B=T.high>>>16,z=T.high&65535,ie=T.low>>>16,de=T.low&65535,me=0,be=0,we=0,oe=0;return oe+=V*de,we+=oe>>>16,oe&=65535,we+=I*de,be+=we>>>16,we&=65535,we+=V*ie,be+=we>>>16,we&=65535,be+=G*de,me+=be>>>16,be&=65535,be+=I*ie,me+=be>>>16,be&=65535,be+=V*z,me+=be>>>16,be&=65535,me+=J*de+G*ie+I*z+V*B,me&=65535,u(we<<16|oe,me<<16|be,this.unsigned)},k.mul=k.multiply,k.divide=function(T){if(s(T)||(T=w(T)),T.isZero())throw Error("division by zero");if(o){if(!this.unsigned&&this.high===-2147483648&&T.low===-1&&T.high===-1)return this;var A=(this.unsigned?o.div_u:o.div_s)(this.low,this.high,T.low,T.high);return u(A,o.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?q:W;var J,G,I;if(this.unsigned){if(T.unsigned||(T=T.toUnsigned()),T.gt(this))return q;if(T.gt(this.shru(1)))return re;I=q}else{if(this.eq(S)){if(T.eq(Z)||T.eq(Y))return S;if(T.eq(S))return Z;var V=this.shr(1);return J=V.div(T).shl(1),J.eq(W)?T.isNegative()?Z:Y:(G=this.sub(T.mul(J)),I=J.add(G.div(T)),I)}else if(T.eq(S))return this.unsigned?q:W;if(this.isNegative())return T.isNegative()?this.neg().div(T.neg()):this.neg().div(T).neg();if(T.isNegative())return this.div(T.neg()).neg();I=W}for(G=this;G.gte(T);){J=Math.max(1,Math.floor(G.toNumber()/T.toNumber()));for(var B=Math.ceil(Math.log(J)/Math.LN2),z=B<=48?1:p(2,B-48),ie=l(J),de=ie.mul(T);de.isNegative()||de.gt(G);)J-=z,ie=l(J,this.unsigned),de=ie.mul(T);ie.isZero()&&(ie=Z),I=I.add(ie),G=G.sub(de)}return I},k.div=k.divide,k.modulo=function(T){if(s(T)||(T=w(T)),o){var A=(this.unsigned?o.rem_u:o.rem_s)(this.low,this.high,T.low,T.high);return u(A,o.get_high(),this.unsigned)}return this.sub(this.div(T).mul(T))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return u(~this.low,~this.high,this.unsigned)},k.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},k.clz=k.countLeadingZeros,k.countTrailingZeros=function(){return this.low?f(this.low):f(this.high)+32},k.ctz=k.countTrailingZeros,k.and=function(T){return s(T)||(T=w(T)),u(this.low&T.low,this.high&T.high,this.unsigned)},k.or=function(T){return s(T)||(T=w(T)),u(this.low|T.low,this.high|T.high,this.unsigned)},k.xor=function(T){return s(T)||(T=w(T)),u(this.low^T.low,this.high^T.high,this.unsigned)},k.shiftLeft=function(T){return s(T)&&(T=T.toInt()),(T&=63)===0?this:T<32?u(this.low<<T,this.high<<T|this.low>>>32-T,this.unsigned):u(0,this.low<<T-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(T){return s(T)&&(T=T.toInt()),(T&=63)===0?this:T<32?u(this.low>>>T|this.high<<32-T,this.high>>T,this.unsigned):u(this.high>>T-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(T){return s(T)&&(T=T.toInt()),(T&=63)===0?this:T<32?u(this.low>>>T|this.high<<32-T,this.high>>>T,this.unsigned):T===32?u(this.high,0,this.unsigned):u(this.high>>>T-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.rotateLeft=function(T){var A;return s(T)&&(T=T.toInt()),(T&=63)===0?this:T===32?u(this.high,this.low,this.unsigned):T<32?(A=32-T,u(this.low<<T|this.high>>>A,this.high<<T|this.low>>>A,this.unsigned)):(T-=32,A=32-T,u(this.high<<T|this.low>>>A,this.low<<T|this.high>>>A,this.unsigned))},k.rotl=k.rotateLeft,k.rotateRight=function(T){var A;return s(T)&&(T=T.toInt()),(T&=63)===0?this:T===32?u(this.high,this.low,this.unsigned):T<32?(A=32-T,u(this.high<<A|this.low>>>T,this.low<<A|this.high>>>T,this.unsigned)):(T-=32,A=32-T,u(this.low<<A|this.high>>>T,this.high<<A|this.low>>>T,this.unsigned))},k.rotr=k.rotateRight,k.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},k.toBytes=function(T){return T?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var T=this.high,A=this.low;return[A&255,A>>>8&255,A>>>16&255,A>>>24,T&255,T>>>8&255,T>>>16&255,T>>>24]},k.toBytesBE=function(){var T=this.high,A=this.low;return[T>>>24,T>>>16&255,T>>>8&255,T&255,A>>>24,A>>>16&255,A>>>8&255,A&255]},d.fromBytes=function(T,A,J){return J?d.fromBytesLE(T,A):d.fromBytesBE(T,A)},d.fromBytesLE=function(T,A){return new d(T[0]|T[1]<<8|T[2]<<16|T[3]<<24,T[4]|T[5]<<8|T[6]<<16|T[7]<<24,A)},d.fromBytesBE=function(T,A){return new d(T[4]<<24|T[5]<<16|T[6]<<8|T[7],T[0]<<24|T[1]<<16|T[2]<<8|T[3],A)};var g=d;return a.default=g,"default"in a?a.default:a}({});typeof i=="object"&&typeof t=="object"&&(i.exports=n)},{}],86:[function(e,i,t){const n=s=>typeof s=="object"&&s!==null,a=Symbol("skip"),o=s=>n(s)&&!(s instanceof RegExp)&&!(s instanceof Error)&&!(s instanceof Date),d=(s,f,c,h=new WeakMap)=>{if(c={deep:!1,target:{},...c},h.has(s))return h.get(s);h.set(s,c.target);const{target:v}=c;delete c.target;const l=u=>u.map(p=>o(p)?d(p,f,c,h):p);if(Array.isArray(s))return l(s);for(const[u,p]of Object.entries(s)){const m=f(u,p,s);if(m===a)continue;let[w,_,{shouldRecurse:C=!0}={}]=m;w!=="__proto__"&&(c.deep&&C&&o(_)&&(_=Array.isArray(_)?l(_):d(_,f,c,h)),v[w]=_)}return v};i.exports=(s,f,c)=>{if(!n(s))throw new TypeError(`Expected an object, got \`${s}\` (${typeof s})`);return d(s,f,c)},i.exports.mapObjectSkip=a},{}],87:[function(e,i,t){var n=1e3,a=n*60,o=a*60,d=o*24,s=d*7,f=d*365.25;i.exports=function(u,p){p=p||{};var m=typeof u;if(m==="string"&&u.length>0)return c(u);if(m==="number"&&isFinite(u))return p.long?v(u):h(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function c(u){if(u=String(u),!(u.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(p){var m=parseFloat(p[1]),w=(p[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return m*f;case"weeks":case"week":case"w":return m*s;case"days":case"day":case"d":return m*d;case"hours":case"hour":case"hrs":case"hr":case"h":return m*o;case"minutes":case"minute":case"mins":case"min":case"m":return m*a;case"seconds":case"second":case"secs":case"sec":case"s":return m*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function h(u){var p=Math.abs(u);return p>=d?Math.round(u/d)+"d":p>=o?Math.round(u/o)+"h":p>=a?Math.round(u/a)+"m":p>=n?Math.round(u/n)+"s":u+"ms"}function v(u){var p=Math.abs(u);return p>=d?l(u,p,d,"day"):p>=o?l(u,p,o,"hour"):p>=a?l(u,p,a,"minute"):p>=n?l(u,p,n,"second"):u+" ms"}function l(u,p,m,w){var _=p>=m*1.5;return Math.round(u/m)+" "+w+(_?"s":"")}},{}],88:[function(e,i,t){var n=1e3,a=n*60,o=a*60,d=o*24,s=d*7,f=d*365.25;i.exports=function(u,p){p=p||{};var m=typeof u;if(m==="string"&&u.length>0)return c(u);if(m==="number"&&isFinite(u))return p.long?v(u):h(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function c(u){if(u=String(u),!(u.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(p){var m=parseFloat(p[1]),w=(p[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return m*f;case"weeks":case"week":case"w":return m*s;case"days":case"day":case"d":return m*d;case"hours":case"hour":case"hrs":case"hr":case"h":return m*o;case"minutes":case"minute":case"mins":case"min":case"m":return m*a;case"seconds":case"second":case"secs":case"sec":case"s":return m*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function h(u){var p=Math.abs(u);return p>=d?Math.round(u/d)+"d":p>=o?Math.round(u/o)+"h":p>=a?Math.round(u/a)+"m":p>=n?Math.round(u/n)+"s":u+"ms"}function v(u){var p=Math.abs(u);return p>=d?l(u,p,d,"day"):p>=o?l(u,p,o,"hour"):p>=a?l(u,p,a,"minute"):p>=n?l(u,p,n,"second"):u+" ms"}function l(u,p,m,w){var _=p>=m*1.5;return Math.round(u/m)+" "+w+(_?"s":"")}},{}],89:[function(e,i,t){i.exports=e("./src/index-minimal")},{"./src/index-minimal":90}],90:[function(e,i,t){var n=t;n.build="minimal",n.Writer=e("./writer"),n.BufferWriter=e("./writer_buffer"),n.Reader=e("./reader"),n.BufferReader=e("./reader_buffer"),n.util=e("./util/minimal"),n.rpc=e("./rpc"),n.roots=e("./roots"),n.configure=a;function a(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}a()},{"./reader":91,"./reader_buffer":92,"./roots":93,"./rpc":94,"./util/minimal":97,"./writer":98,"./writer_buffer":99}],91:[function(e,i,t){i.exports=f;var n=e("./util/minimal"),a,o=n.LongBits,d=n.utf8;function s(p,m){return RangeError("index out of range: "+p.pos+" + "+(m||1)+" > "+p.len)}function f(p){this.buf=p,this.pos=0,this.len=p.length}var c=typeof Uint8Array<"u"?function(m){if(m instanceof Uint8Array||Array.isArray(m))return new f(m);throw Error("illegal buffer")}:function(m){if(Array.isArray(m))return new f(m);throw Error("illegal buffer")},h=function(){return n.Buffer?function(w){return(f.create=function(C){return n.Buffer.isBuffer(C)?new a(C):c(C)})(w)}:c};f.create=h(),f.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,f.prototype.uint32=function(){var m=4294967295;return function(){if(m=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(m=(m|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(m=(m|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(m=(m|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(m=(m|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return m;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return m}}(),f.prototype.int32=function(){return this.uint32()|0},f.prototype.sint32=function(){var m=this.uint32();return m>>>1^-(m&1)|0};function v(){var p=new o(0,0),m=0;if(this.len-this.pos>4){for(;m<4;++m)if(p.lo=(p.lo|(this.buf[this.pos]&127)<<m*7)>>>0,this.buf[this.pos++]<128)return p;if(p.lo=(p.lo|(this.buf[this.pos]&127)<<28)>>>0,p.hi=(p.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return p;m=0}else{for(;m<3;++m){if(this.pos>=this.len)throw s(this);if(p.lo=(p.lo|(this.buf[this.pos]&127)<<m*7)>>>0,this.buf[this.pos++]<128)return p}return p.lo=(p.lo|(this.buf[this.pos++]&127)<<m*7)>>>0,p}if(this.len-this.pos>4){for(;m<5;++m)if(p.hi=(p.hi|(this.buf[this.pos]&127)<<m*7+3)>>>0,this.buf[this.pos++]<128)return p}else for(;m<5;++m){if(this.pos>=this.len)throw s(this);if(p.hi=(p.hi|(this.buf[this.pos]&127)<<m*7+3)>>>0,this.buf[this.pos++]<128)return p}throw Error("invalid varint encoding")}f.prototype.bool=function(){return this.uint32()!==0};function l(p,m){return(p[m-4]|p[m-3]<<8|p[m-2]<<16|p[m-1]<<24)>>>0}f.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return l(this.buf,this.pos+=4)},f.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return l(this.buf,this.pos+=4)|0};function u(){if(this.pos+8>this.len)throw s(this,8);return new o(l(this.buf,this.pos+=4),l(this.buf,this.pos+=4))}f.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var m=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,m},f.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var m=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,m},f.prototype.bytes=function(){var m=this.uint32(),w=this.pos,_=this.pos+m;if(_>this.len)throw s(this,m);return this.pos+=m,Array.isArray(this.buf)?this.buf.slice(w,_):w===_?new this.buf.constructor(0):this._slice.call(this.buf,w,_)},f.prototype.string=function(){var m=this.bytes();return d.read(m,0,m.length)},f.prototype.skip=function(m){if(typeof m=="number"){if(this.pos+m>this.len)throw s(this,m);this.pos+=m}else do if(this.pos>=this.len)throw s(this);while(this.buf[this.pos++]&128);return this},f.prototype.skipType=function(p){switch(p){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(p=this.uint32()&7)!==4;)this.skipType(p);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+p+" at offset "+this.pos)}return this},f._configure=function(p){a=p,f.create=h(),a._configure();var m=n.Long?"toLong":"toNumber";n.merge(f.prototype,{int64:function(){return v.call(this)[m](!1)},uint64:function(){return v.call(this)[m](!0)},sint64:function(){return v.call(this).zzDecode()[m](!1)},fixed64:function(){return u.call(this)[m](!0)},sfixed64:function(){return u.call(this)[m](!1)}})}},{"./util/minimal":97}],92:[function(e,i,t){i.exports=o;var n=e("./reader");(o.prototype=Object.create(n.prototype)).constructor=o;var a=e("./util/minimal");function o(d){n.call(this,d)}o._configure=function(){a.Buffer&&(o.prototype._slice=a.Buffer.prototype.slice)},o.prototype.string=function(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))},o._configure()},{"./reader":91,"./util/minimal":97}],93:[function(e,i,t){i.exports={}},{}],94:[function(e,i,t){var n=t;n.Service=e("./rpc/service")},{"./rpc/service":95}],95:[function(e,i,t){i.exports=a;var n=e("../util/minimal");(a.prototype=Object.create(n.EventEmitter.prototype)).constructor=a;function a(o,d,s){if(typeof o!="function")throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=o,this.requestDelimited=!!d,this.responseDelimited=!!s}a.prototype.rpcCall=function o(d,s,f,c,h){if(!c)throw TypeError("request must be specified");var v=this;if(!h)return n.asPromise(o,v,d,s,f,c);if(!v.rpcImpl){setTimeout(function(){h(Error("already ended"))},0);return}try{return v.rpcImpl(d,s[v.requestDelimited?"encodeDelimited":"encode"](c).finish(),function(u,p){if(u)return v.emit("error",u,d),h(u);if(p===null){v.end(!0);return}if(!(p instanceof f))try{p=f[v.responseDelimited?"decodeDelimited":"decode"](p)}catch(m){return v.emit("error",m,d),h(m)}return v.emit("data",p,d),h(null,p)})}catch(l){v.emit("error",l,d),setTimeout(function(){h(l)},0);return}},a.prototype.end=function(d){return this.rpcImpl&&(d||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{"../util/minimal":97}],96:[function(e,i,t){i.exports=a;var n=e("../util/minimal");function a(f,c){this.lo=f>>>0,this.hi=c>>>0}var o=a.zero=new a(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var d=a.zeroHash="\0\0\0\0\0\0\0\0";a.fromNumber=function(c){if(c===0)return o;var h=c<0;h&&(c=-c);var v=c>>>0,l=(c-v)/4294967296>>>0;return h&&(l=~l>>>0,v=~v>>>0,++v>4294967295&&(v=0,++l>4294967295&&(l=0))),new a(v,l)},a.from=function(c){if(typeof c=="number")return a.fromNumber(c);if(n.isString(c))if(n.Long)c=n.Long.fromString(c);else return a.fromNumber(parseInt(c,10));return c.low||c.high?new a(c.low>>>0,c.high>>>0):o},a.prototype.toNumber=function(c){if(!c&&this.hi>>>31){var h=~this.lo+1>>>0,v=~this.hi>>>0;return h||(v=v+1>>>0),-(h+v*4294967296)}return this.lo+this.hi*4294967296},a.prototype.toLong=function(c){return n.Long?new n.Long(this.lo|0,this.hi|0,!!c):{low:this.lo|0,high:this.hi|0,unsigned:!!c}};var s=String.prototype.charCodeAt;a.fromHash=function(c){return c===d?o:new a((s.call(c,0)|s.call(c,1)<<8|s.call(c,2)<<16|s.call(c,3)<<24)>>>0,(s.call(c,4)|s.call(c,5)<<8|s.call(c,6)<<16|s.call(c,7)<<24)>>>0)},a.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},a.prototype.zzEncode=function(){var c=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^c)>>>0,this.lo=(this.lo<<1^c)>>>0,this},a.prototype.zzDecode=function(){var c=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^c)>>>0,this.hi=(this.hi>>>1^c)>>>0,this},a.prototype.length=function(){var c=this.lo,h=(this.lo>>>28|this.hi<<4)>>>0,v=this.hi>>>24;return v===0?h===0?c<16384?c<128?1:2:c<2097152?3:4:h<16384?h<128?5:6:h<2097152?7:8:v<128?9:10}},{"../util/minimal":97}],97:[function(e,i,t){(function(n){(function(){var a=t;a.asPromise=e("@protobufjs/aspromise"),a.base64=e("@protobufjs/base64"),a.EventEmitter=e("@protobufjs/eventemitter"),a.float=e("@protobufjs/float"),a.inquire=e("@protobufjs/inquire"),a.utf8=e("@protobufjs/utf8"),a.pool=e("@protobufjs/pool"),a.LongBits=e("./longbits"),a.isNode=!!(typeof n<"u"&&n&&n.process&&n.process.versions&&n.process.versions.node),a.global=a.isNode&&n||typeof window<"u"&&window||typeof self<"u"&&self||this,a.emptyArray=Object.freeze?Object.freeze([]):[],a.emptyObject=Object.freeze?Object.freeze({}):{},a.isInteger=Number.isInteger||function(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f},a.isString=function(f){return typeof f=="string"||f instanceof String},a.isObject=function(f){return f&&typeof f=="object"},a.isset=a.isSet=function(f,c){var h=f[c];return h!=null&&f.hasOwnProperty(c)?typeof h!="object"||(Array.isArray(h)?h.length:Object.keys(h).length)>0:!1},a.Buffer=function(){try{var s=a.inquire("buffer").Buffer;return s.prototype.utf8Write?s:null}catch{return null}}(),a._Buffer_from=null,a._Buffer_allocUnsafe=null,a.newBuffer=function(f){return typeof f=="number"?a.Buffer?a._Buffer_allocUnsafe(f):new a.Array(f):a.Buffer?a._Buffer_from(f):typeof Uint8Array>"u"?f:new Uint8Array(f)},a.Array=typeof Uint8Array<"u"?Uint8Array:Array,a.Long=a.global.dcodeIO&&a.global.dcodeIO.Long||a.global.Long||a.inquire("long"),a.key2Re=/^true|false|0|1$/,a.key32Re=/^-?(?:0|[1-9][0-9]*)$/,a.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,a.longToHash=function(f){return f?a.LongBits.from(f).toHash():a.LongBits.zeroHash},a.longFromHash=function(f,c){var h=a.LongBits.fromHash(f);return a.Long?a.Long.fromBits(h.lo,h.hi,c):h.toNumber(!!c)};function o(s,f,c){for(var h=Object.keys(f),v=0;v<h.length;++v)(s[h[v]]===void 0||!c)&&(s[h[v]]=f[h[v]]);return s}a.merge=o,a.lcFirst=function(f){return f.charAt(0).toLowerCase()+f.substring(1)};function d(s){function f(c,h){if(!(this instanceof f))return new f(c,h);Object.defineProperty(this,"message",{get:function(){return c}}),Error.captureStackTrace?Error.captureStackTrace(this,f):Object.defineProperty(this,"stack",{value:new Error().stack||""}),h&&o(this,h)}return(f.prototype=Object.create(Error.prototype)).constructor=f,Object.defineProperty(f.prototype,"name",{get:function(){return s}}),f.prototype.toString=function(){return this.name+": "+this.message},f}a.newError=d,a.ProtocolError=d("ProtocolError"),a.oneOfGetter=function(f){for(var c={},h=0;h<f.length;++h)c[f[h]]=1;return function(){for(var v=Object.keys(this),l=v.length-1;l>-1;--l)if(c[v[l]]===1&&this[v[l]]!==void 0&&this[v[l]]!==null)return v[l]}},a.oneOfSetter=function(f){return function(c){for(var h=0;h<f.length;++h)f[h]!==c&&delete this[f[h]]}},a.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},a._configure=function(){var s=a.Buffer;if(!s){a._Buffer_from=a._Buffer_allocUnsafe=null;return}a._Buffer_from=s.from!==Uint8Array.from&&s.from||function(c,h){return new s(c,h)},a._Buffer_allocUnsafe=s.allocUnsafe||function(c){return new s(c)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./longbits":96,"@protobufjs/aspromise":2,"@protobufjs/base64":3,"@protobufjs/eventemitter":4,"@protobufjs/float":5,"@protobufjs/inquire":6,"@protobufjs/pool":7,"@protobufjs/utf8":8}],98:[function(e,i,t){i.exports=v;var n=e("./util/minimal"),a,o=n.LongBits,d=n.base64,s=n.utf8;function f(N,P,M){this.fn=N,this.len=P,this.next=void 0,this.val=M}function c(){}function h(N){this.head=N.head,this.tail=N.tail,this.len=N.len,this.next=N.states}function v(){this.len=0,this.head=new f(c,0,0),this.tail=this.head,this.states=null}var l=function(){return n.Buffer?function(){return(v.create=function(){return new a})()}:function(){return new v}};v.create=l(),v.alloc=function(P){return new n.Array(P)},n.Array!==Array&&(v.alloc=n.pool(v.alloc,n.Array.prototype.subarray)),v.prototype._push=function(P,M,U){return this.tail=this.tail.next=new f(P,M,U),this.len+=M,this};function u(N,P,M){P[M]=N&255}function p(N,P,M){for(;N>127;)P[M++]=N&127|128,N>>>=7;P[M]=N}function m(N,P){this.len=N,this.next=void 0,this.val=P}m.prototype=Object.create(f.prototype),m.prototype.fn=p,v.prototype.uint32=function(P){return this.len+=(this.tail=this.tail.next=new m((P=P>>>0)<128?1:P<16384?2:P<2097152?3:P<268435456?4:5,P)).len,this},v.prototype.int32=function(P){return P<0?this._push(w,10,o.fromNumber(P)):this.uint32(P)},v.prototype.sint32=function(P){return this.uint32((P<<1^P>>31)>>>0)};function w(N,P,M){for(;N.hi;)P[M++]=N.lo&127|128,N.lo=(N.lo>>>7|N.hi<<25)>>>0,N.hi>>>=7;for(;N.lo>127;)P[M++]=N.lo&127|128,N.lo=N.lo>>>7;P[M++]=N.lo}v.prototype.uint64=function(P){var M=o.from(P);return this._push(w,M.length(),M)},v.prototype.int64=v.prototype.uint64,v.prototype.sint64=function(P){var M=o.from(P).zzEncode();return this._push(w,M.length(),M)},v.prototype.bool=function(P){return this._push(u,1,P?1:0)};function _(N,P,M){P[M]=N&255,P[M+1]=N>>>8&255,P[M+2]=N>>>16&255,P[M+3]=N>>>24}v.prototype.fixed32=function(P){return this._push(_,4,P>>>0)},v.prototype.sfixed32=v.prototype.fixed32,v.prototype.fixed64=function(P){var M=o.from(P);return this._push(_,4,M.lo)._push(_,4,M.hi)},v.prototype.sfixed64=v.prototype.fixed64,v.prototype.float=function(P){return this._push(n.float.writeFloatLE,4,P)},v.prototype.double=function(P){return this._push(n.float.writeDoubleLE,8,P)};var C=n.Array.prototype.set?function(P,M,U){M.set(P,U)}:function(P,M,U){for(var W=0;W<P.length;++W)M[U+W]=P[W]};v.prototype.bytes=function(P){var M=P.length>>>0;if(!M)return this._push(u,1,0);if(n.isString(P)){var U=v.alloc(M=d.length(P));d.decode(P,U,0),P=U}return this.uint32(M)._push(C,M,P)},v.prototype.string=function(P){var M=s.length(P);return M?this.uint32(M)._push(s.write,M,P):this._push(u,1,0)},v.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new f(c,0,0),this.len=0,this},v.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new f(c,0,0),this.len=0),this},v.prototype.ldelim=function(){var P=this.head,M=this.tail,U=this.len;return this.reset().uint32(U),U&&(this.tail.next=P.next,this.tail=M,this.len+=U),this},v.prototype.finish=function(){for(var P=this.head.next,M=this.constructor.alloc(this.len),U=0;P;)P.fn(P.val,M,U),U+=P.len,P=P.next;return M},v._configure=function(N){a=N,v.create=l(),a._configure()}},{"./util/minimal":97}],99:[function(e,i,t){i.exports=o;var n=e("./writer");(o.prototype=Object.create(n.prototype)).constructor=o;var a=e("./util/minimal");function o(){n.call(this)}o._configure=function(){o.alloc=a._Buffer_allocUnsafe,o.writeBytesBuffer=a.Buffer&&a.Buffer.prototype instanceof Uint8Array&&a.Buffer.prototype.set.name==="set"?function(f,c,h){c.set(f,h)}:function(f,c,h){if(f.copy)f.copy(c,h,0,f.length);else for(var v=0;v<f.length;)c[h++]=f[v++]}},o.prototype.bytes=function(f){a.isString(f)&&(f=a._Buffer_from(f,"base64"));var c=f.length>>>0;return this.uint32(c),c&&this._push(o.writeBytesBuffer,c,f),this};function d(s,f,c){s.length<40?a.utf8.write(s,f,c):f.utf8Write?f.utf8Write(s,c):f.write(s,c)}o.prototype.string=function(f){var c=a.Buffer.byteLength(f);return this.uint32(c),c&&this._push(d,c,f),this},o._configure()},{"./util/minimal":97,"./writer":98}],100:[function(e,i,t){(function(n){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let a;i.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:n):o=>(a||(a=Promise.resolve())).then(o).catch(d=>setTimeout(()=>{throw d},0))}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],101:[function(e,i,t){class n{constructor(o={}){if(!(o.maxSize&&o.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=o.maxSize,this.onEviction=o.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(o,d){if(this.cache.set(o,d),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(const[s,f]of this.oldCache.entries())this.onEviction(s,f);this.oldCache=this.cache,this.cache=new Map}}get(o){if(this.cache.has(o))return this.cache.get(o);if(this.oldCache.has(o)){const d=this.oldCache.get(o);return this.oldCache.delete(o),this._set(o,d),d}}set(o,d){return this.cache.has(o)?this.cache.set(o,d):this._set(o,d),this}has(o){return this.cache.has(o)||this.oldCache.has(o)}peek(o){if(this.cache.has(o))return this.cache.get(o);if(this.oldCache.has(o))return this.oldCache.get(o)}delete(o){const d=this.cache.delete(o);return d&&this._size--,this.oldCache.delete(o)||d}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[o]of this)yield o}*values(){for(const[,o]of this)yield o}*[Symbol.iterator](){for(const o of this.cache)yield o;for(const o of this.oldCache){const[d]=o;this.cache.has(d)||(yield o)}}get size(){let o=0;for(const d of this.oldCache.keys())this.cache.has(d)||o++;return Math.min(this._size+o,this.maxSize)}}i.exports=n},{}],102:[function(e,i,t){(function(n,a){(function(){var o=65536,d=4294967295;function s(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var f=e("safe-buffer").Buffer,c=a.crypto||a.msCrypto;c&&c.getRandomValues?i.exports=h:i.exports=s;function h(v,l){if(v>d)throw new RangeError("requested too many random bytes");var u=f.allocUnsafe(v);if(v>0)if(v>o)for(var p=0;p<v;p+=o)c.getRandomValues(u.slice(p,p+o));else c.getRandomValues(u);return typeof l=="function"?n.nextTick(function(){l(null,u)}):u}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:254,"safe-buffer":118}],103:[function(e,i,t){function n(h,v){h.prototype=Object.create(v.prototype),h.prototype.constructor=h,h.__proto__=v}var a={};function o(h,v,l){l||(l=Error);function u(m,w,_){return typeof v=="string"?v:v(m,w,_)}var p=function(m){n(w,m);function w(_,C,N){return m.call(this,u(_,C,N))||this}return w}(l);p.prototype.name=l.name,p.prototype.code=h,a[h]=p}function d(h,v){if(Array.isArray(h)){var l=h.length;return h=h.map(function(u){return String(u)}),l>2?"one of ".concat(v," ").concat(h.slice(0,l-1).join(", "),", or ")+h[l-1]:l===2?"one of ".concat(v," ").concat(h[0]," or ").concat(h[1]):"of ".concat(v," ").concat(h[0])}else return"of ".concat(v," ").concat(String(h))}function s(h,v,l){return h.substr(!l||l<0?0:+l,v.length)===v}function f(h,v,l){return(l===void 0||l>h.length)&&(l=h.length),h.substring(l-v.length,l)===v}function c(h,v,l){return typeof l!="number"&&(l=0),l+v.length>h.length?!1:h.indexOf(v,l)!==-1}o("ERR_INVALID_OPT_VALUE",function(h,v){return'The value "'+v+'" is invalid for option "'+h+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(h,v,l){var u;typeof v=="string"&&s(v,"not ")?(u="must not be",v=v.replace(/^not /,"")):u="must be";var p;if(f(h," argument"))p="The ".concat(h," ").concat(u," ").concat(d(v,"type"));else{var m=c(h,".")?"property":"argument";p='The "'.concat(h,'" ').concat(m," ").concat(u," ").concat(d(v,"type"))}return p+=". Received type ".concat(typeof l),p},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(h){return"The "+h+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(h){return"Cannot call "+h+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(h){return"Unknown encoding: "+h},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i.exports.codes=a},{}],104:[function(e,i,t){(function(n){(function(){var a=Object.keys||function(u){var p=[];for(var m in u)p.push(m);return p};i.exports=h;var o=e("./_stream_readable"),d=e("./_stream_writable");e("inherits")(h,o);for(var s=a(d.prototype),f=0;f<s.length;f++){var c=s[f];h.prototype[c]||(h.prototype[c]=d.prototype[c])}function h(u){if(!(this instanceof h))return new h(u);o.call(this,u),d.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",v)))}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function v(){this._writableState.ended||n.nextTick(l,this)}function l(u){u.end()}Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(p){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=p,this._writableState.destroyed=p)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":106,"./_stream_writable":108,_process:254,inherits:47}],105:[function(e,i,t){i.exports=a;var n=e("./_stream_transform");e("inherits")(a,n);function a(o){if(!(this instanceof a))return new a(o);n.call(this,o)}a.prototype._transform=function(o,d,s){s(null,o)}},{"./_stream_transform":107,inherits:47}],106:[function(e,i,t){(function(n,a){(function(){i.exports=S;var o;S.ReadableState=x,e("events").EventEmitter;var d=function(ee,Q){return ee.listeners(Q).length},s=e("./internal/streams/stream"),f=e("buffer").Buffer,c=(typeof a<"u"?a:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function h(te){return f.from(te)}function v(te){return f.isBuffer(te)||te instanceof c}var l=e("util"),u;l&&l.debuglog?u=l.debuglog("stream"):u=function(){};var p=e("./internal/streams/buffer_list"),m=e("./internal/streams/destroy"),w=e("./internal/streams/state"),_=w.getHighWaterMark,C=e("../errors").codes,N=C.ERR_INVALID_ARG_TYPE,P=C.ERR_STREAM_PUSH_AFTER_EOF,M=C.ERR_METHOD_NOT_IMPLEMENTED,U=C.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,W,q,Z;e("inherits")(S,s);var re=m.errorOrDestroy,Y=["error","close","destroy","pause","resume"];function O(te,ee,Q){if(typeof te.prependListener=="function")return te.prependListener(ee,Q);!te._events||!te._events[ee]?te.on(ee,Q):Array.isArray(te._events[ee])?te._events[ee].unshift(Q):te._events[ee]=[Q,te._events[ee]]}function x(te,ee,Q){o=o||e("./_stream_duplex"),te=te||{},typeof Q!="boolean"&&(Q=ee instanceof o),this.objectMode=!!te.objectMode,Q&&(this.objectMode=this.objectMode||!!te.readableObjectMode),this.highWaterMark=_(this,te,"readableHighWaterMark",Q),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=te.emitClose!==!1,this.autoDestroy=!!te.autoDestroy,this.destroyed=!1,this.defaultEncoding=te.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,te.encoding&&(W||(W=e("string_decoder/").StringDecoder),this.decoder=new W(te.encoding),this.encoding=te.encoding)}function S(te){if(o=o||e("./_stream_duplex"),!(this instanceof S))return new S(te);var ee=this instanceof o;this._readableState=new x(te,this,ee),this.readable=!0,te&&(typeof te.read=="function"&&(this._read=te.read),typeof te.destroy=="function"&&(this._destroy=te.destroy)),s.call(this)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ee){this._readableState&&(this._readableState.destroyed=ee)}}),S.prototype.destroy=m.destroy,S.prototype._undestroy=m.undestroy,S.prototype._destroy=function(te,ee){ee(te)},S.prototype.push=function(te,ee){var Q=this._readableState,F;return Q.objectMode?F=!0:typeof te=="string"&&(ee=ee||Q.defaultEncoding,ee!==Q.encoding&&(te=f.from(te,ee),ee=""),F=!0),k(this,te,ee,!1,F)},S.prototype.unshift=function(te){return k(this,te,null,!0,!1)};function k(te,ee,Q,F,$){u("readableAddChunk",ee);var X=te._readableState;if(ee===null)X.reading=!1,G(te,X);else{var se;if($||(se=E(X,ee)),se)re(te,se);else if(X.objectMode||ee&&ee.length>0)if(typeof ee!="string"&&!X.objectMode&&Object.getPrototypeOf(ee)!==f.prototype&&(ee=h(ee)),F)X.endEmitted?re(te,new U):g(te,X,ee,!0);else if(X.ended)re(te,new P);else{if(X.destroyed)return!1;X.reading=!1,X.decoder&&!Q?(ee=X.decoder.write(ee),X.objectMode||ee.length!==0?g(te,X,ee,!1):B(te,X)):g(te,X,ee,!1)}else F||(X.reading=!1,B(te,X))}return!X.ended&&(X.length<X.highWaterMark||X.length===0)}function g(te,ee,Q,F){ee.flowing&&ee.length===0&&!ee.sync?(ee.awaitDrain=0,te.emit("data",Q)):(ee.length+=ee.objectMode?1:Q.length,F?ee.buffer.unshift(Q):ee.buffer.push(Q),ee.needReadable&&I(te)),B(te,ee)}function E(te,ee){var Q;return!v(ee)&&typeof ee!="string"&&ee!==void 0&&!te.objectMode&&(Q=new N("chunk",["string","Buffer","Uint8Array"],ee)),Q}S.prototype.isPaused=function(){return this._readableState.flowing===!1},S.prototype.setEncoding=function(te){W||(W=e("string_decoder/").StringDecoder);var ee=new W(te);this._readableState.decoder=ee,this._readableState.encoding=this._readableState.decoder.encoding;for(var Q=this._readableState.buffer.head,F="";Q!==null;)F+=ee.write(Q.data),Q=Q.next;return this._readableState.buffer.clear(),F!==""&&this._readableState.buffer.push(F),this._readableState.length=F.length,this};var T=1073741824;function A(te){return te>=T?te=T:(te--,te|=te>>>1,te|=te>>>2,te|=te>>>4,te|=te>>>8,te|=te>>>16,te++),te}function J(te,ee){return te<=0||ee.length===0&&ee.ended?0:ee.objectMode?1:te!==te?ee.flowing&&ee.length?ee.buffer.head.data.length:ee.length:(te>ee.highWaterMark&&(ee.highWaterMark=A(te)),te<=ee.length?te:ee.ended?ee.length:(ee.needReadable=!0,0))}S.prototype.read=function(te){u("read",te),te=parseInt(te,10);var ee=this._readableState,Q=te;if(te!==0&&(ee.emittedReadable=!1),te===0&&ee.needReadable&&((ee.highWaterMark!==0?ee.length>=ee.highWaterMark:ee.length>0)||ee.ended))return u("read: emitReadable",ee.length,ee.ended),ee.length===0&&ee.ended?ge(this):I(this),null;if(te=J(te,ee),te===0&&ee.ended)return ee.length===0&&ge(this),null;var F=ee.needReadable;u("need readable",F),(ee.length===0||ee.length-te<ee.highWaterMark)&&(F=!0,u("length less than watermark",F)),ee.ended||ee.reading?(F=!1,u("reading or ended",F)):F&&(u("do read"),ee.reading=!0,ee.sync=!0,ee.length===0&&(ee.needReadable=!0),this._read(ee.highWaterMark),ee.sync=!1,ee.reading||(te=J(Q,ee)));var $;return te>0?$=ce(te,ee):$=null,$===null?(ee.needReadable=ee.length<=ee.highWaterMark,te=0):(ee.length-=te,ee.awaitDrain=0),ee.length===0&&(ee.ended||(ee.needReadable=!0),Q!==te&&ee.ended&&ge(this)),$!==null&&this.emit("data",$),$};function G(te,ee){if(u("onEofChunk"),!ee.ended){if(ee.decoder){var Q=ee.decoder.end();Q&&Q.length&&(ee.buffer.push(Q),ee.length+=ee.objectMode?1:Q.length)}ee.ended=!0,ee.sync?I(te):(ee.needReadable=!1,ee.emittedReadable||(ee.emittedReadable=!0,V(te)))}}function I(te){var ee=te._readableState;u("emitReadable",ee.needReadable,ee.emittedReadable),ee.needReadable=!1,ee.emittedReadable||(u("emitReadable",ee.flowing),ee.emittedReadable=!0,n.nextTick(V,te))}function V(te){var ee=te._readableState;u("emitReadable_",ee.destroyed,ee.length,ee.ended),!ee.destroyed&&(ee.length||ee.ended)&&(te.emit("readable"),ee.emittedReadable=!1),ee.needReadable=!ee.flowing&&!ee.ended&&ee.length<=ee.highWaterMark,oe(te)}function B(te,ee){ee.readingMore||(ee.readingMore=!0,n.nextTick(z,te,ee))}function z(te,ee){for(;!ee.reading&&!ee.ended&&(ee.length<ee.highWaterMark||ee.flowing&&ee.length===0);){var Q=ee.length;if(u("maybeReadMore read 0"),te.read(0),Q===ee.length)break}ee.readingMore=!1}S.prototype._read=function(te){re(this,new M("_read()"))},S.prototype.pipe=function(te,ee){var Q=this,F=this._readableState;switch(F.pipesCount){case 0:F.pipes=te;break;case 1:F.pipes=[F.pipes,te];break;default:F.pipes.push(te);break}F.pipesCount+=1,u("pipe count=%d opts=%j",F.pipesCount,ee);var $=(!ee||ee.end!==!1)&&te!==n.stdout&&te!==n.stderr,X=$?ve:b;F.endEmitted?n.nextTick(X):Q.once("end",X),te.on("unpipe",se);function se(D,K){u("onunpipe"),D===Q&&K&&K.hasUnpiped===!1&&(K.hasUnpiped=!0,y())}function ve(){u("onend"),te.end()}var Se=ie(Q);te.on("drain",Se);var ue=!1;function y(){u("cleanup"),te.removeListener("close",fe),te.removeListener("finish",j),te.removeListener("drain",Se),te.removeListener("error",H),te.removeListener("unpipe",se),Q.removeListener("end",ve),Q.removeListener("end",b),Q.removeListener("data",L),ue=!0,F.awaitDrain&&(!te._writableState||te._writableState.needDrain)&&Se()}Q.on("data",L);function L(D){u("ondata");var K=te.write(D);u("dest.write",K),K===!1&&((F.pipesCount===1&&F.pipes===te||F.pipesCount>1&&le(F.pipes,te)!==-1)&&!ue&&(u("false write response, pause",F.awaitDrain),F.awaitDrain++),Q.pause())}function H(D){u("onerror",D),b(),te.removeListener("error",H),d(te,"error")===0&&re(te,D)}O(te,"error",H);function fe(){te.removeListener("finish",j),b()}te.once("close",fe);function j(){u("onfinish"),te.removeListener("close",fe),b()}te.once("finish",j);function b(){u("unpipe"),Q.unpipe(te)}return te.emit("pipe",Q),F.flowing||(u("pipe resume"),Q.resume()),te};function ie(te){return function(){var Q=te._readableState;u("pipeOnDrain",Q.awaitDrain),Q.awaitDrain&&Q.awaitDrain--,Q.awaitDrain===0&&d(te,"data")&&(Q.flowing=!0,oe(te))}}S.prototype.unpipe=function(te){var ee=this._readableState,Q={hasUnpiped:!1};if(ee.pipesCount===0)return this;if(ee.pipesCount===1)return te&&te!==ee.pipes?this:(te||(te=ee.pipes),ee.pipes=null,ee.pipesCount=0,ee.flowing=!1,te&&te.emit("unpipe",this,Q),this);if(!te){var F=ee.pipes,$=ee.pipesCount;ee.pipes=null,ee.pipesCount=0,ee.flowing=!1;for(var X=0;X<$;X++)F[X].emit("unpipe",this,{hasUnpiped:!1});return this}var se=le(ee.pipes,te);return se===-1?this:(ee.pipes.splice(se,1),ee.pipesCount-=1,ee.pipesCount===1&&(ee.pipes=ee.pipes[0]),te.emit("unpipe",this,Q),this)},S.prototype.on=function(te,ee){var Q=s.prototype.on.call(this,te,ee),F=this._readableState;return te==="data"?(F.readableListening=this.listenerCount("readable")>0,F.flowing!==!1&&this.resume()):te==="readable"&&!F.endEmitted&&!F.readableListening&&(F.readableListening=F.needReadable=!0,F.flowing=!1,F.emittedReadable=!1,u("on readable",F.length,F.reading),F.length?I(this):F.reading||n.nextTick(me,this)),Q},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(te,ee){var Q=s.prototype.removeListener.call(this,te,ee);return te==="readable"&&n.nextTick(de,this),Q},S.prototype.removeAllListeners=function(te){var ee=s.prototype.removeAllListeners.apply(this,arguments);return(te==="readable"||te===void 0)&&n.nextTick(de,this),ee};function de(te){var ee=te._readableState;ee.readableListening=te.listenerCount("readable")>0,ee.resumeScheduled&&!ee.paused?ee.flowing=!0:te.listenerCount("data")>0&&te.resume()}function me(te){u("readable nexttick read 0"),te.read(0)}S.prototype.resume=function(){var te=this._readableState;return te.flowing||(u("resume"),te.flowing=!te.readableListening,be(this,te)),te.paused=!1,this};function be(te,ee){ee.resumeScheduled||(ee.resumeScheduled=!0,n.nextTick(we,te,ee))}function we(te,ee){u("resume",ee.reading),ee.reading||te.read(0),ee.resumeScheduled=!1,te.emit("resume"),oe(te),ee.flowing&&!ee.reading&&te.read(0)}S.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function oe(te){var ee=te._readableState;for(u("flow",ee.flowing);ee.flowing&&te.read()!==null;);}S.prototype.wrap=function(te){var ee=this,Q=this._readableState,F=!1;te.on("end",function(){if(u("wrapped end"),Q.decoder&&!Q.ended){var se=Q.decoder.end();se&&se.length&&ee.push(se)}ee.push(null)}),te.on("data",function(se){if(u("wrapped data"),Q.decoder&&(se=Q.decoder.write(se)),!(Q.objectMode&&se==null)&&!(!Q.objectMode&&(!se||!se.length))){var ve=ee.push(se);ve||(F=!0,te.pause())}});for(var $ in te)this[$]===void 0&&typeof te[$]=="function"&&(this[$]=function(ve){return function(){return te[ve].apply(te,arguments)}}($));for(var X=0;X<Y.length;X++)te.on(Y[X],this.emit.bind(this,Y[X]));return this._read=function(se){u("wrapped _read",se),F&&(F=!1,te.resume())},this},typeof Symbol=="function"&&(S.prototype[Symbol.asyncIterator]=function(){return q===void 0&&(q=e("./internal/streams/async_iterator")),q(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ee){this._readableState&&(this._readableState.flowing=ee)}}),S._fromList=ce,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ce(te,ee){if(ee.length===0)return null;var Q;return ee.objectMode?Q=ee.buffer.shift():!te||te>=ee.length?(ee.decoder?Q=ee.buffer.join(""):ee.buffer.length===1?Q=ee.buffer.first():Q=ee.buffer.concat(ee.length),ee.buffer.clear()):Q=ee.buffer.consume(te,ee.decoder),Q}function ge(te){var ee=te._readableState;u("endReadable",ee.endEmitted),ee.endEmitted||(ee.ended=!0,n.nextTick(ke,ee,te))}function ke(te,ee){if(u("endReadableNT",te.endEmitted,te.length),!te.endEmitted&&te.length===0&&(te.endEmitted=!0,ee.readable=!1,ee.emit("end"),te.autoDestroy)){var Q=ee._writableState;(!Q||Q.autoDestroy&&Q.finished)&&ee.destroy()}}typeof Symbol=="function"&&(S.from=function(te,ee){return Z===void 0&&(Z=e("./internal/streams/from")),Z(S,te,ee)});function le(te,ee){for(var Q=0,F=te.length;Q<F;Q++)if(te[Q]===ee)return Q;return-1}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":103,"./_stream_duplex":104,"./internal/streams/async_iterator":109,"./internal/streams/buffer_list":110,"./internal/streams/destroy":111,"./internal/streams/from":113,"./internal/streams/state":115,"./internal/streams/stream":116,_process:254,buffer:171,events:207,inherits:47,"string_decoder/":121,util:142}],107:[function(e,i,t){i.exports=h;var n=e("../errors").codes,a=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,d=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,f=e("./_stream_duplex");e("inherits")(h,f);function c(u,p){var m=this._transformState;m.transforming=!1;var w=m.writecb;if(w===null)return this.emit("error",new o);m.writechunk=null,m.writecb=null,p!=null&&this.push(p),w(u);var _=this._readableState;_.reading=!1,(_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}function h(u){if(!(this instanceof h))return new h(u);f.call(this,u),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",v)}function v(){var u=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(p,m){l(u,p,m)}):l(this,null,null)}h.prototype.push=function(u,p){return this._transformState.needTransform=!1,f.prototype.push.call(this,u,p)},h.prototype._transform=function(u,p,m){m(new a("_transform()"))},h.prototype._write=function(u,p,m){var w=this._transformState;if(w.writecb=m,w.writechunk=u,w.writeencoding=p,!w.transforming){var _=this._readableState;(w.needTransform||_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}},h.prototype._read=function(u){var p=this._transformState;p.writechunk!==null&&!p.transforming?(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform)):p.needTransform=!0},h.prototype._destroy=function(u,p){f.prototype._destroy.call(this,u,function(m){p(m)})};function l(u,p,m){if(p)return u.emit("error",p);if(m!=null&&u.push(m),u._writableState.length)throw new s;if(u._transformState.transforming)throw new d;return u.push(null)}},{"../errors":103,"./_stream_duplex":104,inherits:47}],108:[function(e,i,t){(function(n,a){(function(){i.exports=x;function o(oe){var ce=this;this.next=null,this.entry=null,this.finish=function(){we(ce,oe)}}var d;x.WritableState=Y;var s={deprecate:e("util-deprecate")},f=e("./internal/streams/stream"),c=e("buffer").Buffer,h=(typeof a<"u"?a:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function v(oe){return c.from(oe)}function l(oe){return c.isBuffer(oe)||oe instanceof h}var u=e("./internal/streams/destroy"),p=e("./internal/streams/state"),m=p.getHighWaterMark,w=e("../errors").codes,_=w.ERR_INVALID_ARG_TYPE,C=w.ERR_METHOD_NOT_IMPLEMENTED,N=w.ERR_MULTIPLE_CALLBACK,P=w.ERR_STREAM_CANNOT_PIPE,M=w.ERR_STREAM_DESTROYED,U=w.ERR_STREAM_NULL_VALUES,W=w.ERR_STREAM_WRITE_AFTER_END,q=w.ERR_UNKNOWN_ENCODING,Z=u.errorOrDestroy;e("inherits")(x,f);function re(){}function Y(oe,ce,ge){d=d||e("./_stream_duplex"),oe=oe||{},typeof ge!="boolean"&&(ge=ce instanceof d),this.objectMode=!!oe.objectMode,ge&&(this.objectMode=this.objectMode||!!oe.writableObjectMode),this.highWaterMark=m(this,oe,"writableHighWaterMark",ge),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ke=oe.decodeStrings===!1;this.decodeStrings=!ke,this.defaultEncoding=oe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(le){G(ce,le)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=oe.emitClose!==!1,this.autoDestroy=!!oe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}Y.prototype.getBuffer=function(){for(var ce=this.bufferedRequest,ge=[];ce;)ge.push(ce),ce=ce.next;return ge},function(){try{Object.defineProperty(Y.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var O;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(O=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(ce){return O.call(this,ce)?!0:this!==x?!1:ce&&ce._writableState instanceof Y}})):O=function(ce){return ce instanceof this};function x(oe){d=d||e("./_stream_duplex");var ce=this instanceof d;if(!ce&&!O.call(x,this))return new x(oe);this._writableState=new Y(oe,this,ce),this.writable=!0,oe&&(typeof oe.write=="function"&&(this._write=oe.write),typeof oe.writev=="function"&&(this._writev=oe.writev),typeof oe.destroy=="function"&&(this._destroy=oe.destroy),typeof oe.final=="function"&&(this._final=oe.final)),f.call(this)}x.prototype.pipe=function(){Z(this,new P)};function S(oe,ce){var ge=new W;Z(oe,ge),n.nextTick(ce,ge)}function k(oe,ce,ge,ke){var le;return ge===null?le=new U:typeof ge!="string"&&!ce.objectMode&&(le=new _("chunk",["string","Buffer"],ge)),le?(Z(oe,le),n.nextTick(ke,le),!1):!0}x.prototype.write=function(oe,ce,ge){var ke=this._writableState,le=!1,te=!ke.objectMode&&l(oe);return te&&!c.isBuffer(oe)&&(oe=v(oe)),typeof ce=="function"&&(ge=ce,ce=null),te?ce="buffer":ce||(ce=ke.defaultEncoding),typeof ge!="function"&&(ge=re),ke.ending?S(this,ge):(te||k(this,ke,oe,ge))&&(ke.pendingcb++,le=E(this,ke,te,oe,ce,ge)),le},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var oe=this._writableState;oe.corked&&(oe.corked--,!oe.writing&&!oe.corked&&!oe.bufferProcessing&&oe.bufferedRequest&&B(this,oe))},x.prototype.setDefaultEncoding=function(ce){if(typeof ce=="string"&&(ce=ce.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ce+"").toLowerCase())>-1))throw new q(ce);return this._writableState.defaultEncoding=ce,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function g(oe,ce,ge){return!oe.objectMode&&oe.decodeStrings!==!1&&typeof ce=="string"&&(ce=c.from(ce,ge)),ce}Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function E(oe,ce,ge,ke,le,te){if(!ge){var ee=g(ce,ke,le);ke!==ee&&(ge=!0,le="buffer",ke=ee)}var Q=ce.objectMode?1:ke.length;ce.length+=Q;var F=ce.length<ce.highWaterMark;if(F||(ce.needDrain=!0),ce.writing||ce.corked){var $=ce.lastBufferedRequest;ce.lastBufferedRequest={chunk:ke,encoding:le,isBuf:ge,callback:te,next:null},$?$.next=ce.lastBufferedRequest:ce.bufferedRequest=ce.lastBufferedRequest,ce.bufferedRequestCount+=1}else T(oe,ce,!1,Q,ke,le,te);return F}function T(oe,ce,ge,ke,le,te,ee){ce.writelen=ke,ce.writecb=ee,ce.writing=!0,ce.sync=!0,ce.destroyed?ce.onwrite(new M("write")):ge?oe._writev(le,ce.onwrite):oe._write(le,te,ce.onwrite),ce.sync=!1}function A(oe,ce,ge,ke,le){--ce.pendingcb,ge?(n.nextTick(le,ke),n.nextTick(me,oe,ce),oe._writableState.errorEmitted=!0,Z(oe,ke)):(le(ke),oe._writableState.errorEmitted=!0,Z(oe,ke),me(oe,ce))}function J(oe){oe.writing=!1,oe.writecb=null,oe.length-=oe.writelen,oe.writelen=0}function G(oe,ce){var ge=oe._writableState,ke=ge.sync,le=ge.writecb;if(typeof le!="function")throw new N;if(J(ge),ce)A(oe,ge,ke,ce,le);else{var te=z(ge)||oe.destroyed;!te&&!ge.corked&&!ge.bufferProcessing&&ge.bufferedRequest&&B(oe,ge),ke?n.nextTick(I,oe,ge,te,le):I(oe,ge,te,le)}}function I(oe,ce,ge,ke){ge||V(oe,ce),ce.pendingcb--,ke(),me(oe,ce)}function V(oe,ce){ce.length===0&&ce.needDrain&&(ce.needDrain=!1,oe.emit("drain"))}function B(oe,ce){ce.bufferProcessing=!0;var ge=ce.bufferedRequest;if(oe._writev&&ge&&ge.next){var ke=ce.bufferedRequestCount,le=new Array(ke),te=ce.corkedRequestsFree;te.entry=ge;for(var ee=0,Q=!0;ge;)le[ee]=ge,ge.isBuf||(Q=!1),ge=ge.next,ee+=1;le.allBuffers=Q,T(oe,ce,!0,ce.length,le,"",te.finish),ce.pendingcb++,ce.lastBufferedRequest=null,te.next?(ce.corkedRequestsFree=te.next,te.next=null):ce.corkedRequestsFree=new o(ce),ce.bufferedRequestCount=0}else{for(;ge;){var F=ge.chunk,$=ge.encoding,X=ge.callback,se=ce.objectMode?1:F.length;if(T(oe,ce,!1,se,F,$,X),ge=ge.next,ce.bufferedRequestCount--,ce.writing)break}ge===null&&(ce.lastBufferedRequest=null)}ce.bufferedRequest=ge,ce.bufferProcessing=!1}x.prototype._write=function(oe,ce,ge){ge(new C("_write()"))},x.prototype._writev=null,x.prototype.end=function(oe,ce,ge){var ke=this._writableState;return typeof oe=="function"?(ge=oe,oe=null,ce=null):typeof ce=="function"&&(ge=ce,ce=null),oe!=null&&this.write(oe,ce),ke.corked&&(ke.corked=1,this.uncork()),ke.ending||be(this,ke,ge),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function z(oe){return oe.ending&&oe.length===0&&oe.bufferedRequest===null&&!oe.finished&&!oe.writing}function ie(oe,ce){oe._final(function(ge){ce.pendingcb--,ge&&Z(oe,ge),ce.prefinished=!0,oe.emit("prefinish"),me(oe,ce)})}function de(oe,ce){!ce.prefinished&&!ce.finalCalled&&(typeof oe._final=="function"&&!ce.destroyed?(ce.pendingcb++,ce.finalCalled=!0,n.nextTick(ie,oe,ce)):(ce.prefinished=!0,oe.emit("prefinish")))}function me(oe,ce){var ge=z(ce);if(ge&&(de(oe,ce),ce.pendingcb===0&&(ce.finished=!0,oe.emit("finish"),ce.autoDestroy))){var ke=oe._readableState;(!ke||ke.autoDestroy&&ke.endEmitted)&&oe.destroy()}return ge}function be(oe,ce,ge){ce.ending=!0,me(oe,ce),ge&&(ce.finished?n.nextTick(ge):oe.once("finish",ge)),ce.ended=!0,oe.writable=!1}function we(oe,ce,ge){var ke=oe.entry;for(oe.entry=null;ke;){var le=ke.callback;ce.pendingcb--,le(ge),ke=ke.next}ce.corkedRequestsFree.next=oe}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(ce){this._writableState&&(this._writableState.destroyed=ce)}}),x.prototype.destroy=u.destroy,x.prototype._undestroy=u.undestroy,x.prototype._destroy=function(oe,ce){ce(oe)}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":103,"./_stream_duplex":104,"./internal/streams/destroy":111,"./internal/streams/state":115,"./internal/streams/stream":116,_process:254,buffer:171,inherits:47,"util-deprecate":122}],109:[function(e,i,t){(function(n){(function(){var a;function o(W,q,Z){return q=d(q),q in W?Object.defineProperty(W,q,{value:Z,enumerable:!0,configurable:!0,writable:!0}):W[q]=Z,W}function d(W){var q=s(W,"string");return typeof q=="symbol"?q:String(q)}function s(W,q){if(typeof W!="object"||W===null)return W;var Z=W[Symbol.toPrimitive];if(Z!==void 0){var re=Z.call(W,q||"default");if(typeof re!="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(W)}var f=e("./end-of-stream"),c=Symbol("lastResolve"),h=Symbol("lastReject"),v=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),p=Symbol("handlePromise"),m=Symbol("stream");function w(W,q){return{value:W,done:q}}function _(W){var q=W[c];if(q!==null){var Z=W[m].read();Z!==null&&(W[u]=null,W[c]=null,W[h]=null,q(w(Z,!1)))}}function C(W){n.nextTick(_,W)}function N(W,q){return function(Z,re){W.then(function(){if(q[l]){Z(w(void 0,!0));return}q[p](Z,re)},re)}}var P=Object.getPrototypeOf(function(){}),M=Object.setPrototypeOf((a={get stream(){return this[m]},next:function(){var q=this,Z=this[v];if(Z!==null)return Promise.reject(Z);if(this[l])return Promise.resolve(w(void 0,!0));if(this[m].destroyed)return new Promise(function(x,S){n.nextTick(function(){q[v]?S(q[v]):x(w(void 0,!0))})});var re=this[u],Y;if(re)Y=new Promise(N(re,this));else{var O=this[m].read();if(O!==null)return Promise.resolve(w(O,!1));Y=new Promise(this[p])}return this[u]=Y,Y}},o(a,Symbol.asyncIterator,function(){return this}),o(a,"return",function(){var q=this;return new Promise(function(Z,re){q[m].destroy(null,function(Y){if(Y){re(Y);return}Z(w(void 0,!0))})})}),a),P),U=function(q){var Z,re=Object.create(M,(Z={},o(Z,m,{value:q,writable:!0}),o(Z,c,{value:null,writable:!0}),o(Z,h,{value:null,writable:!0}),o(Z,v,{value:null,writable:!0}),o(Z,l,{value:q._readableState.endEmitted,writable:!0}),o(Z,p,{value:function(O,x){var S=re[m].read();S?(re[u]=null,re[c]=null,re[h]=null,O(w(S,!1))):(re[c]=O,re[h]=x)},writable:!0}),Z));return re[u]=null,f(q,function(Y){if(Y&&Y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var O=re[h];O!==null&&(re[u]=null,re[c]=null,re[h]=null,O(Y)),re[v]=Y;return}var x=re[c];x!==null&&(re[u]=null,re[c]=null,re[h]=null,x(w(void 0,!0))),re[l]=!0}),q.on("readable",C.bind(null,re)),re};i.exports=U}).call(this)}).call(this,e("_process"))},{"./end-of-stream":112,_process:254}],110:[function(e,i,t){function n(_,C){var N=Object.keys(_);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(_);C&&(P=P.filter(function(M){return Object.getOwnPropertyDescriptor(_,M).enumerable})),N.push.apply(N,P)}return N}function a(_){for(var C=1;C<arguments.length;C++){var N=arguments[C]!=null?arguments[C]:{};C%2?n(Object(N),!0).forEach(function(P){o(_,P,N[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(N)):n(Object(N)).forEach(function(P){Object.defineProperty(_,P,Object.getOwnPropertyDescriptor(N,P))})}return _}function o(_,C,N){return C=c(C),C in _?Object.defineProperty(_,C,{value:N,enumerable:!0,configurable:!0,writable:!0}):_[C]=N,_}function d(_,C){if(!(_ instanceof C))throw new TypeError("Cannot call a class as a function")}function s(_,C){for(var N=0;N<C.length;N++){var P=C[N];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(_,c(P.key),P)}}function f(_,C,N){return C&&s(_.prototype,C),N&&s(_,N),Object.defineProperty(_,"prototype",{writable:!1}),_}function c(_){var C=h(_,"string");return typeof C=="symbol"?C:String(C)}function h(_,C){if(typeof _!="object"||_===null)return _;var N=_[Symbol.toPrimitive];if(N!==void 0){var P=N.call(_,C||"default");if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(_)}var v=e("buffer"),l=v.Buffer,u=e("util"),p=u.inspect,m=p&&p.custom||"inspect";function w(_,C,N){l.prototype.copy.call(_,C,N)}i.exports=function(){function _(){d(this,_),this.head=null,this.tail=null,this.length=0}return f(_,[{key:"push",value:function(N){var P={data:N,next:null};this.length>0?this.tail.next=P:this.head=P,this.tail=P,++this.length}},{key:"unshift",value:function(N){var P={data:N,next:this.head};this.length===0&&(this.tail=P),this.head=P,++this.length}},{key:"shift",value:function(){if(this.length!==0){var N=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,N}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(N){if(this.length===0)return"";for(var P=this.head,M=""+P.data;P=P.next;)M+=N+P.data;return M}},{key:"concat",value:function(N){if(this.length===0)return l.alloc(0);for(var P=l.allocUnsafe(N>>>0),M=this.head,U=0;M;)w(M.data,P,U),U+=M.data.length,M=M.next;return P}},{key:"consume",value:function(N,P){var M;return N<this.head.data.length?(M=this.head.data.slice(0,N),this.head.data=this.head.data.slice(N)):N===this.head.data.length?M=this.shift():M=P?this._getString(N):this._getBuffer(N),M}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(N){var P=this.head,M=1,U=P.data;for(N-=U.length;P=P.next;){var W=P.data,q=N>W.length?W.length:N;if(q===W.length?U+=W:U+=W.slice(0,N),N-=q,N===0){q===W.length?(++M,P.next?this.head=P.next:this.head=this.tail=null):(this.head=P,P.data=W.slice(q));break}++M}return this.length-=M,U}},{key:"_getBuffer",value:function(N){var P=l.allocUnsafe(N),M=this.head,U=1;for(M.data.copy(P),N-=M.data.length;M=M.next;){var W=M.data,q=N>W.length?W.length:N;if(W.copy(P,P.length-N,0,q),N-=q,N===0){q===W.length?(++U,M.next?this.head=M.next:this.head=this.tail=null):(this.head=M,M.data=W.slice(q));break}++U}return this.length-=U,P}},{key:m,value:function(N,P){return p(this,a(a({},P),{},{depth:0,customInspect:!1}))}}]),_}()},{buffer:171,util:142}],111:[function(e,i,t){(function(n){(function(){function a(h,v){var l=this,u=this._readableState&&this._readableState.destroyed,p=this._writableState&&this._writableState.destroyed;return u||p?(v?v(h):h&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(f,this,h)):n.nextTick(f,this,h)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(h||null,function(m){!v&&m?l._writableState?l._writableState.errorEmitted?n.nextTick(d,l):(l._writableState.errorEmitted=!0,n.nextTick(o,l,m)):n.nextTick(o,l,m):v?(n.nextTick(d,l),v(m)):n.nextTick(d,l)}),this)}function o(h,v){f(h,v),d(h)}function d(h){h._writableState&&!h._writableState.emitClose||h._readableState&&!h._readableState.emitClose||h.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function f(h,v){h.emit("error",v)}function c(h,v){var l=h._readableState,u=h._writableState;l&&l.autoDestroy||u&&u.autoDestroy?h.destroy(v):h.emit("error",v)}i.exports={destroy:a,undestroy:s,errorOrDestroy:c}}).call(this)}).call(this,e("_process"))},{_process:254}],112:[function(e,i,t){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function a(f){var c=!1;return function(){if(!c){c=!0;for(var h=arguments.length,v=new Array(h),l=0;l<h;l++)v[l]=arguments[l];f.apply(this,v)}}}function o(){}function d(f){return f.setHeader&&typeof f.abort=="function"}function s(f,c,h){if(typeof c=="function")return s(f,null,c);c||(c={}),h=a(h||o);var v=c.readable||c.readable!==!1&&f.readable,l=c.writable||c.writable!==!1&&f.writable,u=function(){f.writable||m()},p=f._writableState&&f._writableState.finished,m=function(){l=!1,p=!0,v||h.call(f)},w=f._readableState&&f._readableState.endEmitted,_=function(){v=!1,w=!0,l||h.call(f)},C=function(U){h.call(f,U)},N=function(){var U;if(v&&!w)return(!f._readableState||!f._readableState.ended)&&(U=new n),h.call(f,U);if(l&&!p)return(!f._writableState||!f._writableState.ended)&&(U=new n),h.call(f,U)},P=function(){f.req.on("finish",m)};return d(f)?(f.on("complete",m),f.on("abort",N),f.req?P():f.on("request",P)):l&&!f._writableState&&(f.on("end",u),f.on("close",u)),f.on("end",_),f.on("finish",m),c.error!==!1&&f.on("error",C),f.on("close",N),function(){f.removeListener("complete",m),f.removeListener("abort",N),f.removeListener("request",P),f.req&&f.req.removeListener("finish",m),f.removeListener("end",u),f.removeListener("close",u),f.removeListener("finish",m),f.removeListener("end",_),f.removeListener("error",C),f.removeListener("close",N)}}i.exports=s},{"../../../errors":103}],113:[function(e,i,t){i.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],114:[function(e,i,t){var n;function a(m){var w=!1;return function(){w||(w=!0,m.apply(void 0,arguments))}}var o=e("../../../errors").codes,d=o.ERR_MISSING_ARGS,s=o.ERR_STREAM_DESTROYED;function f(m){if(m)throw m}function c(m){return m.setHeader&&typeof m.abort=="function"}function h(m,w,_,C){C=a(C);var N=!1;m.on("close",function(){N=!0}),n===void 0&&(n=e("./end-of-stream")),n(m,{readable:w,writable:_},function(M){if(M)return C(M);N=!0,C()});var P=!1;return function(M){if(!N&&!P){if(P=!0,c(m))return m.abort();if(typeof m.destroy=="function")return m.destroy();C(M||new s("pipe"))}}}function v(m){m()}function l(m,w){return m.pipe(w)}function u(m){return!m.length||typeof m[m.length-1]!="function"?f:m.pop()}function p(){for(var m=arguments.length,w=new Array(m),_=0;_<m;_++)w[_]=arguments[_];var C=u(w);if(Array.isArray(w[0])&&(w=w[0]),w.length<2)throw new d("streams");var N,P=w.map(function(M,U){var W=U<w.length-1,q=U>0;return h(M,W,q,function(Z){N||(N=Z),Z&&P.forEach(v),!W&&(P.forEach(v),C(N))})});return w.reduce(l)}i.exports=p},{"../../../errors":103,"./end-of-stream":112}],115:[function(e,i,t){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;function a(d,s,f){return d.highWaterMark!=null?d.highWaterMark:s?d[f]:null}function o(d,s,f,c){var h=a(s,c,f);if(h!=null){if(!(isFinite(h)&&Math.floor(h)===h)||h<0){var v=c?f:"highWaterMark";throw new n(v,h)}return Math.floor(h)}return d.objectMode?16:16*1024}i.exports={getHighWaterMark:o}},{"../../../errors":103}],116:[function(e,i,t){i.exports=e("events").EventEmitter},{events:207}],117:[function(e,i,t){t=i.exports=e("./lib/_stream_readable.js"),t.Stream=t,t.Readable=t,t.Writable=e("./lib/_stream_writable.js"),t.Duplex=e("./lib/_stream_duplex.js"),t.Transform=e("./lib/_stream_transform.js"),t.PassThrough=e("./lib/_stream_passthrough.js"),t.finished=e("./lib/internal/streams/end-of-stream.js"),t.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":104,"./lib/_stream_passthrough.js":105,"./lib/_stream_readable.js":106,"./lib/_stream_transform.js":107,"./lib/_stream_writable.js":108,"./lib/internal/streams/end-of-stream.js":112,"./lib/internal/streams/pipeline.js":114}],118:[function(e,i,t){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var n=e("buffer"),a=n.Buffer;function o(s,f){for(var c in s)f[c]=s[c]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?i.exports=n:(o(n,t),t.Buffer=d);function d(s,f,c){return a(s,f,c)}d.prototype=Object.create(a.prototype),o(a,d),d.from=function(s,f,c){if(typeof s=="number")throw new TypeError("Argument must not be a number");return a(s,f,c)},d.alloc=function(s,f,c){if(typeof s!="number")throw new TypeError("Argument must be a number");var h=a(s);return f!==void 0?typeof c=="string"?h.fill(f,c):h.fill(f):h.fill(0),h},d.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return a(s)},d.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}},{buffer:171}],119:[function(e,i,t){(function(n){(function(){t=i.exports=F;var a;typeof n=="object"&&n.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?a=function(){var ne=Array.prototype.slice.call(arguments,0);ne.unshift("SEMVER"),console.log.apply(console,ne)}:a=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var o=256,d=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,f=t.re=[],c=t.src=[],h=0,v=h++;c[v]="0|[1-9]\\d*";var l=h++;c[l]="[0-9]+";var u=h++;c[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=h++;c[p]="("+c[v]+")\\.("+c[v]+")\\.("+c[v]+")";var m=h++;c[m]="("+c[l]+")\\.("+c[l]+")\\.("+c[l]+")";var w=h++;c[w]="(?:"+c[v]+"|"+c[u]+")";var _=h++;c[_]="(?:"+c[l]+"|"+c[u]+")";var C=h++;c[C]="(?:-("+c[w]+"(?:\\."+c[w]+")*))";var N=h++;c[N]="(?:-?("+c[_]+"(?:\\."+c[_]+")*))";var P=h++;c[P]="[0-9A-Za-z-]+";var M=h++;c[M]="(?:\\+("+c[P]+"(?:\\."+c[P]+")*))";var U=h++,W="v?"+c[p]+c[C]+"?"+c[M]+"?";c[U]="^"+W+"$";var q="[v=\\s]*"+c[m]+c[N]+"?"+c[M]+"?",Z=h++;c[Z]="^"+q+"$";var re=h++;c[re]="((?:<|>)?=?)";var Y=h++;c[Y]=c[l]+"|x|X|\\*";var O=h++;c[O]=c[v]+"|x|X|\\*";var x=h++;c[x]="[v=\\s]*("+c[O]+")(?:\\.("+c[O]+")(?:\\.("+c[O]+")(?:"+c[C]+")?"+c[M]+"?)?)?";var S=h++;c[S]="[v=\\s]*("+c[Y]+")(?:\\.("+c[Y]+")(?:\\.("+c[Y]+")(?:"+c[N]+")?"+c[M]+"?)?)?";var k=h++;c[k]="^"+c[re]+"\\s*"+c[x]+"$";var g=h++;c[g]="^"+c[re]+"\\s*"+c[S]+"$";var E=h++;c[E]="(?:^|[^\\d])(\\d{1,"+s+"})(?:\\.(\\d{1,"+s+"}))?(?:\\.(\\d{1,"+s+"}))?(?:$|[^\\d])";var T=h++;c[T]="(?:~>?)";var A=h++;c[A]="(\\s*)"+c[T]+"\\s+",f[A]=new RegExp(c[A],"g");var J="$1~",G=h++;c[G]="^"+c[T]+c[x]+"$";var I=h++;c[I]="^"+c[T]+c[S]+"$";var V=h++;c[V]="(?:\\^)";var B=h++;c[B]="(\\s*)"+c[V]+"\\s+",f[B]=new RegExp(c[B],"g");var z="$1^",ie=h++;c[ie]="^"+c[V]+c[x]+"$";var de=h++;c[de]="^"+c[V]+c[S]+"$";var me=h++;c[me]="^"+c[re]+"\\s*("+q+")$|^$";var be=h++;c[be]="^"+c[re]+"\\s*("+W+")$|^$";var we=h++;c[we]="(\\s*)"+c[re]+"\\s*("+q+"|"+c[x]+")",f[we]=new RegExp(c[we],"g");var oe="$1$2$3",ce=h++;c[ce]="^\\s*("+c[x]+")\\s+-\\s+("+c[x]+")\\s*$";var ge=h++;c[ge]="^\\s*("+c[S]+")\\s+-\\s+("+c[S]+")\\s*$";var ke=h++;c[ke]="(<|>)?=?\\s*\\*";for(var le=0;le<h;le++)a(le,c[le]),f[le]||(f[le]=new RegExp(c[le]));t.parse=te;function te(ne,he){if((!he||typeof he!="object")&&(he={loose:!!he,includePrerelease:!1}),ne instanceof F)return ne;if(typeof ne!="string"||ne.length>o)return null;var ye=he.loose?f[Z]:f[U];if(!ye.test(ne))return null;try{return new F(ne,he)}catch{return null}}t.valid=ee;function ee(ne,he){var ye=te(ne,he);return ye?ye.version:null}t.clean=Q;function Q(ne,he){var ye=te(ne.trim().replace(/^[=v]+/,""),he);return ye?ye.version:null}t.SemVer=F;function F(ne,he){if((!he||typeof he!="object")&&(he={loose:!!he,includePrerelease:!1}),ne instanceof F){if(ne.loose===he.loose)return ne;ne=ne.version}else if(typeof ne!="string")throw new TypeError("Invalid Version: "+ne);if(ne.length>o)throw new TypeError("version is longer than "+o+" characters");if(!(this instanceof F))return new F(ne,he);a("SemVer",ne,he),this.options=he,this.loose=!!he.loose;var ye=ne.trim().match(he.loose?f[Z]:f[U]);if(!ye)throw new TypeError("Invalid Version: "+ne);if(this.raw=ne,this.major=+ye[1],this.minor=+ye[2],this.patch=+ye[3],this.major>d||this.major<0)throw new TypeError("Invalid major version");if(this.minor>d||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>d||this.patch<0)throw new TypeError("Invalid patch version");ye[4]?this.prerelease=ye[4].split(".").map(function(Ee){if(/^[0-9]+$/.test(Ee)){var Te=+Ee;if(Te>=0&&Te<d)return Te}return Ee}):this.prerelease=[],this.build=ye[5]?ye[5].split("."):[],this.format()}F.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},F.prototype.toString=function(){return this.version},F.prototype.compare=function(ne){return a("SemVer.compare",this.version,this.options,ne),ne instanceof F||(ne=new F(ne,this.options)),this.compareMain(ne)||this.comparePre(ne)},F.prototype.compareMain=function(ne){return ne instanceof F||(ne=new F(ne,this.options)),ve(this.major,ne.major)||ve(this.minor,ne.minor)||ve(this.patch,ne.patch)},F.prototype.comparePre=function(ne){if(ne instanceof F||(ne=new F(ne,this.options)),this.prerelease.length&&!ne.prerelease.length)return-1;if(!this.prerelease.length&&ne.prerelease.length)return 1;if(!this.prerelease.length&&!ne.prerelease.length)return 0;var he=0;do{var ye=this.prerelease[he],Ee=ne.prerelease[he];if(a("prerelease compare",he,ye,Ee),ye===void 0&&Ee===void 0)return 0;if(Ee===void 0)return 1;if(ye===void 0)return-1;if(ye===Ee)continue;return ve(ye,Ee)}while(++he)},F.prototype.inc=function(ne,he){switch(ne){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",he);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",he);break;case"prepatch":this.prerelease.length=0,this.inc("patch",he),this.inc("pre",he);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",he),this.inc("pre",he);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var ye=this.prerelease.length;--ye>=0;)typeof this.prerelease[ye]=="number"&&(this.prerelease[ye]++,ye=-2);ye===-1&&this.prerelease.push(0)}he&&(this.prerelease[0]===he?isNaN(this.prerelease[1])&&(this.prerelease=[he,0]):this.prerelease=[he,0]);break;default:throw new Error("invalid increment argument: "+ne)}return this.format(),this.raw=this.version,this},t.inc=$;function $(ne,he,ye,Ee){typeof ye=="string"&&(Ee=ye,ye=void 0);try{return new F(ne,ye).inc(he,Ee).version}catch{return null}}t.diff=X;function X(ne,he){if(ae(ne,he))return null;var ye=te(ne),Ee=te(he),Te="";if(ye.prerelease.length||Ee.prerelease.length){Te="pre";var Ne="prerelease"}for(var Ie in ye)if((Ie==="major"||Ie==="minor"||Ie==="patch")&&ye[Ie]!==Ee[Ie])return Te+Ie;return Ne}t.compareIdentifiers=ve;var se=/^[0-9]+$/;function ve(ne,he){var ye=se.test(ne),Ee=se.test(he);return ye&&Ee&&(ne=+ne,he=+he),ne===he?0:ye&&!Ee?-1:Ee&&!ye?1:ne<he?-1:1}t.rcompareIdentifiers=Se;function Se(ne,he){return ve(he,ne)}t.major=ue;function ue(ne,he){return new F(ne,he).major}t.minor=y;function y(ne,he){return new F(ne,he).minor}t.patch=L;function L(ne,he){return new F(ne,he).patch}t.compare=H;function H(ne,he,ye){return new F(ne,ye).compare(new F(he,ye))}t.compareLoose=fe;function fe(ne,he){return H(ne,he,!0)}t.rcompare=j;function j(ne,he,ye){return H(he,ne,ye)}t.sort=b;function b(ne,he){return ne.sort(function(ye,Ee){return t.compare(ye,Ee,he)})}t.rsort=D;function D(ne,he){return ne.sort(function(ye,Ee){return t.rcompare(ye,Ee,he)})}t.gt=K;function K(ne,he,ye){return H(ne,he,ye)>0}t.lt=pe;function pe(ne,he,ye){return H(ne,he,ye)<0}t.eq=ae;function ae(ne,he,ye){return H(ne,he,ye)===0}t.neq=_e;function _e(ne,he,ye){return H(ne,he,ye)!==0}t.gte=Oe;function Oe(ne,he,ye){return H(ne,he,ye)>=0}t.lte=Pe;function Pe(ne,he,ye){return H(ne,he,ye)<=0}t.cmp=Ue;function Ue(ne,he,ye,Ee){switch(he){case"===":return typeof ne=="object"&&(ne=ne.version),typeof ye=="object"&&(ye=ye.version),ne===ye;case"!==":return typeof ne=="object"&&(ne=ne.version),typeof ye=="object"&&(ye=ye.version),ne!==ye;case"":case"=":case"==":return ae(ne,ye,Ee);case"!=":return _e(ne,ye,Ee);case">":return K(ne,ye,Ee);case">=":return Oe(ne,ye,Ee);case"<":return pe(ne,ye,Ee);case"<=":return Pe(ne,ye,Ee);default:throw new TypeError("Invalid operator: "+he)}}t.Comparator=xe;function xe(ne,he){if((!he||typeof he!="object")&&(he={loose:!!he,includePrerelease:!1}),ne instanceof xe){if(ne.loose===!!he.loose)return ne;ne=ne.value}if(!(this instanceof xe))return new xe(ne,he);a("comparator",ne,he),this.options=he,this.loose=!!he.loose,this.parse(ne),this.semver===Ae?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}var Ae={};xe.prototype.parse=function(ne){var he=this.options.loose?f[me]:f[be],ye=ne.match(he);if(!ye)throw new TypeError("Invalid comparator: "+ne);this.operator=ye[1],this.operator==="="&&(this.operator=""),ye[2]?this.semver=new F(ye[2],this.options.loose):this.semver=Ae},xe.prototype.toString=function(){return this.value},xe.prototype.test=function(ne){return a("Comparator.test",ne,this.options.loose),this.semver===Ae?!0:(typeof ne=="string"&&(ne=new F(ne,this.options)),Ue(ne,this.operator,this.semver,this.options))},xe.prototype.intersects=function(ne,he){if(!(ne instanceof xe))throw new TypeError("a Comparator is required");(!he||typeof he!="object")&&(he={loose:!!he,includePrerelease:!1});var ye;if(this.operator==="")return ye=new Re(ne.value,he),ze(this.value,ye,he);if(ne.operator==="")return ye=new Re(this.value,he),ze(ne.semver,ye,he);var Ee=(this.operator===">="||this.operator===">")&&(ne.operator===">="||ne.operator===">"),Te=(this.operator==="<="||this.operator==="<")&&(ne.operator==="<="||ne.operator==="<"),Ne=this.semver.version===ne.semver.version,Ie=(this.operator===">="||this.operator==="<=")&&(ne.operator===">="||ne.operator==="<="),Ce=Ue(this.semver,"<",ne.semver,he)&&(this.operator===">="||this.operator===">")&&(ne.operator==="<="||ne.operator==="<"),$e=Ue(this.semver,">",ne.semver,he)&&(this.operator==="<="||this.operator==="<")&&(ne.operator===">="||ne.operator===">");return Ee||Te||Ne&&Ie||Ce||$e},t.Range=Re;function Re(ne,he){if((!he||typeof he!="object")&&(he={loose:!!he,includePrerelease:!1}),ne instanceof Re)return ne.loose===!!he.loose&&ne.includePrerelease===!!he.includePrerelease?ne:new Re(ne.raw,he);if(ne instanceof xe)return new Re(ne.value,he);if(!(this instanceof Re))return new Re(ne,he);if(this.options=he,this.loose=!!he.loose,this.includePrerelease=!!he.includePrerelease,this.raw=ne,this.set=ne.split(/\s*\|\|\s*/).map(function(ye){return this.parseRange(ye.trim())},this).filter(function(ye){return ye.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+ne);this.format()}Re.prototype.format=function(){return this.range=this.set.map(function(ne){return ne.join(" ").trim()}).join("||").trim(),this.range},Re.prototype.toString=function(){return this.range},Re.prototype.parseRange=function(ne){var he=this.options.loose;ne=ne.trim();var ye=he?f[ge]:f[ce];ne=ne.replace(ye,Je),a("hyphen replace",ne),ne=ne.replace(f[we],oe),a("comparator trim",ne,f[we]),ne=ne.replace(f[A],J),ne=ne.replace(f[B],z),ne=ne.split(/\s+/).join(" ");var Ee=he?f[me]:f[be],Te=ne.split(" ").map(function(Ne){return De(Ne,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(Te=Te.filter(function(Ne){return!!Ne.match(Ee)})),Te=Te.map(function(Ne){return new xe(Ne,this.options)},this),Te},Re.prototype.intersects=function(ne,he){if(!(ne instanceof Re))throw new TypeError("a Range is required");return this.set.some(function(ye){return ye.every(function(Ee){return ne.set.some(function(Te){return Te.every(function(Ne){return Ee.intersects(Ne,he)})})})})},t.toComparators=We;function We(ne,he){return new Re(ne,he).set.map(function(ye){return ye.map(function(Ee){return Ee.value}).join(" ").trim().split(" ")})}function De(ne,he){return a("comp",ne,he),ne=qe(ne,he),a("caret",ne),ne=He(ne,he),a("tildes",ne),ne=Fe(ne,he),a("xrange",ne),ne=Xe(ne,he),a("stars",ne),ne}function Be(ne){return!ne||ne.toLowerCase()==="x"||ne==="*"}function He(ne,he){return ne.trim().split(/\s+/).map(function(ye){return Me(ye,he)}).join(" ")}function Me(ne,he){var ye=he.loose?f[I]:f[G];return ne.replace(ye,function(Ee,Te,Ne,Ie,Ce){a("tilde",ne,Ee,Te,Ne,Ie,Ce);var $e;return Be(Te)?$e="":Be(Ne)?$e=">="+Te+".0.0 <"+(+Te+1)+".0.0":Be(Ie)?$e=">="+Te+"."+Ne+".0 <"+Te+"."+(+Ne+1)+".0":Ce?(a("replaceTilde pr",Ce),$e=">="+Te+"."+Ne+"."+Ie+"-"+Ce+" <"+Te+"."+(+Ne+1)+".0"):$e=">="+Te+"."+Ne+"."+Ie+" <"+Te+"."+(+Ne+1)+".0",a("tilde return",$e),$e})}function qe(ne,he){return ne.trim().split(/\s+/).map(function(ye){return Qe(ye,he)}).join(" ")}function Qe(ne,he){a("caret",ne,he);var ye=he.loose?f[de]:f[ie];return ne.replace(ye,function(Ee,Te,Ne,Ie,Ce){a("caret",ne,Ee,Te,Ne,Ie,Ce);var $e;return Be(Te)?$e="":Be(Ne)?$e=">="+Te+".0.0 <"+(+Te+1)+".0.0":Be(Ie)?Te==="0"?$e=">="+Te+"."+Ne+".0 <"+Te+"."+(+Ne+1)+".0":$e=">="+Te+"."+Ne+".0 <"+(+Te+1)+".0.0":Ce?(a("replaceCaret pr",Ce),Te==="0"?Ne==="0"?$e=">="+Te+"."+Ne+"."+Ie+"-"+Ce+" <"+Te+"."+Ne+"."+(+Ie+1):$e=">="+Te+"."+Ne+"."+Ie+"-"+Ce+" <"+Te+"."+(+Ne+1)+".0":$e=">="+Te+"."+Ne+"."+Ie+"-"+Ce+" <"+(+Te+1)+".0.0"):(a("no pr"),Te==="0"?Ne==="0"?$e=">="+Te+"."+Ne+"."+Ie+" <"+Te+"."+Ne+"."+(+Ie+1):$e=">="+Te+"."+Ne+"."+Ie+" <"+Te+"."+(+Ne+1)+".0":$e=">="+Te+"."+Ne+"."+Ie+" <"+(+Te+1)+".0.0"),a("caret return",$e),$e})}function Fe(ne,he){return a("replaceXRanges",ne,he),ne.split(/\s+/).map(function(ye){return Ye(ye,he)}).join(" ")}function Ye(ne,he){ne=ne.trim();var ye=he.loose?f[g]:f[k];return ne.replace(ye,function(Ee,Te,Ne,Ie,Ce,$e){a("xRange",ne,Ee,Te,Ne,Ie,Ce,$e);var st=Be(Ne),at=st||Be(Ie),dt=at||Be(Ce),ot=dt;return Te==="="&&ot&&(Te=""),st?Te===">"||Te==="<"?Ee="<0.0.0":Ee="*":Te&&ot?(at&&(Ie=0),Ce=0,Te===">"?(Te=">=",at?(Ne=+Ne+1,Ie=0,Ce=0):(Ie=+Ie+1,Ce=0)):Te==="<="&&(Te="<",at?Ne=+Ne+1:Ie=+Ie+1),Ee=Te+Ne+"."+Ie+"."+Ce):at?Ee=">="+Ne+".0.0 <"+(+Ne+1)+".0.0":dt&&(Ee=">="+Ne+"."+Ie+".0 <"+Ne+"."+(+Ie+1)+".0"),a("xRange return",Ee),Ee})}function Xe(ne,he){return a("replaceStars",ne,he),ne.trim().replace(f[ke],"")}function Je(ne,he,ye,Ee,Te,Ne,Ie,Ce,$e,st,at,dt,ot){return Be(ye)?he="":Be(Ee)?he=">="+ye+".0.0":Be(Te)?he=">="+ye+"."+Ee+".0":he=">="+he,Be($e)?Ce="":Be(st)?Ce="<"+(+$e+1)+".0.0":Be(at)?Ce="<"+$e+"."+(+st+1)+".0":dt?Ce="<="+$e+"."+st+"."+at+"-"+dt:Ce="<="+Ce,(he+" "+Ce).trim()}Re.prototype.test=function(ne){if(!ne)return!1;typeof ne=="string"&&(ne=new F(ne,this.options));for(var he=0;he<this.set.length;he++)if(je(this.set[he],ne,this.options))return!0;return!1};function je(ne,he,ye){for(var Ee=0;Ee<ne.length;Ee++)if(!ne[Ee].test(he))return!1;if(he.prerelease.length&&!ye.includePrerelease){for(Ee=0;Ee<ne.length;Ee++)if(a(ne[Ee].semver),ne[Ee].semver!==Ae&&ne[Ee].semver.prerelease.length>0){var Te=ne[Ee].semver;if(Te.major===he.major&&Te.minor===he.minor&&Te.patch===he.patch)return!0}return!1}return!0}t.satisfies=ze;function ze(ne,he,ye){try{he=new Re(he,ye)}catch{return!1}return he.test(ne)}t.maxSatisfying=Ve;function Ve(ne,he,ye){var Ee=null,Te=null;try{var Ne=new Re(he,ye)}catch{return null}return ne.forEach(function(Ie){Ne.test(Ie)&&(!Ee||Te.compare(Ie)===-1)&&(Ee=Ie,Te=new F(Ee,ye))}),Ee}t.minSatisfying=et;function et(ne,he,ye){var Ee=null,Te=null;try{var Ne=new Re(he,ye)}catch{return null}return ne.forEach(function(Ie){Ne.test(Ie)&&(!Ee||Te.compare(Ie)===1)&&(Ee=Ie,Te=new F(Ee,ye))}),Ee}t.minVersion=tt;function tt(ne,he){ne=new Re(ne,he);var ye=new F("0.0.0");if(ne.test(ye)||(ye=new F("0.0.0-0"),ne.test(ye)))return ye;ye=null;for(var Ee=0;Ee<ne.set.length;++Ee){var Te=ne.set[Ee];Te.forEach(function(Ne){var Ie=new F(Ne.semver.version);switch(Ne.operator){case">":Ie.prerelease.length===0?Ie.patch++:Ie.prerelease.push(0),Ie.raw=Ie.format();case"":case">=":(!ye||K(ye,Ie))&&(ye=Ie);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+Ne.operator)}})}return ye&&ne.test(ye)?ye:null}t.validRange=Ge;function Ge(ne,he){try{return new Re(ne,he).range||"*"}catch{return null}}t.ltr=rt;function rt(ne,he,ye){return Le(ne,he,"<",ye)}t.gtr=it;function it(ne,he,ye){return Le(ne,he,">",ye)}t.outside=Le;function Le(ne,he,ye,Ee){ne=new F(ne,Ee),he=new Re(he,Ee);var Te,Ne,Ie,Ce,$e;switch(ye){case">":Te=K,Ne=Pe,Ie=pe,Ce=">",$e=">=";break;case"<":Te=pe,Ne=Oe,Ie=K,Ce="<",$e="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ze(ne,he,Ee))return!1;for(var st=0;st<he.set.length;++st){var at=he.set[st],dt=null,ot=null;if(at.forEach(function(ct){ct.semver===Ae&&(ct=new xe(">=0.0.0")),dt=dt||ct,ot=ot||ct,Te(ct.semver,dt.semver,Ee)?dt=ct:Ie(ct.semver,ot.semver,Ee)&&(ot=ct)}),dt.operator===Ce||dt.operator===$e||(!ot.operator||ot.operator===Ce)&&Ne(ne,ot.semver))return!1;if(ot.operator===$e&&Ie(ne,ot.semver))return!1}return!0}t.prerelease=nt;function nt(ne,he){var ye=te(ne,he);return ye&&ye.prerelease.length?ye.prerelease:null}t.intersects=Ke;function Ke(ne,he,ye){return ne=new Re(ne,ye),he=new Re(he,ye),ne.intersects(he)}t.coerce=Ze;function Ze(ne){if(ne instanceof F)return ne;if(typeof ne!="string")return null;var he=ne.match(f[E]);return he==null?null:te(he[1]+"."+(he[2]||"0")+"."+(he[3]||"0"))}}).call(this)}).call(this,e("_process"))},{_process:254}],120:[function(e,i,t){/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const n=e("debug")("simple-peer"),a=e("get-browser-rtc"),o=e("randombytes"),d=e("readable-stream"),s=e("queue-microtask"),f=e("err-code"),{Buffer:c}=e("buffer"),h=64*1024,v=5*1e3,l=5*1e3;function u(w){return w.replace(/a=ice-options:trickle\s\n/g,"")}function p(w){console.warn(w)}class m extends d.Duplex{constructor(_){if(_=Object.assign({allowHalfOpen:!1},_),super(_),this._id=o(4).toString("hex").slice(0,7),this._debug("new peer %o",_),this.channelName=_.initiator?_.channelName||o(20).toString("hex"):null,this.initiator=_.initiator||!1,this.channelConfig=_.channelConfig||m.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},m.config,_.config),this.offerOptions=_.offerOptions||{},this.answerOptions=_.answerOptions||{},this.sdpTransform=_.sdpTransform||(C=>C),this.streams=_.streams||(_.stream?[_.stream]:[]),this.trickle=_.trickle!==void 0?_.trickle:!0,this.allowHalfTrickle=_.allowHalfTrickle!==void 0?_.allowHalfTrickle:!1,this.iceCompleteTimeout=_.iceCompleteTimeout||v,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=_.wrtc&&typeof _.wrtc=="object"?_.wrtc:a(),!this._wrtc)throw f(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(C){this.destroy(f(C,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=C=>{this._onIceCandidate(C)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(C=>{this.destroy(f(C,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=C=>{this._setupData(C)},this.streams&&this.streams.forEach(C=>{this.addStream(C)}),this._pc.ontrack=C=>{this._onTrack(C)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(_){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof _=="string")try{_=JSON.parse(_)}catch{_={}}this._debug("signal()"),_.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),_.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(_.transceiverRequest.kind,_.transceiverRequest.init)),_.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(_.candidate):this._pendingCandidates.push(_.candidate)),_.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(_)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(C=>{this._addIceCandidate(C)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(C=>{this.destroy(f(C,"ERR_SET_REMOTE_DESCRIPTION"))}),!_.sdp&&!_.candidate&&!_.renegotiate&&!_.transceiverRequest&&this.destroy(f(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(_){const C=new this._wrtc.RTCIceCandidate(_);this._pc.addIceCandidate(C).catch(N=>{!C.address||C.address.endsWith(".local")?p("Ignoring unsupported ICE candidate."):this.destroy(f(N,"ERR_ADD_ICE_CANDIDATE"))})}send(_){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(_)}}addTransceiver(_,C){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(_,C),this._needsNegotiation()}catch(N){this.destroy(f(N,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:_,init:C}})}}addStream(_){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),_.getTracks().forEach(C=>{this.addTrack(C,_)})}}addTrack(_,C){if(this.destroying)return;if(this.destroyed)throw f(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const N=this._senderMap.get(_)||new Map;let P=N.get(C);if(!P)P=this._pc.addTrack(_,C),N.set(C,P),this._senderMap.set(_,N),this._needsNegotiation();else throw P.removed?f(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):f(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(_,C,N){if(this.destroying)return;if(this.destroyed)throw f(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const P=this._senderMap.get(_),M=P?P.get(N):null;if(!M)throw f(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");C&&this._senderMap.set(C,P),M.replaceTrack!=null?M.replaceTrack(C):this.destroy(f(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(_,C){if(this.destroying)return;if(this.destroyed)throw f(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const N=this._senderMap.get(_),P=N?N.get(C):null;if(!P)throw f(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{P.removed=!0,this._pc.removeTrack(P)}catch(M){M.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(P):this.destroy(f(M,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(_){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),_.getTracks().forEach(C=>{this.removeTrack(C,_)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,s(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(_){this._destroy(_,()=>{})}_destroy(_,C){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",_&&(_.message||_)),s(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",_&&(_.message||_)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,_&&this.emit("error",_),this.emit("close"),C()}))}_setupData(_){if(!_.channel)return this.destroy(f(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=_.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=h),this.channelName=this._channel.label,this._channel.onmessage=N=>{this._onChannelMessage(N)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=N=>{const P=N.error instanceof Error?N.error:new Error(`Datachannel error: ${N.message} ${N.filename}:${N.lineno}:${N.colno}`);this.destroy(f(P,"ERR_DATA_CHANNEL"))};let C=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(C&&this._onChannelClose(),C=!0):C=!1},l)}_read(){}_write(_,C,N){if(this.destroyed)return N(f(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(_)}catch(P){return this.destroy(f(P,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>h?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=N):N(null)}else this._debug("write before connect"),this._chunk=_,this._cb=N}_onFinish(){if(this.destroyed)return;const _=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?_():this.once("connect",_)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(_=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(_.sdp=u(_.sdp)),_.sdp=this.sdpTransform(_.sdp);const C=()=>{if(this.destroyed)return;const M=this._pc.localDescription||_;this._debug("signal"),this.emit("signal",{type:M.type,sdp:M.sdp})},N=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?C():this.once("_iceComplete",C))},P=M=>{this.destroy(f(M,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(_).then(N).catch(P)}).catch(_=>{this.destroy(f(_,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(_=>{!_.mid&&_.sender.track&&!_.requested&&(_.requested=!0,this.addTransceiver(_.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(_=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(_.sdp=u(_.sdp)),_.sdp=this.sdpTransform(_.sdp);const C=()=>{if(this.destroyed)return;const M=this._pc.localDescription||_;this._debug("signal"),this.emit("signal",{type:M.type,sdp:M.sdp}),this.initiator||this._requestMissingTransceivers()},N=()=>{this.destroyed||(this.trickle||this._iceComplete?C():this.once("_iceComplete",C))},P=M=>{this.destroy(f(M,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(_).then(N).catch(P)}).catch(_=>{this.destroy(f(_,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(f(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const _=this._pc.iceConnectionState,C=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",_,C),this.emit("iceStateChange",_,C),(_==="connected"||_==="completed")&&(this._pcReady=!0,this._maybeReady()),_==="failed"&&this.destroy(f(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),_==="closed"&&this.destroy(f(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(_){const C=N=>(Object.prototype.toString.call(N.values)==="[object Array]"&&N.values.forEach(P=>{Object.assign(N,P)}),N);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(N=>{const P=[];N.forEach(M=>{P.push(C(M))}),_(null,P)},N=>_(N)):this._pc.getStats.length>0?this._pc.getStats(N=>{if(this.destroyed)return;const P=[];N.result().forEach(M=>{const U={};M.names().forEach(W=>{U[W]=M.stat(W)}),U.id=M.id,U.type=M.type,U.timestamp=M.timestamp,P.push(C(U))}),_(null,P)},N=>_(N)):_(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const _=()=>{this.destroyed||this.getStats((C,N)=>{if(this.destroyed)return;C&&(N=[]);const P={},M={},U={};let W=!1;N.forEach(Z=>{(Z.type==="remotecandidate"||Z.type==="remote-candidate")&&(P[Z.id]=Z),(Z.type==="localcandidate"||Z.type==="local-candidate")&&(M[Z.id]=Z),(Z.type==="candidatepair"||Z.type==="candidate-pair")&&(U[Z.id]=Z)});const q=Z=>{W=!0;let re=M[Z.localCandidateId];re&&(re.ip||re.address)?(this.localAddress=re.ip||re.address,this.localPort=Number(re.port)):re&&re.ipAddress?(this.localAddress=re.ipAddress,this.localPort=Number(re.portNumber)):typeof Z.googLocalAddress=="string"&&(re=Z.googLocalAddress.split(":"),this.localAddress=re[0],this.localPort=Number(re[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let Y=P[Z.remoteCandidateId];Y&&(Y.ip||Y.address)?(this.remoteAddress=Y.ip||Y.address,this.remotePort=Number(Y.port)):Y&&Y.ipAddress?(this.remoteAddress=Y.ipAddress,this.remotePort=Number(Y.portNumber)):typeof Z.googRemoteAddress=="string"&&(Y=Z.googRemoteAddress.split(":"),this.remoteAddress=Y[0],this.remotePort=Number(Y[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(N.forEach(Z=>{Z.type==="transport"&&Z.selectedCandidatePairId&&q(U[Z.selectedCandidatePairId]),(Z.type==="googCandidatePair"&&Z.googActiveConnection==="true"||(Z.type==="candidatepair"||Z.type==="candidate-pair")&&Z.selected)&&q(Z)}),!W&&(!Object.keys(U).length||Object.keys(M).length)){setTimeout(_,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(re){return this.destroy(f(re,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const Z=this._cb;this._cb=null,Z(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};_()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>h||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(_=>{this._pc.removeTrack(_),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(_){this.destroyed||(_.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:_.candidate.candidate,sdpMLineIndex:_.candidate.sdpMLineIndex,sdpMid:_.candidate.sdpMid}}):!_.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),_.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(_){if(this.destroyed)return;let C=_.data;C instanceof ArrayBuffer&&(C=c.from(C)),this.push(C)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const _=this._cb;this._cb=null,_(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(_){this.destroyed||_.streams.forEach(C=>{this._debug("on track"),this.emit("track",_.track,C),this._remoteTracks.push({track:_.track,stream:C}),!this._remoteStreams.some(N=>N.id===C.id)&&(this._remoteStreams.push(C),s(()=>{this._debug("on stream"),this.emit("stream",C)}))})}_debug(){const _=[].slice.call(arguments);_[0]="["+this._id+"] "+_[0],n.apply(null,_)}}m.WEBRTC_SUPPORT=!!a(),m.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},m.channelConfig={},i.exports=m},{buffer:171,debug:41,"err-code":45,"get-browser-rtc":46,"queue-microtask":100,randombytes:102,"readable-stream":117}],121:[function(e,i,t){var n=e("safe-buffer").Buffer,a=n.isEncoding||function(P){switch(P=""+P,P&&P.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(P){if(!P)return"utf8";for(var M;;)switch(P){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return P;default:if(M)return;P=(""+P).toLowerCase(),M=!0}}function d(P){var M=o(P);if(typeof M!="string"&&(n.isEncoding===a||!a(P)))throw new Error("Unknown encoding: "+P);return M||P}t.StringDecoder=s;function s(P){this.encoding=d(P);var M;switch(this.encoding){case"utf16le":this.text=p,this.end=m,M=4;break;case"utf8":this.fillLast=v,M=4;break;case"base64":this.text=w,this.end=_,M=3;break;default:this.write=C,this.end=N;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(M)}s.prototype.write=function(P){if(P.length===0)return"";var M,U;if(this.lastNeed){if(M=this.fillLast(P),M===void 0)return"";U=this.lastNeed,this.lastNeed=0}else U=0;return U<P.length?M?M+this.text(P,U):this.text(P,U):M||""},s.prototype.end=u,s.prototype.text=l,s.prototype.fillLast=function(P){if(this.lastNeed<=P.length)return P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,P.length),this.lastNeed-=P.length};function f(P){return P<=127?0:P>>5===6?2:P>>4===14?3:P>>3===30?4:P>>6===2?-1:-2}function c(P,M,U){var W=M.length-1;if(W<U)return 0;var q=f(M[W]);return q>=0?(q>0&&(P.lastNeed=q-1),q):--W<U||q===-2?0:(q=f(M[W]),q>=0?(q>0&&(P.lastNeed=q-2),q):--W<U||q===-2?0:(q=f(M[W]),q>=0?(q>0&&(q===2?q=0:P.lastNeed=q-3),q):0))}function h(P,M,U){if((M[0]&192)!==128)return P.lastNeed=0,"�";if(P.lastNeed>1&&M.length>1){if((M[1]&192)!==128)return P.lastNeed=1,"�";if(P.lastNeed>2&&M.length>2&&(M[2]&192)!==128)return P.lastNeed=2,"�"}}function v(P){var M=this.lastTotal-this.lastNeed,U=h(this,P);if(U!==void 0)return U;if(this.lastNeed<=P.length)return P.copy(this.lastChar,M,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,M,0,P.length),this.lastNeed-=P.length}function l(P,M){var U=c(this,P,M);if(!this.lastNeed)return P.toString("utf8",M);this.lastTotal=U;var W=P.length-(U-this.lastNeed);return P.copy(this.lastChar,0,W),P.toString("utf8",M,W)}function u(P){var M=P&&P.length?this.write(P):"";return this.lastNeed?M+"�":M}function p(P,M){if((P.length-M)%2===0){var U=P.toString("utf16le",M);if(U){var W=U.charCodeAt(U.length-1);if(W>=55296&&W<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1],U.slice(0,-1)}return U}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=P[P.length-1],P.toString("utf16le",M,P.length-1)}function m(P){var M=P&&P.length?this.write(P):"";if(this.lastNeed){var U=this.lastTotal-this.lastNeed;return M+this.lastChar.toString("utf16le",0,U)}return M}function w(P,M){var U=(P.length-M)%3;return U===0?P.toString("base64",M):(this.lastNeed=3-U,this.lastTotal=3,U===1?this.lastChar[0]=P[P.length-1]:(this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1]),P.toString("base64",M,P.length-U))}function _(P){var M=P&&P.length?this.write(P):"";return this.lastNeed?M+this.lastChar.toString("base64",0,3-this.lastNeed):M}function C(P){return P.toString(this.encoding)}function N(P){return P&&P.length?this.write(P):""}},{"safe-buffer":118}],122:[function(e,i,t){(function(n){(function(){i.exports=a;function a(d,s){if(o("noDeprecation"))return d;var f=!1;function c(){if(!f){if(o("throwDeprecation"))throw new Error(s);o("traceDeprecation")?console.trace(s):console.warn(s),f=!0}return d.apply(this,arguments)}return c}function o(d){try{if(!n.localStorage)return!1}catch{return!1}var s=n.localStorage[d];return s==null?!1:String(s).toLowerCase()==="true"}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],123:[function(e,i,t){const n=t;n.bignum=e("bn.js"),n.define=e("./asn1/api").define,n.base=e("./asn1/base"),n.constants=e("./asn1/constants"),n.decoders=e("./asn1/decoders"),n.encoders=e("./asn1/encoders")},{"./asn1/api":124,"./asn1/base":126,"./asn1/constants":130,"./asn1/decoders":132,"./asn1/encoders":135,"bn.js":139}],124:[function(e,i,t){const n=e("./encoders"),a=e("./decoders"),o=e("inherits"),d=t;d.define=function(c,h){return new s(c,h)};function s(f,c){this.name=f,this.body=c,this.decoders={},this.encoders={}}s.prototype._createNamed=function(c){const h=this.name;function v(l){this._initNamed(l,h)}return o(v,c),v.prototype._initNamed=function(u,p){c.call(this,u,p)},new v(this)},s.prototype._getDecoder=function(c){return c=c||"der",this.decoders.hasOwnProperty(c)||(this.decoders[c]=this._createNamed(a[c])),this.decoders[c]},s.prototype.decode=function(c,h,v){return this._getDecoder(h).decode(c,v)},s.prototype._getEncoder=function(c){return c=c||"der",this.encoders.hasOwnProperty(c)||(this.encoders[c]=this._createNamed(n[c])),this.encoders[c]},s.prototype.encode=function(c,h,v){return this._getEncoder(h).encode(c,v)}},{"./decoders":132,"./encoders":135,inherits:233}],125:[function(e,i,t){const n=e("inherits"),a=e("../base/reporter").Reporter,o=e("safer-buffer").Buffer;function d(f,c){if(a.call(this,c),!o.isBuffer(f)){this.error("Input not Buffer");return}this.base=f,this.offset=0,this.length=f.length}n(d,a),t.DecoderBuffer=d,d.isDecoderBuffer=function(c){return c instanceof d?!0:typeof c=="object"&&o.isBuffer(c.base)&&c.constructor.name==="DecoderBuffer"&&typeof c.offset=="number"&&typeof c.length=="number"&&typeof c.save=="function"&&typeof c.restore=="function"&&typeof c.isEmpty=="function"&&typeof c.readUInt8=="function"&&typeof c.skip=="function"&&typeof c.raw=="function"},d.prototype.save=function(){return{offset:this.offset,reporter:a.prototype.save.call(this)}},d.prototype.restore=function(c){const h=new d(this.base);return h.offset=c.offset,h.length=this.offset,this.offset=c.offset,a.prototype.restore.call(this,c.reporter),h},d.prototype.isEmpty=function(){return this.offset===this.length},d.prototype.readUInt8=function(c){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(c||"DecoderBuffer overrun")},d.prototype.skip=function(c,h){if(!(this.offset+c<=this.length))return this.error(h||"DecoderBuffer overrun");const v=new d(this.base);return v._reporterState=this._reporterState,v.offset=this.offset,v.length=this.offset+c,this.offset+=c,v},d.prototype.raw=function(c){return this.base.slice(c?c.offset:this.offset,this.length)};function s(f,c){if(Array.isArray(f))this.length=0,this.value=f.map(function(h){return s.isEncoderBuffer(h)||(h=new s(h,c)),this.length+=h.length,h},this);else if(typeof f=="number"){if(!(0<=f&&f<=255))return c.error("non-byte EncoderBuffer value");this.value=f,this.length=1}else if(typeof f=="string")this.value=f,this.length=o.byteLength(f);else if(o.isBuffer(f))this.value=f,this.length=f.length;else return c.error("Unsupported type: "+typeof f)}t.EncoderBuffer=s,s.isEncoderBuffer=function(c){return c instanceof s?!0:typeof c=="object"&&c.constructor.name==="EncoderBuffer"&&typeof c.length=="number"&&typeof c.join=="function"},s.prototype.join=function(c,h){return c||(c=o.alloc(this.length)),h||(h=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(v){v.join(c,h),h+=v.length}):(typeof this.value=="number"?c[h]=this.value:typeof this.value=="string"?c.write(this.value,h):o.isBuffer(this.value)&&this.value.copy(c,h),h+=this.length)),c}},{"../base/reporter":128,inherits:233,"safer-buffer":280}],126:[function(e,i,t){const n=t;n.Reporter=e("./reporter").Reporter,n.DecoderBuffer=e("./buffer").DecoderBuffer,n.EncoderBuffer=e("./buffer").EncoderBuffer,n.Node=e("./node")},{"./buffer":125,"./node":127,"./reporter":128}],127:[function(e,i,t){const n=e("../base/reporter").Reporter,a=e("../base/buffer").EncoderBuffer,o=e("../base/buffer").DecoderBuffer,d=e("minimalistic-assert"),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],f=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s),c=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function h(l,u,p){const m={};this._baseState=m,m.name=p,m.enc=l,m.parent=u||null,m.children=null,m.tag=null,m.args=null,m.reverseArgs=null,m.choice=null,m.optional=!1,m.any=!1,m.obj=!1,m.use=null,m.useDecoder=null,m.key=null,m.default=null,m.explicit=null,m.implicit=null,m.contains=null,m.parent||(m.children=[],this._wrap())}i.exports=h;const v=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];h.prototype.clone=function(){const u=this._baseState,p={};v.forEach(function(w){p[w]=u[w]});const m=new this.constructor(p.parent);return m._baseState=p,m},h.prototype._wrap=function(){const u=this._baseState;f.forEach(function(p){this[p]=function(){const w=new this.constructor(this);return u.children.push(w),w[p].apply(w,arguments)}},this)},h.prototype._init=function(u){const p=this._baseState;d(p.parent===null),u.call(this),p.children=p.children.filter(function(m){return m._baseState.parent===this},this),d.equal(p.children.length,1,"Root node can have only one child")},h.prototype._useArgs=function(u){const p=this._baseState,m=u.filter(function(w){return w instanceof this.constructor},this);u=u.filter(function(w){return!(w instanceof this.constructor)},this),m.length!==0&&(d(p.children===null),p.children=m,m.forEach(function(w){w._baseState.parent=this},this)),u.length!==0&&(d(p.args===null),p.args=u,p.reverseArgs=u.map(function(w){if(typeof w!="object"||w.constructor!==Object)return w;const _={};return Object.keys(w).forEach(function(C){C==(C|0)&&(C|=0);const N=w[C];_[N]=C}),_}))},c.forEach(function(l){h.prototype[l]=function(){const p=this._baseState;throw new Error(l+" not implemented for encoding: "+p.enc)}}),s.forEach(function(l){h.prototype[l]=function(){const p=this._baseState,m=Array.prototype.slice.call(arguments);return d(p.tag===null),p.tag=l,this._useArgs(m),this}}),h.prototype.use=function(u){d(u);const p=this._baseState;return d(p.use===null),p.use=u,this},h.prototype.optional=function(){const u=this._baseState;return u.optional=!0,this},h.prototype.def=function(u){const p=this._baseState;return d(p.default===null),p.default=u,p.optional=!0,this},h.prototype.explicit=function(u){const p=this._baseState;return d(p.explicit===null&&p.implicit===null),p.explicit=u,this},h.prototype.implicit=function(u){const p=this._baseState;return d(p.explicit===null&&p.implicit===null),p.implicit=u,this},h.prototype.obj=function(){const u=this._baseState,p=Array.prototype.slice.call(arguments);return u.obj=!0,p.length!==0&&this._useArgs(p),this},h.prototype.key=function(u){const p=this._baseState;return d(p.key===null),p.key=u,this},h.prototype.any=function(){const u=this._baseState;return u.any=!0,this},h.prototype.choice=function(u){const p=this._baseState;return d(p.choice===null),p.choice=u,this._useArgs(Object.keys(u).map(function(m){return u[m]})),this},h.prototype.contains=function(u){const p=this._baseState;return d(p.use===null),p.contains=u,this},h.prototype._decode=function(u,p){const m=this._baseState;if(m.parent===null)return u.wrapResult(m.children[0]._decode(u,p));let w=m.default,_=!0,C=null;if(m.key!==null&&(C=u.enterKey(m.key)),m.optional){let P=null;if(m.explicit!==null?P=m.explicit:m.implicit!==null?P=m.implicit:m.tag!==null&&(P=m.tag),P===null&&!m.any){const M=u.save();try{m.choice===null?this._decodeGeneric(m.tag,u,p):this._decodeChoice(u,p),_=!0}catch{_=!1}u.restore(M)}else if(_=this._peekTag(u,P,m.any),u.isError(_))return _}let N;if(m.obj&&_&&(N=u.enterObject()),_){if(m.explicit!==null){const M=this._decodeTag(u,m.explicit);if(u.isError(M))return M;u=M}const P=u.offset;if(m.use===null&&m.choice===null){let M;m.any&&(M=u.save());const U=this._decodeTag(u,m.implicit!==null?m.implicit:m.tag,m.any);if(u.isError(U))return U;m.any?w=u.raw(M):u=U}if(p&&p.track&&m.tag!==null&&p.track(u.path(),P,u.length,"tagged"),p&&p.track&&m.tag!==null&&p.track(u.path(),u.offset,u.length,"content"),m.any||(m.choice===null?w=this._decodeGeneric(m.tag,u,p):w=this._decodeChoice(u,p)),u.isError(w))return w;if(!m.any&&m.choice===null&&m.children!==null&&m.children.forEach(function(U){U._decode(u,p)}),m.contains&&(m.tag==="octstr"||m.tag==="bitstr")){const M=new o(w);w=this._getUse(m.contains,u._reporterState.obj)._decode(M,p)}}return m.obj&&_&&(w=u.leaveObject(N)),m.key!==null&&(w!==null||_===!0)?u.leaveKey(C,m.key,w):C!==null&&u.exitKey(C),w},h.prototype._decodeGeneric=function(u,p,m){const w=this._baseState;return u==="seq"||u==="set"?null:u==="seqof"||u==="setof"?this._decodeList(p,u,w.args[0],m):/str$/.test(u)?this._decodeStr(p,u,m):u==="objid"&&w.args?this._decodeObjid(p,w.args[0],w.args[1],m):u==="objid"?this._decodeObjid(p,null,null,m):u==="gentime"||u==="utctime"?this._decodeTime(p,u,m):u==="null_"?this._decodeNull(p,m):u==="bool"?this._decodeBool(p,m):u==="objDesc"?this._decodeStr(p,u,m):u==="int"||u==="enum"?this._decodeInt(p,w.args&&w.args[0],m):w.use!==null?this._getUse(w.use,p._reporterState.obj)._decode(p,m):p.error("unknown tag: "+u)},h.prototype._getUse=function(u,p){const m=this._baseState;return m.useDecoder=this._use(u,p),d(m.useDecoder._baseState.parent===null),m.useDecoder=m.useDecoder._baseState.children[0],m.implicit!==m.useDecoder._baseState.implicit&&(m.useDecoder=m.useDecoder.clone(),m.useDecoder._baseState.implicit=m.implicit),m.useDecoder},h.prototype._decodeChoice=function(u,p){const m=this._baseState;let w=null,_=!1;return Object.keys(m.choice).some(function(C){const N=u.save(),P=m.choice[C];try{const M=P._decode(u,p);if(u.isError(M))return!1;w={type:C,value:M},_=!0}catch{return u.restore(N),!1}return!0},this),_?w:u.error("Choice not matched")},h.prototype._createEncoderBuffer=function(u){return new a(u,this.reporter)},h.prototype._encode=function(u,p,m){const w=this._baseState;if(w.default!==null&&w.default===u)return;const _=this._encodeValue(u,p,m);if(_!==void 0&&!this._skipDefault(_,p,m))return _},h.prototype._encodeValue=function(u,p,m){const w=this._baseState;if(w.parent===null)return w.children[0]._encode(u,p||new n);let _=null;if(this.reporter=p,w.optional&&u===void 0)if(w.default!==null)u=w.default;else return;let C=null,N=!1;if(w.any)_=this._createEncoderBuffer(u);else if(w.choice)_=this._encodeChoice(u,p);else if(w.contains)C=this._getUse(w.contains,m)._encode(u,p),N=!0;else if(w.children)C=w.children.map(function(P){if(P._baseState.tag==="null_")return P._encode(null,p,u);if(P._baseState.key===null)return p.error("Child should have a key");const M=p.enterKey(P._baseState.key);if(typeof u!="object")return p.error("Child expected, but input is not object");const U=P._encode(u[P._baseState.key],p,u);return p.leaveKey(M),U},this).filter(function(P){return P}),C=this._createEncoderBuffer(C);else if(w.tag==="seqof"||w.tag==="setof"){if(!(w.args&&w.args.length===1))return p.error("Too many args for : "+w.tag);if(!Array.isArray(u))return p.error("seqof/setof, but data is not Array");const P=this.clone();P._baseState.implicit=null,C=this._createEncoderBuffer(u.map(function(M){const U=this._baseState;return this._getUse(U.args[0],u)._encode(M,p)},P))}else w.use!==null?_=this._getUse(w.use,m)._encode(u,p):(C=this._encodePrimitive(w.tag,u),N=!0);if(!w.any&&w.choice===null){const P=w.implicit!==null?w.implicit:w.tag,M=w.implicit===null?"universal":"context";P===null?w.use===null&&p.error("Tag could be omitted only for .use()"):w.use===null&&(_=this._encodeComposite(P,N,M,C))}return w.explicit!==null&&(_=this._encodeComposite(w.explicit,!1,"context",_)),_},h.prototype._encodeChoice=function(u,p){const m=this._baseState,w=m.choice[u.type];return w||d(!1,u.type+" not found in "+JSON.stringify(Object.keys(m.choice))),w._encode(u.value,p)},h.prototype._encodePrimitive=function(u,p){const m=this._baseState;if(/str$/.test(u))return this._encodeStr(p,u);if(u==="objid"&&m.args)return this._encodeObjid(p,m.reverseArgs[0],m.args[1]);if(u==="objid")return this._encodeObjid(p,null,null);if(u==="gentime"||u==="utctime")return this._encodeTime(p,u);if(u==="null_")return this._encodeNull();if(u==="int"||u==="enum")return this._encodeInt(p,m.args&&m.reverseArgs[0]);if(u==="bool")return this._encodeBool(p);if(u==="objDesc")return this._encodeStr(p,u);throw new Error("Unsupported tag: "+u)},h.prototype._isNumstr=function(u){return/^[0-9 ]*$/.test(u)},h.prototype._isPrintstr=function(u){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(u)}},{"../base/buffer":125,"../base/reporter":128,"minimalistic-assert":241}],128:[function(e,i,t){const n=e("inherits");function a(d){this._reporterState={obj:null,path:[],options:d||{},errors:[]}}t.Reporter=a,a.prototype.isError=function(s){return s instanceof o},a.prototype.save=function(){const s=this._reporterState;return{obj:s.obj,pathLen:s.path.length}},a.prototype.restore=function(s){const f=this._reporterState;f.obj=s.obj,f.path=f.path.slice(0,s.pathLen)},a.prototype.enterKey=function(s){return this._reporterState.path.push(s)},a.prototype.exitKey=function(s){const f=this._reporterState;f.path=f.path.slice(0,s-1)},a.prototype.leaveKey=function(s,f,c){const h=this._reporterState;this.exitKey(s),h.obj!==null&&(h.obj[f]=c)},a.prototype.path=function(){return this._reporterState.path.join("/")},a.prototype.enterObject=function(){const s=this._reporterState,f=s.obj;return s.obj={},f},a.prototype.leaveObject=function(s){const f=this._reporterState,c=f.obj;return f.obj=s,c},a.prototype.error=function(s){let f;const c=this._reporterState,h=s instanceof o;if(h?f=s:f=new o(c.path.map(function(v){return"["+JSON.stringify(v)+"]"}).join(""),s.message||s,s.stack),!c.options.partial)throw f;return h||c.errors.push(f),f},a.prototype.wrapResult=function(s){const f=this._reporterState;return f.options.partial?{result:this.isError(s)?null:s,errors:f.errors}:s};function o(d,s){this.path=d,this.rethrow(s)}n(o,Error),o.prototype.rethrow=function(s){if(this.message=s+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(f){this.stack=f.stack}return this}},{inherits:233}],129:[function(e,i,t){function n(a){const o={};return Object.keys(a).forEach(function(d){(d|0)==d&&(d=d|0);const s=a[d];o[s]=d}),o}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=n(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=n(t.tag)},{}],130:[function(e,i,t){const n=t;n._reverse=function(o){const d={};return Object.keys(o).forEach(function(s){(s|0)==s&&(s=s|0);const f=o[s];d[f]=s}),d},n.der=e("./der")},{"./der":129}],131:[function(e,i,t){const n=e("inherits"),a=e("bn.js"),o=e("../base/buffer").DecoderBuffer,d=e("../base/node"),s=e("../constants/der");function f(l){this.enc="der",this.name=l.name,this.entity=l,this.tree=new c,this.tree._init(l.body)}i.exports=f,f.prototype.decode=function(u,p){return o.isDecoderBuffer(u)||(u=new o(u,p)),this.tree._decode(u,p)};function c(l){d.call(this,"der",l)}n(c,d),c.prototype._peekTag=function(u,p,m){if(u.isEmpty())return!1;const w=u.save(),_=h(u,'Failed to peek tag: "'+p+'"');return u.isError(_)?_:(u.restore(w),_.tag===p||_.tagStr===p||_.tagStr+"of"===p||m)},c.prototype._decodeTag=function(u,p,m){const w=h(u,'Failed to decode tag of "'+p+'"');if(u.isError(w))return w;let _=v(u,w.primitive,'Failed to get length of "'+p+'"');if(u.isError(_))return _;if(!m&&w.tag!==p&&w.tagStr!==p&&w.tagStr+"of"!==p)return u.error('Failed to match tag: "'+p+'"');if(w.primitive||_!==null)return u.skip(_,'Failed to match body of: "'+p+'"');const C=u.save(),N=this._skipUntilEnd(u,'Failed to skip indefinite length body: "'+this.tag+'"');return u.isError(N)?N:(_=u.offset-C.offset,u.restore(C),u.skip(_,'Failed to match body of: "'+p+'"'))},c.prototype._skipUntilEnd=function(u,p){for(;;){const m=h(u,p);if(u.isError(m))return m;const w=v(u,m.primitive,p);if(u.isError(w))return w;let _;if(m.primitive||w!==null?_=u.skip(w):_=this._skipUntilEnd(u,p),u.isError(_))return _;if(m.tagStr==="end")break}},c.prototype._decodeList=function(u,p,m,w){const _=[];for(;!u.isEmpty();){const C=this._peekTag(u,"end");if(u.isError(C))return C;const N=m.decode(u,"der",w);if(u.isError(N)&&C)break;_.push(N)}return _},c.prototype._decodeStr=function(u,p){if(p==="bitstr"){const m=u.readUInt8();return u.isError(m)?m:{unused:m,data:u.raw()}}else if(p==="bmpstr"){const m=u.raw();if(m.length%2===1)return u.error("Decoding of string type: bmpstr length mismatch");let w="";for(let _=0;_<m.length/2;_++)w+=String.fromCharCode(m.readUInt16BE(_*2));return w}else if(p==="numstr"){const m=u.raw().toString("ascii");return this._isNumstr(m)?m:u.error("Decoding of string type: numstr unsupported characters")}else{if(p==="octstr")return u.raw();if(p==="objDesc")return u.raw();if(p==="printstr"){const m=u.raw().toString("ascii");return this._isPrintstr(m)?m:u.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(p)?u.raw().toString():u.error("Decoding of string type: "+p+" unsupported")}},c.prototype._decodeObjid=function(u,p,m){let w;const _=[];let C=0,N=0;for(;!u.isEmpty();)N=u.readUInt8(),C<<=7,C|=N&127,N&128||(_.push(C),C=0);N&128&&_.push(C);const P=_[0]/40|0,M=_[0]%40;if(m?w=_:w=[P,M].concat(_.slice(1)),p){let U=p[w.join(" ")];U===void 0&&(U=p[w.join(".")]),U!==void 0&&(w=U)}return w},c.prototype._decodeTime=function(u,p){const m=u.raw().toString();let w,_,C,N,P,M;if(p==="gentime")w=m.slice(0,4)|0,_=m.slice(4,6)|0,C=m.slice(6,8)|0,N=m.slice(8,10)|0,P=m.slice(10,12)|0,M=m.slice(12,14)|0;else if(p==="utctime")w=m.slice(0,2)|0,_=m.slice(2,4)|0,C=m.slice(4,6)|0,N=m.slice(6,8)|0,P=m.slice(8,10)|0,M=m.slice(10,12)|0,w<70?w=2e3+w:w=1900+w;else return u.error("Decoding "+p+" time is not supported yet");return Date.UTC(w,_-1,C,N,P,M,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(u){const p=u.readUInt8();return u.isError(p)?p:p!==0},c.prototype._decodeInt=function(u,p){const m=u.raw();let w=new a(m);return p&&(w=p[w.toString(10)]||w),w},c.prototype._use=function(u,p){return typeof u=="function"&&(u=u(p)),u._getDecoder("der").tree};function h(l,u){let p=l.readUInt8(u);if(l.isError(p))return p;const m=s.tagClass[p>>6],w=(p&32)===0;if((p&31)===31){let C=p;for(p=0;(C&128)===128;){if(C=l.readUInt8(u),l.isError(C))return C;p<<=7,p|=C&127}}else p&=31;const _=s.tag[p];return{cls:m,primitive:w,tag:p,tagStr:_}}function v(l,u,p){let m=l.readUInt8(p);if(l.isError(m))return m;if(!u&&m===128)return null;if(!(m&128))return m;const w=m&127;if(w>4)return l.error("length octect is too long");m=0;for(let _=0;_<w;_++){m<<=8;const C=l.readUInt8(p);if(l.isError(C))return C;m|=C}return m}},{"../base/buffer":125,"../base/node":127,"../constants/der":129,"bn.js":139,inherits:233}],132:[function(e,i,t){const n=t;n.der=e("./der"),n.pem=e("./pem")},{"./der":131,"./pem":133}],133:[function(e,i,t){const n=e("inherits"),a=e("safer-buffer").Buffer,o=e("./der");function d(s){o.call(this,s),this.enc="pem"}n(d,o),i.exports=d,d.prototype.decode=function(f,c){const h=f.toString().split(/[\r\n]+/g),v=c.label.toUpperCase(),l=/^-----(BEGIN|END) ([^-]+)-----$/;let u=-1,p=-1;for(let _=0;_<h.length;_++){const C=h[_].match(l);if(C!==null&&C[2]===v)if(u===-1){if(C[1]!=="BEGIN")break;u=_}else{if(C[1]!=="END")break;p=_;break}}if(u===-1||p===-1)throw new Error("PEM section not found for: "+v);const m=h.slice(u+1,p).join("");m.replace(/[^a-z0-9+/=]+/gi,"");const w=a.from(m,"base64");return o.prototype.decode.call(this,w,c)}},{"./der":131,inherits:233,"safer-buffer":280}],134:[function(e,i,t){const n=e("inherits"),a=e("safer-buffer").Buffer,o=e("../base/node"),d=e("../constants/der");function s(v){this.enc="der",this.name=v.name,this.entity=v,this.tree=new f,this.tree._init(v.body)}i.exports=s,s.prototype.encode=function(l,u){return this.tree._encode(l,u).join()};function f(v){o.call(this,"der",v)}n(f,o),f.prototype._encodeComposite=function(l,u,p,m){const w=h(l,u,p,this.reporter);if(m.length<128){const N=a.alloc(2);return N[0]=w,N[1]=m.length,this._createEncoderBuffer([N,m])}let _=1;for(let N=m.length;N>=256;N>>=8)_++;const C=a.alloc(1+1+_);C[0]=w,C[1]=128|_;for(let N=1+_,P=m.length;P>0;N--,P>>=8)C[N]=P&255;return this._createEncoderBuffer([C,m])},f.prototype._encodeStr=function(l,u){if(u==="bitstr")return this._createEncoderBuffer([l.unused|0,l.data]);if(u==="bmpstr"){const p=a.alloc(l.length*2);for(let m=0;m<l.length;m++)p.writeUInt16BE(l.charCodeAt(m),m*2);return this._createEncoderBuffer(p)}else return u==="numstr"?this._isNumstr(l)?this._createEncoderBuffer(l):this.reporter.error("Encoding of string type: numstr supports only digits and space"):u==="printstr"?this._isPrintstr(l)?this._createEncoderBuffer(l):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(u)?this._createEncoderBuffer(l):u==="objDesc"?this._createEncoderBuffer(l):this.reporter.error("Encoding of string type: "+u+" unsupported")},f.prototype._encodeObjid=function(l,u,p){if(typeof l=="string"){if(!u)return this.reporter.error("string objid given, but no values map found");if(!u.hasOwnProperty(l))return this.reporter.error("objid not found in values map");l=u[l].split(/[\s.]+/g);for(let C=0;C<l.length;C++)l[C]|=0}else if(Array.isArray(l)){l=l.slice();for(let C=0;C<l.length;C++)l[C]|=0}if(!Array.isArray(l))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(l));if(!p){if(l[1]>=40)return this.reporter.error("Second objid identifier OOB");l.splice(0,2,l[0]*40+l[1])}let m=0;for(let C=0;C<l.length;C++){let N=l[C];for(m++;N>=128;N>>=7)m++}const w=a.alloc(m);let _=w.length-1;for(let C=l.length-1;C>=0;C--){let N=l[C];for(w[_--]=N&127;(N>>=7)>0;)w[_--]=128|N&127}return this._createEncoderBuffer(w)};function c(v){return v<10?"0"+v:v}f.prototype._encodeTime=function(l,u){let p;const m=new Date(l);return u==="gentime"?p=[c(m.getUTCFullYear()),c(m.getUTCMonth()+1),c(m.getUTCDate()),c(m.getUTCHours()),c(m.getUTCMinutes()),c(m.getUTCSeconds()),"Z"].join(""):u==="utctime"?p=[c(m.getUTCFullYear()%100),c(m.getUTCMonth()+1),c(m.getUTCDate()),c(m.getUTCHours()),c(m.getUTCMinutes()),c(m.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+u+" time is not supported yet"),this._encodeStr(p,"octstr")},f.prototype._encodeNull=function(){return this._createEncoderBuffer("")},f.prototype._encodeInt=function(l,u){if(typeof l=="string"){if(!u)return this.reporter.error("String int or enum given, but no values map");if(!u.hasOwnProperty(l))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(l));l=u[l]}if(typeof l!="number"&&!a.isBuffer(l)){const w=l.toArray();!l.sign&&w[0]&128&&w.unshift(0),l=a.from(w)}if(a.isBuffer(l)){let w=l.length;l.length===0&&w++;const _=a.alloc(w);return l.copy(_),l.length===0&&(_[0]=0),this._createEncoderBuffer(_)}if(l<128)return this._createEncoderBuffer(l);if(l<256)return this._createEncoderBuffer([0,l]);let p=1;for(let w=l;w>=256;w>>=8)p++;const m=new Array(p);for(let w=m.length-1;w>=0;w--)m[w]=l&255,l>>=8;return m[0]&128&&m.unshift(0),this._createEncoderBuffer(a.from(m))},f.prototype._encodeBool=function(l){return this._createEncoderBuffer(l?255:0)},f.prototype._use=function(l,u){return typeof l=="function"&&(l=l(u)),l._getEncoder("der").tree},f.prototype._skipDefault=function(l,u,p){const m=this._baseState;let w;if(m.default===null)return!1;const _=l.join();if(m.defaultBuffer===void 0&&(m.defaultBuffer=this._encodeValue(m.default,u,p).join()),_.length!==m.defaultBuffer.length)return!1;for(w=0;w<_.length;w++)if(_[w]!==m.defaultBuffer[w])return!1;return!0};function h(v,l,u,p){let m;if(v==="seqof"?v="seq":v==="setof"&&(v="set"),d.tagByName.hasOwnProperty(v))m=d.tagByName[v];else if(typeof v=="number"&&(v|0)===v)m=v;else return p.error("Unknown tag: "+v);return m>=31?p.error("Multi-octet tag encoding unsupported"):(l||(m|=32),m|=d.tagClassByName[u||"universal"]<<6,m)}},{"../base/node":127,"../constants/der":129,inherits:233,"safer-buffer":280}],135:[function(e,i,t){const n=t;n.der=e("./der"),n.pem=e("./pem")},{"./der":134,"./pem":136}],136:[function(e,i,t){const n=e("inherits"),a=e("./der");function o(d){a.call(this,d),this.enc="pem"}n(o,a),i.exports=o,o.prototype.encode=function(s,f){const h=a.prototype.encode.call(this,s).toString("base64"),v=["-----BEGIN "+f.label+"-----"];for(let l=0;l<h.length;l+=64)v.push(h.slice(l,l+64));return v.push("-----END "+f.label+"-----"),v.join(`
`)}},{"./der":134,inherits:233}],137:[function(e,i,t){(function(n){(function(){var a=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o=typeof globalThis>"u"?n:globalThis;i.exports=function(){for(var s=[],f=0;f<a.length;f++)typeof o[a[f]]=="function"&&(s[s.length]=a[f]);return s}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],138:[function(e,i,t){t.byteLength=h,t.toByteArray=l,t.fromByteArray=m;for(var n=[],a=[],o=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,f=d.length;s<f;++s)n[s]=d[s],a[d.charCodeAt(s)]=s;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function c(w){var _=w.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=w.indexOf("=");C===-1&&(C=_);var N=C===_?0:4-C%4;return[C,N]}function h(w){var _=c(w),C=_[0],N=_[1];return(C+N)*3/4-N}function v(w,_,C){return(_+C)*3/4-C}function l(w){var _,C=c(w),N=C[0],P=C[1],M=new o(v(w,N,P)),U=0,W=P>0?N-4:N,q;for(q=0;q<W;q+=4)_=a[w.charCodeAt(q)]<<18|a[w.charCodeAt(q+1)]<<12|a[w.charCodeAt(q+2)]<<6|a[w.charCodeAt(q+3)],M[U++]=_>>16&255,M[U++]=_>>8&255,M[U++]=_&255;return P===2&&(_=a[w.charCodeAt(q)]<<2|a[w.charCodeAt(q+1)]>>4,M[U++]=_&255),P===1&&(_=a[w.charCodeAt(q)]<<10|a[w.charCodeAt(q+1)]<<4|a[w.charCodeAt(q+2)]>>2,M[U++]=_>>8&255,M[U++]=_&255),M}function u(w){return n[w>>18&63]+n[w>>12&63]+n[w>>6&63]+n[w&63]}function p(w,_,C){for(var N,P=[],M=_;M<C;M+=3)N=(w[M]<<16&16711680)+(w[M+1]<<8&65280)+(w[M+2]&255),P.push(u(N));return P.join("")}function m(w){for(var _,C=w.length,N=C%3,P=[],M=16383,U=0,W=C-N;U<W;U+=M)P.push(p(w,U,U+M>W?W:U+M));return N===1?(_=w[C-1],P.push(n[_>>2]+n[_<<4&63]+"==")):N===2&&(_=(w[C-2]<<8)+w[C-1],P.push(n[_>>10]+n[_>>4&63]+n[_<<2&63]+"=")),P.join("")}},{}],139:[function(e,i,t){(function(n,a){function o(x,S){if(!x)throw new Error(S||"Assertion failed")}function d(x,S){x.super_=S;var k=function(){};k.prototype=S.prototype,x.prototype=new k,x.prototype.constructor=x}function s(x,S,k){if(s.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((S==="le"||S==="be")&&(k=S,S=10),this._init(x||0,S||10,k||"be"))}typeof n=="object"?n.exports=s:a.BN=s,s.BN=s,s.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=e("buffer").Buffer}catch{}s.isBN=function(S){return S instanceof s?!0:S!==null&&typeof S=="object"&&S.constructor.wordSize===s.wordSize&&Array.isArray(S.words)},s.max=function(S,k){return S.cmp(k)>0?S:k},s.min=function(S,k){return S.cmp(k)<0?S:k},s.prototype._init=function(S,k,g){if(typeof S=="number")return this._initNumber(S,k,g);if(typeof S=="object")return this._initArray(S,k,g);k==="hex"&&(k=16),o(k===(k|0)&&k>=2&&k<=36),S=S.toString().replace(/\s+/g,"");var E=0;S[0]==="-"&&(E++,this.negative=1),E<S.length&&(k===16?this._parseHex(S,E,g):(this._parseBase(S,k,E),g==="le"&&this._initArray(this.toArray(),k,g)))},s.prototype._initNumber=function(S,k,g){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[S&67108863],this.length=1):S<4503599627370496?(this.words=[S&67108863,S/67108864&67108863],this.length=2):(o(S<9007199254740992),this.words=[S&67108863,S/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),k,g)},s.prototype._initArray=function(S,k,g){if(o(typeof S.length=="number"),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var T,A,J=0;if(g==="be")for(E=S.length-1,T=0;E>=0;E-=3)A=S[E]|S[E-1]<<8|S[E-2]<<16,this.words[T]|=A<<J&67108863,this.words[T+1]=A>>>26-J&67108863,J+=24,J>=26&&(J-=26,T++);else if(g==="le")for(E=0,T=0;E<S.length;E+=3)A=S[E]|S[E+1]<<8|S[E+2]<<16,this.words[T]|=A<<J&67108863,this.words[T+1]=A>>>26-J&67108863,J+=24,J>=26&&(J-=26,T++);return this.strip()};function c(x,S){var k=x.charCodeAt(S);return k>=65&&k<=70?k-55:k>=97&&k<=102?k-87:k-48&15}function h(x,S,k){var g=c(x,k);return k-1>=S&&(g|=c(x,k-1)<<4),g}s.prototype._parseHex=function(S,k,g){this.length=Math.ceil((S.length-k)/6),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var T=0,A=0,J;if(g==="be")for(E=S.length-1;E>=k;E-=2)J=h(S,k,E)<<T,this.words[A]|=J&67108863,T>=18?(T-=18,A+=1,this.words[A]|=J>>>26):T+=8;else{var G=S.length-k;for(E=G%2===0?k+1:k;E<S.length;E+=2)J=h(S,k,E)<<T,this.words[A]|=J&67108863,T>=18?(T-=18,A+=1,this.words[A]|=J>>>26):T+=8}this.strip()};function v(x,S,k,g){for(var E=0,T=Math.min(x.length,k),A=S;A<T;A++){var J=x.charCodeAt(A)-48;E*=g,J>=49?E+=J-49+10:J>=17?E+=J-17+10:E+=J}return E}s.prototype._parseBase=function(S,k,g){this.words=[0],this.length=1;for(var E=0,T=1;T<=67108863;T*=k)E++;E--,T=T/k|0;for(var A=S.length-g,J=A%E,G=Math.min(A,A-J)+g,I=0,V=g;V<G;V+=E)I=v(S,V,V+E,k),this.imuln(T),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(J!==0){var B=1;for(I=v(S,V,S.length,k),V=0;V<J;V++)B*=k;this.imuln(B),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this.strip()},s.prototype.copy=function(S){S.words=new Array(this.length);for(var k=0;k<this.length;k++)S.words[k]=this.words[k];S.length=this.length,S.negative=this.negative,S.red=this.red},s.prototype.clone=function(){var S=new s(null);return this.copy(S),S},s.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(S,k){S=S||10,k=k|0||1;var g;if(S===16||S==="hex"){g="";for(var E=0,T=0,A=0;A<this.length;A++){var J=this.words[A],G=((J<<E|T)&16777215).toString(16);T=J>>>24-E&16777215,T!==0||A!==this.length-1?g=l[6-G.length]+G+g:g=G+g,E+=2,E>=26&&(E-=26,A--)}for(T!==0&&(g=T.toString(16)+g);g.length%k!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(S===(S|0)&&S>=2&&S<=36){var I=u[S],V=p[S];g="";var B=this.clone();for(B.negative=0;!B.isZero();){var z=B.modn(V).toString(S);B=B.idivn(V),B.isZero()?g=z+g:g=l[I-z.length]+z+g}for(this.isZero()&&(g="0"+g);g.length%k!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}o(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var S=this.words[0];return this.length===2?S+=this.words[1]*67108864:this.length===3&&this.words[2]===1?S+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-S:S},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(S,k){return o(typeof f<"u"),this.toArrayLike(f,S,k)},s.prototype.toArray=function(S,k){return this.toArrayLike(Array,S,k)},s.prototype.toArrayLike=function(S,k,g){var E=this.byteLength(),T=g||Math.max(1,E);o(E<=T,"byte array longer than desired length"),o(T>0,"Requested array length <= 0"),this.strip();var A=k==="le",J=new S(T),G,I,V=this.clone();if(A){for(I=0;!V.isZero();I++)G=V.andln(255),V.iushrn(8),J[I]=G;for(;I<T;I++)J[I]=0}else{for(I=0;I<T-E;I++)J[I]=0;for(I=0;!V.isZero();I++)G=V.andln(255),V.iushrn(8),J[T-I-1]=G}return J},Math.clz32?s.prototype._countBits=function(S){return 32-Math.clz32(S)}:s.prototype._countBits=function(S){var k=S,g=0;return k>=4096&&(g+=13,k>>>=13),k>=64&&(g+=7,k>>>=7),k>=8&&(g+=4,k>>>=4),k>=2&&(g+=2,k>>>=2),g+k},s.prototype._zeroBits=function(S){if(S===0)return 26;var k=S,g=0;return k&8191||(g+=13,k>>>=13),k&127||(g+=7,k>>>=7),k&15||(g+=4,k>>>=4),k&3||(g+=2,k>>>=2),k&1||g++,g},s.prototype.bitLength=function(){var S=this.words[this.length-1],k=this._countBits(S);return(this.length-1)*26+k};function m(x){for(var S=new Array(x.bitLength()),k=0;k<S.length;k++){var g=k/26|0,E=k%26;S[k]=(x.words[g]&1<<E)>>>E}return S}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,k=0;k<this.length;k++){var g=this._zeroBits(this.words[k]);if(S+=g,g!==26)break}return S},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(S){return this.negative!==0?this.abs().inotn(S).iaddn(1):this.clone()},s.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var k=0;k<S.length;k++)this.words[k]=this.words[k]|S.words[k];return this.strip()},s.prototype.ior=function(S){return o((this.negative|S.negative)===0),this.iuor(S)},s.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},s.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},s.prototype.iuand=function(S){var k;this.length>S.length?k=S:k=this;for(var g=0;g<k.length;g++)this.words[g]=this.words[g]&S.words[g];return this.length=k.length,this.strip()},s.prototype.iand=function(S){return o((this.negative|S.negative)===0),this.iuand(S)},s.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},s.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},s.prototype.iuxor=function(S){var k,g;this.length>S.length?(k=this,g=S):(k=S,g=this);for(var E=0;E<g.length;E++)this.words[E]=k.words[E]^g.words[E];if(this!==k)for(;E<k.length;E++)this.words[E]=k.words[E];return this.length=k.length,this.strip()},s.prototype.ixor=function(S){return o((this.negative|S.negative)===0),this.iuxor(S)},s.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},s.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},s.prototype.inotn=function(S){o(typeof S=="number"&&S>=0);var k=Math.ceil(S/26)|0,g=S%26;this._expand(k),g>0&&k--;for(var E=0;E<k;E++)this.words[E]=~this.words[E]&67108863;return g>0&&(this.words[E]=~this.words[E]&67108863>>26-g),this.strip()},s.prototype.notn=function(S){return this.clone().inotn(S)},s.prototype.setn=function(S,k){o(typeof S=="number"&&S>=0);var g=S/26|0,E=S%26;return this._expand(g+1),k?this.words[g]=this.words[g]|1<<E:this.words[g]=this.words[g]&~(1<<E),this.strip()},s.prototype.iadd=function(S){var k;if(this.negative!==0&&S.negative===0)return this.negative=0,k=this.isub(S),this.negative^=1,this._normSign();if(this.negative===0&&S.negative!==0)return S.negative=0,k=this.isub(S),S.negative=1,k._normSign();var g,E;this.length>S.length?(g=this,E=S):(g=S,E=this);for(var T=0,A=0;A<E.length;A++)k=(g.words[A]|0)+(E.words[A]|0)+T,this.words[A]=k&67108863,T=k>>>26;for(;T!==0&&A<g.length;A++)k=(g.words[A]|0)+T,this.words[A]=k&67108863,T=k>>>26;if(this.length=g.length,T!==0)this.words[this.length]=T,this.length++;else if(g!==this)for(;A<g.length;A++)this.words[A]=g.words[A];return this},s.prototype.add=function(S){var k;return S.negative!==0&&this.negative===0?(S.negative=0,k=this.sub(S),S.negative^=1,k):S.negative===0&&this.negative!==0?(this.negative=0,k=S.sub(this),this.negative=1,k):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},s.prototype.isub=function(S){if(S.negative!==0){S.negative=0;var k=this.iadd(S);return S.negative=1,k._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var g=this.cmp(S);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var E,T;g>0?(E=this,T=S):(E=S,T=this);for(var A=0,J=0;J<T.length;J++)k=(E.words[J]|0)-(T.words[J]|0)+A,A=k>>26,this.words[J]=k&67108863;for(;A!==0&&J<E.length;J++)k=(E.words[J]|0)+A,A=k>>26,this.words[J]=k&67108863;if(A===0&&J<E.length&&E!==this)for(;J<E.length;J++)this.words[J]=E.words[J];return this.length=Math.max(this.length,J),E!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(S){return this.clone().isub(S)};function w(x,S,k){k.negative=S.negative^x.negative;var g=x.length+S.length|0;k.length=g,g=g-1|0;var E=x.words[0]|0,T=S.words[0]|0,A=E*T,J=A&67108863,G=A/67108864|0;k.words[0]=J;for(var I=1;I<g;I++){for(var V=G>>>26,B=G&67108863,z=Math.min(I,S.length-1),ie=Math.max(0,I-x.length+1);ie<=z;ie++){var de=I-ie|0;E=x.words[de]|0,T=S.words[ie]|0,A=E*T+B,V+=A/67108864|0,B=A&67108863}k.words[I]=B|0,G=V|0}return G!==0?k.words[I]=G|0:k.length--,k.strip()}var _=function(S,k,g){var E=S.words,T=k.words,A=g.words,J=0,G,I,V,B=E[0]|0,z=B&8191,ie=B>>>13,de=E[1]|0,me=de&8191,be=de>>>13,we=E[2]|0,oe=we&8191,ce=we>>>13,ge=E[3]|0,ke=ge&8191,le=ge>>>13,te=E[4]|0,ee=te&8191,Q=te>>>13,F=E[5]|0,$=F&8191,X=F>>>13,se=E[6]|0,ve=se&8191,Se=se>>>13,ue=E[7]|0,y=ue&8191,L=ue>>>13,H=E[8]|0,fe=H&8191,j=H>>>13,b=E[9]|0,D=b&8191,K=b>>>13,pe=T[0]|0,ae=pe&8191,_e=pe>>>13,Oe=T[1]|0,Pe=Oe&8191,Ue=Oe>>>13,xe=T[2]|0,Ae=xe&8191,Re=xe>>>13,We=T[3]|0,De=We&8191,Be=We>>>13,He=T[4]|0,Me=He&8191,qe=He>>>13,Qe=T[5]|0,Fe=Qe&8191,Ye=Qe>>>13,Xe=T[6]|0,Je=Xe&8191,je=Xe>>>13,ze=T[7]|0,Ve=ze&8191,et=ze>>>13,tt=T[8]|0,Ge=tt&8191,rt=tt>>>13,it=T[9]|0,Le=it&8191,nt=it>>>13;g.negative=S.negative^k.negative,g.length=19,G=Math.imul(z,ae),I=Math.imul(z,_e),I=I+Math.imul(ie,ae)|0,V=Math.imul(ie,_e);var Ke=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,G=Math.imul(me,ae),I=Math.imul(me,_e),I=I+Math.imul(be,ae)|0,V=Math.imul(be,_e),G=G+Math.imul(z,Pe)|0,I=I+Math.imul(z,Ue)|0,I=I+Math.imul(ie,Pe)|0,V=V+Math.imul(ie,Ue)|0;var Ze=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,G=Math.imul(oe,ae),I=Math.imul(oe,_e),I=I+Math.imul(ce,ae)|0,V=Math.imul(ce,_e),G=G+Math.imul(me,Pe)|0,I=I+Math.imul(me,Ue)|0,I=I+Math.imul(be,Pe)|0,V=V+Math.imul(be,Ue)|0,G=G+Math.imul(z,Ae)|0,I=I+Math.imul(z,Re)|0,I=I+Math.imul(ie,Ae)|0,V=V+Math.imul(ie,Re)|0;var ne=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ne>>>26)|0,ne&=67108863,G=Math.imul(ke,ae),I=Math.imul(ke,_e),I=I+Math.imul(le,ae)|0,V=Math.imul(le,_e),G=G+Math.imul(oe,Pe)|0,I=I+Math.imul(oe,Ue)|0,I=I+Math.imul(ce,Pe)|0,V=V+Math.imul(ce,Ue)|0,G=G+Math.imul(me,Ae)|0,I=I+Math.imul(me,Re)|0,I=I+Math.imul(be,Ae)|0,V=V+Math.imul(be,Re)|0,G=G+Math.imul(z,De)|0,I=I+Math.imul(z,Be)|0,I=I+Math.imul(ie,De)|0,V=V+Math.imul(ie,Be)|0;var he=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(he>>>26)|0,he&=67108863,G=Math.imul(ee,ae),I=Math.imul(ee,_e),I=I+Math.imul(Q,ae)|0,V=Math.imul(Q,_e),G=G+Math.imul(ke,Pe)|0,I=I+Math.imul(ke,Ue)|0,I=I+Math.imul(le,Pe)|0,V=V+Math.imul(le,Ue)|0,G=G+Math.imul(oe,Ae)|0,I=I+Math.imul(oe,Re)|0,I=I+Math.imul(ce,Ae)|0,V=V+Math.imul(ce,Re)|0,G=G+Math.imul(me,De)|0,I=I+Math.imul(me,Be)|0,I=I+Math.imul(be,De)|0,V=V+Math.imul(be,Be)|0,G=G+Math.imul(z,Me)|0,I=I+Math.imul(z,qe)|0,I=I+Math.imul(ie,Me)|0,V=V+Math.imul(ie,qe)|0;var ye=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ye>>>26)|0,ye&=67108863,G=Math.imul($,ae),I=Math.imul($,_e),I=I+Math.imul(X,ae)|0,V=Math.imul(X,_e),G=G+Math.imul(ee,Pe)|0,I=I+Math.imul(ee,Ue)|0,I=I+Math.imul(Q,Pe)|0,V=V+Math.imul(Q,Ue)|0,G=G+Math.imul(ke,Ae)|0,I=I+Math.imul(ke,Re)|0,I=I+Math.imul(le,Ae)|0,V=V+Math.imul(le,Re)|0,G=G+Math.imul(oe,De)|0,I=I+Math.imul(oe,Be)|0,I=I+Math.imul(ce,De)|0,V=V+Math.imul(ce,Be)|0,G=G+Math.imul(me,Me)|0,I=I+Math.imul(me,qe)|0,I=I+Math.imul(be,Me)|0,V=V+Math.imul(be,qe)|0,G=G+Math.imul(z,Fe)|0,I=I+Math.imul(z,Ye)|0,I=I+Math.imul(ie,Fe)|0,V=V+Math.imul(ie,Ye)|0;var Ee=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,G=Math.imul(ve,ae),I=Math.imul(ve,_e),I=I+Math.imul(Se,ae)|0,V=Math.imul(Se,_e),G=G+Math.imul($,Pe)|0,I=I+Math.imul($,Ue)|0,I=I+Math.imul(X,Pe)|0,V=V+Math.imul(X,Ue)|0,G=G+Math.imul(ee,Ae)|0,I=I+Math.imul(ee,Re)|0,I=I+Math.imul(Q,Ae)|0,V=V+Math.imul(Q,Re)|0,G=G+Math.imul(ke,De)|0,I=I+Math.imul(ke,Be)|0,I=I+Math.imul(le,De)|0,V=V+Math.imul(le,Be)|0,G=G+Math.imul(oe,Me)|0,I=I+Math.imul(oe,qe)|0,I=I+Math.imul(ce,Me)|0,V=V+Math.imul(ce,qe)|0,G=G+Math.imul(me,Fe)|0,I=I+Math.imul(me,Ye)|0,I=I+Math.imul(be,Fe)|0,V=V+Math.imul(be,Ye)|0,G=G+Math.imul(z,Je)|0,I=I+Math.imul(z,je)|0,I=I+Math.imul(ie,Je)|0,V=V+Math.imul(ie,je)|0;var Te=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Te>>>26)|0,Te&=67108863,G=Math.imul(y,ae),I=Math.imul(y,_e),I=I+Math.imul(L,ae)|0,V=Math.imul(L,_e),G=G+Math.imul(ve,Pe)|0,I=I+Math.imul(ve,Ue)|0,I=I+Math.imul(Se,Pe)|0,V=V+Math.imul(Se,Ue)|0,G=G+Math.imul($,Ae)|0,I=I+Math.imul($,Re)|0,I=I+Math.imul(X,Ae)|0,V=V+Math.imul(X,Re)|0,G=G+Math.imul(ee,De)|0,I=I+Math.imul(ee,Be)|0,I=I+Math.imul(Q,De)|0,V=V+Math.imul(Q,Be)|0,G=G+Math.imul(ke,Me)|0,I=I+Math.imul(ke,qe)|0,I=I+Math.imul(le,Me)|0,V=V+Math.imul(le,qe)|0,G=G+Math.imul(oe,Fe)|0,I=I+Math.imul(oe,Ye)|0,I=I+Math.imul(ce,Fe)|0,V=V+Math.imul(ce,Ye)|0,G=G+Math.imul(me,Je)|0,I=I+Math.imul(me,je)|0,I=I+Math.imul(be,Je)|0,V=V+Math.imul(be,je)|0,G=G+Math.imul(z,Ve)|0,I=I+Math.imul(z,et)|0,I=I+Math.imul(ie,Ve)|0,V=V+Math.imul(ie,et)|0;var Ne=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,G=Math.imul(fe,ae),I=Math.imul(fe,_e),I=I+Math.imul(j,ae)|0,V=Math.imul(j,_e),G=G+Math.imul(y,Pe)|0,I=I+Math.imul(y,Ue)|0,I=I+Math.imul(L,Pe)|0,V=V+Math.imul(L,Ue)|0,G=G+Math.imul(ve,Ae)|0,I=I+Math.imul(ve,Re)|0,I=I+Math.imul(Se,Ae)|0,V=V+Math.imul(Se,Re)|0,G=G+Math.imul($,De)|0,I=I+Math.imul($,Be)|0,I=I+Math.imul(X,De)|0,V=V+Math.imul(X,Be)|0,G=G+Math.imul(ee,Me)|0,I=I+Math.imul(ee,qe)|0,I=I+Math.imul(Q,Me)|0,V=V+Math.imul(Q,qe)|0,G=G+Math.imul(ke,Fe)|0,I=I+Math.imul(ke,Ye)|0,I=I+Math.imul(le,Fe)|0,V=V+Math.imul(le,Ye)|0,G=G+Math.imul(oe,Je)|0,I=I+Math.imul(oe,je)|0,I=I+Math.imul(ce,Je)|0,V=V+Math.imul(ce,je)|0,G=G+Math.imul(me,Ve)|0,I=I+Math.imul(me,et)|0,I=I+Math.imul(be,Ve)|0,V=V+Math.imul(be,et)|0,G=G+Math.imul(z,Ge)|0,I=I+Math.imul(z,rt)|0,I=I+Math.imul(ie,Ge)|0,V=V+Math.imul(ie,rt)|0;var Ie=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,G=Math.imul(D,ae),I=Math.imul(D,_e),I=I+Math.imul(K,ae)|0,V=Math.imul(K,_e),G=G+Math.imul(fe,Pe)|0,I=I+Math.imul(fe,Ue)|0,I=I+Math.imul(j,Pe)|0,V=V+Math.imul(j,Ue)|0,G=G+Math.imul(y,Ae)|0,I=I+Math.imul(y,Re)|0,I=I+Math.imul(L,Ae)|0,V=V+Math.imul(L,Re)|0,G=G+Math.imul(ve,De)|0,I=I+Math.imul(ve,Be)|0,I=I+Math.imul(Se,De)|0,V=V+Math.imul(Se,Be)|0,G=G+Math.imul($,Me)|0,I=I+Math.imul($,qe)|0,I=I+Math.imul(X,Me)|0,V=V+Math.imul(X,qe)|0,G=G+Math.imul(ee,Fe)|0,I=I+Math.imul(ee,Ye)|0,I=I+Math.imul(Q,Fe)|0,V=V+Math.imul(Q,Ye)|0,G=G+Math.imul(ke,Je)|0,I=I+Math.imul(ke,je)|0,I=I+Math.imul(le,Je)|0,V=V+Math.imul(le,je)|0,G=G+Math.imul(oe,Ve)|0,I=I+Math.imul(oe,et)|0,I=I+Math.imul(ce,Ve)|0,V=V+Math.imul(ce,et)|0,G=G+Math.imul(me,Ge)|0,I=I+Math.imul(me,rt)|0,I=I+Math.imul(be,Ge)|0,V=V+Math.imul(be,rt)|0,G=G+Math.imul(z,Le)|0,I=I+Math.imul(z,nt)|0,I=I+Math.imul(ie,Le)|0,V=V+Math.imul(ie,nt)|0;var Ce=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,G=Math.imul(D,Pe),I=Math.imul(D,Ue),I=I+Math.imul(K,Pe)|0,V=Math.imul(K,Ue),G=G+Math.imul(fe,Ae)|0,I=I+Math.imul(fe,Re)|0,I=I+Math.imul(j,Ae)|0,V=V+Math.imul(j,Re)|0,G=G+Math.imul(y,De)|0,I=I+Math.imul(y,Be)|0,I=I+Math.imul(L,De)|0,V=V+Math.imul(L,Be)|0,G=G+Math.imul(ve,Me)|0,I=I+Math.imul(ve,qe)|0,I=I+Math.imul(Se,Me)|0,V=V+Math.imul(Se,qe)|0,G=G+Math.imul($,Fe)|0,I=I+Math.imul($,Ye)|0,I=I+Math.imul(X,Fe)|0,V=V+Math.imul(X,Ye)|0,G=G+Math.imul(ee,Je)|0,I=I+Math.imul(ee,je)|0,I=I+Math.imul(Q,Je)|0,V=V+Math.imul(Q,je)|0,G=G+Math.imul(ke,Ve)|0,I=I+Math.imul(ke,et)|0,I=I+Math.imul(le,Ve)|0,V=V+Math.imul(le,et)|0,G=G+Math.imul(oe,Ge)|0,I=I+Math.imul(oe,rt)|0,I=I+Math.imul(ce,Ge)|0,V=V+Math.imul(ce,rt)|0,G=G+Math.imul(me,Le)|0,I=I+Math.imul(me,nt)|0,I=I+Math.imul(be,Le)|0,V=V+Math.imul(be,nt)|0;var $e=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+($e>>>26)|0,$e&=67108863,G=Math.imul(D,Ae),I=Math.imul(D,Re),I=I+Math.imul(K,Ae)|0,V=Math.imul(K,Re),G=G+Math.imul(fe,De)|0,I=I+Math.imul(fe,Be)|0,I=I+Math.imul(j,De)|0,V=V+Math.imul(j,Be)|0,G=G+Math.imul(y,Me)|0,I=I+Math.imul(y,qe)|0,I=I+Math.imul(L,Me)|0,V=V+Math.imul(L,qe)|0,G=G+Math.imul(ve,Fe)|0,I=I+Math.imul(ve,Ye)|0,I=I+Math.imul(Se,Fe)|0,V=V+Math.imul(Se,Ye)|0,G=G+Math.imul($,Je)|0,I=I+Math.imul($,je)|0,I=I+Math.imul(X,Je)|0,V=V+Math.imul(X,je)|0,G=G+Math.imul(ee,Ve)|0,I=I+Math.imul(ee,et)|0,I=I+Math.imul(Q,Ve)|0,V=V+Math.imul(Q,et)|0,G=G+Math.imul(ke,Ge)|0,I=I+Math.imul(ke,rt)|0,I=I+Math.imul(le,Ge)|0,V=V+Math.imul(le,rt)|0,G=G+Math.imul(oe,Le)|0,I=I+Math.imul(oe,nt)|0,I=I+Math.imul(ce,Le)|0,V=V+Math.imul(ce,nt)|0;var st=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(st>>>26)|0,st&=67108863,G=Math.imul(D,De),I=Math.imul(D,Be),I=I+Math.imul(K,De)|0,V=Math.imul(K,Be),G=G+Math.imul(fe,Me)|0,I=I+Math.imul(fe,qe)|0,I=I+Math.imul(j,Me)|0,V=V+Math.imul(j,qe)|0,G=G+Math.imul(y,Fe)|0,I=I+Math.imul(y,Ye)|0,I=I+Math.imul(L,Fe)|0,V=V+Math.imul(L,Ye)|0,G=G+Math.imul(ve,Je)|0,I=I+Math.imul(ve,je)|0,I=I+Math.imul(Se,Je)|0,V=V+Math.imul(Se,je)|0,G=G+Math.imul($,Ve)|0,I=I+Math.imul($,et)|0,I=I+Math.imul(X,Ve)|0,V=V+Math.imul(X,et)|0,G=G+Math.imul(ee,Ge)|0,I=I+Math.imul(ee,rt)|0,I=I+Math.imul(Q,Ge)|0,V=V+Math.imul(Q,rt)|0,G=G+Math.imul(ke,Le)|0,I=I+Math.imul(ke,nt)|0,I=I+Math.imul(le,Le)|0,V=V+Math.imul(le,nt)|0;var at=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(at>>>26)|0,at&=67108863,G=Math.imul(D,Me),I=Math.imul(D,qe),I=I+Math.imul(K,Me)|0,V=Math.imul(K,qe),G=G+Math.imul(fe,Fe)|0,I=I+Math.imul(fe,Ye)|0,I=I+Math.imul(j,Fe)|0,V=V+Math.imul(j,Ye)|0,G=G+Math.imul(y,Je)|0,I=I+Math.imul(y,je)|0,I=I+Math.imul(L,Je)|0,V=V+Math.imul(L,je)|0,G=G+Math.imul(ve,Ve)|0,I=I+Math.imul(ve,et)|0,I=I+Math.imul(Se,Ve)|0,V=V+Math.imul(Se,et)|0,G=G+Math.imul($,Ge)|0,I=I+Math.imul($,rt)|0,I=I+Math.imul(X,Ge)|0,V=V+Math.imul(X,rt)|0,G=G+Math.imul(ee,Le)|0,I=I+Math.imul(ee,nt)|0,I=I+Math.imul(Q,Le)|0,V=V+Math.imul(Q,nt)|0;var dt=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(dt>>>26)|0,dt&=67108863,G=Math.imul(D,Fe),I=Math.imul(D,Ye),I=I+Math.imul(K,Fe)|0,V=Math.imul(K,Ye),G=G+Math.imul(fe,Je)|0,I=I+Math.imul(fe,je)|0,I=I+Math.imul(j,Je)|0,V=V+Math.imul(j,je)|0,G=G+Math.imul(y,Ve)|0,I=I+Math.imul(y,et)|0,I=I+Math.imul(L,Ve)|0,V=V+Math.imul(L,et)|0,G=G+Math.imul(ve,Ge)|0,I=I+Math.imul(ve,rt)|0,I=I+Math.imul(Se,Ge)|0,V=V+Math.imul(Se,rt)|0,G=G+Math.imul($,Le)|0,I=I+Math.imul($,nt)|0,I=I+Math.imul(X,Le)|0,V=V+Math.imul(X,nt)|0;var ot=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ot>>>26)|0,ot&=67108863,G=Math.imul(D,Je),I=Math.imul(D,je),I=I+Math.imul(K,Je)|0,V=Math.imul(K,je),G=G+Math.imul(fe,Ve)|0,I=I+Math.imul(fe,et)|0,I=I+Math.imul(j,Ve)|0,V=V+Math.imul(j,et)|0,G=G+Math.imul(y,Ge)|0,I=I+Math.imul(y,rt)|0,I=I+Math.imul(L,Ge)|0,V=V+Math.imul(L,rt)|0,G=G+Math.imul(ve,Le)|0,I=I+Math.imul(ve,nt)|0,I=I+Math.imul(Se,Le)|0,V=V+Math.imul(Se,nt)|0;var ct=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ct>>>26)|0,ct&=67108863,G=Math.imul(D,Ve),I=Math.imul(D,et),I=I+Math.imul(K,Ve)|0,V=Math.imul(K,et),G=G+Math.imul(fe,Ge)|0,I=I+Math.imul(fe,rt)|0,I=I+Math.imul(j,Ge)|0,V=V+Math.imul(j,rt)|0,G=G+Math.imul(y,Le)|0,I=I+Math.imul(y,nt)|0,I=I+Math.imul(L,Le)|0,V=V+Math.imul(L,nt)|0;var ut=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ut>>>26)|0,ut&=67108863,G=Math.imul(D,Ge),I=Math.imul(D,rt),I=I+Math.imul(K,Ge)|0,V=Math.imul(K,rt),G=G+Math.imul(fe,Le)|0,I=I+Math.imul(fe,nt)|0,I=I+Math.imul(j,Le)|0,V=V+Math.imul(j,nt)|0;var ft=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ft>>>26)|0,ft&=67108863,G=Math.imul(D,Le),I=Math.imul(D,nt),I=I+Math.imul(K,Le)|0,V=Math.imul(K,nt);var lt=(J+G|0)+((I&8191)<<13)|0;return J=(V+(I>>>13)|0)+(lt>>>26)|0,lt&=67108863,A[0]=Ke,A[1]=Ze,A[2]=ne,A[3]=he,A[4]=ye,A[5]=Ee,A[6]=Te,A[7]=Ne,A[8]=Ie,A[9]=Ce,A[10]=$e,A[11]=st,A[12]=at,A[13]=dt,A[14]=ot,A[15]=ct,A[16]=ut,A[17]=ft,A[18]=lt,J!==0&&(A[19]=J,g.length++),g};Math.imul||(_=w);function C(x,S,k){k.negative=S.negative^x.negative,k.length=x.length+S.length;for(var g=0,E=0,T=0;T<k.length-1;T++){var A=E;E=0;for(var J=g&67108863,G=Math.min(T,S.length-1),I=Math.max(0,T-x.length+1);I<=G;I++){var V=T-I,B=x.words[V]|0,z=S.words[I]|0,ie=B*z,de=ie&67108863;A=A+(ie/67108864|0)|0,de=de+J|0,J=de&67108863,A=A+(de>>>26)|0,E+=A>>>26,A&=67108863}k.words[T]=J,g=A,A=E}return g!==0?k.words[T]=g:k.length--,k.strip()}function N(x,S,k){var g=new P;return g.mulp(x,S,k)}s.prototype.mulTo=function(S,k){var g,E=this.length+S.length;return this.length===10&&S.length===10?g=_(this,S,k):E<63?g=w(this,S,k):E<1024?g=C(this,S,k):g=N(this,S,k),g};function P(x,S){this.x=x,this.y=S}P.prototype.makeRBT=function(S){for(var k=new Array(S),g=s.prototype._countBits(S)-1,E=0;E<S;E++)k[E]=this.revBin(E,g,S);return k},P.prototype.revBin=function(S,k,g){if(S===0||S===g-1)return S;for(var E=0,T=0;T<k;T++)E|=(S&1)<<k-T-1,S>>=1;return E},P.prototype.permute=function(S,k,g,E,T,A){for(var J=0;J<A;J++)E[J]=k[S[J]],T[J]=g[S[J]]},P.prototype.transform=function(S,k,g,E,T,A){this.permute(A,S,k,g,E,T);for(var J=1;J<T;J<<=1)for(var G=J<<1,I=Math.cos(2*Math.PI/G),V=Math.sin(2*Math.PI/G),B=0;B<T;B+=G)for(var z=I,ie=V,de=0;de<J;de++){var me=g[B+de],be=E[B+de],we=g[B+de+J],oe=E[B+de+J],ce=z*we-ie*oe;oe=z*oe+ie*we,we=ce,g[B+de]=me+we,E[B+de]=be+oe,g[B+de+J]=me-we,E[B+de+J]=be-oe,de!==G&&(ce=I*z-V*ie,ie=I*ie+V*z,z=ce)}},P.prototype.guessLen13b=function(S,k){var g=Math.max(k,S)|1,E=g&1,T=0;for(g=g/2|0;g;g=g>>>1)T++;return 1<<T+1+E},P.prototype.conjugate=function(S,k,g){if(!(g<=1))for(var E=0;E<g/2;E++){var T=S[E];S[E]=S[g-E-1],S[g-E-1]=T,T=k[E],k[E]=-k[g-E-1],k[g-E-1]=-T}},P.prototype.normalize13b=function(S,k){for(var g=0,E=0;E<k/2;E++){var T=Math.round(S[2*E+1]/k)*8192+Math.round(S[2*E]/k)+g;S[E]=T&67108863,T<67108864?g=0:g=T/67108864|0}return S},P.prototype.convert13b=function(S,k,g,E){for(var T=0,A=0;A<k;A++)T=T+(S[A]|0),g[2*A]=T&8191,T=T>>>13,g[2*A+1]=T&8191,T=T>>>13;for(A=2*k;A<E;++A)g[A]=0;o(T===0),o((T&-8192)===0)},P.prototype.stub=function(S){for(var k=new Array(S),g=0;g<S;g++)k[g]=0;return k},P.prototype.mulp=function(S,k,g){var E=2*this.guessLen13b(S.length,k.length),T=this.makeRBT(E),A=this.stub(E),J=new Array(E),G=new Array(E),I=new Array(E),V=new Array(E),B=new Array(E),z=new Array(E),ie=g.words;ie.length=E,this.convert13b(S.words,S.length,J,E),this.convert13b(k.words,k.length,V,E),this.transform(J,A,G,I,E,T),this.transform(V,A,B,z,E,T);for(var de=0;de<E;de++){var me=G[de]*B[de]-I[de]*z[de];I[de]=G[de]*z[de]+I[de]*B[de],G[de]=me}return this.conjugate(G,I,E),this.transform(G,I,ie,A,E,T),this.conjugate(ie,A,E),this.normalize13b(ie,E),g.negative=S.negative^k.negative,g.length=S.length+k.length,g.strip()},s.prototype.mul=function(S){var k=new s(null);return k.words=new Array(this.length+S.length),this.mulTo(S,k)},s.prototype.mulf=function(S){var k=new s(null);return k.words=new Array(this.length+S.length),N(this,S,k)},s.prototype.imul=function(S){return this.clone().mulTo(S,this)},s.prototype.imuln=function(S){o(typeof S=="number"),o(S<67108864);for(var k=0,g=0;g<this.length;g++){var E=(this.words[g]|0)*S,T=(E&67108863)+(k&67108863);k>>=26,k+=E/67108864|0,k+=T>>>26,this.words[g]=T&67108863}return k!==0&&(this.words[g]=k,this.length++),this},s.prototype.muln=function(S){return this.clone().imuln(S)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(S){var k=m(S);if(k.length===0)return new s(1);for(var g=this,E=0;E<k.length&&k[E]===0;E++,g=g.sqr());if(++E<k.length)for(var T=g.sqr();E<k.length;E++,T=T.sqr())k[E]!==0&&(g=g.mul(T));return g},s.prototype.iushln=function(S){o(typeof S=="number"&&S>=0);var k=S%26,g=(S-k)/26,E=67108863>>>26-k<<26-k,T;if(k!==0){var A=0;for(T=0;T<this.length;T++){var J=this.words[T]&E,G=(this.words[T]|0)-J<<k;this.words[T]=G|A,A=J>>>26-k}A&&(this.words[T]=A,this.length++)}if(g!==0){for(T=this.length-1;T>=0;T--)this.words[T+g]=this.words[T];for(T=0;T<g;T++)this.words[T]=0;this.length+=g}return this.strip()},s.prototype.ishln=function(S){return o(this.negative===0),this.iushln(S)},s.prototype.iushrn=function(S,k,g){o(typeof S=="number"&&S>=0);var E;k?E=(k-k%26)/26:E=0;var T=S%26,A=Math.min((S-T)/26,this.length),J=67108863^67108863>>>T<<T,G=g;if(E-=A,E=Math.max(0,E),G){for(var I=0;I<A;I++)G.words[I]=this.words[I];G.length=A}if(A!==0)if(this.length>A)for(this.length-=A,I=0;I<this.length;I++)this.words[I]=this.words[I+A];else this.words[0]=0,this.length=1;var V=0;for(I=this.length-1;I>=0&&(V!==0||I>=E);I--){var B=this.words[I]|0;this.words[I]=V<<26-T|B>>>T,V=B&J}return G&&V!==0&&(G.words[G.length++]=V),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(S,k,g){return o(this.negative===0),this.iushrn(S,k,g)},s.prototype.shln=function(S){return this.clone().ishln(S)},s.prototype.ushln=function(S){return this.clone().iushln(S)},s.prototype.shrn=function(S){return this.clone().ishrn(S)},s.prototype.ushrn=function(S){return this.clone().iushrn(S)},s.prototype.testn=function(S){o(typeof S=="number"&&S>=0);var k=S%26,g=(S-k)/26,E=1<<k;if(this.length<=g)return!1;var T=this.words[g];return!!(T&E)},s.prototype.imaskn=function(S){o(typeof S=="number"&&S>=0);var k=S%26,g=(S-k)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(k!==0&&g++,this.length=Math.min(g,this.length),k!==0){var E=67108863^67108863>>>k<<k;this.words[this.length-1]&=E}return this.strip()},s.prototype.maskn=function(S){return this.clone().imaskn(S)},s.prototype.iaddn=function(S){return o(typeof S=="number"),o(S<67108864),S<0?this.isubn(-S):this.negative!==0?this.length===1&&(this.words[0]|0)<S?(this.words[0]=S-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},s.prototype._iaddn=function(S){this.words[0]+=S;for(var k=0;k<this.length&&this.words[k]>=67108864;k++)this.words[k]-=67108864,k===this.length-1?this.words[k+1]=1:this.words[k+1]++;return this.length=Math.max(this.length,k+1),this},s.prototype.isubn=function(S){if(o(typeof S=="number"),o(S<67108864),S<0)return this.iaddn(-S);if(this.negative!==0)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var k=0;k<this.length&&this.words[k]<0;k++)this.words[k]+=67108864,this.words[k+1]-=1;return this.strip()},s.prototype.addn=function(S){return this.clone().iaddn(S)},s.prototype.subn=function(S){return this.clone().isubn(S)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(S,k,g){var E=S.length+g,T;this._expand(E);var A,J=0;for(T=0;T<S.length;T++){A=(this.words[T+g]|0)+J;var G=(S.words[T]|0)*k;A-=G&67108863,J=(A>>26)-(G/67108864|0),this.words[T+g]=A&67108863}for(;T<this.length-g;T++)A=(this.words[T+g]|0)+J,J=A>>26,this.words[T+g]=A&67108863;if(J===0)return this.strip();for(o(J===-1),J=0,T=0;T<this.length;T++)A=-(this.words[T]|0)+J,J=A>>26,this.words[T]=A&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(S,k){var g=this.length-S.length,E=this.clone(),T=S,A=T.words[T.length-1]|0,J=this._countBits(A);g=26-J,g!==0&&(T=T.ushln(g),E.iushln(g),A=T.words[T.length-1]|0);var G=E.length-T.length,I;if(k!=="mod"){I=new s(null),I.length=G+1,I.words=new Array(I.length);for(var V=0;V<I.length;V++)I.words[V]=0}var B=E.clone()._ishlnsubmul(T,1,G);B.negative===0&&(E=B,I&&(I.words[G]=1));for(var z=G-1;z>=0;z--){var ie=(E.words[T.length+z]|0)*67108864+(E.words[T.length+z-1]|0);for(ie=Math.min(ie/A|0,67108863),E._ishlnsubmul(T,ie,z);E.negative!==0;)ie--,E.negative=0,E._ishlnsubmul(T,1,z),E.isZero()||(E.negative^=1);I&&(I.words[z]=ie)}return I&&I.strip(),E.strip(),k!=="div"&&g!==0&&E.iushrn(g),{div:I||null,mod:E}},s.prototype.divmod=function(S,k,g){if(o(!S.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var E,T,A;return this.negative!==0&&S.negative===0?(A=this.neg().divmod(S,k),k!=="mod"&&(E=A.div.neg()),k!=="div"&&(T=A.mod.neg(),g&&T.negative!==0&&T.iadd(S)),{div:E,mod:T}):this.negative===0&&S.negative!==0?(A=this.divmod(S.neg(),k),k!=="mod"&&(E=A.div.neg()),{div:E,mod:A.mod}):this.negative&S.negative?(A=this.neg().divmod(S.neg(),k),k!=="div"&&(T=A.mod.neg(),g&&T.negative!==0&&T.isub(S)),{div:A.div,mod:T}):S.length>this.length||this.cmp(S)<0?{div:new s(0),mod:this}:S.length===1?k==="div"?{div:this.divn(S.words[0]),mod:null}:k==="mod"?{div:null,mod:new s(this.modn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new s(this.modn(S.words[0]))}:this._wordDiv(S,k)},s.prototype.div=function(S){return this.divmod(S,"div",!1).div},s.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},s.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},s.prototype.divRound=function(S){var k=this.divmod(S);if(k.mod.isZero())return k.div;var g=k.div.negative!==0?k.mod.isub(S):k.mod,E=S.ushrn(1),T=S.andln(1),A=g.cmp(E);return A<0||T===1&&A===0?k.div:k.div.negative!==0?k.div.isubn(1):k.div.iaddn(1)},s.prototype.modn=function(S){o(S<=67108863);for(var k=(1<<26)%S,g=0,E=this.length-1;E>=0;E--)g=(k*g+(this.words[E]|0))%S;return g},s.prototype.idivn=function(S){o(S<=67108863);for(var k=0,g=this.length-1;g>=0;g--){var E=(this.words[g]|0)+k*67108864;this.words[g]=E/S|0,k=E%S}return this.strip()},s.prototype.divn=function(S){return this.clone().idivn(S)},s.prototype.egcd=function(S){o(S.negative===0),o(!S.isZero());var k=this,g=S.clone();k.negative!==0?k=k.umod(S):k=k.clone();for(var E=new s(1),T=new s(0),A=new s(0),J=new s(1),G=0;k.isEven()&&g.isEven();)k.iushrn(1),g.iushrn(1),++G;for(var I=g.clone(),V=k.clone();!k.isZero();){for(var B=0,z=1;!(k.words[0]&z)&&B<26;++B,z<<=1);if(B>0)for(k.iushrn(B);B-- >0;)(E.isOdd()||T.isOdd())&&(E.iadd(I),T.isub(V)),E.iushrn(1),T.iushrn(1);for(var ie=0,de=1;!(g.words[0]&de)&&ie<26;++ie,de<<=1);if(ie>0)for(g.iushrn(ie);ie-- >0;)(A.isOdd()||J.isOdd())&&(A.iadd(I),J.isub(V)),A.iushrn(1),J.iushrn(1);k.cmp(g)>=0?(k.isub(g),E.isub(A),T.isub(J)):(g.isub(k),A.isub(E),J.isub(T))}return{a:A,b:J,gcd:g.iushln(G)}},s.prototype._invmp=function(S){o(S.negative===0),o(!S.isZero());var k=this,g=S.clone();k.negative!==0?k=k.umod(S):k=k.clone();for(var E=new s(1),T=new s(0),A=g.clone();k.cmpn(1)>0&&g.cmpn(1)>0;){for(var J=0,G=1;!(k.words[0]&G)&&J<26;++J,G<<=1);if(J>0)for(k.iushrn(J);J-- >0;)E.isOdd()&&E.iadd(A),E.iushrn(1);for(var I=0,V=1;!(g.words[0]&V)&&I<26;++I,V<<=1);if(I>0)for(g.iushrn(I);I-- >0;)T.isOdd()&&T.iadd(A),T.iushrn(1);k.cmp(g)>=0?(k.isub(g),E.isub(T)):(g.isub(k),T.isub(E))}var B;return k.cmpn(1)===0?B=E:B=T,B.cmpn(0)<0&&B.iadd(S),B},s.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var k=this.clone(),g=S.clone();k.negative=0,g.negative=0;for(var E=0;k.isEven()&&g.isEven();E++)k.iushrn(1),g.iushrn(1);do{for(;k.isEven();)k.iushrn(1);for(;g.isEven();)g.iushrn(1);var T=k.cmp(g);if(T<0){var A=k;k=g,g=A}else if(T===0||g.cmpn(1)===0)break;k.isub(g)}while(!0);return g.iushln(E)},s.prototype.invm=function(S){return this.egcd(S).a.umod(S)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(S){return this.words[0]&S},s.prototype.bincn=function(S){o(typeof S=="number");var k=S%26,g=(S-k)/26,E=1<<k;if(this.length<=g)return this._expand(g+1),this.words[g]|=E,this;for(var T=E,A=g;T!==0&&A<this.length;A++){var J=this.words[A]|0;J+=T,T=J>>>26,J&=67108863,this.words[A]=J}return T!==0&&(this.words[A]=T,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(S){var k=S<0;if(this.negative!==0&&!k)return-1;if(this.negative===0&&k)return 1;this.strip();var g;if(this.length>1)g=1;else{k&&(S=-S),o(S<=67108863,"Number is too big");var E=this.words[0]|0;g=E===S?0:E<S?-1:1}return this.negative!==0?-g|0:g},s.prototype.cmp=function(S){if(this.negative!==0&&S.negative===0)return-1;if(this.negative===0&&S.negative!==0)return 1;var k=this.ucmp(S);return this.negative!==0?-k|0:k},s.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var k=0,g=this.length-1;g>=0;g--){var E=this.words[g]|0,T=S.words[g]|0;if(E!==T){E<T?k=-1:E>T&&(k=1);break}}return k},s.prototype.gtn=function(S){return this.cmpn(S)===1},s.prototype.gt=function(S){return this.cmp(S)===1},s.prototype.gten=function(S){return this.cmpn(S)>=0},s.prototype.gte=function(S){return this.cmp(S)>=0},s.prototype.ltn=function(S){return this.cmpn(S)===-1},s.prototype.lt=function(S){return this.cmp(S)===-1},s.prototype.lten=function(S){return this.cmpn(S)<=0},s.prototype.lte=function(S){return this.cmp(S)<=0},s.prototype.eqn=function(S){return this.cmpn(S)===0},s.prototype.eq=function(S){return this.cmp(S)===0},s.red=function(S){return new Y(S)},s.prototype.toRed=function(S){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),S.convertTo(this)._forceRed(S)},s.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(S){return this.red=S,this},s.prototype.forceRed=function(S){return o(!this.red,"Already a number in reduction context"),this._forceRed(S)},s.prototype.redAdd=function(S){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},s.prototype.redIAdd=function(S){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},s.prototype.redSub=function(S){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},s.prototype.redISub=function(S){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},s.prototype.redShl=function(S){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},s.prototype.redMul=function(S){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},s.prototype.redIMul=function(S){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},s.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(S){return o(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var M={k256:null,p224:null,p192:null,p25519:null};function U(x,S){this.name=x,this.p=new s(S,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var S=new s(null);return S.words=new Array(Math.ceil(this.n/13)),S},U.prototype.ireduce=function(S){var k=S,g;do this.split(k,this.tmp),k=this.imulK(k),k=k.iadd(this.tmp),g=k.bitLength();while(g>this.n);var E=g<this.n?-1:k.ucmp(this.p);return E===0?(k.words[0]=0,k.length=1):E>0?k.isub(this.p):k.strip!==void 0?k.strip():k._strip(),k},U.prototype.split=function(S,k){S.iushrn(this.n,0,k)},U.prototype.imulK=function(S){return S.imul(this.k)};function W(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}d(W,U),W.prototype.split=function(S,k){for(var g=4194303,E=Math.min(S.length,9),T=0;T<E;T++)k.words[T]=S.words[T];if(k.length=E,S.length<=9){S.words[0]=0,S.length=1;return}var A=S.words[9];for(k.words[k.length++]=A&g,T=10;T<S.length;T++){var J=S.words[T]|0;S.words[T-10]=(J&g)<<4|A>>>22,A=J}A>>>=22,S.words[T-10]=A,A===0&&S.length>10?S.length-=10:S.length-=9},W.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var k=0,g=0;g<S.length;g++){var E=S.words[g]|0;k+=E*977,S.words[g]=k&67108863,k=E*64+(k/67108864|0)}return S.words[S.length-1]===0&&(S.length--,S.words[S.length-1]===0&&S.length--),S};function q(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}d(q,U);function Z(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}d(Z,U);function re(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}d(re,U),re.prototype.imulK=function(S){for(var k=0,g=0;g<S.length;g++){var E=(S.words[g]|0)*19+k,T=E&67108863;E>>>=26,S.words[g]=T,k=E}return k!==0&&(S.words[S.length++]=k),S},s._prime=function(S){if(M[S])return M[S];var k;if(S==="k256")k=new W;else if(S==="p224")k=new q;else if(S==="p192")k=new Z;else if(S==="p25519")k=new re;else throw new Error("Unknown prime "+S);return M[S]=k,k};function Y(x){if(typeof x=="string"){var S=s._prime(x);this.m=S.p,this.prime=S}else o(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}Y.prototype._verify1=function(S){o(S.negative===0,"red works only with positives"),o(S.red,"red works only with red numbers")},Y.prototype._verify2=function(S,k){o((S.negative|k.negative)===0,"red works only with positives"),o(S.red&&S.red===k.red,"red works only with red numbers")},Y.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):S.umod(this.m)._forceRed(this)},Y.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},Y.prototype.add=function(S,k){this._verify2(S,k);var g=S.add(k);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},Y.prototype.iadd=function(S,k){this._verify2(S,k);var g=S.iadd(k);return g.cmp(this.m)>=0&&g.isub(this.m),g},Y.prototype.sub=function(S,k){this._verify2(S,k);var g=S.sub(k);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},Y.prototype.isub=function(S,k){this._verify2(S,k);var g=S.isub(k);return g.cmpn(0)<0&&g.iadd(this.m),g},Y.prototype.shl=function(S,k){return this._verify1(S),this.imod(S.ushln(k))},Y.prototype.imul=function(S,k){return this._verify2(S,k),this.imod(S.imul(k))},Y.prototype.mul=function(S,k){return this._verify2(S,k),this.imod(S.mul(k))},Y.prototype.isqr=function(S){return this.imul(S,S.clone())},Y.prototype.sqr=function(S){return this.mul(S,S)},Y.prototype.sqrt=function(S){if(S.isZero())return S.clone();var k=this.m.andln(3);if(o(k%2===1),k===3){var g=this.m.add(new s(1)).iushrn(2);return this.pow(S,g)}for(var E=this.m.subn(1),T=0;!E.isZero()&&E.andln(1)===0;)T++,E.iushrn(1);o(!E.isZero());var A=new s(1).toRed(this),J=A.redNeg(),G=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new s(2*I*I).toRed(this);this.pow(I,G).cmp(J)!==0;)I.redIAdd(J);for(var V=this.pow(I,E),B=this.pow(S,E.addn(1).iushrn(1)),z=this.pow(S,E),ie=T;z.cmp(A)!==0;){for(var de=z,me=0;de.cmp(A)!==0;me++)de=de.redSqr();o(me<ie);var be=this.pow(V,new s(1).iushln(ie-me-1));B=B.redMul(be),V=be.redSqr(),z=z.redMul(V),ie=me}return B},Y.prototype.invm=function(S){var k=S._invmp(this.m);return k.negative!==0?(k.negative=0,this.imod(k).redNeg()):this.imod(k)},Y.prototype.pow=function(S,k){if(k.isZero())return new s(1).toRed(this);if(k.cmpn(1)===0)return S.clone();var g=4,E=new Array(1<<g);E[0]=new s(1).toRed(this),E[1]=S;for(var T=2;T<E.length;T++)E[T]=this.mul(E[T-1],S);var A=E[0],J=0,G=0,I=k.bitLength()%26;for(I===0&&(I=26),T=k.length-1;T>=0;T--){for(var V=k.words[T],B=I-1;B>=0;B--){var z=V>>B&1;if(A!==E[0]&&(A=this.sqr(A)),z===0&&J===0){G=0;continue}J<<=1,J|=z,G++,!(G!==g&&(T!==0||B!==0))&&(A=this.mul(A,E[J]),G=0,J=0)}I=26}return A},Y.prototype.convertTo=function(S){var k=S.umod(this.m);return k===S?k.clone():k},Y.prototype.convertFrom=function(S){var k=S.clone();return k.red=null,k},s.mont=function(S){return new O(S)};function O(x){Y.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}d(O,Y),O.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},O.prototype.convertFrom=function(S){var k=this.imod(S.mul(this.rinv));return k.red=null,k},O.prototype.imul=function(S,k){if(S.isZero()||k.isZero())return S.words[0]=0,S.length=1,S;var g=S.imul(k),E=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=g.isub(E).iushrn(this.shift),A=T;return T.cmp(this.m)>=0?A=T.isub(this.m):T.cmpn(0)<0&&(A=T.iadd(this.m)),A._forceRed(this)},O.prototype.mul=function(S,k){if(S.isZero()||k.isZero())return new s(0)._forceRed(this);var g=S.mul(k),E=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=g.isub(E).iushrn(this.shift),A=T;return T.cmp(this.m)>=0?A=T.isub(this.m):T.cmpn(0)<0&&(A=T.iadd(this.m)),A._forceRed(this)},O.prototype.invm=function(S){var k=this.imod(S._invmp(this.m).mul(this.r2));return k._forceRed(this)}})(typeof i>"u"||i,this)},{buffer:142}],140:[function(e,i,t){(function(n,a){function o(k,g){if(!k)throw new Error(g||"Assertion failed")}function d(k,g){k.super_=g;var E=function(){};E.prototype=g.prototype,k.prototype=new E,k.prototype.constructor=k}function s(k,g,E){if(s.isBN(k))return k;this.negative=0,this.words=null,this.length=0,this.red=null,k!==null&&((g==="le"||g==="be")&&(E=g,g=10),this._init(k||0,g||10,E||"be"))}typeof n=="object"?n.exports=s:a.BN=s,s.BN=s,s.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=e("buffer").Buffer}catch{}s.isBN=function(g){return g instanceof s?!0:g!==null&&typeof g=="object"&&g.constructor.wordSize===s.wordSize&&Array.isArray(g.words)},s.max=function(g,E){return g.cmp(E)>0?g:E},s.min=function(g,E){return g.cmp(E)<0?g:E},s.prototype._init=function(g,E,T){if(typeof g=="number")return this._initNumber(g,E,T);if(typeof g=="object")return this._initArray(g,E,T);E==="hex"&&(E=16),o(E===(E|0)&&E>=2&&E<=36),g=g.toString().replace(/\s+/g,"");var A=0;g[0]==="-"&&(A++,this.negative=1),A<g.length&&(E===16?this._parseHex(g,A,T):(this._parseBase(g,E,A),T==="le"&&this._initArray(this.toArray(),E,T)))},s.prototype._initNumber=function(g,E,T){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[g&67108863],this.length=1):g<4503599627370496?(this.words=[g&67108863,g/67108864&67108863],this.length=2):(o(g<9007199254740992),this.words=[g&67108863,g/67108864&67108863,1],this.length=3),T==="le"&&this._initArray(this.toArray(),E,T)},s.prototype._initArray=function(g,E,T){if(o(typeof g.length=="number"),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var J,G,I=0;if(T==="be")for(A=g.length-1,J=0;A>=0;A-=3)G=g[A]|g[A-1]<<8|g[A-2]<<16,this.words[J]|=G<<I&67108863,this.words[J+1]=G>>>26-I&67108863,I+=24,I>=26&&(I-=26,J++);else if(T==="le")for(A=0,J=0;A<g.length;A+=3)G=g[A]|g[A+1]<<8|g[A+2]<<16,this.words[J]|=G<<I&67108863,this.words[J+1]=G>>>26-I&67108863,I+=24,I>=26&&(I-=26,J++);return this._strip()};function c(k,g){var E=k.charCodeAt(g);if(E>=48&&E<=57)return E-48;if(E>=65&&E<=70)return E-55;if(E>=97&&E<=102)return E-87;o(!1,"Invalid character in "+k)}function h(k,g,E){var T=c(k,E);return E-1>=g&&(T|=c(k,E-1)<<4),T}s.prototype._parseHex=function(g,E,T){this.length=Math.ceil((g.length-E)/6),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var J=0,G=0,I;if(T==="be")for(A=g.length-1;A>=E;A-=2)I=h(g,E,A)<<J,this.words[G]|=I&67108863,J>=18?(J-=18,G+=1,this.words[G]|=I>>>26):J+=8;else{var V=g.length-E;for(A=V%2===0?E+1:E;A<g.length;A+=2)I=h(g,E,A)<<J,this.words[G]|=I&67108863,J>=18?(J-=18,G+=1,this.words[G]|=I>>>26):J+=8}this._strip()};function v(k,g,E,T){for(var A=0,J=0,G=Math.min(k.length,E),I=g;I<G;I++){var V=k.charCodeAt(I)-48;A*=T,V>=49?J=V-49+10:V>=17?J=V-17+10:J=V,o(V>=0&&J<T,"Invalid character"),A+=J}return A}s.prototype._parseBase=function(g,E,T){this.words=[0],this.length=1;for(var A=0,J=1;J<=67108863;J*=E)A++;A--,J=J/E|0;for(var G=g.length-T,I=G%A,V=Math.min(G,G-I)+T,B=0,z=T;z<V;z+=A)B=v(g,z,z+A,E),this.imuln(J),this.words[0]+B<67108864?this.words[0]+=B:this._iaddn(B);if(I!==0){var ie=1;for(B=v(g,z,g.length,E),z=0;z<I;z++)ie*=E;this.imuln(ie),this.words[0]+B<67108864?this.words[0]+=B:this._iaddn(B)}this._strip()},s.prototype.copy=function(g){g.words=new Array(this.length);for(var E=0;E<this.length;E++)g.words[E]=this.words[E];g.length=this.length,g.negative=this.negative,g.red=this.red};function l(k,g){k.words=g.words,k.length=g.length,k.negative=g.negative,k.red=g.red}if(s.prototype._move=function(g){l(g,this)},s.prototype.clone=function(){var g=new s(null);return this.copy(g),g},s.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch{s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(g,E){g=g||10,E=E|0||1;var T;if(g===16||g==="hex"){T="";for(var A=0,J=0,G=0;G<this.length;G++){var I=this.words[G],V=((I<<A|J)&16777215).toString(16);J=I>>>24-A&16777215,A+=2,A>=26&&(A-=26,G--),J!==0||G!==this.length-1?T=p[6-V.length]+V+T:T=V+T}for(J!==0&&(T=J.toString(16)+T);T.length%E!==0;)T="0"+T;return this.negative!==0&&(T="-"+T),T}if(g===(g|0)&&g>=2&&g<=36){var B=m[g],z=w[g];T="";var ie=this.clone();for(ie.negative=0;!ie.isZero();){var de=ie.modrn(z).toString(g);ie=ie.idivn(z),ie.isZero()?T=de+T:T=p[B-de.length]+de+T}for(this.isZero()&&(T="0"+T);T.length%E!==0;)T="0"+T;return this.negative!==0&&(T="-"+T),T}o(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var g=this.words[0];return this.length===2?g+=this.words[1]*67108864:this.length===3&&this.words[2]===1?g+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-g:g},s.prototype.toJSON=function(){return this.toString(16,2)},f&&(s.prototype.toBuffer=function(g,E){return this.toArrayLike(f,g,E)}),s.prototype.toArray=function(g,E){return this.toArrayLike(Array,g,E)};var _=function(g,E){return g.allocUnsafe?g.allocUnsafe(E):new g(E)};s.prototype.toArrayLike=function(g,E,T){this._strip();var A=this.byteLength(),J=T||Math.max(1,A);o(A<=J,"byte array longer than desired length"),o(J>0,"Requested array length <= 0");var G=_(g,J),I=E==="le"?"LE":"BE";return this["_toArrayLike"+I](G,A),G},s.prototype._toArrayLikeLE=function(g,E){for(var T=0,A=0,J=0,G=0;J<this.length;J++){var I=this.words[J]<<G|A;g[T++]=I&255,T<g.length&&(g[T++]=I>>8&255),T<g.length&&(g[T++]=I>>16&255),G===6?(T<g.length&&(g[T++]=I>>24&255),A=0,G=0):(A=I>>>24,G+=2)}if(T<g.length)for(g[T++]=A;T<g.length;)g[T++]=0},s.prototype._toArrayLikeBE=function(g,E){for(var T=g.length-1,A=0,J=0,G=0;J<this.length;J++){var I=this.words[J]<<G|A;g[T--]=I&255,T>=0&&(g[T--]=I>>8&255),T>=0&&(g[T--]=I>>16&255),G===6?(T>=0&&(g[T--]=I>>24&255),A=0,G=0):(A=I>>>24,G+=2)}if(T>=0)for(g[T--]=A;T>=0;)g[T--]=0},Math.clz32?s.prototype._countBits=function(g){return 32-Math.clz32(g)}:s.prototype._countBits=function(g){var E=g,T=0;return E>=4096&&(T+=13,E>>>=13),E>=64&&(T+=7,E>>>=7),E>=8&&(T+=4,E>>>=4),E>=2&&(T+=2,E>>>=2),T+E},s.prototype._zeroBits=function(g){if(g===0)return 26;var E=g,T=0;return E&8191||(T+=13,E>>>=13),E&127||(T+=7,E>>>=7),E&15||(T+=4,E>>>=4),E&3||(T+=2,E>>>=2),E&1||T++,T},s.prototype.bitLength=function(){var g=this.words[this.length-1],E=this._countBits(g);return(this.length-1)*26+E};function C(k){for(var g=new Array(k.bitLength()),E=0;E<g.length;E++){var T=E/26|0,A=E%26;g[E]=k.words[T]>>>A&1}return g}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,E=0;E<this.length;E++){var T=this._zeroBits(this.words[E]);if(g+=T,T!==26)break}return g},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(g){return this.negative!==0?this.abs().inotn(g).iaddn(1):this.clone()},s.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var E=0;E<g.length;E++)this.words[E]=this.words[E]|g.words[E];return this._strip()},s.prototype.ior=function(g){return o((this.negative|g.negative)===0),this.iuor(g)},s.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},s.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},s.prototype.iuand=function(g){var E;this.length>g.length?E=g:E=this;for(var T=0;T<E.length;T++)this.words[T]=this.words[T]&g.words[T];return this.length=E.length,this._strip()},s.prototype.iand=function(g){return o((this.negative|g.negative)===0),this.iuand(g)},s.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},s.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},s.prototype.iuxor=function(g){var E,T;this.length>g.length?(E=this,T=g):(E=g,T=this);for(var A=0;A<T.length;A++)this.words[A]=E.words[A]^T.words[A];if(this!==E)for(;A<E.length;A++)this.words[A]=E.words[A];return this.length=E.length,this._strip()},s.prototype.ixor=function(g){return o((this.negative|g.negative)===0),this.iuxor(g)},s.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},s.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},s.prototype.inotn=function(g){o(typeof g=="number"&&g>=0);var E=Math.ceil(g/26)|0,T=g%26;this._expand(E),T>0&&E--;for(var A=0;A<E;A++)this.words[A]=~this.words[A]&67108863;return T>0&&(this.words[A]=~this.words[A]&67108863>>26-T),this._strip()},s.prototype.notn=function(g){return this.clone().inotn(g)},s.prototype.setn=function(g,E){o(typeof g=="number"&&g>=0);var T=g/26|0,A=g%26;return this._expand(T+1),E?this.words[T]=this.words[T]|1<<A:this.words[T]=this.words[T]&~(1<<A),this._strip()},s.prototype.iadd=function(g){var E;if(this.negative!==0&&g.negative===0)return this.negative=0,E=this.isub(g),this.negative^=1,this._normSign();if(this.negative===0&&g.negative!==0)return g.negative=0,E=this.isub(g),g.negative=1,E._normSign();var T,A;this.length>g.length?(T=this,A=g):(T=g,A=this);for(var J=0,G=0;G<A.length;G++)E=(T.words[G]|0)+(A.words[G]|0)+J,this.words[G]=E&67108863,J=E>>>26;for(;J!==0&&G<T.length;G++)E=(T.words[G]|0)+J,this.words[G]=E&67108863,J=E>>>26;if(this.length=T.length,J!==0)this.words[this.length]=J,this.length++;else if(T!==this)for(;G<T.length;G++)this.words[G]=T.words[G];return this},s.prototype.add=function(g){var E;return g.negative!==0&&this.negative===0?(g.negative=0,E=this.sub(g),g.negative^=1,E):g.negative===0&&this.negative!==0?(this.negative=0,E=g.sub(this),this.negative=1,E):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},s.prototype.isub=function(g){if(g.negative!==0){g.negative=0;var E=this.iadd(g);return g.negative=1,E._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var T=this.cmp(g);if(T===0)return this.negative=0,this.length=1,this.words[0]=0,this;var A,J;T>0?(A=this,J=g):(A=g,J=this);for(var G=0,I=0;I<J.length;I++)E=(A.words[I]|0)-(J.words[I]|0)+G,G=E>>26,this.words[I]=E&67108863;for(;G!==0&&I<A.length;I++)E=(A.words[I]|0)+G,G=E>>26,this.words[I]=E&67108863;if(G===0&&I<A.length&&A!==this)for(;I<A.length;I++)this.words[I]=A.words[I];return this.length=Math.max(this.length,I),A!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(g){return this.clone().isub(g)};function N(k,g,E){E.negative=g.negative^k.negative;var T=k.length+g.length|0;E.length=T,T=T-1|0;var A=k.words[0]|0,J=g.words[0]|0,G=A*J,I=G&67108863,V=G/67108864|0;E.words[0]=I;for(var B=1;B<T;B++){for(var z=V>>>26,ie=V&67108863,de=Math.min(B,g.length-1),me=Math.max(0,B-k.length+1);me<=de;me++){var be=B-me|0;A=k.words[be]|0,J=g.words[me]|0,G=A*J+ie,z+=G/67108864|0,ie=G&67108863}E.words[B]=ie|0,V=z|0}return V!==0?E.words[B]=V|0:E.length--,E._strip()}var P=function(g,E,T){var A=g.words,J=E.words,G=T.words,I=0,V,B,z,ie=A[0]|0,de=ie&8191,me=ie>>>13,be=A[1]|0,we=be&8191,oe=be>>>13,ce=A[2]|0,ge=ce&8191,ke=ce>>>13,le=A[3]|0,te=le&8191,ee=le>>>13,Q=A[4]|0,F=Q&8191,$=Q>>>13,X=A[5]|0,se=X&8191,ve=X>>>13,Se=A[6]|0,ue=Se&8191,y=Se>>>13,L=A[7]|0,H=L&8191,fe=L>>>13,j=A[8]|0,b=j&8191,D=j>>>13,K=A[9]|0,pe=K&8191,ae=K>>>13,_e=J[0]|0,Oe=_e&8191,Pe=_e>>>13,Ue=J[1]|0,xe=Ue&8191,Ae=Ue>>>13,Re=J[2]|0,We=Re&8191,De=Re>>>13,Be=J[3]|0,He=Be&8191,Me=Be>>>13,qe=J[4]|0,Qe=qe&8191,Fe=qe>>>13,Ye=J[5]|0,Xe=Ye&8191,Je=Ye>>>13,je=J[6]|0,ze=je&8191,Ve=je>>>13,et=J[7]|0,tt=et&8191,Ge=et>>>13,rt=J[8]|0,it=rt&8191,Le=rt>>>13,nt=J[9]|0,Ke=nt&8191,Ze=nt>>>13;T.negative=g.negative^E.negative,T.length=19,V=Math.imul(de,Oe),B=Math.imul(de,Pe),B=B+Math.imul(me,Oe)|0,z=Math.imul(me,Pe);var ne=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(ne>>>26)|0,ne&=67108863,V=Math.imul(we,Oe),B=Math.imul(we,Pe),B=B+Math.imul(oe,Oe)|0,z=Math.imul(oe,Pe),V=V+Math.imul(de,xe)|0,B=B+Math.imul(de,Ae)|0,B=B+Math.imul(me,xe)|0,z=z+Math.imul(me,Ae)|0;var he=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(he>>>26)|0,he&=67108863,V=Math.imul(ge,Oe),B=Math.imul(ge,Pe),B=B+Math.imul(ke,Oe)|0,z=Math.imul(ke,Pe),V=V+Math.imul(we,xe)|0,B=B+Math.imul(we,Ae)|0,B=B+Math.imul(oe,xe)|0,z=z+Math.imul(oe,Ae)|0,V=V+Math.imul(de,We)|0,B=B+Math.imul(de,De)|0,B=B+Math.imul(me,We)|0,z=z+Math.imul(me,De)|0;var ye=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(ye>>>26)|0,ye&=67108863,V=Math.imul(te,Oe),B=Math.imul(te,Pe),B=B+Math.imul(ee,Oe)|0,z=Math.imul(ee,Pe),V=V+Math.imul(ge,xe)|0,B=B+Math.imul(ge,Ae)|0,B=B+Math.imul(ke,xe)|0,z=z+Math.imul(ke,Ae)|0,V=V+Math.imul(we,We)|0,B=B+Math.imul(we,De)|0,B=B+Math.imul(oe,We)|0,z=z+Math.imul(oe,De)|0,V=V+Math.imul(de,He)|0,B=B+Math.imul(de,Me)|0,B=B+Math.imul(me,He)|0,z=z+Math.imul(me,Me)|0;var Ee=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,V=Math.imul(F,Oe),B=Math.imul(F,Pe),B=B+Math.imul($,Oe)|0,z=Math.imul($,Pe),V=V+Math.imul(te,xe)|0,B=B+Math.imul(te,Ae)|0,B=B+Math.imul(ee,xe)|0,z=z+Math.imul(ee,Ae)|0,V=V+Math.imul(ge,We)|0,B=B+Math.imul(ge,De)|0,B=B+Math.imul(ke,We)|0,z=z+Math.imul(ke,De)|0,V=V+Math.imul(we,He)|0,B=B+Math.imul(we,Me)|0,B=B+Math.imul(oe,He)|0,z=z+Math.imul(oe,Me)|0,V=V+Math.imul(de,Qe)|0,B=B+Math.imul(de,Fe)|0,B=B+Math.imul(me,Qe)|0,z=z+Math.imul(me,Fe)|0;var Te=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(Te>>>26)|0,Te&=67108863,V=Math.imul(se,Oe),B=Math.imul(se,Pe),B=B+Math.imul(ve,Oe)|0,z=Math.imul(ve,Pe),V=V+Math.imul(F,xe)|0,B=B+Math.imul(F,Ae)|0,B=B+Math.imul($,xe)|0,z=z+Math.imul($,Ae)|0,V=V+Math.imul(te,We)|0,B=B+Math.imul(te,De)|0,B=B+Math.imul(ee,We)|0,z=z+Math.imul(ee,De)|0,V=V+Math.imul(ge,He)|0,B=B+Math.imul(ge,Me)|0,B=B+Math.imul(ke,He)|0,z=z+Math.imul(ke,Me)|0,V=V+Math.imul(we,Qe)|0,B=B+Math.imul(we,Fe)|0,B=B+Math.imul(oe,Qe)|0,z=z+Math.imul(oe,Fe)|0,V=V+Math.imul(de,Xe)|0,B=B+Math.imul(de,Je)|0,B=B+Math.imul(me,Xe)|0,z=z+Math.imul(me,Je)|0;var Ne=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,V=Math.imul(ue,Oe),B=Math.imul(ue,Pe),B=B+Math.imul(y,Oe)|0,z=Math.imul(y,Pe),V=V+Math.imul(se,xe)|0,B=B+Math.imul(se,Ae)|0,B=B+Math.imul(ve,xe)|0,z=z+Math.imul(ve,Ae)|0,V=V+Math.imul(F,We)|0,B=B+Math.imul(F,De)|0,B=B+Math.imul($,We)|0,z=z+Math.imul($,De)|0,V=V+Math.imul(te,He)|0,B=B+Math.imul(te,Me)|0,B=B+Math.imul(ee,He)|0,z=z+Math.imul(ee,Me)|0,V=V+Math.imul(ge,Qe)|0,B=B+Math.imul(ge,Fe)|0,B=B+Math.imul(ke,Qe)|0,z=z+Math.imul(ke,Fe)|0,V=V+Math.imul(we,Xe)|0,B=B+Math.imul(we,Je)|0,B=B+Math.imul(oe,Xe)|0,z=z+Math.imul(oe,Je)|0,V=V+Math.imul(de,ze)|0,B=B+Math.imul(de,Ve)|0,B=B+Math.imul(me,ze)|0,z=z+Math.imul(me,Ve)|0;var Ie=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,V=Math.imul(H,Oe),B=Math.imul(H,Pe),B=B+Math.imul(fe,Oe)|0,z=Math.imul(fe,Pe),V=V+Math.imul(ue,xe)|0,B=B+Math.imul(ue,Ae)|0,B=B+Math.imul(y,xe)|0,z=z+Math.imul(y,Ae)|0,V=V+Math.imul(se,We)|0,B=B+Math.imul(se,De)|0,B=B+Math.imul(ve,We)|0,z=z+Math.imul(ve,De)|0,V=V+Math.imul(F,He)|0,B=B+Math.imul(F,Me)|0,B=B+Math.imul($,He)|0,z=z+Math.imul($,Me)|0,V=V+Math.imul(te,Qe)|0,B=B+Math.imul(te,Fe)|0,B=B+Math.imul(ee,Qe)|0,z=z+Math.imul(ee,Fe)|0,V=V+Math.imul(ge,Xe)|0,B=B+Math.imul(ge,Je)|0,B=B+Math.imul(ke,Xe)|0,z=z+Math.imul(ke,Je)|0,V=V+Math.imul(we,ze)|0,B=B+Math.imul(we,Ve)|0,B=B+Math.imul(oe,ze)|0,z=z+Math.imul(oe,Ve)|0,V=V+Math.imul(de,tt)|0,B=B+Math.imul(de,Ge)|0,B=B+Math.imul(me,tt)|0,z=z+Math.imul(me,Ge)|0;var Ce=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,V=Math.imul(b,Oe),B=Math.imul(b,Pe),B=B+Math.imul(D,Oe)|0,z=Math.imul(D,Pe),V=V+Math.imul(H,xe)|0,B=B+Math.imul(H,Ae)|0,B=B+Math.imul(fe,xe)|0,z=z+Math.imul(fe,Ae)|0,V=V+Math.imul(ue,We)|0,B=B+Math.imul(ue,De)|0,B=B+Math.imul(y,We)|0,z=z+Math.imul(y,De)|0,V=V+Math.imul(se,He)|0,B=B+Math.imul(se,Me)|0,B=B+Math.imul(ve,He)|0,z=z+Math.imul(ve,Me)|0,V=V+Math.imul(F,Qe)|0,B=B+Math.imul(F,Fe)|0,B=B+Math.imul($,Qe)|0,z=z+Math.imul($,Fe)|0,V=V+Math.imul(te,Xe)|0,B=B+Math.imul(te,Je)|0,B=B+Math.imul(ee,Xe)|0,z=z+Math.imul(ee,Je)|0,V=V+Math.imul(ge,ze)|0,B=B+Math.imul(ge,Ve)|0,B=B+Math.imul(ke,ze)|0,z=z+Math.imul(ke,Ve)|0,V=V+Math.imul(we,tt)|0,B=B+Math.imul(we,Ge)|0,B=B+Math.imul(oe,tt)|0,z=z+Math.imul(oe,Ge)|0,V=V+Math.imul(de,it)|0,B=B+Math.imul(de,Le)|0,B=B+Math.imul(me,it)|0,z=z+Math.imul(me,Le)|0;var $e=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+($e>>>26)|0,$e&=67108863,V=Math.imul(pe,Oe),B=Math.imul(pe,Pe),B=B+Math.imul(ae,Oe)|0,z=Math.imul(ae,Pe),V=V+Math.imul(b,xe)|0,B=B+Math.imul(b,Ae)|0,B=B+Math.imul(D,xe)|0,z=z+Math.imul(D,Ae)|0,V=V+Math.imul(H,We)|0,B=B+Math.imul(H,De)|0,B=B+Math.imul(fe,We)|0,z=z+Math.imul(fe,De)|0,V=V+Math.imul(ue,He)|0,B=B+Math.imul(ue,Me)|0,B=B+Math.imul(y,He)|0,z=z+Math.imul(y,Me)|0,V=V+Math.imul(se,Qe)|0,B=B+Math.imul(se,Fe)|0,B=B+Math.imul(ve,Qe)|0,z=z+Math.imul(ve,Fe)|0,V=V+Math.imul(F,Xe)|0,B=B+Math.imul(F,Je)|0,B=B+Math.imul($,Xe)|0,z=z+Math.imul($,Je)|0,V=V+Math.imul(te,ze)|0,B=B+Math.imul(te,Ve)|0,B=B+Math.imul(ee,ze)|0,z=z+Math.imul(ee,Ve)|0,V=V+Math.imul(ge,tt)|0,B=B+Math.imul(ge,Ge)|0,B=B+Math.imul(ke,tt)|0,z=z+Math.imul(ke,Ge)|0,V=V+Math.imul(we,it)|0,B=B+Math.imul(we,Le)|0,B=B+Math.imul(oe,it)|0,z=z+Math.imul(oe,Le)|0,V=V+Math.imul(de,Ke)|0,B=B+Math.imul(de,Ze)|0,B=B+Math.imul(me,Ke)|0,z=z+Math.imul(me,Ze)|0;var st=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(st>>>26)|0,st&=67108863,V=Math.imul(pe,xe),B=Math.imul(pe,Ae),B=B+Math.imul(ae,xe)|0,z=Math.imul(ae,Ae),V=V+Math.imul(b,We)|0,B=B+Math.imul(b,De)|0,B=B+Math.imul(D,We)|0,z=z+Math.imul(D,De)|0,V=V+Math.imul(H,He)|0,B=B+Math.imul(H,Me)|0,B=B+Math.imul(fe,He)|0,z=z+Math.imul(fe,Me)|0,V=V+Math.imul(ue,Qe)|0,B=B+Math.imul(ue,Fe)|0,B=B+Math.imul(y,Qe)|0,z=z+Math.imul(y,Fe)|0,V=V+Math.imul(se,Xe)|0,B=B+Math.imul(se,Je)|0,B=B+Math.imul(ve,Xe)|0,z=z+Math.imul(ve,Je)|0,V=V+Math.imul(F,ze)|0,B=B+Math.imul(F,Ve)|0,B=B+Math.imul($,ze)|0,z=z+Math.imul($,Ve)|0,V=V+Math.imul(te,tt)|0,B=B+Math.imul(te,Ge)|0,B=B+Math.imul(ee,tt)|0,z=z+Math.imul(ee,Ge)|0,V=V+Math.imul(ge,it)|0,B=B+Math.imul(ge,Le)|0,B=B+Math.imul(ke,it)|0,z=z+Math.imul(ke,Le)|0,V=V+Math.imul(we,Ke)|0,B=B+Math.imul(we,Ze)|0,B=B+Math.imul(oe,Ke)|0,z=z+Math.imul(oe,Ze)|0;var at=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(at>>>26)|0,at&=67108863,V=Math.imul(pe,We),B=Math.imul(pe,De),B=B+Math.imul(ae,We)|0,z=Math.imul(ae,De),V=V+Math.imul(b,He)|0,B=B+Math.imul(b,Me)|0,B=B+Math.imul(D,He)|0,z=z+Math.imul(D,Me)|0,V=V+Math.imul(H,Qe)|0,B=B+Math.imul(H,Fe)|0,B=B+Math.imul(fe,Qe)|0,z=z+Math.imul(fe,Fe)|0,V=V+Math.imul(ue,Xe)|0,B=B+Math.imul(ue,Je)|0,B=B+Math.imul(y,Xe)|0,z=z+Math.imul(y,Je)|0,V=V+Math.imul(se,ze)|0,B=B+Math.imul(se,Ve)|0,B=B+Math.imul(ve,ze)|0,z=z+Math.imul(ve,Ve)|0,V=V+Math.imul(F,tt)|0,B=B+Math.imul(F,Ge)|0,B=B+Math.imul($,tt)|0,z=z+Math.imul($,Ge)|0,V=V+Math.imul(te,it)|0,B=B+Math.imul(te,Le)|0,B=B+Math.imul(ee,it)|0,z=z+Math.imul(ee,Le)|0,V=V+Math.imul(ge,Ke)|0,B=B+Math.imul(ge,Ze)|0,B=B+Math.imul(ke,Ke)|0,z=z+Math.imul(ke,Ze)|0;var dt=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(dt>>>26)|0,dt&=67108863,V=Math.imul(pe,He),B=Math.imul(pe,Me),B=B+Math.imul(ae,He)|0,z=Math.imul(ae,Me),V=V+Math.imul(b,Qe)|0,B=B+Math.imul(b,Fe)|0,B=B+Math.imul(D,Qe)|0,z=z+Math.imul(D,Fe)|0,V=V+Math.imul(H,Xe)|0,B=B+Math.imul(H,Je)|0,B=B+Math.imul(fe,Xe)|0,z=z+Math.imul(fe,Je)|0,V=V+Math.imul(ue,ze)|0,B=B+Math.imul(ue,Ve)|0,B=B+Math.imul(y,ze)|0,z=z+Math.imul(y,Ve)|0,V=V+Math.imul(se,tt)|0,B=B+Math.imul(se,Ge)|0,B=B+Math.imul(ve,tt)|0,z=z+Math.imul(ve,Ge)|0,V=V+Math.imul(F,it)|0,B=B+Math.imul(F,Le)|0,B=B+Math.imul($,it)|0,z=z+Math.imul($,Le)|0,V=V+Math.imul(te,Ke)|0,B=B+Math.imul(te,Ze)|0,B=B+Math.imul(ee,Ke)|0,z=z+Math.imul(ee,Ze)|0;var ot=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(ot>>>26)|0,ot&=67108863,V=Math.imul(pe,Qe),B=Math.imul(pe,Fe),B=B+Math.imul(ae,Qe)|0,z=Math.imul(ae,Fe),V=V+Math.imul(b,Xe)|0,B=B+Math.imul(b,Je)|0,B=B+Math.imul(D,Xe)|0,z=z+Math.imul(D,Je)|0,V=V+Math.imul(H,ze)|0,B=B+Math.imul(H,Ve)|0,B=B+Math.imul(fe,ze)|0,z=z+Math.imul(fe,Ve)|0,V=V+Math.imul(ue,tt)|0,B=B+Math.imul(ue,Ge)|0,B=B+Math.imul(y,tt)|0,z=z+Math.imul(y,Ge)|0,V=V+Math.imul(se,it)|0,B=B+Math.imul(se,Le)|0,B=B+Math.imul(ve,it)|0,z=z+Math.imul(ve,Le)|0,V=V+Math.imul(F,Ke)|0,B=B+Math.imul(F,Ze)|0,B=B+Math.imul($,Ke)|0,z=z+Math.imul($,Ze)|0;var ct=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(ct>>>26)|0,ct&=67108863,V=Math.imul(pe,Xe),B=Math.imul(pe,Je),B=B+Math.imul(ae,Xe)|0,z=Math.imul(ae,Je),V=V+Math.imul(b,ze)|0,B=B+Math.imul(b,Ve)|0,B=B+Math.imul(D,ze)|0,z=z+Math.imul(D,Ve)|0,V=V+Math.imul(H,tt)|0,B=B+Math.imul(H,Ge)|0,B=B+Math.imul(fe,tt)|0,z=z+Math.imul(fe,Ge)|0,V=V+Math.imul(ue,it)|0,B=B+Math.imul(ue,Le)|0,B=B+Math.imul(y,it)|0,z=z+Math.imul(y,Le)|0,V=V+Math.imul(se,Ke)|0,B=B+Math.imul(se,Ze)|0,B=B+Math.imul(ve,Ke)|0,z=z+Math.imul(ve,Ze)|0;var ut=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(ut>>>26)|0,ut&=67108863,V=Math.imul(pe,ze),B=Math.imul(pe,Ve),B=B+Math.imul(ae,ze)|0,z=Math.imul(ae,Ve),V=V+Math.imul(b,tt)|0,B=B+Math.imul(b,Ge)|0,B=B+Math.imul(D,tt)|0,z=z+Math.imul(D,Ge)|0,V=V+Math.imul(H,it)|0,B=B+Math.imul(H,Le)|0,B=B+Math.imul(fe,it)|0,z=z+Math.imul(fe,Le)|0,V=V+Math.imul(ue,Ke)|0,B=B+Math.imul(ue,Ze)|0,B=B+Math.imul(y,Ke)|0,z=z+Math.imul(y,Ze)|0;var ft=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(ft>>>26)|0,ft&=67108863,V=Math.imul(pe,tt),B=Math.imul(pe,Ge),B=B+Math.imul(ae,tt)|0,z=Math.imul(ae,Ge),V=V+Math.imul(b,it)|0,B=B+Math.imul(b,Le)|0,B=B+Math.imul(D,it)|0,z=z+Math.imul(D,Le)|0,V=V+Math.imul(H,Ke)|0,B=B+Math.imul(H,Ze)|0,B=B+Math.imul(fe,Ke)|0,z=z+Math.imul(fe,Ze)|0;var lt=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(lt>>>26)|0,lt&=67108863,V=Math.imul(pe,it),B=Math.imul(pe,Le),B=B+Math.imul(ae,it)|0,z=Math.imul(ae,Le),V=V+Math.imul(b,Ke)|0,B=B+Math.imul(b,Ze)|0,B=B+Math.imul(D,Ke)|0,z=z+Math.imul(D,Ze)|0;var pt=(I+V|0)+((B&8191)<<13)|0;I=(z+(B>>>13)|0)+(pt>>>26)|0,pt&=67108863,V=Math.imul(pe,Ke),B=Math.imul(pe,Ze),B=B+Math.imul(ae,Ke)|0,z=Math.imul(ae,Ze);var mt=(I+V|0)+((B&8191)<<13)|0;return I=(z+(B>>>13)|0)+(mt>>>26)|0,mt&=67108863,G[0]=ne,G[1]=he,G[2]=ye,G[3]=Ee,G[4]=Te,G[5]=Ne,G[6]=Ie,G[7]=Ce,G[8]=$e,G[9]=st,G[10]=at,G[11]=dt,G[12]=ot,G[13]=ct,G[14]=ut,G[15]=ft,G[16]=lt,G[17]=pt,G[18]=mt,I!==0&&(G[19]=I,T.length++),T};Math.imul||(P=N);function M(k,g,E){E.negative=g.negative^k.negative,E.length=k.length+g.length;for(var T=0,A=0,J=0;J<E.length-1;J++){var G=A;A=0;for(var I=T&67108863,V=Math.min(J,g.length-1),B=Math.max(0,J-k.length+1);B<=V;B++){var z=J-B,ie=k.words[z]|0,de=g.words[B]|0,me=ie*de,be=me&67108863;G=G+(me/67108864|0)|0,be=be+I|0,I=be&67108863,G=G+(be>>>26)|0,A+=G>>>26,G&=67108863}E.words[J]=I,T=G,G=A}return T!==0?E.words[J]=T:E.length--,E._strip()}function U(k,g,E){return M(k,g,E)}s.prototype.mulTo=function(g,E){var T,A=this.length+g.length;return this.length===10&&g.length===10?T=P(this,g,E):A<63?T=N(this,g,E):A<1024?T=M(this,g,E):T=U(this,g,E),T},s.prototype.mul=function(g){var E=new s(null);return E.words=new Array(this.length+g.length),this.mulTo(g,E)},s.prototype.mulf=function(g){var E=new s(null);return E.words=new Array(this.length+g.length),U(this,g,E)},s.prototype.imul=function(g){return this.clone().mulTo(g,this)},s.prototype.imuln=function(g){var E=g<0;E&&(g=-g),o(typeof g=="number"),o(g<67108864);for(var T=0,A=0;A<this.length;A++){var J=(this.words[A]|0)*g,G=(J&67108863)+(T&67108863);T>>=26,T+=J/67108864|0,T+=G>>>26,this.words[A]=G&67108863}return T!==0&&(this.words[A]=T,this.length++),E?this.ineg():this},s.prototype.muln=function(g){return this.clone().imuln(g)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(g){var E=C(g);if(E.length===0)return new s(1);for(var T=this,A=0;A<E.length&&E[A]===0;A++,T=T.sqr());if(++A<E.length)for(var J=T.sqr();A<E.length;A++,J=J.sqr())E[A]!==0&&(T=T.mul(J));return T},s.prototype.iushln=function(g){o(typeof g=="number"&&g>=0);var E=g%26,T=(g-E)/26,A=67108863>>>26-E<<26-E,J;if(E!==0){var G=0;for(J=0;J<this.length;J++){var I=this.words[J]&A,V=(this.words[J]|0)-I<<E;this.words[J]=V|G,G=I>>>26-E}G&&(this.words[J]=G,this.length++)}if(T!==0){for(J=this.length-1;J>=0;J--)this.words[J+T]=this.words[J];for(J=0;J<T;J++)this.words[J]=0;this.length+=T}return this._strip()},s.prototype.ishln=function(g){return o(this.negative===0),this.iushln(g)},s.prototype.iushrn=function(g,E,T){o(typeof g=="number"&&g>=0);var A;E?A=(E-E%26)/26:A=0;var J=g%26,G=Math.min((g-J)/26,this.length),I=67108863^67108863>>>J<<J,V=T;if(A-=G,A=Math.max(0,A),V){for(var B=0;B<G;B++)V.words[B]=this.words[B];V.length=G}if(G!==0)if(this.length>G)for(this.length-=G,B=0;B<this.length;B++)this.words[B]=this.words[B+G];else this.words[0]=0,this.length=1;var z=0;for(B=this.length-1;B>=0&&(z!==0||B>=A);B--){var ie=this.words[B]|0;this.words[B]=z<<26-J|ie>>>J,z=ie&I}return V&&z!==0&&(V.words[V.length++]=z),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(g,E,T){return o(this.negative===0),this.iushrn(g,E,T)},s.prototype.shln=function(g){return this.clone().ishln(g)},s.prototype.ushln=function(g){return this.clone().iushln(g)},s.prototype.shrn=function(g){return this.clone().ishrn(g)},s.prototype.ushrn=function(g){return this.clone().iushrn(g)},s.prototype.testn=function(g){o(typeof g=="number"&&g>=0);var E=g%26,T=(g-E)/26,A=1<<E;if(this.length<=T)return!1;var J=this.words[T];return!!(J&A)},s.prototype.imaskn=function(g){o(typeof g=="number"&&g>=0);var E=g%26,T=(g-E)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=T)return this;if(E!==0&&T++,this.length=Math.min(T,this.length),E!==0){var A=67108863^67108863>>>E<<E;this.words[this.length-1]&=A}return this._strip()},s.prototype.maskn=function(g){return this.clone().imaskn(g)},s.prototype.iaddn=function(g){return o(typeof g=="number"),o(g<67108864),g<0?this.isubn(-g):this.negative!==0?this.length===1&&(this.words[0]|0)<=g?(this.words[0]=g-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},s.prototype._iaddn=function(g){this.words[0]+=g;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},s.prototype.isubn=function(g){if(o(typeof g=="number"),o(g<67108864),g<0)return this.iaddn(-g);if(this.negative!==0)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this._strip()},s.prototype.addn=function(g){return this.clone().iaddn(g)},s.prototype.subn=function(g){return this.clone().isubn(g)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(g,E,T){var A=g.length+T,J;this._expand(A);var G,I=0;for(J=0;J<g.length;J++){G=(this.words[J+T]|0)+I;var V=(g.words[J]|0)*E;G-=V&67108863,I=(G>>26)-(V/67108864|0),this.words[J+T]=G&67108863}for(;J<this.length-T;J++)G=(this.words[J+T]|0)+I,I=G>>26,this.words[J+T]=G&67108863;if(I===0)return this._strip();for(o(I===-1),I=0,J=0;J<this.length;J++)G=-(this.words[J]|0)+I,I=G>>26,this.words[J]=G&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(g,E){var T=this.length-g.length,A=this.clone(),J=g,G=J.words[J.length-1]|0,I=this._countBits(G);T=26-I,T!==0&&(J=J.ushln(T),A.iushln(T),G=J.words[J.length-1]|0);var V=A.length-J.length,B;if(E!=="mod"){B=new s(null),B.length=V+1,B.words=new Array(B.length);for(var z=0;z<B.length;z++)B.words[z]=0}var ie=A.clone()._ishlnsubmul(J,1,V);ie.negative===0&&(A=ie,B&&(B.words[V]=1));for(var de=V-1;de>=0;de--){var me=(A.words[J.length+de]|0)*67108864+(A.words[J.length+de-1]|0);for(me=Math.min(me/G|0,67108863),A._ishlnsubmul(J,me,de);A.negative!==0;)me--,A.negative=0,A._ishlnsubmul(J,1,de),A.isZero()||(A.negative^=1);B&&(B.words[de]=me)}return B&&B._strip(),A._strip(),E!=="div"&&T!==0&&A.iushrn(T),{div:B||null,mod:A}},s.prototype.divmod=function(g,E,T){if(o(!g.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var A,J,G;return this.negative!==0&&g.negative===0?(G=this.neg().divmod(g,E),E!=="mod"&&(A=G.div.neg()),E!=="div"&&(J=G.mod.neg(),T&&J.negative!==0&&J.iadd(g)),{div:A,mod:J}):this.negative===0&&g.negative!==0?(G=this.divmod(g.neg(),E),E!=="mod"&&(A=G.div.neg()),{div:A,mod:G.mod}):this.negative&g.negative?(G=this.neg().divmod(g.neg(),E),E!=="div"&&(J=G.mod.neg(),T&&J.negative!==0&&J.isub(g)),{div:G.div,mod:J}):g.length>this.length||this.cmp(g)<0?{div:new s(0),mod:this}:g.length===1?E==="div"?{div:this.divn(g.words[0]),mod:null}:E==="mod"?{div:null,mod:new s(this.modrn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new s(this.modrn(g.words[0]))}:this._wordDiv(g,E)},s.prototype.div=function(g){return this.divmod(g,"div",!1).div},s.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},s.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},s.prototype.divRound=function(g){var E=this.divmod(g);if(E.mod.isZero())return E.div;var T=E.div.negative!==0?E.mod.isub(g):E.mod,A=g.ushrn(1),J=g.andln(1),G=T.cmp(A);return G<0||J===1&&G===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},s.prototype.modrn=function(g){var E=g<0;E&&(g=-g),o(g<=67108863);for(var T=(1<<26)%g,A=0,J=this.length-1;J>=0;J--)A=(T*A+(this.words[J]|0))%g;return E?-A:A},s.prototype.modn=function(g){return this.modrn(g)},s.prototype.idivn=function(g){var E=g<0;E&&(g=-g),o(g<=67108863);for(var T=0,A=this.length-1;A>=0;A--){var J=(this.words[A]|0)+T*67108864;this.words[A]=J/g|0,T=J%g}return this._strip(),E?this.ineg():this},s.prototype.divn=function(g){return this.clone().idivn(g)},s.prototype.egcd=function(g){o(g.negative===0),o(!g.isZero());var E=this,T=g.clone();E.negative!==0?E=E.umod(g):E=E.clone();for(var A=new s(1),J=new s(0),G=new s(0),I=new s(1),V=0;E.isEven()&&T.isEven();)E.iushrn(1),T.iushrn(1),++V;for(var B=T.clone(),z=E.clone();!E.isZero();){for(var ie=0,de=1;!(E.words[0]&de)&&ie<26;++ie,de<<=1);if(ie>0)for(E.iushrn(ie);ie-- >0;)(A.isOdd()||J.isOdd())&&(A.iadd(B),J.isub(z)),A.iushrn(1),J.iushrn(1);for(var me=0,be=1;!(T.words[0]&be)&&me<26;++me,be<<=1);if(me>0)for(T.iushrn(me);me-- >0;)(G.isOdd()||I.isOdd())&&(G.iadd(B),I.isub(z)),G.iushrn(1),I.iushrn(1);E.cmp(T)>=0?(E.isub(T),A.isub(G),J.isub(I)):(T.isub(E),G.isub(A),I.isub(J))}return{a:G,b:I,gcd:T.iushln(V)}},s.prototype._invmp=function(g){o(g.negative===0),o(!g.isZero());var E=this,T=g.clone();E.negative!==0?E=E.umod(g):E=E.clone();for(var A=new s(1),J=new s(0),G=T.clone();E.cmpn(1)>0&&T.cmpn(1)>0;){for(var I=0,V=1;!(E.words[0]&V)&&I<26;++I,V<<=1);if(I>0)for(E.iushrn(I);I-- >0;)A.isOdd()&&A.iadd(G),A.iushrn(1);for(var B=0,z=1;!(T.words[0]&z)&&B<26;++B,z<<=1);if(B>0)for(T.iushrn(B);B-- >0;)J.isOdd()&&J.iadd(G),J.iushrn(1);E.cmp(T)>=0?(E.isub(T),A.isub(J)):(T.isub(E),J.isub(A))}var ie;return E.cmpn(1)===0?ie=A:ie=J,ie.cmpn(0)<0&&ie.iadd(g),ie},s.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var E=this.clone(),T=g.clone();E.negative=0,T.negative=0;for(var A=0;E.isEven()&&T.isEven();A++)E.iushrn(1),T.iushrn(1);do{for(;E.isEven();)E.iushrn(1);for(;T.isEven();)T.iushrn(1);var J=E.cmp(T);if(J<0){var G=E;E=T,T=G}else if(J===0||T.cmpn(1)===0)break;E.isub(T)}while(!0);return T.iushln(A)},s.prototype.invm=function(g){return this.egcd(g).a.umod(g)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(g){return this.words[0]&g},s.prototype.bincn=function(g){o(typeof g=="number");var E=g%26,T=(g-E)/26,A=1<<E;if(this.length<=T)return this._expand(T+1),this.words[T]|=A,this;for(var J=A,G=T;J!==0&&G<this.length;G++){var I=this.words[G]|0;I+=J,J=I>>>26,I&=67108863,this.words[G]=I}return J!==0&&(this.words[G]=J,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(g){var E=g<0;if(this.negative!==0&&!E)return-1;if(this.negative===0&&E)return 1;this._strip();var T;if(this.length>1)T=1;else{E&&(g=-g),o(g<=67108863,"Number is too big");var A=this.words[0]|0;T=A===g?0:A<g?-1:1}return this.negative!==0?-T|0:T},s.prototype.cmp=function(g){if(this.negative!==0&&g.negative===0)return-1;if(this.negative===0&&g.negative!==0)return 1;var E=this.ucmp(g);return this.negative!==0?-E|0:E},s.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var E=0,T=this.length-1;T>=0;T--){var A=this.words[T]|0,J=g.words[T]|0;if(A!==J){A<J?E=-1:A>J&&(E=1);break}}return E},s.prototype.gtn=function(g){return this.cmpn(g)===1},s.prototype.gt=function(g){return this.cmp(g)===1},s.prototype.gten=function(g){return this.cmpn(g)>=0},s.prototype.gte=function(g){return this.cmp(g)>=0},s.prototype.ltn=function(g){return this.cmpn(g)===-1},s.prototype.lt=function(g){return this.cmp(g)===-1},s.prototype.lten=function(g){return this.cmpn(g)<=0},s.prototype.lte=function(g){return this.cmp(g)<=0},s.prototype.eqn=function(g){return this.cmpn(g)===0},s.prototype.eq=function(g){return this.cmp(g)===0},s.red=function(g){return new x(g)},s.prototype.toRed=function(g){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),g.convertTo(this)._forceRed(g)},s.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(g){return this.red=g,this},s.prototype.forceRed=function(g){return o(!this.red,"Already a number in reduction context"),this._forceRed(g)},s.prototype.redAdd=function(g){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},s.prototype.redIAdd=function(g){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},s.prototype.redSub=function(g){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},s.prototype.redISub=function(g){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},s.prototype.redShl=function(g){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},s.prototype.redMul=function(g){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},s.prototype.redIMul=function(g){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},s.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(g){return o(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var W={k256:null,p224:null,p192:null,p25519:null};function q(k,g){this.name=k,this.p=new s(g,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}q.prototype._tmp=function(){var g=new s(null);return g.words=new Array(Math.ceil(this.n/13)),g},q.prototype.ireduce=function(g){var E=g,T;do this.split(E,this.tmp),E=this.imulK(E),E=E.iadd(this.tmp),T=E.bitLength();while(T>this.n);var A=T<this.n?-1:E.ucmp(this.p);return A===0?(E.words[0]=0,E.length=1):A>0?E.isub(this.p):E.strip!==void 0?E.strip():E._strip(),E},q.prototype.split=function(g,E){g.iushrn(this.n,0,E)},q.prototype.imulK=function(g){return g.imul(this.k)};function Z(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}d(Z,q),Z.prototype.split=function(g,E){for(var T=4194303,A=Math.min(g.length,9),J=0;J<A;J++)E.words[J]=g.words[J];if(E.length=A,g.length<=9){g.words[0]=0,g.length=1;return}var G=g.words[9];for(E.words[E.length++]=G&T,J=10;J<g.length;J++){var I=g.words[J]|0;g.words[J-10]=(I&T)<<4|G>>>22,G=I}G>>>=22,g.words[J-10]=G,G===0&&g.length>10?g.length-=10:g.length-=9},Z.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var E=0,T=0;T<g.length;T++){var A=g.words[T]|0;E+=A*977,g.words[T]=E&67108863,E=A*64+(E/67108864|0)}return g.words[g.length-1]===0&&(g.length--,g.words[g.length-1]===0&&g.length--),g};function re(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}d(re,q);function Y(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}d(Y,q);function O(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}d(O,q),O.prototype.imulK=function(g){for(var E=0,T=0;T<g.length;T++){var A=(g.words[T]|0)*19+E,J=A&67108863;A>>>=26,g.words[T]=J,E=A}return E!==0&&(g.words[g.length++]=E),g},s._prime=function(g){if(W[g])return W[g];var E;if(g==="k256")E=new Z;else if(g==="p224")E=new re;else if(g==="p192")E=new Y;else if(g==="p25519")E=new O;else throw new Error("Unknown prime "+g);return W[g]=E,E};function x(k){if(typeof k=="string"){var g=s._prime(k);this.m=g.p,this.prime=g}else o(k.gtn(1),"modulus must be greater than 1"),this.m=k,this.prime=null}x.prototype._verify1=function(g){o(g.negative===0,"red works only with positives"),o(g.red,"red works only with red numbers")},x.prototype._verify2=function(g,E){o((g.negative|E.negative)===0,"red works only with positives"),o(g.red&&g.red===E.red,"red works only with red numbers")},x.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):(l(g,g.umod(this.m)._forceRed(this)),g)},x.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},x.prototype.add=function(g,E){this._verify2(g,E);var T=g.add(E);return T.cmp(this.m)>=0&&T.isub(this.m),T._forceRed(this)},x.prototype.iadd=function(g,E){this._verify2(g,E);var T=g.iadd(E);return T.cmp(this.m)>=0&&T.isub(this.m),T},x.prototype.sub=function(g,E){this._verify2(g,E);var T=g.sub(E);return T.cmpn(0)<0&&T.iadd(this.m),T._forceRed(this)},x.prototype.isub=function(g,E){this._verify2(g,E);var T=g.isub(E);return T.cmpn(0)<0&&T.iadd(this.m),T},x.prototype.shl=function(g,E){return this._verify1(g),this.imod(g.ushln(E))},x.prototype.imul=function(g,E){return this._verify2(g,E),this.imod(g.imul(E))},x.prototype.mul=function(g,E){return this._verify2(g,E),this.imod(g.mul(E))},x.prototype.isqr=function(g){return this.imul(g,g.clone())},x.prototype.sqr=function(g){return this.mul(g,g)},x.prototype.sqrt=function(g){if(g.isZero())return g.clone();var E=this.m.andln(3);if(o(E%2===1),E===3){var T=this.m.add(new s(1)).iushrn(2);return this.pow(g,T)}for(var A=this.m.subn(1),J=0;!A.isZero()&&A.andln(1)===0;)J++,A.iushrn(1);o(!A.isZero());var G=new s(1).toRed(this),I=G.redNeg(),V=this.m.subn(1).iushrn(1),B=this.m.bitLength();for(B=new s(2*B*B).toRed(this);this.pow(B,V).cmp(I)!==0;)B.redIAdd(I);for(var z=this.pow(B,A),ie=this.pow(g,A.addn(1).iushrn(1)),de=this.pow(g,A),me=J;de.cmp(G)!==0;){for(var be=de,we=0;be.cmp(G)!==0;we++)be=be.redSqr();o(we<me);var oe=this.pow(z,new s(1).iushln(me-we-1));ie=ie.redMul(oe),z=oe.redSqr(),de=de.redMul(z),me=we}return ie},x.prototype.invm=function(g){var E=g._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},x.prototype.pow=function(g,E){if(E.isZero())return new s(1).toRed(this);if(E.cmpn(1)===0)return g.clone();var T=4,A=new Array(1<<T);A[0]=new s(1).toRed(this),A[1]=g;for(var J=2;J<A.length;J++)A[J]=this.mul(A[J-1],g);var G=A[0],I=0,V=0,B=E.bitLength()%26;for(B===0&&(B=26),J=E.length-1;J>=0;J--){for(var z=E.words[J],ie=B-1;ie>=0;ie--){var de=z>>ie&1;if(G!==A[0]&&(G=this.sqr(G)),de===0&&I===0){V=0;continue}I<<=1,I|=de,V++,!(V!==T&&(J!==0||ie!==0))&&(G=this.mul(G,A[I]),V=0,I=0)}B=26}return G},x.prototype.convertTo=function(g){var E=g.umod(this.m);return E===g?E.clone():E},x.prototype.convertFrom=function(g){var E=g.clone();return E.red=null,E},s.mont=function(g){return new S(g)};function S(k){x.call(this,k),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}d(S,x),S.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},S.prototype.convertFrom=function(g){var E=this.imod(g.mul(this.rinv));return E.red=null,E},S.prototype.imul=function(g,E){if(g.isZero()||E.isZero())return g.words[0]=0,g.length=1,g;var T=g.imul(E),A=T.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),J=T.isub(A).iushrn(this.shift),G=J;return J.cmp(this.m)>=0?G=J.isub(this.m):J.cmpn(0)<0&&(G=J.iadd(this.m)),G._forceRed(this)},S.prototype.mul=function(g,E){if(g.isZero()||E.isZero())return new s(0)._forceRed(this);var T=g.mul(E),A=T.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),J=T.isub(A).iushrn(this.shift),G=J;return J.cmp(this.m)>=0?G=J.isub(this.m):J.cmpn(0)<0&&(G=J.iadd(this.m)),G._forceRed(this)},S.prototype.invm=function(g){var E=this.imod(g._invmp(this.m).mul(this.r2));return E._forceRed(this)}})(typeof i>"u"||i,this)},{buffer:142}],141:[function(e,i,t){var n;i.exports=function(s){return n||(n=new a(null)),n.generate(s)};function a(d){this.rand=d}if(i.exports.Rand=a,a.prototype.generate=function(s){return this._rand(s)},a.prototype._rand=function(s){if(this.rand.getBytes)return this.rand.getBytes(s);for(var f=new Uint8Array(s),c=0;c<f.length;c++)f[c]=this.rand.getByte();return f},typeof self=="object")self.crypto&&self.crypto.getRandomValues?a.prototype._rand=function(s){var f=new Uint8Array(s);return self.crypto.getRandomValues(f),f}:self.msCrypto&&self.msCrypto.getRandomValues?a.prototype._rand=function(s){var f=new Uint8Array(s);return self.msCrypto.getRandomValues(f),f}:typeof window=="object"&&(a.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=e("crypto");if(typeof o.randomBytes!="function")throw new Error("Not supported");a.prototype._rand=function(s){return o.randomBytes(s)}}catch{}},{crypto:142}],142:[function(e,i,t){},{}],143:[function(e,i,t){var n=e("safe-buffer").Buffer;function a(h){n.isBuffer(h)||(h=n.from(h));for(var v=h.length/4|0,l=new Array(v),u=0;u<v;u++)l[u]=h.readUInt32BE(u*4);return l}function o(h){for(var v=0;v<h.length;h++)h[v]=0}function d(h,v,l,u,p){for(var m=l[0],w=l[1],_=l[2],C=l[3],N=h[0]^v[0],P=h[1]^v[1],M=h[2]^v[2],U=h[3]^v[3],W,q,Z,re,Y=4,O=1;O<p;O++)W=m[N>>>24]^w[P>>>16&255]^_[M>>>8&255]^C[U&255]^v[Y++],q=m[P>>>24]^w[M>>>16&255]^_[U>>>8&255]^C[N&255]^v[Y++],Z=m[M>>>24]^w[U>>>16&255]^_[N>>>8&255]^C[P&255]^v[Y++],re=m[U>>>24]^w[N>>>16&255]^_[P>>>8&255]^C[M&255]^v[Y++],N=W,P=q,M=Z,U=re;return W=(u[N>>>24]<<24|u[P>>>16&255]<<16|u[M>>>8&255]<<8|u[U&255])^v[Y++],q=(u[P>>>24]<<24|u[M>>>16&255]<<16|u[U>>>8&255]<<8|u[N&255])^v[Y++],Z=(u[M>>>24]<<24|u[U>>>16&255]<<16|u[N>>>8&255]<<8|u[P&255])^v[Y++],re=(u[U>>>24]<<24|u[N>>>16&255]<<16|u[P>>>8&255]<<8|u[M&255])^v[Y++],W=W>>>0,q=q>>>0,Z=Z>>>0,re=re>>>0,[W,q,Z,re]}var s=[0,1,2,4,8,16,32,64,128,27,54],f=function(){for(var h=new Array(256),v=0;v<256;v++)v<128?h[v]=v<<1:h[v]=v<<1^283;for(var l=[],u=[],p=[[],[],[],[]],m=[[],[],[],[]],w=0,_=0,C=0;C<256;++C){var N=_^_<<1^_<<2^_<<3^_<<4;N=N>>>8^N&255^99,l[w]=N,u[N]=w;var P=h[w],M=h[P],U=h[M],W=h[N]*257^N*16843008;p[0][w]=W<<24|W>>>8,p[1][w]=W<<16|W>>>16,p[2][w]=W<<8|W>>>24,p[3][w]=W,W=U*16843009^M*65537^P*257^w*16843008,m[0][N]=W<<24|W>>>8,m[1][N]=W<<16|W>>>16,m[2][N]=W<<8|W>>>24,m[3][N]=W,w===0?w=_=1:(w=P^h[h[h[U^P]]],_^=h[h[_]])}return{SBOX:l,INV_SBOX:u,SUB_MIX:p,INV_SUB_MIX:m}}();function c(h){this._key=a(h),this._reset()}c.blockSize=4*4,c.keySize=256/8,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var h=this._key,v=h.length,l=v+6,u=(l+1)*4,p=[],m=0;m<v;m++)p[m]=h[m];for(m=v;m<u;m++){var w=p[m-1];m%v===0?(w=w<<8|w>>>24,w=f.SBOX[w>>>24]<<24|f.SBOX[w>>>16&255]<<16|f.SBOX[w>>>8&255]<<8|f.SBOX[w&255],w^=s[m/v|0]<<24):v>6&&m%v===4&&(w=f.SBOX[w>>>24]<<24|f.SBOX[w>>>16&255]<<16|f.SBOX[w>>>8&255]<<8|f.SBOX[w&255]),p[m]=p[m-v]^w}for(var _=[],C=0;C<u;C++){var N=u-C,P=p[N-(C%4?0:4)];C<4||N<=4?_[C]=P:_[C]=f.INV_SUB_MIX[0][f.SBOX[P>>>24]]^f.INV_SUB_MIX[1][f.SBOX[P>>>16&255]]^f.INV_SUB_MIX[2][f.SBOX[P>>>8&255]]^f.INV_SUB_MIX[3][f.SBOX[P&255]]}this._nRounds=l,this._keySchedule=p,this._invKeySchedule=_},c.prototype.encryptBlockRaw=function(h){return h=a(h),d(h,this._keySchedule,f.SUB_MIX,f.SBOX,this._nRounds)},c.prototype.encryptBlock=function(h){var v=this.encryptBlockRaw(h),l=n.allocUnsafe(16);return l.writeUInt32BE(v[0],0),l.writeUInt32BE(v[1],4),l.writeUInt32BE(v[2],8),l.writeUInt32BE(v[3],12),l},c.prototype.decryptBlock=function(h){h=a(h);var v=h[1];h[1]=h[3],h[3]=v;var l=d(h,this._invKeySchedule,f.INV_SUB_MIX,f.INV_SBOX,this._nRounds),u=n.allocUnsafe(16);return u.writeUInt32BE(l[0],0),u.writeUInt32BE(l[3],4),u.writeUInt32BE(l[2],8),u.writeUInt32BE(l[1],12),u},c.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},i.exports.AES=c},{"safe-buffer":279}],144:[function(e,i,t){var n=e("./aes"),a=e("safe-buffer").Buffer,o=e("cipher-base"),d=e("inherits"),s=e("./ghash"),f=e("buffer-xor"),c=e("./incr32");function h(u,p){var m=0;u.length!==p.length&&m++;for(var w=Math.min(u.length,p.length),_=0;_<w;++_)m+=u[_]^p[_];return m}function v(u,p,m){if(p.length===12)return u._finID=a.concat([p,a.from([0,0,0,1])]),a.concat([p,a.from([0,0,0,2])]);var w=new s(m),_=p.length,C=_%16;w.update(p),C&&(C=16-C,w.update(a.alloc(C,0))),w.update(a.alloc(8,0));var N=_*8,P=a.alloc(8);P.writeUIntBE(N,0,8),w.update(P),u._finID=w.state;var M=a.from(u._finID);return c(M),M}function l(u,p,m,w){o.call(this);var _=a.alloc(4,0);this._cipher=new n.AES(p);var C=this._cipher.encryptBlock(_);this._ghash=new s(C),m=v(this,m,C),this._prev=a.from(m),this._cache=a.allocUnsafe(0),this._secCache=a.allocUnsafe(0),this._decrypt=w,this._alen=0,this._len=0,this._mode=u,this._authTag=null,this._called=!1}d(l,o),l.prototype._update=function(u){if(!this._called&&this._alen){var p=16-this._alen%16;p<16&&(p=a.alloc(p,0),this._ghash.update(p))}this._called=!0;var m=this._mode.encrypt(this,u);return this._decrypt?this._ghash.update(u):this._ghash.update(m),this._len+=u.length,m},l.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var u=f(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&h(u,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=u,this._cipher.scrub()},l.prototype.getAuthTag=function(){if(this._decrypt||!a.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},l.prototype.setAuthTag=function(p){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=p},l.prototype.setAAD=function(p){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(p),this._alen+=p.length},i.exports=l},{"./aes":143,"./ghash":148,"./incr32":149,"buffer-xor":170,"cipher-base":174,inherits:233,"safe-buffer":279}],145:[function(e,i,t){var n=e("./encrypter"),a=e("./decrypter"),o=e("./modes/list.json");function d(){return Object.keys(o)}t.createCipher=t.Cipher=n.createCipher,t.createCipheriv=t.Cipheriv=n.createCipheriv,t.createDecipher=t.Decipher=a.createDecipher,t.createDecipheriv=t.Decipheriv=a.createDecipheriv,t.listCiphers=t.getCiphers=d},{"./decrypter":146,"./encrypter":147,"./modes/list.json":157}],146:[function(e,i,t){var n=e("./authCipher"),a=e("safe-buffer").Buffer,o=e("./modes"),d=e("./streamCipher"),s=e("cipher-base"),f=e("./aes"),c=e("evp_bytestokey"),h=e("inherits");function v(w,_,C){s.call(this),this._cache=new l,this._last=void 0,this._cipher=new f.AES(_),this._prev=a.from(C),this._mode=w,this._autopadding=!0}h(v,s),v.prototype._update=function(w){this._cache.add(w);for(var _,C,N=[];_=this._cache.get(this._autopadding);)C=this._mode.decrypt(this,_),N.push(C);return a.concat(N)},v.prototype._final=function(){var w=this._cache.flush();if(this._autopadding)return u(this._mode.decrypt(this,w));if(w)throw new Error("data not multiple of block length")},v.prototype.setAutoPadding=function(w){return this._autopadding=!!w,this};function l(){this.cache=a.allocUnsafe(0)}l.prototype.add=function(w){this.cache=a.concat([this.cache,w])},l.prototype.get=function(w){var _;if(w){if(this.cache.length>16)return _=this.cache.slice(0,16),this.cache=this.cache.slice(16),_}else if(this.cache.length>=16)return _=this.cache.slice(0,16),this.cache=this.cache.slice(16),_;return null},l.prototype.flush=function(){if(this.cache.length)return this.cache};function u(w){var _=w[15];if(_<1||_>16)throw new Error("unable to decrypt data");for(var C=-1;++C<_;)if(w[C+(16-_)]!==_)throw new Error("unable to decrypt data");if(_!==16)return w.slice(0,16-_)}function p(w,_,C){var N=o[w.toLowerCase()];if(!N)throw new TypeError("invalid suite type");if(typeof C=="string"&&(C=a.from(C)),N.mode!=="GCM"&&C.length!==N.iv)throw new TypeError("invalid iv length "+C.length);if(typeof _=="string"&&(_=a.from(_)),_.length!==N.key/8)throw new TypeError("invalid key length "+_.length);return N.type==="stream"?new d(N.module,_,C,!0):N.type==="auth"?new n(N.module,_,C,!0):new v(N.module,_,C)}function m(w,_){var C=o[w.toLowerCase()];if(!C)throw new TypeError("invalid suite type");var N=c(_,!1,C.key,C.iv);return p(w,N.key,N.iv)}t.createDecipher=m,t.createDecipheriv=p},{"./aes":143,"./authCipher":144,"./modes":156,"./streamCipher":159,"cipher-base":174,evp_bytestokey:208,inherits:233,"safe-buffer":279}],147:[function(e,i,t){var n=e("./modes"),a=e("./authCipher"),o=e("safe-buffer").Buffer,d=e("./streamCipher"),s=e("cipher-base"),f=e("./aes"),c=e("evp_bytestokey"),h=e("inherits");function v(w,_,C){s.call(this),this._cache=new u,this._cipher=new f.AES(_),this._prev=o.from(C),this._mode=w,this._autopadding=!0}h(v,s),v.prototype._update=function(w){this._cache.add(w);for(var _,C,N=[];_=this._cache.get();)C=this._mode.encrypt(this,_),N.push(C);return o.concat(N)};var l=o.alloc(16,16);v.prototype._final=function(){var w=this._cache.flush();if(this._autopadding)return w=this._mode.encrypt(this,w),this._cipher.scrub(),w;if(!w.equals(l))throw this._cipher.scrub(),new Error("data not multiple of block length")},v.prototype.setAutoPadding=function(w){return this._autopadding=!!w,this};function u(){this.cache=o.allocUnsafe(0)}u.prototype.add=function(w){this.cache=o.concat([this.cache,w])},u.prototype.get=function(){if(this.cache.length>15){var w=this.cache.slice(0,16);return this.cache=this.cache.slice(16),w}return null},u.prototype.flush=function(){for(var w=16-this.cache.length,_=o.allocUnsafe(w),C=-1;++C<w;)_.writeUInt8(w,C);return o.concat([this.cache,_])};function p(w,_,C){var N=n[w.toLowerCase()];if(!N)throw new TypeError("invalid suite type");if(typeof _=="string"&&(_=o.from(_)),_.length!==N.key/8)throw new TypeError("invalid key length "+_.length);if(typeof C=="string"&&(C=o.from(C)),N.mode!=="GCM"&&C.length!==N.iv)throw new TypeError("invalid iv length "+C.length);return N.type==="stream"?new d(N.module,_,C):N.type==="auth"?new a(N.module,_,C):new v(N.module,_,C)}function m(w,_){var C=n[w.toLowerCase()];if(!C)throw new TypeError("invalid suite type");var N=c(_,!1,C.key,C.iv);return p(w,N.key,N.iv)}t.createCipheriv=p,t.createCipher=m},{"./aes":143,"./authCipher":144,"./modes":156,"./streamCipher":159,"cipher-base":174,evp_bytestokey:208,inherits:233,"safe-buffer":279}],148:[function(e,i,t){var n=e("safe-buffer").Buffer,a=n.alloc(16,0);function o(f){return[f.readUInt32BE(0),f.readUInt32BE(4),f.readUInt32BE(8),f.readUInt32BE(12)]}function d(f){var c=n.allocUnsafe(16);return c.writeUInt32BE(f[0]>>>0,0),c.writeUInt32BE(f[1]>>>0,4),c.writeUInt32BE(f[2]>>>0,8),c.writeUInt32BE(f[3]>>>0,12),c}function s(f){this.h=f,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}s.prototype.ghash=function(f){for(var c=-1;++c<f.length;)this.state[c]^=f[c];this._multiply()},s.prototype._multiply=function(){for(var f=o(this.h),c=[0,0,0,0],h,v,l,u=-1;++u<128;){for(v=(this.state[~~(u/8)]&1<<7-u%8)!==0,v&&(c[0]^=f[0],c[1]^=f[1],c[2]^=f[2],c[3]^=f[3]),l=(f[3]&1)!==0,h=3;h>0;h--)f[h]=f[h]>>>1|(f[h-1]&1)<<31;f[0]=f[0]>>>1,l&&(f[0]=f[0]^225<<24)}this.state=d(c)},s.prototype.update=function(f){this.cache=n.concat([this.cache,f]);for(var c;this.cache.length>=16;)c=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(c)},s.prototype.final=function(f,c){return this.cache.length&&this.ghash(n.concat([this.cache,a],16)),this.ghash(d([0,f,0,c])),this.state},i.exports=s},{"safe-buffer":279}],149:[function(e,i,t){function n(a){for(var o=a.length,d;o--;)if(d=a.readUInt8(o),d===255)a.writeUInt8(0,o);else{d++,a.writeUInt8(d,o);break}}i.exports=n},{}],150:[function(e,i,t){var n=e("buffer-xor");t.encrypt=function(a,o){var d=n(o,a._prev);return a._prev=a._cipher.encryptBlock(d),a._prev},t.decrypt=function(a,o){var d=a._prev;a._prev=o;var s=a._cipher.decryptBlock(o);return n(s,d)}},{"buffer-xor":170}],151:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("buffer-xor");function o(d,s,f){var c=s.length,h=a(s,d._cache);return d._cache=d._cache.slice(c),d._prev=n.concat([d._prev,f?s:h]),h}t.encrypt=function(d,s,f){for(var c=n.allocUnsafe(0),h;s.length;)if(d._cache.length===0&&(d._cache=d._cipher.encryptBlock(d._prev),d._prev=n.allocUnsafe(0)),d._cache.length<=s.length)h=d._cache.length,c=n.concat([c,o(d,s.slice(0,h),f)]),s=s.slice(h);else{c=n.concat([c,o(d,s,f)]);break}return c}},{"buffer-xor":170,"safe-buffer":279}],152:[function(e,i,t){var n=e("safe-buffer").Buffer;function a(d,s,f){for(var c,h=-1,v=8,l=0,u,p;++h<v;)c=d._cipher.encryptBlock(d._prev),u=s&1<<7-h?128:0,p=c[0]^u,l+=(p&128)>>h%8,d._prev=o(d._prev,f?u:p);return l}function o(d,s){var f=d.length,c=-1,h=n.allocUnsafe(d.length);for(d=n.concat([d,n.from([s])]);++c<f;)h[c]=d[c]<<1|d[c+1]>>7;return h}t.encrypt=function(d,s,f){for(var c=s.length,h=n.allocUnsafe(c),v=-1;++v<c;)h[v]=a(d,s[v],f);return h}},{"safe-buffer":279}],153:[function(e,i,t){var n=e("safe-buffer").Buffer;function a(o,d,s){var f=o._cipher.encryptBlock(o._prev),c=f[0]^d;return o._prev=n.concat([o._prev.slice(1),n.from([s?d:c])]),c}t.encrypt=function(o,d,s){for(var f=d.length,c=n.allocUnsafe(f),h=-1;++h<f;)c[h]=a(o,d[h],s);return c}},{"safe-buffer":279}],154:[function(e,i,t){var n=e("buffer-xor"),a=e("safe-buffer").Buffer,o=e("../incr32");function d(f){var c=f._cipher.encryptBlockRaw(f._prev);return o(f._prev),c}var s=16;t.encrypt=function(f,c){var h=Math.ceil(c.length/s),v=f._cache.length;f._cache=a.concat([f._cache,a.allocUnsafe(h*s)]);for(var l=0;l<h;l++){var u=d(f),p=v+l*s;f._cache.writeUInt32BE(u[0],p+0),f._cache.writeUInt32BE(u[1],p+4),f._cache.writeUInt32BE(u[2],p+8),f._cache.writeUInt32BE(u[3],p+12)}var m=f._cache.slice(0,c.length);return f._cache=f._cache.slice(c.length),n(c,m)}},{"../incr32":149,"buffer-xor":170,"safe-buffer":279}],155:[function(e,i,t){t.encrypt=function(n,a){return n._cipher.encryptBlock(a)},t.decrypt=function(n,a){return n._cipher.decryptBlock(a)}},{}],156:[function(e,i,t){var n={ECB:e("./ecb"),CBC:e("./cbc"),CFB:e("./cfb"),CFB8:e("./cfb8"),CFB1:e("./cfb1"),OFB:e("./ofb"),CTR:e("./ctr"),GCM:e("./ctr")},a=e("./list.json");for(var o in a)a[o].module=n[a[o].mode];i.exports=a},{"./cbc":150,"./cfb":151,"./cfb1":152,"./cfb8":153,"./ctr":154,"./ecb":155,"./list.json":157,"./ofb":158}],157:[function(e,i,t){i.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],158:[function(e,i,t){(function(n){(function(){var a=e("buffer-xor");function o(d){return d._prev=d._cipher.encryptBlock(d._prev),d._prev}t.encrypt=function(d,s){for(;d._cache.length<s.length;)d._cache=n.concat([d._cache,o(d)]);var f=d._cache.slice(0,s.length);return d._cache=d._cache.slice(s.length),a(s,f)}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:171,"buffer-xor":170}],159:[function(e,i,t){var n=e("./aes"),a=e("safe-buffer").Buffer,o=e("cipher-base"),d=e("inherits");function s(f,c,h,v){o.call(this),this._cipher=new n.AES(c),this._prev=a.from(h),this._cache=a.allocUnsafe(0),this._secCache=a.allocUnsafe(0),this._decrypt=v,this._mode=f}d(s,o),s.prototype._update=function(f){return this._mode.encrypt(this,f,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},i.exports=s},{"./aes":143,"cipher-base":174,inherits:233,"safe-buffer":279}],160:[function(e,i,t){var n=e("browserify-des"),a=e("browserify-aes/browser"),o=e("browserify-aes/modes"),d=e("browserify-des/modes"),s=e("evp_bytestokey");function f(u,p){u=u.toLowerCase();var m,w;if(o[u])m=o[u].key,w=o[u].iv;else if(d[u])m=d[u].key*8,w=d[u].iv;else throw new TypeError("invalid suite type");var _=s(p,!1,m,w);return h(u,_.key,_.iv)}function c(u,p){u=u.toLowerCase();var m,w;if(o[u])m=o[u].key,w=o[u].iv;else if(d[u])m=d[u].key*8,w=d[u].iv;else throw new TypeError("invalid suite type");var _=s(p,!1,m,w);return v(u,_.key,_.iv)}function h(u,p,m){if(u=u.toLowerCase(),o[u])return a.createCipheriv(u,p,m);if(d[u])return new n({key:p,iv:m,mode:u});throw new TypeError("invalid suite type")}function v(u,p,m){if(u=u.toLowerCase(),o[u])return a.createDecipheriv(u,p,m);if(d[u])return new n({key:p,iv:m,mode:u,decrypt:!0});throw new TypeError("invalid suite type")}function l(){return Object.keys(d).concat(a.getCiphers())}t.createCipher=t.Cipher=f,t.createCipheriv=t.Cipheriv=h,t.createDecipher=t.Decipher=c,t.createDecipheriv=t.Decipheriv=v,t.listCiphers=t.getCiphers=l},{"browserify-aes/browser":145,"browserify-aes/modes":156,"browserify-des":161,"browserify-des/modes":162,evp_bytestokey:208}],161:[function(e,i,t){var n=e("cipher-base"),a=e("des.js"),o=e("inherits"),d=e("safe-buffer").Buffer,s={"des-ede3-cbc":a.CBC.instantiate(a.EDE),"des-ede3":a.EDE,"des-ede-cbc":a.CBC.instantiate(a.EDE),"des-ede":a.EDE,"des-cbc":a.CBC.instantiate(a.DES),"des-ecb":a.DES};s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],i.exports=f,o(f,n);function f(c){n.call(this);var h=c.mode.toLowerCase(),v=s[h],l;c.decrypt?l="decrypt":l="encrypt";var u=c.key;d.isBuffer(u)||(u=d.from(u)),(h==="des-ede"||h==="des-ede-cbc")&&(u=d.concat([u,u.slice(0,8)]));var p=c.iv;d.isBuffer(p)||(p=d.from(p)),this._des=v.create({key:u,iv:p,type:l})}f.prototype._update=function(c){return d.from(this._des.update(c))},f.prototype._final=function(){return d.from(this._des.final())}},{"cipher-base":174,"des.js":181,inherits:233,"safe-buffer":279}],162:[function(e,i,t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},{}],163:[function(e,i,t){(function(n){(function(){var a=e("bn.js"),o=e("randombytes");function d(c){var h=s(c),v=h.toRed(a.mont(c.modulus)).redPow(new a(c.publicExponent)).fromRed();return{blinder:v,unblinder:h.invm(c.modulus)}}function s(c){var h=c.modulus.byteLength(),v;do v=new a(o(h));while(v.cmp(c.modulus)>=0||!v.umod(c.prime1)||!v.umod(c.prime2));return v}function f(c,h){var v=d(h),l=h.modulus.byteLength(),u=new a(c).mul(v.blinder).umod(h.modulus),p=u.toRed(a.mont(h.prime1)),m=u.toRed(a.mont(h.prime2)),w=h.coefficient,_=h.prime1,C=h.prime2,N=p.redPow(h.exponent1).fromRed(),P=m.redPow(h.exponent2).fromRed(),M=N.isub(P).imul(w).umod(_).imul(C);return P.iadd(M).imul(v.unblinder).umod(h.modulus).toArrayLike(n,"be",l)}f.getr=s,i.exports=f}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":140,buffer:171,randombytes:261}],164:[function(e,i,t){i.exports=e("./browser/algorithms.json")},{"./browser/algorithms.json":165}],165:[function(e,i,t){i.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],166:[function(e,i,t){i.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],167:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("create-hash"),o=e("readable-stream"),d=e("inherits"),s=e("./sign"),f=e("./verify"),c=e("./algorithms.json");Object.keys(c).forEach(function(p){c[p].id=n.from(c[p].id,"hex"),c[p.toLowerCase()]=c[p]});function h(p){o.Writable.call(this);var m=c[p];if(!m)throw new Error("Unknown message digest");this._hashType=m.hash,this._hash=a(m.hash),this._tag=m.id,this._signType=m.sign}d(h,o.Writable),h.prototype._write=function(m,w,_){this._hash.update(m),_()},h.prototype.update=function(m,w){return typeof m=="string"&&(m=n.from(m,w)),this._hash.update(m),this},h.prototype.sign=function(m,w){this.end();var _=this._hash.digest(),C=s(_,m,this._hashType,this._signType,this._tag);return w?C.toString(w):C};function v(p){o.Writable.call(this);var m=c[p];if(!m)throw new Error("Unknown message digest");this._hash=a(m.hash),this._tag=m.id,this._signType=m.sign}d(v,o.Writable),v.prototype._write=function(m,w,_){this._hash.update(m),_()},v.prototype.update=function(m,w){return typeof m=="string"&&(m=n.from(m,w)),this._hash.update(m),this},v.prototype.verify=function(m,w,_){typeof w=="string"&&(w=n.from(w,_)),this.end();var C=this._hash.digest();return f(w,C,m,this._signType,this._tag)};function l(p){return new h(p)}function u(p){return new v(p)}i.exports={Sign:l,Verify:u,createSign:l,createVerify:u}},{"./algorithms.json":165,"./sign":168,"./verify":169,"create-hash":176,inherits:233,"readable-stream":277,"safe-buffer":279}],168:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("create-hmac"),o=e("browserify-rsa"),d=e("elliptic").ec,s=e("bn.js"),f=e("parse-asn1"),c=e("./curves.json");function h(N,P,M,U,W){var q=f(P);if(q.curve){if(U!=="ecdsa"&&U!=="ecdsa/rsa")throw new Error("wrong private key type");return v(N,q)}else if(q.type==="dsa"){if(U!=="dsa")throw new Error("wrong private key type");return l(N,q,M)}else if(U!=="rsa"&&U!=="ecdsa/rsa")throw new Error("wrong private key type");N=n.concat([W,N]);for(var Z=q.modulus.byteLength(),re=[0,1];N.length+re.length+1<Z;)re.push(255);re.push(0);for(var Y=-1;++Y<N.length;)re.push(N[Y]);var O=o(re,q);return O}function v(N,P){var M=c[P.curve.join(".")];if(!M)throw new Error("unknown curve "+P.curve.join("."));var U=new d(M),W=U.keyFromPrivate(P.privateKey),q=W.sign(N);return n.from(q.toDER())}function l(N,P,M){for(var U=P.params.priv_key,W=P.params.p,q=P.params.q,Z=P.params.g,re=new s(0),Y,O=m(N,q).mod(q),x=!1,S=p(U,q,N,M);x===!1;)Y=_(q,S,M),re=C(Z,Y,W,q),x=Y.invm(q).imul(O.add(U.mul(re))).mod(q),x.cmpn(0)===0&&(x=!1,re=new s(0));return u(re,x)}function u(N,P){N=N.toArray(),P=P.toArray(),N[0]&128&&(N=[0].concat(N)),P[0]&128&&(P=[0].concat(P));var M=N.length+P.length+4,U=[48,M,2,N.length];return U=U.concat(N,[2,P.length],P),n.from(U)}function p(N,P,M,U){if(N=n.from(N.toArray()),N.length<P.byteLength()){var W=n.alloc(P.byteLength()-N.length);N=n.concat([W,N])}var q=M.length,Z=w(M,P),re=n.alloc(q);re.fill(1);var Y=n.alloc(q);return Y=a(U,Y).update(re).update(n.from([0])).update(N).update(Z).digest(),re=a(U,Y).update(re).digest(),Y=a(U,Y).update(re).update(n.from([1])).update(N).update(Z).digest(),re=a(U,Y).update(re).digest(),{k:Y,v:re}}function m(N,P){var M=new s(N),U=(N.length<<3)-P.bitLength();return U>0&&M.ishrn(U),M}function w(N,P){N=m(N,P),N=N.mod(P);var M=n.from(N.toArray());if(M.length<P.byteLength()){var U=n.alloc(P.byteLength()-M.length);M=n.concat([U,M])}return M}function _(N,P,M){var U,W;do{for(U=n.alloc(0);U.length*8<N.bitLength();)P.v=a(M,P.k).update(P.v).digest(),U=n.concat([U,P.v]);W=m(U,N),P.k=a(M,P.k).update(P.v).update(n.from([0])).digest(),P.v=a(M,P.k).update(P.v).digest()}while(W.cmp(N)!==-1);return W}function C(N,P,M,U){return N.toRed(s.mont(M)).redPow(P).fromRed().mod(U)}i.exports=h,i.exports.getKey=p,i.exports.makeKey=_},{"./curves.json":166,"bn.js":140,"browserify-rsa":163,"create-hmac":178,elliptic:191,"parse-asn1":247,"safe-buffer":279}],169:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("bn.js"),o=e("elliptic").ec,d=e("parse-asn1"),s=e("./curves.json");function f(l,u,p,m,w){var _=d(p);if(_.type==="ec"){if(m!=="ecdsa"&&m!=="ecdsa/rsa")throw new Error("wrong public key type");return c(l,u,_)}else if(_.type==="dsa"){if(m!=="dsa")throw new Error("wrong public key type");return h(l,u,_)}else if(m!=="rsa"&&m!=="ecdsa/rsa")throw new Error("wrong public key type");u=n.concat([w,u]);for(var C=_.modulus.byteLength(),N=[1],P=0;u.length+N.length+2<C;)N.push(255),P++;N.push(0);for(var M=-1;++M<u.length;)N.push(u[M]);N=n.from(N);var U=a.mont(_.modulus);l=new a(l).toRed(U),l=l.redPow(new a(_.publicExponent)),l=n.from(l.fromRed().toArray());var W=P<8?1:0;for(C=Math.min(l.length,N.length),l.length!==N.length&&(W=1),M=-1;++M<C;)W|=l[M]^N[M];return W===0}function c(l,u,p){var m=s[p.data.algorithm.curve.join(".")];if(!m)throw new Error("unknown curve "+p.data.algorithm.curve.join("."));var w=new o(m),_=p.data.subjectPrivateKey.data;return w.verify(u,l,_)}function h(l,u,p){var m=p.data.p,w=p.data.q,_=p.data.g,C=p.data.pub_key,N=d.signature.decode(l,"der"),P=N.s,M=N.r;v(P,w),v(M,w);var U=a.mont(m),W=P.invm(w),q=_.toRed(U).redPow(new a(u).mul(W).mod(w)).fromRed().mul(C.toRed(U).redPow(M.mul(W).mod(w)).fromRed()).mod(m).mod(w);return q.cmp(M)===0}function v(l,u){if(l.cmpn(0)<=0)throw new Error("invalid sig");if(l.cmp(u)>=u)throw new Error("invalid sig")}i.exports=f},{"./curves.json":166,"bn.js":140,elliptic:191,"parse-asn1":247,"safe-buffer":279}],170:[function(e,i,t){(function(n){(function(){i.exports=function(o,d){for(var s=Math.min(o.length,d.length),f=new n(s),c=0;c<s;++c)f[c]=o[c]^d[c];return f}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:171}],171:[function(e,i,t){(function(n){(function(){var a=e("base64-js"),o=e("ieee754");t.Buffer=c,t.SlowBuffer=N,t.INSPECT_MAX_BYTES=50;var d=2147483647;t.kMaxLength=d,c.TYPED_ARRAY_SUPPORT=s(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var Q=new Uint8Array(1);return Q.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Q.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function f(Q){if(Q>d)throw new RangeError('The value "'+Q+'" is invalid for option "size"');var F=new Uint8Array(Q);return F.__proto__=c.prototype,F}function c(Q,F,$){if(typeof Q=="number"){if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(Q)}return h(Q,F,$)}typeof Symbol<"u"&&Symbol.species!=null&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192;function h(Q,F,$){if(typeof Q=="string")return p(Q,F);if(ArrayBuffer.isView(Q))return m(Q);if(Q==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Q);if(te(Q,ArrayBuffer)||Q&&te(Q.buffer,ArrayBuffer))return w(Q,F,$);if(typeof Q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var X=Q.valueOf&&Q.valueOf();if(X!=null&&X!==Q)return c.from(X,F,$);var se=_(Q);if(se)return se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Q[Symbol.toPrimitive]=="function")return c.from(Q[Symbol.toPrimitive]("string"),F,$);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Q)}c.from=function(Q,F,$){return h(Q,F,$)},c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array;function v(Q){if(typeof Q!="number")throw new TypeError('"size" argument must be of type number');if(Q<0)throw new RangeError('The value "'+Q+'" is invalid for option "size"')}function l(Q,F,$){return v(Q),Q<=0?f(Q):F!==void 0?typeof $=="string"?f(Q).fill(F,$):f(Q).fill(F):f(Q)}c.alloc=function(Q,F,$){return l(Q,F,$)};function u(Q){return v(Q),f(Q<0?0:C(Q)|0)}c.allocUnsafe=function(Q){return u(Q)},c.allocUnsafeSlow=function(Q){return u(Q)};function p(Q,F){if((typeof F!="string"||F==="")&&(F="utf8"),!c.isEncoding(F))throw new TypeError("Unknown encoding: "+F);var $=P(Q,F)|0,X=f($),se=X.write(Q,F);return se!==$&&(X=X.slice(0,se)),X}function m(Q){for(var F=Q.length<0?0:C(Q.length)|0,$=f(F),X=0;X<F;X+=1)$[X]=Q[X]&255;return $}function w(Q,F,$){if(F<0||Q.byteLength<F)throw new RangeError('"offset" is outside of buffer bounds');if(Q.byteLength<F+($||0))throw new RangeError('"length" is outside of buffer bounds');var X;return F===void 0&&$===void 0?X=new Uint8Array(Q):$===void 0?X=new Uint8Array(Q,F):X=new Uint8Array(Q,F,$),X.__proto__=c.prototype,X}function _(Q){if(c.isBuffer(Q)){var F=C(Q.length)|0,$=f(F);return $.length===0||Q.copy($,0,0,F),$}if(Q.length!==void 0)return typeof Q.length!="number"||ee(Q.length)?f(0):m(Q);if(Q.type==="Buffer"&&Array.isArray(Q.data))return m(Q.data)}function C(Q){if(Q>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return Q|0}function N(Q){return+Q!=Q&&(Q=0),c.alloc(+Q)}c.isBuffer=function(F){return F!=null&&F._isBuffer===!0&&F!==c.prototype},c.compare=function(F,$){if(te(F,Uint8Array)&&(F=c.from(F,F.offset,F.byteLength)),te($,Uint8Array)&&($=c.from($,$.offset,$.byteLength)),!c.isBuffer(F)||!c.isBuffer($))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(F===$)return 0;for(var X=F.length,se=$.length,ve=0,Se=Math.min(X,se);ve<Se;++ve)if(F[ve]!==$[ve]){X=F[ve],se=$[ve];break}return X<se?-1:se<X?1:0},c.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(F,$){if(!Array.isArray(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return c.alloc(0);var X;if($===void 0)for($=0,X=0;X<F.length;++X)$+=F[X].length;var se=c.allocUnsafe($),ve=0;for(X=0;X<F.length;++X){var Se=F[X];if(te(Se,Uint8Array)&&(Se=c.from(Se)),!c.isBuffer(Se))throw new TypeError('"list" argument must be an Array of Buffers');Se.copy(se,ve),ve+=Se.length}return se};function P(Q,F){if(c.isBuffer(Q))return Q.length;if(ArrayBuffer.isView(Q)||te(Q,ArrayBuffer))return Q.byteLength;if(typeof Q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Q);var $=Q.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&$===0)return 0;for(var se=!1;;)switch(F){case"ascii":case"latin1":case"binary":return $;case"utf8":case"utf-8":return oe(Q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $*2;case"hex":return $>>>1;case"base64":return ke(Q).length;default:if(se)return X?-1:oe(Q).length;F=(""+F).toLowerCase(),se=!0}}c.byteLength=P;function M(Q,F,$){var X=!1;if((F===void 0||F<0)&&(F=0),F>this.length||(($===void 0||$>this.length)&&($=this.length),$<=0)||($>>>=0,F>>>=0,$<=F))return"";for(Q||(Q="utf8");;)switch(Q){case"hex":return G(this,F,$);case"utf8":case"utf-8":return g(this,F,$);case"ascii":return A(this,F,$);case"latin1":case"binary":return J(this,F,$);case"base64":return k(this,F,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,F,$);default:if(X)throw new TypeError("Unknown encoding: "+Q);Q=(Q+"").toLowerCase(),X=!0}}c.prototype._isBuffer=!0;function U(Q,F,$){var X=Q[F];Q[F]=Q[$],Q[$]=X}c.prototype.swap16=function(){var F=this.length;if(F%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var $=0;$<F;$+=2)U(this,$,$+1);return this},c.prototype.swap32=function(){var F=this.length;if(F%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var $=0;$<F;$+=4)U(this,$,$+3),U(this,$+1,$+2);return this},c.prototype.swap64=function(){var F=this.length;if(F%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var $=0;$<F;$+=8)U(this,$,$+7),U(this,$+1,$+6),U(this,$+2,$+5),U(this,$+3,$+4);return this},c.prototype.toString=function(){var F=this.length;return F===0?"":arguments.length===0?g(this,0,F):M.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(F){if(!c.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F?!0:c.compare(this,F)===0},c.prototype.inspect=function(){var F="",$=t.INSPECT_MAX_BYTES;return F=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim(),this.length>$&&(F+=" ... "),"<Buffer "+F+">"},c.prototype.compare=function(F,$,X,se,ve){if(te(F,Uint8Array)&&(F=c.from(F,F.offset,F.byteLength)),!c.isBuffer(F))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof F);if($===void 0&&($=0),X===void 0&&(X=F?F.length:0),se===void 0&&(se=0),ve===void 0&&(ve=this.length),$<0||X>F.length||se<0||ve>this.length)throw new RangeError("out of range index");if(se>=ve&&$>=X)return 0;if(se>=ve)return-1;if($>=X)return 1;if($>>>=0,X>>>=0,se>>>=0,ve>>>=0,this===F)return 0;for(var Se=ve-se,ue=X-$,y=Math.min(Se,ue),L=this.slice(se,ve),H=F.slice($,X),fe=0;fe<y;++fe)if(L[fe]!==H[fe]){Se=L[fe],ue=H[fe];break}return Se<ue?-1:ue<Se?1:0};function W(Q,F,$,X,se){if(Q.length===0)return-1;if(typeof $=="string"?(X=$,$=0):$>2147483647?$=2147483647:$<-2147483648&&($=-2147483648),$=+$,ee($)&&($=se?0:Q.length-1),$<0&&($=Q.length+$),$>=Q.length){if(se)return-1;$=Q.length-1}else if($<0)if(se)$=0;else return-1;if(typeof F=="string"&&(F=c.from(F,X)),c.isBuffer(F))return F.length===0?-1:q(Q,F,$,X,se);if(typeof F=="number")return F=F&255,typeof Uint8Array.prototype.indexOf=="function"?se?Uint8Array.prototype.indexOf.call(Q,F,$):Uint8Array.prototype.lastIndexOf.call(Q,F,$):q(Q,[F],$,X,se);throw new TypeError("val must be string, number or Buffer")}function q(Q,F,$,X,se){var ve=1,Se=Q.length,ue=F.length;if(X!==void 0&&(X=String(X).toLowerCase(),X==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if(Q.length<2||F.length<2)return-1;ve=2,Se/=2,ue/=2,$/=2}function y(b,D){return ve===1?b[D]:b.readUInt16BE(D*ve)}var L;if(se){var H=-1;for(L=$;L<Se;L++)if(y(Q,L)===y(F,H===-1?0:L-H)){if(H===-1&&(H=L),L-H+1===ue)return H*ve}else H!==-1&&(L-=L-H),H=-1}else for($+ue>Se&&($=Se-ue),L=$;L>=0;L--){for(var fe=!0,j=0;j<ue;j++)if(y(Q,L+j)!==y(F,j)){fe=!1;break}if(fe)return L}return-1}c.prototype.includes=function(F,$,X){return this.indexOf(F,$,X)!==-1},c.prototype.indexOf=function(F,$,X){return W(this,F,$,X,!0)},c.prototype.lastIndexOf=function(F,$,X){return W(this,F,$,X,!1)};function Z(Q,F,$,X){$=Number($)||0;var se=Q.length-$;X?(X=Number(X),X>se&&(X=se)):X=se;var ve=F.length;X>ve/2&&(X=ve/2);for(var Se=0;Se<X;++Se){var ue=parseInt(F.substr(Se*2,2),16);if(ee(ue))return Se;Q[$+Se]=ue}return Se}function re(Q,F,$,X){return le(oe(F,Q.length-$),Q,$,X)}function Y(Q,F,$,X){return le(ce(F),Q,$,X)}function O(Q,F,$,X){return Y(Q,F,$,X)}function x(Q,F,$,X){return le(ke(F),Q,$,X)}function S(Q,F,$,X){return le(ge(F,Q.length-$),Q,$,X)}c.prototype.write=function(F,$,X,se){if($===void 0)se="utf8",X=this.length,$=0;else if(X===void 0&&typeof $=="string")se=$,X=this.length,$=0;else if(isFinite($))$=$>>>0,isFinite(X)?(X=X>>>0,se===void 0&&(se="utf8")):(se=X,X=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ve=this.length-$;if((X===void 0||X>ve)&&(X=ve),F.length>0&&(X<0||$<0)||$>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");for(var Se=!1;;)switch(se){case"hex":return Z(this,F,$,X);case"utf8":case"utf-8":return re(this,F,$,X);case"ascii":return Y(this,F,$,X);case"latin1":case"binary":return O(this,F,$,X);case"base64":return x(this,F,$,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,F,$,X);default:if(Se)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),Se=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(Q,F,$){return F===0&&$===Q.length?a.fromByteArray(Q):a.fromByteArray(Q.slice(F,$))}function g(Q,F,$){$=Math.min(Q.length,$);for(var X=[],se=F;se<$;){var ve=Q[se],Se=null,ue=ve>239?4:ve>223?3:ve>191?2:1;if(se+ue<=$){var y,L,H,fe;switch(ue){case 1:ve<128&&(Se=ve);break;case 2:y=Q[se+1],(y&192)===128&&(fe=(ve&31)<<6|y&63,fe>127&&(Se=fe));break;case 3:y=Q[se+1],L=Q[se+2],(y&192)===128&&(L&192)===128&&(fe=(ve&15)<<12|(y&63)<<6|L&63,fe>2047&&(fe<55296||fe>57343)&&(Se=fe));break;case 4:y=Q[se+1],L=Q[se+2],H=Q[se+3],(y&192)===128&&(L&192)===128&&(H&192)===128&&(fe=(ve&15)<<18|(y&63)<<12|(L&63)<<6|H&63,fe>65535&&fe<1114112&&(Se=fe))}}Se===null?(Se=65533,ue=1):Se>65535&&(Se-=65536,X.push(Se>>>10&1023|55296),Se=56320|Se&1023),X.push(Se),se+=ue}return T(X)}var E=4096;function T(Q){var F=Q.length;if(F<=E)return String.fromCharCode.apply(String,Q);for(var $="",X=0;X<F;)$+=String.fromCharCode.apply(String,Q.slice(X,X+=E));return $}function A(Q,F,$){var X="";$=Math.min(Q.length,$);for(var se=F;se<$;++se)X+=String.fromCharCode(Q[se]&127);return X}function J(Q,F,$){var X="";$=Math.min(Q.length,$);for(var se=F;se<$;++se)X+=String.fromCharCode(Q[se]);return X}function G(Q,F,$){var X=Q.length;(!F||F<0)&&(F=0),(!$||$<0||$>X)&&($=X);for(var se="",ve=F;ve<$;++ve)se+=we(Q[ve]);return se}function I(Q,F,$){for(var X=Q.slice(F,$),se="",ve=0;ve<X.length;ve+=2)se+=String.fromCharCode(X[ve]+X[ve+1]*256);return se}c.prototype.slice=function(F,$){var X=this.length;F=~~F,$=$===void 0?X:~~$,F<0?(F+=X,F<0&&(F=0)):F>X&&(F=X),$<0?($+=X,$<0&&($=0)):$>X&&($=X),$<F&&($=F);var se=this.subarray(F,$);return se.__proto__=c.prototype,se};function V(Q,F,$){if(Q%1!==0||Q<0)throw new RangeError("offset is not uint");if(Q+F>$)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUIntLE=function(F,$,X){F=F>>>0,$=$>>>0,X||V(F,$,this.length);for(var se=this[F],ve=1,Se=0;++Se<$&&(ve*=256);)se+=this[F+Se]*ve;return se},c.prototype.readUIntBE=function(F,$,X){F=F>>>0,$=$>>>0,X||V(F,$,this.length);for(var se=this[F+--$],ve=1;$>0&&(ve*=256);)se+=this[F+--$]*ve;return se},c.prototype.readUInt8=function(F,$){return F=F>>>0,$||V(F,1,this.length),this[F]},c.prototype.readUInt16LE=function(F,$){return F=F>>>0,$||V(F,2,this.length),this[F]|this[F+1]<<8},c.prototype.readUInt16BE=function(F,$){return F=F>>>0,$||V(F,2,this.length),this[F]<<8|this[F+1]},c.prototype.readUInt32LE=function(F,$){return F=F>>>0,$||V(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+this[F+3]*16777216},c.prototype.readUInt32BE=function(F,$){return F=F>>>0,$||V(F,4,this.length),this[F]*16777216+(this[F+1]<<16|this[F+2]<<8|this[F+3])},c.prototype.readIntLE=function(F,$,X){F=F>>>0,$=$>>>0,X||V(F,$,this.length);for(var se=this[F],ve=1,Se=0;++Se<$&&(ve*=256);)se+=this[F+Se]*ve;return ve*=128,se>=ve&&(se-=Math.pow(2,8*$)),se},c.prototype.readIntBE=function(F,$,X){F=F>>>0,$=$>>>0,X||V(F,$,this.length);for(var se=$,ve=1,Se=this[F+--se];se>0&&(ve*=256);)Se+=this[F+--se]*ve;return ve*=128,Se>=ve&&(Se-=Math.pow(2,8*$)),Se},c.prototype.readInt8=function(F,$){return F=F>>>0,$||V(F,1,this.length),this[F]&128?(255-this[F]+1)*-1:this[F]},c.prototype.readInt16LE=function(F,$){F=F>>>0,$||V(F,2,this.length);var X=this[F]|this[F+1]<<8;return X&32768?X|4294901760:X},c.prototype.readInt16BE=function(F,$){F=F>>>0,$||V(F,2,this.length);var X=this[F+1]|this[F]<<8;return X&32768?X|4294901760:X},c.prototype.readInt32LE=function(F,$){return F=F>>>0,$||V(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},c.prototype.readInt32BE=function(F,$){return F=F>>>0,$||V(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},c.prototype.readFloatLE=function(F,$){return F=F>>>0,$||V(F,4,this.length),o.read(this,F,!0,23,4)},c.prototype.readFloatBE=function(F,$){return F=F>>>0,$||V(F,4,this.length),o.read(this,F,!1,23,4)},c.prototype.readDoubleLE=function(F,$){return F=F>>>0,$||V(F,8,this.length),o.read(this,F,!0,52,8)},c.prototype.readDoubleBE=function(F,$){return F=F>>>0,$||V(F,8,this.length),o.read(this,F,!1,52,8)};function B(Q,F,$,X,se,ve){if(!c.isBuffer(Q))throw new TypeError('"buffer" argument must be a Buffer instance');if(F>se||F<ve)throw new RangeError('"value" argument is out of bounds');if($+X>Q.length)throw new RangeError("Index out of range")}c.prototype.writeUIntLE=function(F,$,X,se){if(F=+F,$=$>>>0,X=X>>>0,!se){var ve=Math.pow(2,8*X)-1;B(this,F,$,X,ve,0)}var Se=1,ue=0;for(this[$]=F&255;++ue<X&&(Se*=256);)this[$+ue]=F/Se&255;return $+X},c.prototype.writeUIntBE=function(F,$,X,se){if(F=+F,$=$>>>0,X=X>>>0,!se){var ve=Math.pow(2,8*X)-1;B(this,F,$,X,ve,0)}var Se=X-1,ue=1;for(this[$+Se]=F&255;--Se>=0&&(ue*=256);)this[$+Se]=F/ue&255;return $+X},c.prototype.writeUInt8=function(F,$,X){return F=+F,$=$>>>0,X||B(this,F,$,1,255,0),this[$]=F&255,$+1},c.prototype.writeUInt16LE=function(F,$,X){return F=+F,$=$>>>0,X||B(this,F,$,2,65535,0),this[$]=F&255,this[$+1]=F>>>8,$+2},c.prototype.writeUInt16BE=function(F,$,X){return F=+F,$=$>>>0,X||B(this,F,$,2,65535,0),this[$]=F>>>8,this[$+1]=F&255,$+2},c.prototype.writeUInt32LE=function(F,$,X){return F=+F,$=$>>>0,X||B(this,F,$,4,4294967295,0),this[$+3]=F>>>24,this[$+2]=F>>>16,this[$+1]=F>>>8,this[$]=F&255,$+4},c.prototype.writeUInt32BE=function(F,$,X){return F=+F,$=$>>>0,X||B(this,F,$,4,4294967295,0),this[$]=F>>>24,this[$+1]=F>>>16,this[$+2]=F>>>8,this[$+3]=F&255,$+4},c.prototype.writeIntLE=function(F,$,X,se){if(F=+F,$=$>>>0,!se){var ve=Math.pow(2,8*X-1);B(this,F,$,X,ve-1,-ve)}var Se=0,ue=1,y=0;for(this[$]=F&255;++Se<X&&(ue*=256);)F<0&&y===0&&this[$+Se-1]!==0&&(y=1),this[$+Se]=(F/ue>>0)-y&255;return $+X},c.prototype.writeIntBE=function(F,$,X,se){if(F=+F,$=$>>>0,!se){var ve=Math.pow(2,8*X-1);B(this,F,$,X,ve-1,-ve)}var Se=X-1,ue=1,y=0;for(this[$+Se]=F&255;--Se>=0&&(ue*=256);)F<0&&y===0&&this[$+Se+1]!==0&&(y=1),this[$+Se]=(F/ue>>0)-y&255;return $+X},c.prototype.writeInt8=function(F,$,X){return F=+F,$=$>>>0,X||B(this,F,$,1,127,-128),F<0&&(F=255+F+1),this[$]=F&255,$+1},c.prototype.writeInt16LE=function(F,$,X){return F=+F,$=$>>>0,X||B(this,F,$,2,32767,-32768),this[$]=F&255,this[$+1]=F>>>8,$+2},c.prototype.writeInt16BE=function(F,$,X){return F=+F,$=$>>>0,X||B(this,F,$,2,32767,-32768),this[$]=F>>>8,this[$+1]=F&255,$+2},c.prototype.writeInt32LE=function(F,$,X){return F=+F,$=$>>>0,X||B(this,F,$,4,2147483647,-2147483648),this[$]=F&255,this[$+1]=F>>>8,this[$+2]=F>>>16,this[$+3]=F>>>24,$+4},c.prototype.writeInt32BE=function(F,$,X){return F=+F,$=$>>>0,X||B(this,F,$,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),this[$]=F>>>24,this[$+1]=F>>>16,this[$+2]=F>>>8,this[$+3]=F&255,$+4};function z(Q,F,$,X,se,ve){if($+X>Q.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("Index out of range")}function ie(Q,F,$,X,se){return F=+F,$=$>>>0,se||z(Q,F,$,4),o.write(Q,F,$,X,23,4),$+4}c.prototype.writeFloatLE=function(F,$,X){return ie(this,F,$,!0,X)},c.prototype.writeFloatBE=function(F,$,X){return ie(this,F,$,!1,X)};function de(Q,F,$,X,se){return F=+F,$=$>>>0,se||z(Q,F,$,8),o.write(Q,F,$,X,52,8),$+8}c.prototype.writeDoubleLE=function(F,$,X){return de(this,F,$,!0,X)},c.prototype.writeDoubleBE=function(F,$,X){return de(this,F,$,!1,X)},c.prototype.copy=function(F,$,X,se){if(!c.isBuffer(F))throw new TypeError("argument should be a Buffer");if(X||(X=0),!se&&se!==0&&(se=this.length),$>=F.length&&($=F.length),$||($=0),se>0&&se<X&&(se=X),se===X||F.length===0||this.length===0)return 0;if($<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),F.length-$<se-X&&(se=F.length-$+X);var ve=se-X;if(this===F&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin($,X,se);else if(this===F&&X<$&&$<se)for(var Se=ve-1;Se>=0;--Se)F[Se+$]=this[Se+X];else Uint8Array.prototype.set.call(F,this.subarray(X,se),$);return ve},c.prototype.fill=function(F,$,X,se){if(typeof F=="string"){if(typeof $=="string"?(se=$,$=0,X=this.length):typeof X=="string"&&(se=X,X=this.length),se!==void 0&&typeof se!="string")throw new TypeError("encoding must be a string");if(typeof se=="string"&&!c.isEncoding(se))throw new TypeError("Unknown encoding: "+se);if(F.length===1){var ve=F.charCodeAt(0);(se==="utf8"&&ve<128||se==="latin1")&&(F=ve)}}else typeof F=="number"&&(F=F&255);if($<0||this.length<$||this.length<X)throw new RangeError("Out of range index");if(X<=$)return this;$=$>>>0,X=X===void 0?this.length:X>>>0,F||(F=0);var Se;if(typeof F=="number")for(Se=$;Se<X;++Se)this[Se]=F;else{var ue=c.isBuffer(F)?F:c.from(F,se),y=ue.length;if(y===0)throw new TypeError('The value "'+F+'" is invalid for argument "value"');for(Se=0;Se<X-$;++Se)this[Se+$]=ue[Se%y]}return this};var me=/[^+/0-9A-Za-z-_]/g;function be(Q){if(Q=Q.split("=")[0],Q=Q.trim().replace(me,""),Q.length<2)return"";for(;Q.length%4!==0;)Q=Q+"=";return Q}function we(Q){return Q<16?"0"+Q.toString(16):Q.toString(16)}function oe(Q,F){F=F||1/0;for(var $,X=Q.length,se=null,ve=[],Se=0;Se<X;++Se){if($=Q.charCodeAt(Se),$>55295&&$<57344){if(!se){if($>56319){(F-=3)>-1&&ve.push(239,191,189);continue}else if(Se+1===X){(F-=3)>-1&&ve.push(239,191,189);continue}se=$;continue}if($<56320){(F-=3)>-1&&ve.push(239,191,189),se=$;continue}$=(se-55296<<10|$-56320)+65536}else se&&(F-=3)>-1&&ve.push(239,191,189);if(se=null,$<128){if((F-=1)<0)break;ve.push($)}else if($<2048){if((F-=2)<0)break;ve.push($>>6|192,$&63|128)}else if($<65536){if((F-=3)<0)break;ve.push($>>12|224,$>>6&63|128,$&63|128)}else if($<1114112){if((F-=4)<0)break;ve.push($>>18|240,$>>12&63|128,$>>6&63|128,$&63|128)}else throw new Error("Invalid code point")}return ve}function ce(Q){for(var F=[],$=0;$<Q.length;++$)F.push(Q.charCodeAt($)&255);return F}function ge(Q,F){for(var $,X,se,ve=[],Se=0;Se<Q.length&&!((F-=2)<0);++Se)$=Q.charCodeAt(Se),X=$>>8,se=$%256,ve.push(se),ve.push(X);return ve}function ke(Q){return a.toByteArray(be(Q))}function le(Q,F,$,X){for(var se=0;se<X&&!(se+$>=F.length||se>=Q.length);++se)F[se+$]=Q[se];return se}function te(Q,F){return Q instanceof F||Q!=null&&Q.constructor!=null&&Q.constructor.name!=null&&Q.constructor.name===F.name}function ee(Q){return Q!==Q}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":138,buffer:171,ieee754:232}],172:[function(e,i,t){var n=e("get-intrinsic"),a=e("./"),o=a(n("String.prototype.indexOf"));i.exports=function(s,f){var c=n(s,!!f);return typeof c=="function"&&o(s,".prototype.")>-1?a(c):c}},{"./":173,"get-intrinsic":212}],173:[function(e,i,t){var n=e("function-bind"),a=e("get-intrinsic"),o=a("%Function.prototype.apply%"),d=a("%Function.prototype.call%"),s=a("%Reflect.apply%",!0)||n.call(d,o),f=a("%Object.getOwnPropertyDescriptor%",!0),c=a("%Object.defineProperty%",!0),h=a("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}i.exports=function(u){var p=s(n,d,arguments);if(f&&c){var m=f(p,"length");m.configurable&&c(p,"length",{value:1+h(0,u.length-(arguments.length-1))})}return p};var v=function(){return s(n,o,arguments)};c?c(i.exports,"apply",{value:v}):i.exports.apply=v},{"function-bind":211,"get-intrinsic":212}],174:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("stream").Transform,o=e("string_decoder").StringDecoder,d=e("inherits");function s(f){a.call(this),this.hashMode=typeof f=="string",this.hashMode?this[f]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}d(s,a),s.prototype.update=function(f,c,h){typeof f=="string"&&(f=n.from(f,c));var v=this._update(f);return this.hashMode?this:(h&&(v=this._toString(v,h)),v)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(f,c,h){var v;try{this.hashMode?this._update(f):this.push(this._update(f))}catch(l){v=l}finally{h(v)}},s.prototype._flush=function(f){var c;try{this.push(this.__final())}catch(h){c=h}f(c)},s.prototype._finalOrDigest=function(f){var c=this.__final()||n.alloc(0);return f&&(c=this._toString(c,f,!0)),c},s.prototype._toString=function(f,c,h){if(this._decoder||(this._decoder=new o(c),this._encoding=c),this._encoding!==c)throw new Error("can't switch encodings");var v=this._decoder.write(f);return h&&(v+=this._decoder.end()),v},i.exports=s},{inherits:233,"safe-buffer":279,stream:289,string_decoder:290}],175:[function(e,i,t){(function(n){(function(){var a=e("elliptic"),o=e("bn.js");i.exports=function(h){return new s(h)};var d={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};d.p224=d.secp224r1,d.p256=d.secp256r1=d.prime256v1,d.p192=d.secp192r1=d.prime192v1,d.p384=d.secp384r1,d.p521=d.secp521r1;function s(c){this.curveType=d[c],this.curveType||(this.curveType={name:c}),this.curve=new a.ec(this.curveType.name),this.keys=void 0}s.prototype.generateKeys=function(c,h){return this.keys=this.curve.genKeyPair(),this.getPublicKey(c,h)},s.prototype.computeSecret=function(c,h,v){h=h||"utf8",n.isBuffer(c)||(c=new n(c,h));var l=this.curve.keyFromPublic(c).getPublic(),u=l.mul(this.keys.getPrivate()).getX();return f(u,v,this.curveType.byteLength)},s.prototype.getPublicKey=function(c,h){var v=this.keys.getPublic(h==="compressed",!0);return h==="hybrid"&&(v[v.length-1]%2?v[0]=7:v[0]=6),f(v,c)},s.prototype.getPrivateKey=function(c){return f(this.keys.getPrivate(),c)},s.prototype.setPublicKey=function(c,h){return h=h||"utf8",n.isBuffer(c)||(c=new n(c,h)),this.keys._importPublic(c),this},s.prototype.setPrivateKey=function(c,h){h=h||"utf8",n.isBuffer(c)||(c=new n(c,h));var v=new o(c);return v=v.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(v),this};function f(c,h,v){Array.isArray(c)||(c=c.toArray());var l=new n(c);if(v&&l.length<v){var u=new n(v-l.length);u.fill(0),l=n.concat([u,l])}return h?l.toString(h):l}}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":139,buffer:171,elliptic:191}],176:[function(e,i,t){var n=e("inherits"),a=e("md5.js"),o=e("ripemd160"),d=e("sha.js"),s=e("cipher-base");function f(c){s.call(this,"digest"),this._hash=c}n(f,s),f.prototype._update=function(c){this._hash.update(c)},f.prototype._final=function(){return this._hash.digest()},i.exports=function(h){return h=h.toLowerCase(),h==="md5"?new a:h==="rmd160"||h==="ripemd160"?new o:new f(d(h))}},{"cipher-base":174,inherits:233,"md5.js":239,ripemd160:278,"sha.js":282}],177:[function(e,i,t){var n=e("md5.js");i.exports=function(a){return new n().update(a).digest()}},{"md5.js":239}],178:[function(e,i,t){var n=e("inherits"),a=e("./legacy"),o=e("cipher-base"),d=e("safe-buffer").Buffer,s=e("create-hash/md5"),f=e("ripemd160"),c=e("sha.js"),h=d.alloc(128);function v(l,u){o.call(this,"digest"),typeof u=="string"&&(u=d.from(u));var p=l==="sha512"||l==="sha384"?128:64;if(this._alg=l,this._key=u,u.length>p){var m=l==="rmd160"?new f:c(l);u=m.update(u).digest()}else u.length<p&&(u=d.concat([u,h],p));for(var w=this._ipad=d.allocUnsafe(p),_=this._opad=d.allocUnsafe(p),C=0;C<p;C++)w[C]=u[C]^54,_[C]=u[C]^92;this._hash=l==="rmd160"?new f:c(l),this._hash.update(w)}n(v,o),v.prototype._update=function(l){this._hash.update(l)},v.prototype._final=function(){var l=this._hash.digest(),u=this._alg==="rmd160"?new f:c(this._alg);return u.update(this._opad).update(l).digest()},i.exports=function(u,p){return u=u.toLowerCase(),u==="rmd160"||u==="ripemd160"?new v("rmd160",p):u==="md5"?new a(s,p):new v(u,p)}},{"./legacy":179,"cipher-base":174,"create-hash/md5":177,inherits:233,ripemd160:278,"safe-buffer":279,"sha.js":282}],179:[function(e,i,t){var n=e("inherits"),a=e("safe-buffer").Buffer,o=e("cipher-base"),d=a.alloc(128),s=64;function f(c,h){o.call(this,"digest"),typeof h=="string"&&(h=a.from(h)),this._alg=c,this._key=h,h.length>s?h=c(h):h.length<s&&(h=a.concat([h,d],s));for(var v=this._ipad=a.allocUnsafe(s),l=this._opad=a.allocUnsafe(s),u=0;u<s;u++)v[u]=h[u]^54,l[u]=h[u]^92;this._hash=[v]}n(f,o),f.prototype._update=function(c){this._hash.push(c)},f.prototype._final=function(){var c=this._alg(a.concat(this._hash));return this._alg(a.concat([this._opad,c]))},i.exports=f},{"cipher-base":174,inherits:233,"safe-buffer":279}],180:[function(e,i,t){t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=e("randombytes"),t.createHash=t.Hash=e("create-hash"),t.createHmac=t.Hmac=e("create-hmac");var n=e("browserify-sign/algos"),a=Object.keys(n),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(a);t.getHashes=function(){return o};var d=e("pbkdf2");t.pbkdf2=d.pbkdf2,t.pbkdf2Sync=d.pbkdf2Sync;var s=e("browserify-cipher");t.Cipher=s.Cipher,t.createCipher=s.createCipher,t.Cipheriv=s.Cipheriv,t.createCipheriv=s.createCipheriv,t.Decipher=s.Decipher,t.createDecipher=s.createDecipher,t.Decipheriv=s.Decipheriv,t.createDecipheriv=s.createDecipheriv,t.getCiphers=s.getCiphers,t.listCiphers=s.listCiphers;var f=e("diffie-hellman");t.DiffieHellmanGroup=f.DiffieHellmanGroup,t.createDiffieHellmanGroup=f.createDiffieHellmanGroup,t.getDiffieHellman=f.getDiffieHellman,t.createDiffieHellman=f.createDiffieHellman,t.DiffieHellman=f.DiffieHellman;var c=e("browserify-sign");t.createSign=c.createSign,t.Sign=c.Sign,t.createVerify=c.createVerify,t.Verify=c.Verify,t.createECDH=e("create-ecdh");var h=e("public-encrypt");t.publicEncrypt=h.publicEncrypt,t.privateEncrypt=h.privateEncrypt,t.publicDecrypt=h.publicDecrypt,t.privateDecrypt=h.privateDecrypt;var v=e("randomfill");t.randomFill=v.randomFill,t.randomFillSync=v.randomFillSync,t.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},t.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":160,"browserify-sign":167,"browserify-sign/algos":164,"create-ecdh":175,"create-hash":176,"create-hmac":178,"diffie-hellman":187,pbkdf2:248,"public-encrypt":255,randombytes:261,randomfill:262}],181:[function(e,i,t){t.utils=e("./des/utils"),t.Cipher=e("./des/cipher"),t.DES=e("./des/des"),t.CBC=e("./des/cbc"),t.EDE=e("./des/ede")},{"./des/cbc":182,"./des/cipher":183,"./des/des":184,"./des/ede":185,"./des/utils":186}],182:[function(e,i,t){var n=e("minimalistic-assert"),a=e("inherits"),o={};function d(f){n.equal(f.length,8,"Invalid IV length"),this.iv=new Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=f[c]}function s(f){function c(u){f.call(this,u),this._cbcInit()}a(c,f);for(var h=Object.keys(o),v=0;v<h.length;v++){var l=h[v];c.prototype[l]=o[l]}return c.create=function(p){return new c(p)},c}t.instantiate=s,o._cbcInit=function(){var c=new d(this.options.iv);this._cbcState=c},o._update=function(c,h,v,l){var u=this._cbcState,p=this.constructor.super_.prototype,m=u.iv;if(this.type==="encrypt"){for(var w=0;w<this.blockSize;w++)m[w]^=c[h+w];p._update.call(this,m,0,v,l);for(var w=0;w<this.blockSize;w++)m[w]=v[l+w]}else{p._update.call(this,c,h,v,l);for(var w=0;w<this.blockSize;w++)v[l+w]^=m[w];for(var w=0;w<this.blockSize;w++)m[w]=c[h+w]}}},{inherits:233,"minimalistic-assert":241}],183:[function(e,i,t){var n=e("minimalistic-assert");function a(o){this.options=o,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}i.exports=a,a.prototype._init=function(){},a.prototype.update=function(d){return d.length===0?[]:this.type==="decrypt"?this._updateDecrypt(d):this._updateEncrypt(d)},a.prototype._buffer=function(d,s){for(var f=Math.min(this.buffer.length-this.bufferOff,d.length-s),c=0;c<f;c++)this.buffer[this.bufferOff+c]=d[s+c];return this.bufferOff+=f,f},a.prototype._flushBuffer=function(d,s){return this._update(this.buffer,0,d,s),this.bufferOff=0,this.blockSize},a.prototype._updateEncrypt=function(d){var s=0,f=0,c=(this.bufferOff+d.length)/this.blockSize|0,h=new Array(c*this.blockSize);this.bufferOff!==0&&(s+=this._buffer(d,s),this.bufferOff===this.buffer.length&&(f+=this._flushBuffer(h,f)));for(var v=d.length-(d.length-s)%this.blockSize;s<v;s+=this.blockSize)this._update(d,s,h,f),f+=this.blockSize;for(;s<d.length;s++,this.bufferOff++)this.buffer[this.bufferOff]=d[s];return h},a.prototype._updateDecrypt=function(d){for(var s=0,f=0,c=Math.ceil((this.bufferOff+d.length)/this.blockSize)-1,h=new Array(c*this.blockSize);c>0;c--)s+=this._buffer(d,s),f+=this._flushBuffer(h,f);return s+=this._buffer(d,s),h},a.prototype.final=function(d){var s;d&&(s=this.update(d));var f;return this.type==="encrypt"?f=this._finalEncrypt():f=this._finalDecrypt(),s?s.concat(f):f},a.prototype._pad=function(d,s){if(s===0)return!1;for(;s<d.length;)d[s++]=0;return!0},a.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var d=new Array(this.blockSize);return this._update(this.buffer,0,d,0),d},a.prototype._unpad=function(d){return d},a.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var d=new Array(this.blockSize);return this._flushBuffer(d,0),this._unpad(d)}},{"minimalistic-assert":241}],184:[function(e,i,t){var n=e("minimalistic-assert"),a=e("inherits"),o=e("./utils"),d=e("./cipher");function s(){this.tmp=new Array(2),this.keys=null}function f(h){d.call(this,h);var v=new s;this._desState=v,this.deriveKeys(v,h.key)}a(f,d),i.exports=f,f.create=function(v){return new f(v)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];f.prototype.deriveKeys=function(v,l){v.keys=new Array(16*2),n.equal(l.length,this.blockSize,"Invalid key length");var u=o.readUInt32BE(l,0),p=o.readUInt32BE(l,4);o.pc1(u,p,v.tmp,0),u=v.tmp[0],p=v.tmp[1];for(var m=0;m<v.keys.length;m+=2){var w=c[m>>>1];u=o.r28shl(u,w),p=o.r28shl(p,w),o.pc2(u,p,v.keys,m)}},f.prototype._update=function(v,l,u,p){var m=this._desState,w=o.readUInt32BE(v,l),_=o.readUInt32BE(v,l+4);o.ip(w,_,m.tmp,0),w=m.tmp[0],_=m.tmp[1],this.type==="encrypt"?this._encrypt(m,w,_,m.tmp,0):this._decrypt(m,w,_,m.tmp,0),w=m.tmp[0],_=m.tmp[1],o.writeUInt32BE(u,w,p),o.writeUInt32BE(u,_,p+4)},f.prototype._pad=function(v,l){for(var u=v.length-l,p=l;p<v.length;p++)v[p]=u;return!0},f.prototype._unpad=function(v){for(var l=v[v.length-1],u=v.length-l;u<v.length;u++)n.equal(v[u],l);return v.slice(0,v.length-l)},f.prototype._encrypt=function(v,l,u,p,m){for(var w=l,_=u,C=0;C<v.keys.length;C+=2){var N=v.keys[C],P=v.keys[C+1];o.expand(_,v.tmp,0),N^=v.tmp[0],P^=v.tmp[1];var M=o.substitute(N,P),U=o.permute(M),W=_;_=(w^U)>>>0,w=W}o.rip(_,w,p,m)},f.prototype._decrypt=function(v,l,u,p,m){for(var w=u,_=l,C=v.keys.length-2;C>=0;C-=2){var N=v.keys[C],P=v.keys[C+1];o.expand(w,v.tmp,0),N^=v.tmp[0],P^=v.tmp[1];var M=o.substitute(N,P),U=o.permute(M),W=w;w=(_^U)>>>0,_=W}o.rip(w,_,p,m)}},{"./cipher":183,"./utils":186,inherits:233,"minimalistic-assert":241}],185:[function(e,i,t){var n=e("minimalistic-assert"),a=e("inherits"),o=e("./cipher"),d=e("./des");function s(c,h){n.equal(h.length,24,"Invalid key length");var v=h.slice(0,8),l=h.slice(8,16),u=h.slice(16,24);c==="encrypt"?this.ciphers=[d.create({type:"encrypt",key:v}),d.create({type:"decrypt",key:l}),d.create({type:"encrypt",key:u})]:this.ciphers=[d.create({type:"decrypt",key:u}),d.create({type:"encrypt",key:l}),d.create({type:"decrypt",key:v})]}function f(c){o.call(this,c);var h=new s(this.type,this.options.key);this._edeState=h}a(f,o),i.exports=f,f.create=function(h){return new f(h)},f.prototype._update=function(h,v,l,u){var p=this._edeState;p.ciphers[0]._update(h,v,l,u),p.ciphers[1]._update(l,u,l,u),p.ciphers[2]._update(l,u,l,u)},f.prototype._pad=d.prototype._pad,f.prototype._unpad=d.prototype._unpad},{"./cipher":183,"./des":184,inherits:233,"minimalistic-assert":241}],186:[function(e,i,t){t.readUInt32BE=function(s,f){var c=s[0+f]<<24|s[1+f]<<16|s[2+f]<<8|s[3+f];return c>>>0},t.writeUInt32BE=function(s,f,c){s[0+c]=f>>>24,s[1+c]=f>>>16&255,s[2+c]=f>>>8&255,s[3+c]=f&255},t.ip=function(s,f,c,h){for(var v=0,l=0,u=6;u>=0;u-=2){for(var p=0;p<=24;p+=8)v<<=1,v|=f>>>p+u&1;for(var p=0;p<=24;p+=8)v<<=1,v|=s>>>p+u&1}for(var u=6;u>=0;u-=2){for(var p=1;p<=25;p+=8)l<<=1,l|=f>>>p+u&1;for(var p=1;p<=25;p+=8)l<<=1,l|=s>>>p+u&1}c[h+0]=v>>>0,c[h+1]=l>>>0},t.rip=function(s,f,c,h){for(var v=0,l=0,u=0;u<4;u++)for(var p=24;p>=0;p-=8)v<<=1,v|=f>>>p+u&1,v<<=1,v|=s>>>p+u&1;for(var u=4;u<8;u++)for(var p=24;p>=0;p-=8)l<<=1,l|=f>>>p+u&1,l<<=1,l|=s>>>p+u&1;c[h+0]=v>>>0,c[h+1]=l>>>0},t.pc1=function(s,f,c,h){for(var v=0,l=0,u=7;u>=5;u--){for(var p=0;p<=24;p+=8)v<<=1,v|=f>>p+u&1;for(var p=0;p<=24;p+=8)v<<=1,v|=s>>p+u&1}for(var p=0;p<=24;p+=8)v<<=1,v|=f>>p+u&1;for(var u=1;u<=3;u++){for(var p=0;p<=24;p+=8)l<<=1,l|=f>>p+u&1;for(var p=0;p<=24;p+=8)l<<=1,l|=s>>p+u&1}for(var p=0;p<=24;p+=8)l<<=1,l|=s>>p+u&1;c[h+0]=v>>>0,c[h+1]=l>>>0},t.r28shl=function(s,f){return s<<f&268435455|s>>>28-f};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(s,f,c,h){for(var v=0,l=0,u=n.length>>>1,p=0;p<u;p++)v<<=1,v|=s>>>n[p]&1;for(var p=u;p<n.length;p++)l<<=1,l|=f>>>n[p]&1;c[h+0]=v>>>0,c[h+1]=l>>>0},t.expand=function(s,f,c){var h=0,v=0;h=(s&1)<<5|s>>>27;for(var l=23;l>=15;l-=4)h<<=6,h|=s>>>l&63;for(var l=11;l>=3;l-=4)v|=s>>>l&63,v<<=6;v|=(s&31)<<1|s>>>31,f[c+0]=h>>>0,f[c+1]=v>>>0};var a=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(s,f){for(var c=0,h=0;h<4;h++){var v=s>>>18-h*6&63,l=a[h*64+v];c<<=4,c|=l}for(var h=0;h<4;h++){var v=f>>>18-h*6&63,l=a[4*64+h*64+v];c<<=4,c|=l}return c>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(s){for(var f=0,c=0;c<o.length;c++)f<<=1,f|=s>>>o[c]&1;return f>>>0},t.padSplit=function(s,f,c){for(var h=s.toString(2);h.length<f;)h="0"+h;for(var v=[],l=0;l<f;l+=c)v.push(h.slice(l,l+c));return v.join(" ")}},{}],187:[function(e,i,t){(function(n){(function(){var a=e("./lib/generatePrime"),o=e("./lib/primes.json"),d=e("./lib/dh");function s(h){var v=new n(o[h].prime,"hex"),l=new n(o[h].gen,"hex");return new d(v,l)}var f={binary:!0,hex:!0,base64:!0};function c(h,v,l,u){return n.isBuffer(v)||f[v]===void 0?c(h,"binary",v,l):(v=v||"binary",u=u||"binary",l=l||new n([2]),n.isBuffer(l)||(l=new n(l,u)),typeof h=="number"?new d(a(h,l),l,!0):(n.isBuffer(h)||(h=new n(h,v)),new d(h,l,!0)))}t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=s,t.createDiffieHellman=t.DiffieHellman=c}).call(this)}).call(this,e("buffer").Buffer)},{"./lib/dh":188,"./lib/generatePrime":189,"./lib/primes.json":190,buffer:171}],188:[function(e,i,t){(function(n){(function(){var a=e("bn.js"),o=e("miller-rabin"),d=new o,s=new a(24),f=new a(11),c=new a(10),h=new a(3),v=new a(7),l=e("./generatePrime"),u=e("randombytes");i.exports=C;function p(P,M){return M=M||"utf8",n.isBuffer(P)||(P=new n(P,M)),this._pub=new a(P),this}function m(P,M){return M=M||"utf8",n.isBuffer(P)||(P=new n(P,M)),this._priv=new a(P),this}var w={};function _(P,M){var U=M.toString("hex"),W=[U,P.toString(16)].join("_");if(W in w)return w[W];var q=0;if(P.isEven()||!l.simpleSieve||!l.fermatTest(P)||!d.test(P))return q+=1,U==="02"||U==="05"?q+=8:q+=4,w[W]=q,q;d.test(P.shrn(1))||(q+=2);var Z;switch(U){case"02":P.mod(s).cmp(f)&&(q+=8);break;case"05":Z=P.mod(c),Z.cmp(h)&&Z.cmp(v)&&(q+=8);break;default:q+=4}return w[W]=q,q}function C(P,M,U){this.setGenerator(M),this.__prime=new a(P),this._prime=a.mont(this.__prime),this._primeLen=P.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,U?(this.setPublicKey=p,this.setPrivateKey=m):this._primeCode=8}Object.defineProperty(C.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=_(this.__prime,this.__gen)),this._primeCode}}),C.prototype.generateKeys=function(){return this._priv||(this._priv=new a(u(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},C.prototype.computeSecret=function(P){P=new a(P),P=P.toRed(this._prime);var M=P.redPow(this._priv).fromRed(),U=new n(M.toArray()),W=this.getPrime();if(U.length<W.length){var q=new n(W.length-U.length);q.fill(0),U=n.concat([q,U])}return U},C.prototype.getPublicKey=function(M){return N(this._pub,M)},C.prototype.getPrivateKey=function(M){return N(this._priv,M)},C.prototype.getPrime=function(P){return N(this.__prime,P)},C.prototype.getGenerator=function(P){return N(this._gen,P)},C.prototype.setGenerator=function(P,M){return M=M||"utf8",n.isBuffer(P)||(P=new n(P,M)),this.__gen=P,this._gen=new a(P),this};function N(P,M){var U=new n(P.toArray());return M?U.toString(M):U}}).call(this)}).call(this,e("buffer").Buffer)},{"./generatePrime":189,"bn.js":139,buffer:171,"miller-rabin":240,randombytes:261}],189:[function(e,i,t){var n=e("randombytes");i.exports=N,N.simpleSieve=_,N.fermatTest=C;var a=e("bn.js"),o=new a(24),d=e("miller-rabin"),s=new d,f=new a(1),c=new a(2),h=new a(5);new a(16),new a(8);var v=new a(10),l=new a(3);new a(7);var u=new a(11),p=new a(4);new a(12);var m=null;function w(){if(m!==null)return m;var P=1048576,M=[];M[0]=2;for(var U=1,W=3;W<P;W+=2){for(var q=Math.ceil(Math.sqrt(W)),Z=0;Z<U&&M[Z]<=q&&W%M[Z]!==0;Z++);U!==Z&&M[Z]<=q||(M[U++]=W)}return m=M,M}function _(P){for(var M=w(),U=0;U<M.length;U++)if(P.modn(M[U])===0)return P.cmpn(M[U])===0;return!0}function C(P){var M=a.mont(P);return c.toRed(M).redPow(P.subn(1)).fromRed().cmpn(1)===0}function N(P,M){if(P<16)return M===2||M===5?new a([140,123]):new a([140,39]);M=new a(M);for(var U,W;;){for(U=new a(n(Math.ceil(P/8)));U.bitLength()>P;)U.ishrn(1);if(U.isEven()&&U.iadd(f),U.testn(1)||U.iadd(c),M.cmp(c)){if(!M.cmp(h))for(;U.mod(v).cmp(l);)U.iadd(p)}else for(;U.mod(o).cmp(u);)U.iadd(p);if(W=U.shrn(1),_(W)&&_(U)&&C(W)&&C(U)&&s.test(W)&&s.test(U))return U}}},{"bn.js":139,"miller-rabin":240,randombytes:261}],190:[function(e,i,t){i.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],191:[function(e,i,t){var n=t;n.version=e("../package.json").version,n.utils=e("./elliptic/utils"),n.rand=e("brorand"),n.curve=e("./elliptic/curve"),n.curves=e("./elliptic/curves"),n.ec=e("./elliptic/ec"),n.eddsa=e("./elliptic/eddsa")},{"../package.json":206,"./elliptic/curve":194,"./elliptic/curves":197,"./elliptic/ec":198,"./elliptic/eddsa":201,"./elliptic/utils":205,brorand:141}],192:[function(e,i,t){var n=e("bn.js"),a=e("../utils"),o=a.getNAF,d=a.getJSF,s=a.assert;function f(h,v){this.type=h,this.p=new n(v.p,16),this.red=v.prime?n.red(v.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=v.n&&new n(v.n,16),this.g=v.g&&this.pointFromJSON(v.g,v.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var l=this.n&&this.p.div(this.n);!l||l.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}i.exports=f,f.prototype.point=function(){throw new Error("Not implemented")},f.prototype.validate=function(){throw new Error("Not implemented")},f.prototype._fixedNafMul=function(v,l){s(v.precomputed);var u=v._getDoubles(),p=o(l,1,this._bitLength),m=(1<<u.step+1)-(u.step%2===0?2:1);m/=3;var w=[],_,C;for(_=0;_<p.length;_+=u.step){C=0;for(var N=_+u.step-1;N>=_;N--)C=(C<<1)+p[N];w.push(C)}for(var P=this.jpoint(null,null,null),M=this.jpoint(null,null,null),U=m;U>0;U--){for(_=0;_<w.length;_++)C=w[_],C===U?M=M.mixedAdd(u.points[_]):C===-U&&(M=M.mixedAdd(u.points[_].neg()));P=P.add(M)}return P.toP()},f.prototype._wnafMul=function(v,l){var u=4,p=v._getNAFPoints(u);u=p.wnd;for(var m=p.points,w=o(l,u,this._bitLength),_=this.jpoint(null,null,null),C=w.length-1;C>=0;C--){for(var N=0;C>=0&&w[C]===0;C--)N++;if(C>=0&&N++,_=_.dblp(N),C<0)break;var P=w[C];s(P!==0),v.type==="affine"?P>0?_=_.mixedAdd(m[P-1>>1]):_=_.mixedAdd(m[-P-1>>1].neg()):P>0?_=_.add(m[P-1>>1]):_=_.add(m[-P-1>>1].neg())}return v.type==="affine"?_.toP():_},f.prototype._wnafMulAdd=function(v,l,u,p,m){var w=this._wnafT1,_=this._wnafT2,C=this._wnafT3,N=0,P,M,U;for(P=0;P<p;P++){U=l[P];var W=U._getNAFPoints(v);w[P]=W.wnd,_[P]=W.points}for(P=p-1;P>=1;P-=2){var q=P-1,Z=P;if(w[q]!==1||w[Z]!==1){C[q]=o(u[q],w[q],this._bitLength),C[Z]=o(u[Z],w[Z],this._bitLength),N=Math.max(C[q].length,N),N=Math.max(C[Z].length,N);continue}var re=[l[q],null,null,l[Z]];l[q].y.cmp(l[Z].y)===0?(re[1]=l[q].add(l[Z]),re[2]=l[q].toJ().mixedAdd(l[Z].neg())):l[q].y.cmp(l[Z].y.redNeg())===0?(re[1]=l[q].toJ().mixedAdd(l[Z]),re[2]=l[q].add(l[Z].neg())):(re[1]=l[q].toJ().mixedAdd(l[Z]),re[2]=l[q].toJ().mixedAdd(l[Z].neg()));var Y=[-3,-1,-5,-7,0,7,5,1,3],O=d(u[q],u[Z]);for(N=Math.max(O[0].length,N),C[q]=new Array(N),C[Z]=new Array(N),M=0;M<N;M++){var x=O[0][M]|0,S=O[1][M]|0;C[q][M]=Y[(x+1)*3+(S+1)],C[Z][M]=0,_[q]=re}}var k=this.jpoint(null,null,null),g=this._wnafT4;for(P=N;P>=0;P--){for(var E=0;P>=0;){var T=!0;for(M=0;M<p;M++)g[M]=C[M][P]|0,g[M]!==0&&(T=!1);if(!T)break;E++,P--}if(P>=0&&E++,k=k.dblp(E),P<0)break;for(M=0;M<p;M++){var A=g[M];A!==0&&(A>0?U=_[M][A-1>>1]:A<0&&(U=_[M][-A-1>>1].neg()),U.type==="affine"?k=k.mixedAdd(U):k=k.add(U))}}for(P=0;P<p;P++)_[P]=null;return m?k:k.toP()};function c(h,v){this.curve=h,this.type=v,this.precomputed=null}f.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},f.prototype.decodePoint=function(v,l){v=a.toArray(v,l);var u=this.p.byteLength();if((v[0]===4||v[0]===6||v[0]===7)&&v.length-1===2*u){v[0]===6?s(v[v.length-1]%2===0):v[0]===7&&s(v[v.length-1]%2===1);var p=this.point(v.slice(1,1+u),v.slice(1+u,1+2*u));return p}else if((v[0]===2||v[0]===3)&&v.length-1===u)return this.pointFromX(v.slice(1,1+u),v[0]===3);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(v){return this.encode(v,!0)},c.prototype._encode=function(v){var l=this.curve.p.byteLength(),u=this.getX().toArray("be",l);return v?[this.getY().isEven()?2:3].concat(u):[4].concat(u,this.getY().toArray("be",l))},c.prototype.encode=function(v,l){return a.encode(this._encode(l),v)},c.prototype.precompute=function(v){if(this.precomputed)return this;var l={doubles:null,naf:null,beta:null};return l.naf=this._getNAFPoints(8),l.doubles=this._getDoubles(4,v),l.beta=this._getBeta(),this.precomputed=l,this},c.prototype._hasDoubles=function(v){if(!this.precomputed)return!1;var l=this.precomputed.doubles;return l?l.points.length>=Math.ceil((v.bitLength()+1)/l.step):!1},c.prototype._getDoubles=function(v,l){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var u=[this],p=this,m=0;m<l;m+=v){for(var w=0;w<v;w++)p=p.dbl();u.push(p)}return{step:v,points:u}},c.prototype._getNAFPoints=function(v){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var l=[this],u=(1<<v)-1,p=u===1?null:this.dbl(),m=1;m<u;m++)l[m]=l[m-1].add(p);return{wnd:v,points:l}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(v){for(var l=this,u=0;u<v;u++)l=l.dbl();return l}},{"../utils":205,"bn.js":139}],193:[function(e,i,t){var n=e("../utils"),a=e("bn.js"),o=e("inherits"),d=e("./base"),s=n.assert;function f(h){this.twisted=(h.a|0)!==1,this.mOneA=this.twisted&&(h.a|0)===-1,this.extended=this.mOneA,d.call(this,"edwards",h),this.a=new a(h.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(h.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(h.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(h.c|0)===1}o(f,d),i.exports=f,f.prototype._mulA=function(v){return this.mOneA?v.redNeg():this.a.redMul(v)},f.prototype._mulC=function(v){return this.oneC?v:this.c.redMul(v)},f.prototype.jpoint=function(v,l,u,p){return this.point(v,l,u,p)},f.prototype.pointFromX=function(v,l){v=new a(v,16),v.red||(v=v.toRed(this.red));var u=v.redSqr(),p=this.c2.redSub(this.a.redMul(u)),m=this.one.redSub(this.c2.redMul(this.d).redMul(u)),w=p.redMul(m.redInvm()),_=w.redSqrt();if(_.redSqr().redSub(w).cmp(this.zero)!==0)throw new Error("invalid point");var C=_.fromRed().isOdd();return(l&&!C||!l&&C)&&(_=_.redNeg()),this.point(v,_)},f.prototype.pointFromY=function(v,l){v=new a(v,16),v.red||(v=v.toRed(this.red));var u=v.redSqr(),p=u.redSub(this.c2),m=u.redMul(this.d).redMul(this.c2).redSub(this.a),w=p.redMul(m.redInvm());if(w.cmp(this.zero)===0){if(l)throw new Error("invalid point");return this.point(this.zero,v)}var _=w.redSqrt();if(_.redSqr().redSub(w).cmp(this.zero)!==0)throw new Error("invalid point");return _.fromRed().isOdd()!==l&&(_=_.redNeg()),this.point(_,v)},f.prototype.validate=function(v){if(v.isInfinity())return!0;v.normalize();var l=v.x.redSqr(),u=v.y.redSqr(),p=l.redMul(this.a).redAdd(u),m=this.c2.redMul(this.one.redAdd(this.d.redMul(l).redMul(u)));return p.cmp(m)===0};function c(h,v,l,u,p){d.BasePoint.call(this,h,"projective"),v===null&&l===null&&u===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(v,16),this.y=new a(l,16),this.z=u?new a(u,16):this.curve.one,this.t=p&&new a(p,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(c,d.BasePoint),f.prototype.pointFromJSON=function(v){return c.fromJSON(this,v)},f.prototype.point=function(v,l,u,p){return new c(this,v,l,u,p)},c.fromJSON=function(v,l){return new c(v,l[0],l[1],l[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},c.prototype._extDbl=function(){var v=this.x.redSqr(),l=this.y.redSqr(),u=this.z.redSqr();u=u.redIAdd(u);var p=this.curve._mulA(v),m=this.x.redAdd(this.y).redSqr().redISub(v).redISub(l),w=p.redAdd(l),_=w.redSub(u),C=p.redSub(l),N=m.redMul(_),P=w.redMul(C),M=m.redMul(C),U=_.redMul(w);return this.curve.point(N,P,U,M)},c.prototype._projDbl=function(){var v=this.x.redAdd(this.y).redSqr(),l=this.x.redSqr(),u=this.y.redSqr(),p,m,w,_,C,N;if(this.curve.twisted){_=this.curve._mulA(l);var P=_.redAdd(u);this.zOne?(p=v.redSub(l).redSub(u).redMul(P.redSub(this.curve.two)),m=P.redMul(_.redSub(u)),w=P.redSqr().redSub(P).redSub(P)):(C=this.z.redSqr(),N=P.redSub(C).redISub(C),p=v.redSub(l).redISub(u).redMul(N),m=P.redMul(_.redSub(u)),w=P.redMul(N))}else _=l.redAdd(u),C=this.curve._mulC(this.z).redSqr(),N=_.redSub(C).redSub(C),p=this.curve._mulC(v.redISub(_)).redMul(N),m=this.curve._mulC(_).redMul(l.redISub(u)),w=_.redMul(N);return this.curve.point(p,m,w)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(v){var l=this.y.redSub(this.x).redMul(v.y.redSub(v.x)),u=this.y.redAdd(this.x).redMul(v.y.redAdd(v.x)),p=this.t.redMul(this.curve.dd).redMul(v.t),m=this.z.redMul(v.z.redAdd(v.z)),w=u.redSub(l),_=m.redSub(p),C=m.redAdd(p),N=u.redAdd(l),P=w.redMul(_),M=C.redMul(N),U=w.redMul(N),W=_.redMul(C);return this.curve.point(P,M,W,U)},c.prototype._projAdd=function(v){var l=this.z.redMul(v.z),u=l.redSqr(),p=this.x.redMul(v.x),m=this.y.redMul(v.y),w=this.curve.d.redMul(p).redMul(m),_=u.redSub(w),C=u.redAdd(w),N=this.x.redAdd(this.y).redMul(v.x.redAdd(v.y)).redISub(p).redISub(m),P=l.redMul(_).redMul(N),M,U;return this.curve.twisted?(M=l.redMul(C).redMul(m.redSub(this.curve._mulA(p))),U=_.redMul(C)):(M=l.redMul(C).redMul(m.redSub(p)),U=this.curve._mulC(_).redMul(C)),this.curve.point(P,M,U)},c.prototype.add=function(v){return this.isInfinity()?v:v.isInfinity()?this:this.curve.extended?this._extAdd(v):this._projAdd(v)},c.prototype.mul=function(v){return this._hasDoubles(v)?this.curve._fixedNafMul(this,v):this.curve._wnafMul(this,v)},c.prototype.mulAdd=function(v,l,u){return this.curve._wnafMulAdd(1,[this,l],[v,u],2,!1)},c.prototype.jmulAdd=function(v,l,u){return this.curve._wnafMulAdd(1,[this,l],[v,u],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var v=this.z.redInvm();return this.x=this.x.redMul(v),this.y=this.y.redMul(v),this.t&&(this.t=this.t.redMul(v)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(v){return this===v||this.getX().cmp(v.getX())===0&&this.getY().cmp(v.getY())===0},c.prototype.eqXToP=function(v){var l=v.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(l)===0)return!0;for(var u=v.clone(),p=this.curve.redN.redMul(this.z);;){if(u.iadd(this.curve.n),u.cmp(this.curve.p)>=0)return!1;if(l.redIAdd(p),this.x.cmp(l)===0)return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},{"../utils":205,"./base":192,"bn.js":139,inherits:233}],194:[function(e,i,t){var n=t;n.base=e("./base"),n.short=e("./short"),n.mont=e("./mont"),n.edwards=e("./edwards")},{"./base":192,"./edwards":193,"./mont":195,"./short":196}],195:[function(e,i,t){var n=e("bn.js"),a=e("inherits"),o=e("./base"),d=e("../utils");function s(c){o.call(this,"mont",c),this.a=new n(c.a,16).toRed(this.red),this.b=new n(c.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}a(s,o),i.exports=s,s.prototype.validate=function(h){var v=h.normalize().x,l=v.redSqr(),u=l.redMul(v).redAdd(l.redMul(this.a)).redAdd(v),p=u.redSqrt();return p.redSqr().cmp(u)===0};function f(c,h,v){o.BasePoint.call(this,c,"projective"),h===null&&v===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(h,16),this.z=new n(v,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}a(f,o.BasePoint),s.prototype.decodePoint=function(h,v){return this.point(d.toArray(h,v),1)},s.prototype.point=function(h,v){return new f(this,h,v)},s.prototype.pointFromJSON=function(h){return f.fromJSON(this,h)},f.prototype.precompute=function(){},f.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},f.fromJSON=function(h,v){return new f(h,v[0],v[1]||h.one)},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return this.z.cmpn(0)===0},f.prototype.dbl=function(){var h=this.x.redAdd(this.z),v=h.redSqr(),l=this.x.redSub(this.z),u=l.redSqr(),p=v.redSub(u),m=v.redMul(u),w=p.redMul(u.redAdd(this.curve.a24.redMul(p)));return this.curve.point(m,w)},f.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.diffAdd=function(h,v){var l=this.x.redAdd(this.z),u=this.x.redSub(this.z),p=h.x.redAdd(h.z),m=h.x.redSub(h.z),w=m.redMul(l),_=p.redMul(u),C=v.z.redMul(w.redAdd(_).redSqr()),N=v.x.redMul(w.redISub(_).redSqr());return this.curve.point(C,N)},f.prototype.mul=function(h){for(var v=h.clone(),l=this,u=this.curve.point(null,null),p=this,m=[];v.cmpn(0)!==0;v.iushrn(1))m.push(v.andln(1));for(var w=m.length-1;w>=0;w--)m[w]===0?(l=l.diffAdd(u,p),u=u.dbl()):(u=l.diffAdd(u,p),l=l.dbl());return u},f.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.eq=function(h){return this.getX().cmp(h.getX())===0},f.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},f.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":205,"./base":192,"bn.js":139,inherits:233}],196:[function(e,i,t){var n=e("../utils"),a=e("bn.js"),o=e("inherits"),d=e("./base"),s=n.assert;function f(v){d.call(this,"short",v),this.a=new a(v.a,16).toRed(this.red),this.b=new a(v.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(v),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}o(f,d),i.exports=f,f.prototype._getEndomorphism=function(l){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var u,p;if(l.beta)u=new a(l.beta,16).toRed(this.red);else{var m=this._getEndoRoots(this.p);u=m[0].cmp(m[1])<0?m[0]:m[1],u=u.toRed(this.red)}if(l.lambda)p=new a(l.lambda,16);else{var w=this._getEndoRoots(this.n);this.g.mul(w[0]).x.cmp(this.g.x.redMul(u))===0?p=w[0]:(p=w[1],s(this.g.mul(p).x.cmp(this.g.x.redMul(u))===0))}var _;return l.basis?_=l.basis.map(function(C){return{a:new a(C.a,16),b:new a(C.b,16)}}):_=this._getEndoBasis(p),{beta:u,lambda:p,basis:_}}},f.prototype._getEndoRoots=function(l){var u=l===this.p?this.red:a.mont(l),p=new a(2).toRed(u).redInvm(),m=p.redNeg(),w=new a(3).toRed(u).redNeg().redSqrt().redMul(p),_=m.redAdd(w).fromRed(),C=m.redSub(w).fromRed();return[_,C]},f.prototype._getEndoBasis=function(l){for(var u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),p=l,m=this.n.clone(),w=new a(1),_=new a(0),C=new a(0),N=new a(1),P,M,U,W,q,Z,re,Y=0,O,x;p.cmpn(0)!==0;){var S=m.div(p);O=m.sub(S.mul(p)),x=C.sub(S.mul(w));var k=N.sub(S.mul(_));if(!U&&O.cmp(u)<0)P=re.neg(),M=w,U=O.neg(),W=x;else if(U&&++Y===2)break;re=O,m=p,p=O,C=w,w=x,N=_,_=k}q=O.neg(),Z=x;var g=U.sqr().add(W.sqr()),E=q.sqr().add(Z.sqr());return E.cmp(g)>=0&&(q=P,Z=M),U.negative&&(U=U.neg(),W=W.neg()),q.negative&&(q=q.neg(),Z=Z.neg()),[{a:U,b:W},{a:q,b:Z}]},f.prototype._endoSplit=function(l){var u=this.endo.basis,p=u[0],m=u[1],w=m.b.mul(l).divRound(this.n),_=p.b.neg().mul(l).divRound(this.n),C=w.mul(p.a),N=_.mul(m.a),P=w.mul(p.b),M=_.mul(m.b),U=l.sub(C).sub(N),W=P.add(M).neg();return{k1:U,k2:W}},f.prototype.pointFromX=function(l,u){l=new a(l,16),l.red||(l=l.toRed(this.red));var p=l.redSqr().redMul(l).redIAdd(l.redMul(this.a)).redIAdd(this.b),m=p.redSqrt();if(m.redSqr().redSub(p).cmp(this.zero)!==0)throw new Error("invalid point");var w=m.fromRed().isOdd();return(u&&!w||!u&&w)&&(m=m.redNeg()),this.point(l,m)},f.prototype.validate=function(l){if(l.inf)return!0;var u=l.x,p=l.y,m=this.a.redMul(u),w=u.redSqr().redMul(u).redIAdd(m).redIAdd(this.b);return p.redSqr().redISub(w).cmpn(0)===0},f.prototype._endoWnafMulAdd=function(l,u,p){for(var m=this._endoWnafT1,w=this._endoWnafT2,_=0;_<l.length;_++){var C=this._endoSplit(u[_]),N=l[_],P=N._getBeta();C.k1.negative&&(C.k1.ineg(),N=N.neg(!0)),C.k2.negative&&(C.k2.ineg(),P=P.neg(!0)),m[_*2]=N,m[_*2+1]=P,w[_*2]=C.k1,w[_*2+1]=C.k2}for(var M=this._wnafMulAdd(1,m,w,_*2,p),U=0;U<_*2;U++)m[U]=null,w[U]=null;return M};function c(v,l,u,p){d.BasePoint.call(this,v,"affine"),l===null&&u===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(l,16),this.y=new a(u,16),p&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}o(c,d.BasePoint),f.prototype.point=function(l,u,p){return new c(this,l,u,p)},f.prototype.pointFromJSON=function(l,u){return c.fromJSON(this,l,u)},c.prototype._getBeta=function(){if(this.curve.endo){var l=this.precomputed;if(l&&l.beta)return l.beta;var u=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(l){var p=this.curve,m=function(w){return p.point(w.x.redMul(p.endo.beta),w.y)};l.beta=u,u.precomputed={beta:null,naf:l.naf&&{wnd:l.naf.wnd,points:l.naf.points.map(m)},doubles:l.doubles&&{step:l.doubles.step,points:l.doubles.points.map(m)}}}return u}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(l,u,p){typeof u=="string"&&(u=JSON.parse(u));var m=l.point(u[0],u[1],p);if(!u[2])return m;function w(C){return l.point(C[0],C[1],p)}var _=u[2];return m.precomputed={beta:null,doubles:_.doubles&&{step:_.doubles.step,points:[m].concat(_.doubles.points.map(w))},naf:_.naf&&{wnd:_.naf.wnd,points:[m].concat(_.naf.points.map(w))}},m},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(l){if(this.inf)return l;if(l.inf)return this;if(this.eq(l))return this.dbl();if(this.neg().eq(l))return this.curve.point(null,null);if(this.x.cmp(l.x)===0)return this.curve.point(null,null);var u=this.y.redSub(l.y);u.cmpn(0)!==0&&(u=u.redMul(this.x.redSub(l.x).redInvm()));var p=u.redSqr().redISub(this.x).redISub(l.x),m=u.redMul(this.x.redSub(p)).redISub(this.y);return this.curve.point(p,m)},c.prototype.dbl=function(){if(this.inf)return this;var l=this.y.redAdd(this.y);if(l.cmpn(0)===0)return this.curve.point(null,null);var u=this.curve.a,p=this.x.redSqr(),m=l.redInvm(),w=p.redAdd(p).redIAdd(p).redIAdd(u).redMul(m),_=w.redSqr().redISub(this.x.redAdd(this.x)),C=w.redMul(this.x.redSub(_)).redISub(this.y);return this.curve.point(_,C)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(l){return l=new a(l,16),this.isInfinity()?this:this._hasDoubles(l)?this.curve._fixedNafMul(this,l):this.curve.endo?this.curve._endoWnafMulAdd([this],[l]):this.curve._wnafMul(this,l)},c.prototype.mulAdd=function(l,u,p){var m=[this,u],w=[l,p];return this.curve.endo?this.curve._endoWnafMulAdd(m,w):this.curve._wnafMulAdd(1,m,w,2)},c.prototype.jmulAdd=function(l,u,p){var m=[this,u],w=[l,p];return this.curve.endo?this.curve._endoWnafMulAdd(m,w,!0):this.curve._wnafMulAdd(1,m,w,2,!0)},c.prototype.eq=function(l){return this===l||this.inf===l.inf&&(this.inf||this.x.cmp(l.x)===0&&this.y.cmp(l.y)===0)},c.prototype.neg=function(l){if(this.inf)return this;var u=this.curve.point(this.x,this.y.redNeg());if(l&&this.precomputed){var p=this.precomputed,m=function(w){return w.neg()};u.precomputed={naf:p.naf&&{wnd:p.naf.wnd,points:p.naf.points.map(m)},doubles:p.doubles&&{step:p.doubles.step,points:p.doubles.points.map(m)}}}return u},c.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var l=this.curve.jpoint(this.x,this.y,this.curve.one);return l};function h(v,l,u,p){d.BasePoint.call(this,v,"jacobian"),l===null&&u===null&&p===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(l,16),this.y=new a(u,16),this.z=new a(p,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(h,d.BasePoint),f.prototype.jpoint=function(l,u,p){return new h(this,l,u,p)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var l=this.z.redInvm(),u=l.redSqr(),p=this.x.redMul(u),m=this.y.redMul(u).redMul(l);return this.curve.point(p,m)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(l){if(this.isInfinity())return l;if(l.isInfinity())return this;var u=l.z.redSqr(),p=this.z.redSqr(),m=this.x.redMul(u),w=l.x.redMul(p),_=this.y.redMul(u.redMul(l.z)),C=l.y.redMul(p.redMul(this.z)),N=m.redSub(w),P=_.redSub(C);if(N.cmpn(0)===0)return P.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var M=N.redSqr(),U=M.redMul(N),W=m.redMul(M),q=P.redSqr().redIAdd(U).redISub(W).redISub(W),Z=P.redMul(W.redISub(q)).redISub(_.redMul(U)),re=this.z.redMul(l.z).redMul(N);return this.curve.jpoint(q,Z,re)},h.prototype.mixedAdd=function(l){if(this.isInfinity())return l.toJ();if(l.isInfinity())return this;var u=this.z.redSqr(),p=this.x,m=l.x.redMul(u),w=this.y,_=l.y.redMul(u).redMul(this.z),C=p.redSub(m),N=w.redSub(_);if(C.cmpn(0)===0)return N.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var P=C.redSqr(),M=P.redMul(C),U=p.redMul(P),W=N.redSqr().redIAdd(M).redISub(U).redISub(U),q=N.redMul(U.redISub(W)).redISub(w.redMul(M)),Z=this.z.redMul(C);return this.curve.jpoint(W,q,Z)},h.prototype.dblp=function(l){if(l===0)return this;if(this.isInfinity())return this;if(!l)return this.dbl();var u;if(this.curve.zeroA||this.curve.threeA){var p=this;for(u=0;u<l;u++)p=p.dbl();return p}var m=this.curve.a,w=this.curve.tinv,_=this.x,C=this.y,N=this.z,P=N.redSqr().redSqr(),M=C.redAdd(C);for(u=0;u<l;u++){var U=_.redSqr(),W=M.redSqr(),q=W.redSqr(),Z=U.redAdd(U).redIAdd(U).redIAdd(m.redMul(P)),re=_.redMul(W),Y=Z.redSqr().redISub(re.redAdd(re)),O=re.redISub(Y),x=Z.redMul(O);x=x.redIAdd(x).redISub(q);var S=M.redMul(N);u+1<l&&(P=P.redMul(q)),_=Y,N=S,M=x}return this.curve.jpoint(_,M.redMul(w),N)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var l,u,p;if(this.zOne){var m=this.x.redSqr(),w=this.y.redSqr(),_=w.redSqr(),C=this.x.redAdd(w).redSqr().redISub(m).redISub(_);C=C.redIAdd(C);var N=m.redAdd(m).redIAdd(m),P=N.redSqr().redISub(C).redISub(C),M=_.redIAdd(_);M=M.redIAdd(M),M=M.redIAdd(M),l=P,u=N.redMul(C.redISub(P)).redISub(M),p=this.y.redAdd(this.y)}else{var U=this.x.redSqr(),W=this.y.redSqr(),q=W.redSqr(),Z=this.x.redAdd(W).redSqr().redISub(U).redISub(q);Z=Z.redIAdd(Z);var re=U.redAdd(U).redIAdd(U),Y=re.redSqr(),O=q.redIAdd(q);O=O.redIAdd(O),O=O.redIAdd(O),l=Y.redISub(Z).redISub(Z),u=re.redMul(Z.redISub(l)).redISub(O),p=this.y.redMul(this.z),p=p.redIAdd(p)}return this.curve.jpoint(l,u,p)},h.prototype._threeDbl=function(){var l,u,p;if(this.zOne){var m=this.x.redSqr(),w=this.y.redSqr(),_=w.redSqr(),C=this.x.redAdd(w).redSqr().redISub(m).redISub(_);C=C.redIAdd(C);var N=m.redAdd(m).redIAdd(m).redIAdd(this.curve.a),P=N.redSqr().redISub(C).redISub(C);l=P;var M=_.redIAdd(_);M=M.redIAdd(M),M=M.redIAdd(M),u=N.redMul(C.redISub(P)).redISub(M),p=this.y.redAdd(this.y)}else{var U=this.z.redSqr(),W=this.y.redSqr(),q=this.x.redMul(W),Z=this.x.redSub(U).redMul(this.x.redAdd(U));Z=Z.redAdd(Z).redIAdd(Z);var re=q.redIAdd(q);re=re.redIAdd(re);var Y=re.redAdd(re);l=Z.redSqr().redISub(Y),p=this.y.redAdd(this.z).redSqr().redISub(W).redISub(U);var O=W.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O),u=Z.redMul(re.redISub(l)).redISub(O)}return this.curve.jpoint(l,u,p)},h.prototype._dbl=function(){var l=this.curve.a,u=this.x,p=this.y,m=this.z,w=m.redSqr().redSqr(),_=u.redSqr(),C=p.redSqr(),N=_.redAdd(_).redIAdd(_).redIAdd(l.redMul(w)),P=u.redAdd(u);P=P.redIAdd(P);var M=P.redMul(C),U=N.redSqr().redISub(M.redAdd(M)),W=M.redISub(U),q=C.redSqr();q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q);var Z=N.redMul(W).redISub(q),re=p.redAdd(p).redMul(m);return this.curve.jpoint(U,Z,re)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var l=this.x.redSqr(),u=this.y.redSqr(),p=this.z.redSqr(),m=u.redSqr(),w=l.redAdd(l).redIAdd(l),_=w.redSqr(),C=this.x.redAdd(u).redSqr().redISub(l).redISub(m);C=C.redIAdd(C),C=C.redAdd(C).redIAdd(C),C=C.redISub(_);var N=C.redSqr(),P=m.redIAdd(m);P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var M=w.redIAdd(C).redSqr().redISub(_).redISub(N).redISub(P),U=u.redMul(M);U=U.redIAdd(U),U=U.redIAdd(U);var W=this.x.redMul(N).redISub(U);W=W.redIAdd(W),W=W.redIAdd(W);var q=this.y.redMul(M.redMul(P.redISub(M)).redISub(C.redMul(N)));q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q);var Z=this.z.redAdd(C).redSqr().redISub(p).redISub(N);return this.curve.jpoint(W,q,Z)},h.prototype.mul=function(l,u){return l=new a(l,u),this.curve._wnafMul(this,l)},h.prototype.eq=function(l){if(l.type==="affine")return this.eq(l.toJ());if(this===l)return!0;var u=this.z.redSqr(),p=l.z.redSqr();if(this.x.redMul(p).redISub(l.x.redMul(u)).cmpn(0)!==0)return!1;var m=u.redMul(this.z),w=p.redMul(l.z);return this.y.redMul(w).redISub(l.y.redMul(m)).cmpn(0)===0},h.prototype.eqXToP=function(l){var u=this.z.redSqr(),p=l.toRed(this.curve.red).redMul(u);if(this.x.cmp(p)===0)return!0;for(var m=l.clone(),w=this.curve.redN.redMul(u);;){if(m.iadd(this.curve.n),m.cmp(this.curve.p)>=0)return!1;if(p.redIAdd(w),this.x.cmp(p)===0)return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":205,"./base":192,"bn.js":139,inherits:233}],197:[function(e,i,t){var n=t,a=e("hash.js"),o=e("./curve"),d=e("./utils"),s=d.assert;function f(v){v.type==="short"?this.curve=new o.short(v):v.type==="edwards"?this.curve=new o.edwards(v):this.curve=new o.mont(v),this.g=this.curve.g,this.n=this.curve.n,this.hash=v.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}n.PresetCurve=f;function c(v,l){Object.defineProperty(n,v,{configurable:!0,enumerable:!0,get:function(){var u=new f(l);return Object.defineProperty(n,v,{configurable:!0,enumerable:!0,value:u}),u}})}c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var h;try{h=e("./precomputed/secp256k1")}catch{h=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",h]})},{"./curve":194,"./precomputed/secp256k1":204,"./utils":205,"hash.js":219}],198:[function(e,i,t){var n=e("bn.js"),a=e("hmac-drbg"),o=e("../utils"),d=e("../curves"),s=e("brorand"),f=o.assert,c=e("./key"),h=e("./signature");function v(l){if(!(this instanceof v))return new v(l);typeof l=="string"&&(f(Object.prototype.hasOwnProperty.call(d,l),"Unknown curve "+l),l=d[l]),l instanceof d.PresetCurve&&(l={curve:l}),this.curve=l.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=l.curve.g,this.g.precompute(l.curve.n.bitLength()+1),this.hash=l.hash||l.curve.hash}i.exports=v,v.prototype.keyPair=function(u){return new c(this,u)},v.prototype.keyFromPrivate=function(u,p){return c.fromPrivate(this,u,p)},v.prototype.keyFromPublic=function(u,p){return c.fromPublic(this,u,p)},v.prototype.genKeyPair=function(u){u||(u={});for(var p=new a({hash:this.hash,pers:u.pers,persEnc:u.persEnc||"utf8",entropy:u.entropy||s(this.hash.hmacStrength),entropyEnc:u.entropy&&u.entropyEnc||"utf8",nonce:this.n.toArray()}),m=this.n.byteLength(),w=this.n.sub(new n(2));;){var _=new n(p.generate(m));if(!(_.cmp(w)>0))return _.iaddn(1),this.keyFromPrivate(_)}},v.prototype._truncateToN=function(u,p){var m=u.byteLength()*8-this.n.bitLength();return m>0&&(u=u.ushrn(m)),!p&&u.cmp(this.n)>=0?u.sub(this.n):u},v.prototype.sign=function(u,p,m,w){typeof m=="object"&&(w=m,m=null),w||(w={}),p=this.keyFromPrivate(p,m),u=this._truncateToN(new n(u,16));for(var _=this.n.byteLength(),C=p.getPrivate().toArray("be",_),N=u.toArray("be",_),P=new a({hash:this.hash,entropy:C,nonce:N,pers:w.pers,persEnc:w.persEnc||"utf8"}),M=this.n.sub(new n(1)),U=0;;U++){var W=w.k?w.k(U):new n(P.generate(this.n.byteLength()));if(W=this._truncateToN(W,!0),!(W.cmpn(1)<=0||W.cmp(M)>=0)){var q=this.g.mul(W);if(!q.isInfinity()){var Z=q.getX(),re=Z.umod(this.n);if(re.cmpn(0)!==0){var Y=W.invm(this.n).mul(re.mul(p.getPrivate()).iadd(u));if(Y=Y.umod(this.n),Y.cmpn(0)!==0){var O=(q.getY().isOdd()?1:0)|(Z.cmp(re)!==0?2:0);return w.canonical&&Y.cmp(this.nh)>0&&(Y=this.n.sub(Y),O^=1),new h({r:re,s:Y,recoveryParam:O})}}}}}},v.prototype.verify=function(u,p,m,w){u=this._truncateToN(new n(u,16)),m=this.keyFromPublic(m,w),p=new h(p,"hex");var _=p.r,C=p.s;if(_.cmpn(1)<0||_.cmp(this.n)>=0||C.cmpn(1)<0||C.cmp(this.n)>=0)return!1;var N=C.invm(this.n),P=N.mul(u).umod(this.n),M=N.mul(_).umod(this.n),U;return this.curve._maxwellTrick?(U=this.g.jmulAdd(P,m.getPublic(),M),U.isInfinity()?!1:U.eqXToP(_)):(U=this.g.mulAdd(P,m.getPublic(),M),U.isInfinity()?!1:U.getX().umod(this.n).cmp(_)===0)},v.prototype.recoverPubKey=function(l,u,p,m){f((3&p)===p,"The recovery param is more than two bits"),u=new h(u,m);var w=this.n,_=new n(l),C=u.r,N=u.s,P=p&1,M=p>>1;if(C.cmp(this.curve.p.umod(this.curve.n))>=0&&M)throw new Error("Unable to find sencond key candinate");M?C=this.curve.pointFromX(C.add(this.curve.n),P):C=this.curve.pointFromX(C,P);var U=u.r.invm(w),W=w.sub(_).mul(U).umod(w),q=N.mul(U).umod(w);return this.g.mulAdd(W,C,q)},v.prototype.getKeyRecoveryParam=function(l,u,p,m){if(u=new h(u,m),u.recoveryParam!==null)return u.recoveryParam;for(var w=0;w<4;w++){var _;try{_=this.recoverPubKey(l,u,w)}catch{continue}if(_.eq(p))return w}throw new Error("Unable to find valid recovery factor")}},{"../curves":197,"../utils":205,"./key":199,"./signature":200,"bn.js":139,brorand:141,"hmac-drbg":231}],199:[function(e,i,t){var n=e("bn.js"),a=e("../utils"),o=a.assert;function d(s,f){this.ec=s,this.priv=null,this.pub=null,f.priv&&this._importPrivate(f.priv,f.privEnc),f.pub&&this._importPublic(f.pub,f.pubEnc)}i.exports=d,d.fromPublic=function(f,c,h){return c instanceof d?c:new d(f,{pub:c,pubEnc:h})},d.fromPrivate=function(f,c,h){return c instanceof d?c:new d(f,{priv:c,privEnc:h})},d.prototype.validate=function(){var f=this.getPublic();return f.isInfinity()?{result:!1,reason:"Invalid public key"}:f.validate()?f.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},d.prototype.getPublic=function(f,c){return typeof f=="string"&&(c=f,f=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),c?this.pub.encode(c,f):this.pub},d.prototype.getPrivate=function(f){return f==="hex"?this.priv.toString(16,2):this.priv},d.prototype._importPrivate=function(f,c){this.priv=new n(f,c||16),this.priv=this.priv.umod(this.ec.curve.n)},d.prototype._importPublic=function(f,c){if(f.x||f.y){this.ec.curve.type==="mont"?o(f.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&o(f.x&&f.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(f.x,f.y);return}this.pub=this.ec.curve.decodePoint(f,c)},d.prototype.derive=function(f){return f.validate()||o(f.validate(),"public point not validated"),f.mul(this.priv).getX()},d.prototype.sign=function(f,c,h){return this.ec.sign(f,this,c,h)},d.prototype.verify=function(f,c){return this.ec.verify(f,c,this)},d.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":205,"bn.js":139}],200:[function(e,i,t){var n=e("bn.js"),a=e("../utils"),o=a.assert;function d(v,l){if(v instanceof d)return v;this._importDER(v,l)||(o(v.r&&v.s,"Signature without r or s"),this.r=new n(v.r,16),this.s=new n(v.s,16),v.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=v.recoveryParam)}i.exports=d;function s(){this.place=0}function f(v,l){var u=v[l.place++];if(!(u&128))return u;var p=u&15;if(p===0||p>4)return!1;for(var m=0,w=0,_=l.place;w<p;w++,_++)m<<=8,m|=v[_],m>>>=0;return m<=127?!1:(l.place=_,m)}function c(v){for(var l=0,u=v.length-1;!v[l]&&!(v[l+1]&128)&&l<u;)l++;return l===0?v:v.slice(l)}d.prototype._importDER=function(l,u){l=a.toArray(l,u);var p=new s;if(l[p.place++]!==48)return!1;var m=f(l,p);if(m===!1||m+p.place!==l.length||l[p.place++]!==2)return!1;var w=f(l,p);if(w===!1)return!1;var _=l.slice(p.place,w+p.place);if(p.place+=w,l[p.place++]!==2)return!1;var C=f(l,p);if(C===!1||l.length!==C+p.place)return!1;var N=l.slice(p.place,C+p.place);if(_[0]===0)if(_[1]&128)_=_.slice(1);else return!1;if(N[0]===0)if(N[1]&128)N=N.slice(1);else return!1;return this.r=new n(_),this.s=new n(N),this.recoveryParam=null,!0};function h(v,l){if(l<128){v.push(l);return}var u=1+(Math.log(l)/Math.LN2>>>3);for(v.push(u|128);--u;)v.push(l>>>(u<<3)&255);v.push(l)}d.prototype.toDER=function(l){var u=this.r.toArray(),p=this.s.toArray();for(u[0]&128&&(u=[0].concat(u)),p[0]&128&&(p=[0].concat(p)),u=c(u),p=c(p);!p[0]&&!(p[1]&128);)p=p.slice(1);var m=[2];h(m,u.length),m=m.concat(u),m.push(2),h(m,p.length);var w=m.concat(p),_=[48];return h(_,w.length),_=_.concat(w),a.encode(_,l)}},{"../utils":205,"bn.js":139}],201:[function(e,i,t){var n=e("hash.js"),a=e("../curves"),o=e("../utils"),d=o.assert,s=o.parseBytes,f=e("./key"),c=e("./signature");function h(v){if(d(v==="ed25519","only tested with ed25519 so far"),!(this instanceof h))return new h(v);v=a[v].curve,this.curve=v,this.g=v.g,this.g.precompute(v.n.bitLength()+1),this.pointClass=v.point().constructor,this.encodingLength=Math.ceil(v.n.bitLength()/8),this.hash=n.sha512}i.exports=h,h.prototype.sign=function(l,u){l=s(l);var p=this.keyFromSecret(u),m=this.hashInt(p.messagePrefix(),l),w=this.g.mul(m),_=this.encodePoint(w),C=this.hashInt(_,p.pubBytes(),l).mul(p.priv()),N=m.add(C).umod(this.curve.n);return this.makeSignature({R:w,S:N,Rencoded:_})},h.prototype.verify=function(l,u,p){l=s(l),u=this.makeSignature(u);var m=this.keyFromPublic(p),w=this.hashInt(u.Rencoded(),m.pubBytes(),l),_=this.g.mul(u.S()),C=u.R().add(m.pub().mul(w));return C.eq(_)},h.prototype.hashInt=function(){for(var l=this.hash(),u=0;u<arguments.length;u++)l.update(arguments[u]);return o.intFromLE(l.digest()).umod(this.curve.n)},h.prototype.keyFromPublic=function(l){return f.fromPublic(this,l)},h.prototype.keyFromSecret=function(l){return f.fromSecret(this,l)},h.prototype.makeSignature=function(l){return l instanceof c?l:new c(this,l)},h.prototype.encodePoint=function(l){var u=l.getY().toArray("le",this.encodingLength);return u[this.encodingLength-1]|=l.getX().isOdd()?128:0,u},h.prototype.decodePoint=function(l){l=o.parseBytes(l);var u=l.length-1,p=l.slice(0,u).concat(l[u]&-129),m=(l[u]&128)!==0,w=o.intFromLE(p);return this.curve.pointFromY(w,m)},h.prototype.encodeInt=function(l){return l.toArray("le",this.encodingLength)},h.prototype.decodeInt=function(l){return o.intFromLE(l)},h.prototype.isPoint=function(l){return l instanceof this.pointClass}},{"../curves":197,"../utils":205,"./key":202,"./signature":203,"hash.js":219}],202:[function(e,i,t){var n=e("../utils"),a=n.assert,o=n.parseBytes,d=n.cachedProperty;function s(f,c){this.eddsa=f,this._secret=o(c.secret),f.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=o(c.pub)}s.fromPublic=function(c,h){return h instanceof s?h:new s(c,{pub:h})},s.fromSecret=function(c,h){return h instanceof s?h:new s(c,{secret:h})},s.prototype.secret=function(){return this._secret},d(s,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),d(s,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),d(s,"privBytes",function(){var c=this.eddsa,h=this.hash(),v=c.encodingLength-1,l=h.slice(0,c.encodingLength);return l[0]&=248,l[v]&=127,l[v]|=64,l}),d(s,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),d(s,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),d(s,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),s.prototype.sign=function(c){return a(this._secret,"KeyPair can only verify"),this.eddsa.sign(c,this)},s.prototype.verify=function(c,h){return this.eddsa.verify(c,h,this)},s.prototype.getSecret=function(c){return a(this._secret,"KeyPair is public only"),n.encode(this.secret(),c)},s.prototype.getPublic=function(c){return n.encode(this.pubBytes(),c)},i.exports=s},{"../utils":205}],203:[function(e,i,t){var n=e("bn.js"),a=e("../utils"),o=a.assert,d=a.cachedProperty,s=a.parseBytes;function f(c,h){this.eddsa=c,typeof h!="object"&&(h=s(h)),Array.isArray(h)&&(h={R:h.slice(0,c.encodingLength),S:h.slice(c.encodingLength)}),o(h.R&&h.S,"Signature without R or S"),c.isPoint(h.R)&&(this._R=h.R),h.S instanceof n&&(this._S=h.S),this._Rencoded=Array.isArray(h.R)?h.R:h.Rencoded,this._Sencoded=Array.isArray(h.S)?h.S:h.Sencoded}d(f,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),d(f,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),d(f,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),d(f,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),f.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},f.prototype.toHex=function(){return a.encode(this.toBytes(),"hex").toUpperCase()},i.exports=f},{"../utils":205,"bn.js":139}],204:[function(e,i,t){i.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],205:[function(e,i,t){var n=t,a=e("bn.js"),o=e("minimalistic-assert"),d=e("minimalistic-crypto-utils");n.assert=o,n.toArray=d.toArray,n.zero2=d.zero2,n.toHex=d.toHex,n.encode=d.encode;function s(l,u,p){var m=new Array(Math.max(l.bitLength(),p)+1);m.fill(0);for(var w=1<<u+1,_=l.clone(),C=0;C<m.length;C++){var N,P=_.andln(w-1);_.isOdd()?(P>(w>>1)-1?N=(w>>1)-P:N=P,_.isubn(N)):N=0,m[C]=N,_.iushrn(1)}return m}n.getNAF=s;function f(l,u){var p=[[],[]];l=l.clone(),u=u.clone();for(var m=0,w=0,_;l.cmpn(-m)>0||u.cmpn(-w)>0;){var C=l.andln(3)+m&3,N=u.andln(3)+w&3;C===3&&(C=-1),N===3&&(N=-1);var P;C&1?(_=l.andln(7)+m&7,(_===3||_===5)&&N===2?P=-C:P=C):P=0,p[0].push(P);var M;N&1?(_=u.andln(7)+w&7,(_===3||_===5)&&C===2?M=-N:M=N):M=0,p[1].push(M),2*m===P+1&&(m=1-m),2*w===M+1&&(w=1-w),l.iushrn(1),u.iushrn(1)}return p}n.getJSF=f;function c(l,u,p){var m="_"+u;l.prototype[u]=function(){return this[m]!==void 0?this[m]:this[m]=p.call(this)}}n.cachedProperty=c;function h(l){return typeof l=="string"?n.toArray(l,"hex"):l}n.parseBytes=h;function v(l){return new a(l,"hex","le")}n.intFromLE=v},{"bn.js":139,"minimalistic-assert":241,"minimalistic-crypto-utils":242}],206:[function(e,i,t){i.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],207:[function(e,i,t){var n=typeof Reflect=="object"?Reflect:null,a=n&&typeof n.apply=="function"?n.apply:function(q,Z,re){return Function.prototype.apply.call(q,Z,re)},o;n&&typeof n.ownKeys=="function"?o=n.ownKeys:Object.getOwnPropertySymbols?o=function(q){return Object.getOwnPropertyNames(q).concat(Object.getOwnPropertySymbols(q))}:o=function(q){return Object.getOwnPropertyNames(q)};function d(W){console&&console.warn&&console.warn(W)}var s=Number.isNaN||function(q){return q!==q};function f(){f.init.call(this)}i.exports=f,i.exports.once=P,f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var c=10;function h(W){if(typeof W!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof W)}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(W){if(typeof W!="number"||W<0||s(W))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+W+".");c=W}}),f.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(q){if(typeof q!="number"||q<0||s(q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+q+".");return this._maxListeners=q,this};function v(W){return W._maxListeners===void 0?f.defaultMaxListeners:W._maxListeners}f.prototype.getMaxListeners=function(){return v(this)},f.prototype.emit=function(q){for(var Z=[],re=1;re<arguments.length;re++)Z.push(arguments[re]);var Y=q==="error",O=this._events;if(O!==void 0)Y=Y&&O.error===void 0;else if(!Y)return!1;if(Y){var x;if(Z.length>0&&(x=Z[0]),x instanceof Error)throw x;var S=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw S.context=x,S}var k=O[q];if(k===void 0)return!1;if(typeof k=="function")a(k,this,Z);else for(var g=k.length,E=_(k,g),re=0;re<g;++re)a(E[re],this,Z);return!0};function l(W,q,Z,re){var Y,O,x;if(h(Z),O=W._events,O===void 0?(O=W._events=Object.create(null),W._eventsCount=0):(O.newListener!==void 0&&(W.emit("newListener",q,Z.listener?Z.listener:Z),O=W._events),x=O[q]),x===void 0)x=O[q]=Z,++W._eventsCount;else if(typeof x=="function"?x=O[q]=re?[Z,x]:[x,Z]:re?x.unshift(Z):x.push(Z),Y=v(W),Y>0&&x.length>Y&&!x.warned){x.warned=!0;var S=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(q)+" listeners added. Use emitter.setMaxListeners() to increase limit");S.name="MaxListenersExceededWarning",S.emitter=W,S.type=q,S.count=x.length,d(S)}return W}f.prototype.addListener=function(q,Z){return l(this,q,Z,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(q,Z){return l(this,q,Z,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(W,q,Z){var re={fired:!1,wrapFn:void 0,target:W,type:q,listener:Z},Y=u.bind(re);return Y.listener=Z,re.wrapFn=Y,Y}f.prototype.once=function(q,Z){return h(Z),this.on(q,p(this,q,Z)),this},f.prototype.prependOnceListener=function(q,Z){return h(Z),this.prependListener(q,p(this,q,Z)),this},f.prototype.removeListener=function(q,Z){var re,Y,O,x,S;if(h(Z),Y=this._events,Y===void 0)return this;if(re=Y[q],re===void 0)return this;if(re===Z||re.listener===Z)--this._eventsCount===0?this._events=Object.create(null):(delete Y[q],Y.removeListener&&this.emit("removeListener",q,re.listener||Z));else if(typeof re!="function"){for(O=-1,x=re.length-1;x>=0;x--)if(re[x]===Z||re[x].listener===Z){S=re[x].listener,O=x;break}if(O<0)return this;O===0?re.shift():C(re,O),re.length===1&&(Y[q]=re[0]),Y.removeListener!==void 0&&this.emit("removeListener",q,S||Z)}return this},f.prototype.off=f.prototype.removeListener,f.prototype.removeAllListeners=function(q){var Z,re,Y;if(re=this._events,re===void 0)return this;if(re.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):re[q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete re[q]),this;if(arguments.length===0){var O=Object.keys(re),x;for(Y=0;Y<O.length;++Y)x=O[Y],x!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Z=re[q],typeof Z=="function")this.removeListener(q,Z);else if(Z!==void 0)for(Y=Z.length-1;Y>=0;Y--)this.removeListener(q,Z[Y]);return this};function m(W,q,Z){var re=W._events;if(re===void 0)return[];var Y=re[q];return Y===void 0?[]:typeof Y=="function"?Z?[Y.listener||Y]:[Y]:Z?N(Y):_(Y,Y.length)}f.prototype.listeners=function(q){return m(this,q,!0)},f.prototype.rawListeners=function(q){return m(this,q,!1)},f.listenerCount=function(W,q){return typeof W.listenerCount=="function"?W.listenerCount(q):w.call(W,q)},f.prototype.listenerCount=w;function w(W){var q=this._events;if(q!==void 0){var Z=q[W];if(typeof Z=="function")return 1;if(Z!==void 0)return Z.length}return 0}f.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function _(W,q){for(var Z=new Array(q),re=0;re<q;++re)Z[re]=W[re];return Z}function C(W,q){for(;q+1<W.length;q++)W[q]=W[q+1];W.pop()}function N(W){for(var q=new Array(W.length),Z=0;Z<q.length;++Z)q[Z]=W[Z].listener||W[Z];return q}function P(W,q){return new Promise(function(Z,re){function Y(x){W.removeListener(q,O),re(x)}function O(){typeof W.removeListener=="function"&&W.removeListener("error",Y),Z([].slice.call(arguments))}U(W,q,O,{once:!0}),q!=="error"&&M(W,Y,{once:!0})})}function M(W,q,Z){typeof W.on=="function"&&U(W,"error",q,Z)}function U(W,q,Z,re){if(typeof W.on=="function")re.once?W.once(q,Z):W.on(q,Z);else if(typeof W.addEventListener=="function")W.addEventListener(q,function Y(O){re.once&&W.removeEventListener(q,Y),Z(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof W)}},{}],208:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("md5.js");function o(d,s,f,c){if(n.isBuffer(d)||(d=n.from(d,"binary")),s&&(n.isBuffer(s)||(s=n.from(s,"binary")),s.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var h=f/8,v=n.alloc(h),l=n.alloc(c||0),u=n.alloc(0);h>0||c>0;){var p=new a;p.update(u),p.update(d),s&&p.update(s),u=p.digest();var m=0;if(h>0){var w=v.length-h;m=Math.min(h,u.length),u.copy(v,w,0,m),h-=m}if(m<u.length&&c>0){var _=l.length-c,C=Math.min(c,u.length-m);u.copy(l,_,m,m+C),c-=C}}return u.fill(0),{key:v,iv:l}}i.exports=o},{"md5.js":239,"safe-buffer":279}],209:[function(e,i,t){var n=e("is-callable"),a=Object.prototype.toString,o=Object.prototype.hasOwnProperty,d=function(v,l,u){for(var p=0,m=v.length;p<m;p++)o.call(v,p)&&(u==null?l(v[p],p,v):l.call(u,v[p],p,v))},s=function(v,l,u){for(var p=0,m=v.length;p<m;p++)u==null?l(v.charAt(p),p,v):l.call(u,v.charAt(p),p,v)},f=function(v,l,u){for(var p in v)o.call(v,p)&&(u==null?l(v[p],p,v):l.call(u,v[p],p,v))},c=function(v,l,u){if(!n(l))throw new TypeError("iterator must be a function");var p;arguments.length>=3&&(p=u),a.call(v)==="[object Array]"?d(v,l,p):typeof v=="string"?s(v,l,p):f(v,l,p)};i.exports=c},{"is-callable":236}],210:[function(e,i,t){var n="Function.prototype.bind called on incompatible ",a=Array.prototype.slice,o=Object.prototype.toString,d="[object Function]";i.exports=function(f){var c=this;if(typeof c!="function"||o.call(c)!==d)throw new TypeError(n+c);for(var h=a.call(arguments,1),v,l=function(){if(this instanceof v){var _=c.apply(this,h.concat(a.call(arguments)));return Object(_)===_?_:this}else return c.apply(f,h.concat(a.call(arguments)))},u=Math.max(0,c.length-h.length),p=[],m=0;m<u;m++)p.push("$"+m);if(v=Function("binder","return function ("+p.join(",")+"){ return binder.apply(this,arguments); }")(l),c.prototype){var w=function(){};w.prototype=c.prototype,v.prototype=new w,w.prototype=null}return v}},{}],211:[function(e,i,t){var n=e("./implementation");i.exports=Function.prototype.bind||n},{"./implementation":210}],212:[function(e,i,t){var n,a=SyntaxError,o=Function,d=TypeError,s=function(S){try{return o('"use strict"; return ('+S+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var c=function(){throw new d},h=f?function(){try{return arguments.callee,c}catch{try{return f(arguments,"callee").get}catch{return c}}}():c,v=e("has-symbols")(),l=Object.getPrototypeOf||function(S){return S.__proto__},u={},p=typeof Uint8Array>"u"?n:l(Uint8Array),m={"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":v?l([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":u,"%AsyncGenerator%":u,"%AsyncGeneratorFunction%":u,"%AsyncIteratorPrototype%":u,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":u,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":v?l(l([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!v?n:l(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!v?n:l(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":v?l(""[Symbol.iterator]()):n,"%Symbol%":v?Symbol:n,"%SyntaxError%":a,"%ThrowTypeError%":h,"%TypedArray%":p,"%TypeError%":d,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet};try{null.error}catch(S){var w=l(l(S));m["%Error.prototype%"]=w}var _=function S(k){var g;if(k==="%AsyncFunction%")g=s("async function () {}");else if(k==="%GeneratorFunction%")g=s("function* () {}");else if(k==="%AsyncGeneratorFunction%")g=s("async function* () {}");else if(k==="%AsyncGenerator%"){var E=S("%AsyncGeneratorFunction%");E&&(g=E.prototype)}else if(k==="%AsyncIteratorPrototype%"){var T=S("%AsyncGenerator%");T&&(g=l(T.prototype))}return m[k]=g,g},C={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},N=e("function-bind"),P=e("has"),M=N.call(Function.call,Array.prototype.concat),U=N.call(Function.apply,Array.prototype.splice),W=N.call(Function.call,String.prototype.replace),q=N.call(Function.call,String.prototype.slice),Z=N.call(Function.call,RegExp.prototype.exec),re=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Y=/\\(\\)?/g,O=function(k){var g=q(k,0,1),E=q(k,-1);if(g==="%"&&E!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(E==="%"&&g!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var T=[];return W(k,re,function(A,J,G,I){T[T.length]=G?W(I,Y,"$1"):J||A}),T},x=function(k,g){var E=k,T;if(P(C,E)&&(T=C[E],E="%"+T[0]+"%"),P(m,E)){var A=m[E];if(A===u&&(A=_(E)),typeof A>"u"&&!g)throw new d("intrinsic "+k+" exists, but is not available. Please file an issue!");return{alias:T,name:E,value:A}}throw new a("intrinsic "+k+" does not exist!")};i.exports=function(k,g){if(typeof k!="string"||k.length===0)throw new d("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof g!="boolean")throw new d('"allowMissing" argument must be a boolean');if(Z(/^%?[^%]*%?$/,k)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var E=O(k),T=E.length>0?E[0]:"",A=x("%"+T+"%",g),J=A.name,G=A.value,I=!1,V=A.alias;V&&(T=V[0],U(E,M([0,1],V)));for(var B=1,z=!0;B<E.length;B+=1){var ie=E[B],de=q(ie,0,1),me=q(ie,-1);if((de==='"'||de==="'"||de==="`"||me==='"'||me==="'"||me==="`")&&de!==me)throw new a("property names with quotes must have matching quotes");if((ie==="constructor"||!z)&&(I=!0),T+="."+ie,J="%"+T+"%",P(m,J))G=m[J];else if(G!=null){if(!(ie in G)){if(!g)throw new d("base intrinsic for "+k+" exists, but the property is not available.");return}if(f&&B+1>=E.length){var be=f(G,ie);z=!!be,z&&"get"in be&&!("originalValue"in be.get)?G=be.get:G=G[ie]}else z=P(G,ie),G=G[ie];z&&!I&&(m[J]=G)}}return G}},{"function-bind":211,has:217,"has-symbols":214}],213:[function(e,i,t){var n=e("get-intrinsic"),a=n("%Object.getOwnPropertyDescriptor%",!0);if(a)try{a([],"length")}catch{a=null}i.exports=a},{"get-intrinsic":212}],214:[function(e,i,t){var n=typeof Symbol<"u"&&Symbol,a=e("./shams");i.exports=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:a()}},{"./shams":215}],215:[function(e,i,t){i.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var a={},o=Symbol("test"),d=Object(o);if(typeof o=="string"||Object.prototype.toString.call(o)!=="[object Symbol]"||Object.prototype.toString.call(d)!=="[object Symbol]")return!1;var s=42;a[o]=s;for(o in a)return!1;if(typeof Object.keys=="function"&&Object.keys(a).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(a).length!==0)return!1;var f=Object.getOwnPropertySymbols(a);if(f.length!==1||f[0]!==o||!Object.prototype.propertyIsEnumerable.call(a,o))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(a,o);if(c.value!==s||c.enumerable!==!0)return!1}return!0}},{}],216:[function(e,i,t){var n=e("has-symbols/shams");i.exports=function(){return n()&&!!Symbol.toStringTag}},{"has-symbols/shams":215}],217:[function(e,i,t){var n=e("function-bind");i.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":211}],218:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("readable-stream").Transform,o=e("inherits");function d(f,c){if(!n.isBuffer(f)&&typeof f!="string")throw new TypeError(c+" must be a string or a buffer")}function s(f){a.call(this),this._block=n.allocUnsafe(f),this._blockSize=f,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}o(s,a),s.prototype._transform=function(f,c,h){var v=null;try{this.update(f,c)}catch(l){v=l}h(v)},s.prototype._flush=function(f){var c=null;try{this.push(this.digest())}catch(h){c=h}f(c)},s.prototype.update=function(f,c){if(d(f,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(f)||(f=n.from(f,c));for(var h=this._block,v=0;this._blockOffset+f.length-v>=this._blockSize;){for(var l=this._blockOffset;l<this._blockSize;)h[l++]=f[v++];this._update(),this._blockOffset=0}for(;v<f.length;)h[this._blockOffset++]=f[v++];for(var u=0,p=f.length*8;p>0;++u)this._length[u]+=p,p=this._length[u]/4294967296|0,p>0&&(this._length[u]-=4294967296*p);return this},s.prototype._update=function(){throw new Error("_update is not implemented")},s.prototype.digest=function(f){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var c=this._digest();f!==void 0&&(c=c.toString(f)),this._block.fill(0),this._blockOffset=0;for(var h=0;h<4;++h)this._length[h]=0;return c},s.prototype._digest=function(){throw new Error("_digest is not implemented")},i.exports=s},{inherits:233,"readable-stream":277,"safe-buffer":279}],219:[function(e,i,t){var n=t;n.utils=e("./hash/utils"),n.common=e("./hash/common"),n.sha=e("./hash/sha"),n.ripemd=e("./hash/ripemd"),n.hmac=e("./hash/hmac"),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},{"./hash/common":220,"./hash/hmac":221,"./hash/ripemd":222,"./hash/sha":223,"./hash/utils":230}],220:[function(e,i,t){var n=e("./utils"),a=e("minimalistic-assert");function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=o,o.prototype.update=function(s,f){if(s=n.toArray(s,f),this.pending?this.pending=this.pending.concat(s):this.pending=s,this.pendingTotal+=s.length,this.pending.length>=this._delta8){s=this.pending;var c=s.length%this._delta8;this.pending=s.slice(s.length-c,s.length),this.pending.length===0&&(this.pending=null),s=n.join32(s,0,s.length-c,this.endian);for(var h=0;h<s.length;h+=this._delta32)this._update(s,h,h+this._delta32)}return this},o.prototype.digest=function(s){return this.update(this._pad()),a(this.pending===null),this._digest(s)},o.prototype._pad=function(){var s=this.pendingTotal,f=this._delta8,c=f-(s+this.padLength)%f,h=new Array(c+this.padLength);h[0]=128;for(var v=1;v<c;v++)h[v]=0;if(s<<=3,this.endian==="big"){for(var l=8;l<this.padLength;l++)h[v++]=0;h[v++]=0,h[v++]=0,h[v++]=0,h[v++]=0,h[v++]=s>>>24&255,h[v++]=s>>>16&255,h[v++]=s>>>8&255,h[v++]=s&255}else for(h[v++]=s&255,h[v++]=s>>>8&255,h[v++]=s>>>16&255,h[v++]=s>>>24&255,h[v++]=0,h[v++]=0,h[v++]=0,h[v++]=0,l=8;l<this.padLength;l++)h[v++]=0;return h}},{"./utils":230,"minimalistic-assert":241}],221:[function(e,i,t){var n=e("./utils"),a=e("minimalistic-assert");function o(d,s,f){if(!(this instanceof o))return new o(d,s,f);this.Hash=d,this.blockSize=d.blockSize/8,this.outSize=d.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(s,f))}i.exports=o,o.prototype._init=function(s){s.length>this.blockSize&&(s=new this.Hash().update(s).digest()),a(s.length<=this.blockSize);for(var f=s.length;f<this.blockSize;f++)s.push(0);for(f=0;f<s.length;f++)s[f]^=54;for(this.inner=new this.Hash().update(s),f=0;f<s.length;f++)s[f]^=106;this.outer=new this.Hash().update(s)},o.prototype.update=function(s,f){return this.inner.update(s,f),this},o.prototype.digest=function(s){return this.outer.update(this.inner.digest()),this.outer.digest(s)}},{"./utils":230,"minimalistic-assert":241}],222:[function(e,i,t){var n=e("./utils"),a=e("./common"),o=n.rotl32,d=n.sum32,s=n.sum32_3,f=n.sum32_4,c=a.BlockHash;function h(){if(!(this instanceof h))return new h;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}n.inherits(h,c),t.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(N,P){for(var M=this.h[0],U=this.h[1],W=this.h[2],q=this.h[3],Z=this.h[4],re=M,Y=U,O=W,x=q,S=Z,k=0;k<80;k++){var g=d(o(f(M,v(k,U,W,q),N[p[k]+P],l(k)),w[k]),Z);M=Z,Z=q,q=o(W,10),W=U,U=g,g=d(o(f(re,v(79-k,Y,O,x),N[m[k]+P],u(k)),_[k]),S),re=S,S=x,x=o(O,10),O=Y,Y=g}g=s(this.h[1],W,x),this.h[1]=s(this.h[2],q,S),this.h[2]=s(this.h[3],Z,re),this.h[3]=s(this.h[4],M,Y),this.h[4]=s(this.h[0],U,O),this.h[0]=g},h.prototype._digest=function(N){return N==="hex"?n.toHex32(this.h,"little"):n.split32(this.h,"little")};function v(C,N,P,M){return C<=15?N^P^M:C<=31?N&P|~N&M:C<=47?(N|~P)^M:C<=63?N&M|P&~M:N^(P|~M)}function l(C){return C<=15?0:C<=31?1518500249:C<=47?1859775393:C<=63?2400959708:2840853838}function u(C){return C<=15?1352829926:C<=31?1548603684:C<=47?1836072691:C<=63?2053994217:0}var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],w=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],_=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":220,"./utils":230}],223:[function(e,i,t){t.sha1=e("./sha/1"),t.sha224=e("./sha/224"),t.sha256=e("./sha/256"),t.sha384=e("./sha/384"),t.sha512=e("./sha/512")},{"./sha/1":224,"./sha/224":225,"./sha/256":226,"./sha/384":227,"./sha/512":228}],224:[function(e,i,t){var n=e("../utils"),a=e("../common"),o=e("./common"),d=n.rotl32,s=n.sum32,f=n.sum32_5,c=o.ft_1,h=a.BlockHash,v=[1518500249,1859775393,2400959708,3395469782];function l(){if(!(this instanceof l))return new l;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(l,h),i.exports=l,l.blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(p,m){for(var w=this.W,_=0;_<16;_++)w[_]=p[m+_];for(;_<w.length;_++)w[_]=d(w[_-3]^w[_-8]^w[_-14]^w[_-16],1);var C=this.h[0],N=this.h[1],P=this.h[2],M=this.h[3],U=this.h[4];for(_=0;_<w.length;_++){var W=~~(_/20),q=f(d(C,5),c(W,N,P,M),U,w[_],v[W]);U=M,M=P,P=d(N,30),N=C,C=q}this.h[0]=s(this.h[0],C),this.h[1]=s(this.h[1],N),this.h[2]=s(this.h[2],P),this.h[3]=s(this.h[3],M),this.h[4]=s(this.h[4],U)},l.prototype._digest=function(p){return p==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":220,"../utils":230,"./common":229}],225:[function(e,i,t){var n=e("../utils"),a=e("./256");function o(){if(!(this instanceof o))return new o;a.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,a),i.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(s){return s==="hex"?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},{"../utils":230,"./256":226}],226:[function(e,i,t){var n=e("../utils"),a=e("../common"),o=e("./common"),d=e("minimalistic-assert"),s=n.sum32,f=n.sum32_4,c=n.sum32_5,h=o.ch32,v=o.maj32,l=o.s0_256,u=o.s1_256,p=o.g0_256,m=o.g1_256,w=a.BlockHash,_=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function C(){if(!(this instanceof C))return new C;w.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=_,this.W=new Array(64)}n.inherits(C,w),i.exports=C,C.blockSize=512,C.outSize=256,C.hmacStrength=192,C.padLength=64,C.prototype._update=function(P,M){for(var U=this.W,W=0;W<16;W++)U[W]=P[M+W];for(;W<U.length;W++)U[W]=f(m(U[W-2]),U[W-7],p(U[W-15]),U[W-16]);var q=this.h[0],Z=this.h[1],re=this.h[2],Y=this.h[3],O=this.h[4],x=this.h[5],S=this.h[6],k=this.h[7];for(d(this.k.length===U.length),W=0;W<U.length;W++){var g=c(k,u(O),h(O,x,S),this.k[W],U[W]),E=s(l(q),v(q,Z,re));k=S,S=x,x=O,O=s(Y,g),Y=re,re=Z,Z=q,q=s(g,E)}this.h[0]=s(this.h[0],q),this.h[1]=s(this.h[1],Z),this.h[2]=s(this.h[2],re),this.h[3]=s(this.h[3],Y),this.h[4]=s(this.h[4],O),this.h[5]=s(this.h[5],x),this.h[6]=s(this.h[6],S),this.h[7]=s(this.h[7],k)},C.prototype._digest=function(P){return P==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":220,"../utils":230,"./common":229,"minimalistic-assert":241}],227:[function(e,i,t){var n=e("../utils"),a=e("./512");function o(){if(!(this instanceof o))return new o;a.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,a),i.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(s){return s==="hex"?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},{"../utils":230,"./512":228}],228:[function(e,i,t){var n=e("../utils"),a=e("../common"),o=e("minimalistic-assert"),d=n.rotr64_hi,s=n.rotr64_lo,f=n.shr64_hi,c=n.shr64_lo,h=n.sum64,v=n.sum64_hi,l=n.sum64_lo,u=n.sum64_4_hi,p=n.sum64_4_lo,m=n.sum64_5_hi,w=n.sum64_5_lo,_=a.BlockHash,C=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function N(){if(!(this instanceof N))return new N;_.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=C,this.W=new Array(160)}n.inherits(N,_),i.exports=N,N.blockSize=1024,N.outSize=512,N.hmacStrength=192,N.padLength=128,N.prototype._prepareBlock=function(E,T){for(var A=this.W,J=0;J<32;J++)A[J]=E[T+J];for(;J<A.length;J+=2){var G=S(A[J-4],A[J-3]),I=k(A[J-4],A[J-3]),V=A[J-14],B=A[J-13],z=O(A[J-30],A[J-29]),ie=x(A[J-30],A[J-29]),de=A[J-32],me=A[J-31];A[J]=u(G,I,V,B,z,ie,de,me),A[J+1]=p(G,I,V,B,z,ie,de,me)}},N.prototype._update=function(E,T){this._prepareBlock(E,T);var A=this.W,J=this.h[0],G=this.h[1],I=this.h[2],V=this.h[3],B=this.h[4],z=this.h[5],ie=this.h[6],de=this.h[7],me=this.h[8],be=this.h[9],we=this.h[10],oe=this.h[11],ce=this.h[12],ge=this.h[13],ke=this.h[14],le=this.h[15];o(this.k.length===A.length);for(var te=0;te<A.length;te+=2){var ee=ke,Q=le,F=re(me,be),$=Y(me,be),X=P(me,be,we,oe,ce),se=M(me,be,we,oe,ce,ge),ve=this.k[te],Se=this.k[te+1],ue=A[te],y=A[te+1],L=m(ee,Q,F,$,X,se,ve,Se,ue,y),H=w(ee,Q,F,$,X,se,ve,Se,ue,y);ee=q(J,G),Q=Z(J,G),F=U(J,G,I,V,B),$=W(J,G,I,V,B,z);var fe=v(ee,Q,F,$),j=l(ee,Q,F,$);ke=ce,le=ge,ce=we,ge=oe,we=me,oe=be,me=v(ie,de,L,H),be=l(de,de,L,H),ie=B,de=z,B=I,z=V,I=J,V=G,J=v(L,H,fe,j),G=l(L,H,fe,j)}h(this.h,0,J,G),h(this.h,2,I,V),h(this.h,4,B,z),h(this.h,6,ie,de),h(this.h,8,me,be),h(this.h,10,we,oe),h(this.h,12,ce,ge),h(this.h,14,ke,le)},N.prototype._digest=function(E){return E==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")};function P(g,E,T,A,J){var G=g&T^~g&J;return G<0&&(G+=4294967296),G}function M(g,E,T,A,J,G){var I=E&A^~E&G;return I<0&&(I+=4294967296),I}function U(g,E,T,A,J){var G=g&T^g&J^T&J;return G<0&&(G+=4294967296),G}function W(g,E,T,A,J,G){var I=E&A^E&G^A&G;return I<0&&(I+=4294967296),I}function q(g,E){var T=d(g,E,28),A=d(E,g,2),J=d(E,g,7),G=T^A^J;return G<0&&(G+=4294967296),G}function Z(g,E){var T=s(g,E,28),A=s(E,g,2),J=s(E,g,7),G=T^A^J;return G<0&&(G+=4294967296),G}function re(g,E){var T=d(g,E,14),A=d(g,E,18),J=d(E,g,9),G=T^A^J;return G<0&&(G+=4294967296),G}function Y(g,E){var T=s(g,E,14),A=s(g,E,18),J=s(E,g,9),G=T^A^J;return G<0&&(G+=4294967296),G}function O(g,E){var T=d(g,E,1),A=d(g,E,8),J=f(g,E,7),G=T^A^J;return G<0&&(G+=4294967296),G}function x(g,E){var T=s(g,E,1),A=s(g,E,8),J=c(g,E,7),G=T^A^J;return G<0&&(G+=4294967296),G}function S(g,E){var T=d(g,E,19),A=d(E,g,29),J=f(g,E,6),G=T^A^J;return G<0&&(G+=4294967296),G}function k(g,E){var T=s(g,E,19),A=s(E,g,29),J=c(g,E,6),G=T^A^J;return G<0&&(G+=4294967296),G}},{"../common":220,"../utils":230,"minimalistic-assert":241}],229:[function(e,i,t){var n=e("../utils"),a=n.rotr32;function o(u,p,m,w){if(u===0)return d(p,m,w);if(u===1||u===3)return f(p,m,w);if(u===2)return s(p,m,w)}t.ft_1=o;function d(u,p,m){return u&p^~u&m}t.ch32=d;function s(u,p,m){return u&p^u&m^p&m}t.maj32=s;function f(u,p,m){return u^p^m}t.p32=f;function c(u){return a(u,2)^a(u,13)^a(u,22)}t.s0_256=c;function h(u){return a(u,6)^a(u,11)^a(u,25)}t.s1_256=h;function v(u){return a(u,7)^a(u,18)^u>>>3}t.g0_256=v;function l(u){return a(u,17)^a(u,19)^u>>>10}t.g1_256=l},{"../utils":230}],230:[function(e,i,t){var n=e("minimalistic-assert"),a=e("inherits");t.inherits=a;function o(k,g){return(k.charCodeAt(g)&64512)!==55296||g<0||g+1>=k.length?!1:(k.charCodeAt(g+1)&64512)===56320}function d(k,g){if(Array.isArray(k))return k.slice();if(!k)return[];var E=[];if(typeof k=="string")if(g){if(g==="hex")for(k=k.replace(/[^a-z0-9]+/ig,""),k.length%2!==0&&(k="0"+k),A=0;A<k.length;A+=2)E.push(parseInt(k[A]+k[A+1],16))}else for(var T=0,A=0;A<k.length;A++){var J=k.charCodeAt(A);J<128?E[T++]=J:J<2048?(E[T++]=J>>6|192,E[T++]=J&63|128):o(k,A)?(J=65536+((J&1023)<<10)+(k.charCodeAt(++A)&1023),E[T++]=J>>18|240,E[T++]=J>>12&63|128,E[T++]=J>>6&63|128,E[T++]=J&63|128):(E[T++]=J>>12|224,E[T++]=J>>6&63|128,E[T++]=J&63|128)}else for(A=0;A<k.length;A++)E[A]=k[A]|0;return E}t.toArray=d;function s(k){for(var g="",E=0;E<k.length;E++)g+=h(k[E].toString(16));return g}t.toHex=s;function f(k){var g=k>>>24|k>>>8&65280|k<<8&16711680|(k&255)<<24;return g>>>0}t.htonl=f;function c(k,g){for(var E="",T=0;T<k.length;T++){var A=k[T];g==="little"&&(A=f(A)),E+=v(A.toString(16))}return E}t.toHex32=c;function h(k){return k.length===1?"0"+k:k}t.zero2=h;function v(k){return k.length===7?"0"+k:k.length===6?"00"+k:k.length===5?"000"+k:k.length===4?"0000"+k:k.length===3?"00000"+k:k.length===2?"000000"+k:k.length===1?"0000000"+k:k}t.zero8=v;function l(k,g,E,T){var A=E-g;n(A%4===0);for(var J=new Array(A/4),G=0,I=g;G<J.length;G++,I+=4){var V;T==="big"?V=k[I]<<24|k[I+1]<<16|k[I+2]<<8|k[I+3]:V=k[I+3]<<24|k[I+2]<<16|k[I+1]<<8|k[I],J[G]=V>>>0}return J}t.join32=l;function u(k,g){for(var E=new Array(k.length*4),T=0,A=0;T<k.length;T++,A+=4){var J=k[T];g==="big"?(E[A]=J>>>24,E[A+1]=J>>>16&255,E[A+2]=J>>>8&255,E[A+3]=J&255):(E[A+3]=J>>>24,E[A+2]=J>>>16&255,E[A+1]=J>>>8&255,E[A]=J&255)}return E}t.split32=u;function p(k,g){return k>>>g|k<<32-g}t.rotr32=p;function m(k,g){return k<<g|k>>>32-g}t.rotl32=m;function w(k,g){return k+g>>>0}t.sum32=w;function _(k,g,E){return k+g+E>>>0}t.sum32_3=_;function C(k,g,E,T){return k+g+E+T>>>0}t.sum32_4=C;function N(k,g,E,T,A){return k+g+E+T+A>>>0}t.sum32_5=N;function P(k,g,E,T){var A=k[g],J=k[g+1],G=T+J>>>0,I=(G<T?1:0)+E+A;k[g]=I>>>0,k[g+1]=G}t.sum64=P;function M(k,g,E,T){var A=g+T>>>0,J=(A<g?1:0)+k+E;return J>>>0}t.sum64_hi=M;function U(k,g,E,T){var A=g+T;return A>>>0}t.sum64_lo=U;function W(k,g,E,T,A,J,G,I){var V=0,B=g;B=B+T>>>0,V+=B<g?1:0,B=B+J>>>0,V+=B<J?1:0,B=B+I>>>0,V+=B<I?1:0;var z=k+E+A+G+V;return z>>>0}t.sum64_4_hi=W;function q(k,g,E,T,A,J,G,I){var V=g+T+J+I;return V>>>0}t.sum64_4_lo=q;function Z(k,g,E,T,A,J,G,I,V,B){var z=0,ie=g;ie=ie+T>>>0,z+=ie<g?1:0,ie=ie+J>>>0,z+=ie<J?1:0,ie=ie+I>>>0,z+=ie<I?1:0,ie=ie+B>>>0,z+=ie<B?1:0;var de=k+E+A+G+V+z;return de>>>0}t.sum64_5_hi=Z;function re(k,g,E,T,A,J,G,I,V,B){var z=g+T+J+I+B;return z>>>0}t.sum64_5_lo=re;function Y(k,g,E){var T=g<<32-E|k>>>E;return T>>>0}t.rotr64_hi=Y;function O(k,g,E){var T=k<<32-E|g>>>E;return T>>>0}t.rotr64_lo=O;function x(k,g,E){return k>>>E}t.shr64_hi=x;function S(k,g,E){var T=k<<32-E|g>>>E;return T>>>0}t.shr64_lo=S},{inherits:233,"minimalistic-assert":241}],231:[function(e,i,t){var n=e("hash.js"),a=e("minimalistic-crypto-utils"),o=e("minimalistic-assert");function d(s){if(!(this instanceof d))return new d(s);this.hash=s.hash,this.predResist=!!s.predResist,this.outLen=this.hash.outSize,this.minEntropy=s.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var f=a.toArray(s.entropy,s.entropyEnc||"hex"),c=a.toArray(s.nonce,s.nonceEnc||"hex"),h=a.toArray(s.pers,s.persEnc||"hex");o(f.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(f,c,h)}i.exports=d,d.prototype._init=function(f,c,h){var v=f.concat(c).concat(h);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var l=0;l<this.V.length;l++)this.K[l]=0,this.V[l]=1;this._update(v),this._reseed=1,this.reseedInterval=281474976710656},d.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},d.prototype._update=function(f){var c=this._hmac().update(this.V).update([0]);f&&(c=c.update(f)),this.K=c.digest(),this.V=this._hmac().update(this.V).digest(),f&&(this.K=this._hmac().update(this.V).update([1]).update(f).digest(),this.V=this._hmac().update(this.V).digest())},d.prototype.reseed=function(f,c,h,v){typeof c!="string"&&(v=h,h=c,c=null),f=a.toArray(f,c),h=a.toArray(h,v),o(f.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(f.concat(h||[])),this._reseed=1},d.prototype.generate=function(f,c,h,v){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof c!="string"&&(v=h,h=c,c=null),h&&(h=a.toArray(h,v||"hex"),this._update(h));for(var l=[];l.length<f;)this.V=this._hmac().update(this.V).digest(),l=l.concat(this.V);var u=l.slice(0,f);return this._update(h),this._reseed++,a.encode(u,c)}},{"hash.js":219,"minimalistic-assert":241,"minimalistic-crypto-utils":242}],232:[function(e,i,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(n,a,o,d,s){var f,c,h=s*8-d-1,v=(1<<h)-1,l=v>>1,u=-7,p=o?s-1:0,m=o?-1:1,w=n[a+p];for(p+=m,f=w&(1<<-u)-1,w>>=-u,u+=h;u>0;f=f*256+n[a+p],p+=m,u-=8);for(c=f&(1<<-u)-1,f>>=-u,u+=d;u>0;c=c*256+n[a+p],p+=m,u-=8);if(f===0)f=1-l;else{if(f===v)return c?NaN:(w?-1:1)*(1/0);c=c+Math.pow(2,d),f=f-l}return(w?-1:1)*c*Math.pow(2,f-d)},t.write=function(n,a,o,d,s,f){var c,h,v,l=f*8-s-1,u=(1<<l)-1,p=u>>1,m=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=d?0:f-1,_=d?1:-1,C=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(h=isNaN(a)?1:0,c=u):(c=Math.floor(Math.log(a)/Math.LN2),a*(v=Math.pow(2,-c))<1&&(c--,v*=2),c+p>=1?a+=m/v:a+=m*Math.pow(2,1-p),a*v>=2&&(c++,v/=2),c+p>=u?(h=0,c=u):c+p>=1?(h=(a*v-1)*Math.pow(2,s),c=c+p):(h=a*Math.pow(2,p-1)*Math.pow(2,s),c=0));s>=8;n[o+w]=h&255,w+=_,h/=256,s-=8);for(c=c<<s|h,l+=s;l>0;n[o+w]=c&255,w+=_,c/=256,l-=8);n[o+w-_]|=C*128}},{}],233:[function(e,i,t){arguments[4][47][0].apply(t,arguments)},{dup:47}],234:[function(e,i,t){var n=e("has-tostringtag/shams")(),a=e("call-bind/callBound"),o=a("Object.prototype.toString"),d=function(h){return n&&h&&typeof h=="object"&&Symbol.toStringTag in h?!1:o(h)==="[object Arguments]"},s=function(h){return d(h)?!0:h!==null&&typeof h=="object"&&typeof h.length=="number"&&h.length>=0&&o(h)!=="[object Array]"&&o(h.callee)==="[object Function]"},f=function(){return d(arguments)}();d.isLegacyArguments=s,i.exports=f?d:s},{"call-bind/callBound":172,"has-tostringtag/shams":216}],235:[function(e,i,t){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */i.exports=function(o){return o!=null&&(n(o)||a(o)||!!o._isBuffer)};function n(o){return!!o.constructor&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o)}function a(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&n(o.slice(0,0))}},{}],236:[function(e,i,t){var n=Function.prototype.toString,a=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,o,d;if(typeof a=="function"&&typeof Object.defineProperty=="function")try{o=Object.defineProperty({},"length",{get:function(){throw d}}),d={},a(function(){throw 42},null,o)}catch(M){M!==d&&(a=null)}else a=null;var s=/^\s*class\b/,f=function(U){try{var W=n.call(U);return s.test(W)}catch{return!1}},c=function(U){try{return f(U)?!1:(n.call(U),!0)}catch{return!1}},h=Object.prototype.toString,v="[object Object]",l="[object Function]",u="[object GeneratorFunction]",p="[object HTMLAllCollection]",m="[object HTML document.all class]",w="[object HTMLCollection]",_=typeof Symbol=="function"&&!!Symbol.toStringTag,C=!(0 in[,]),N=function(){return!1};if(typeof document=="object"){var P=document.all;h.call(P)===h.call(document.all)&&(N=function(U){if((C||!U)&&(typeof U>"u"||typeof U=="object"))try{var W=h.call(U);return(W===p||W===m||W===w||W===v)&&U("")==null}catch{}return!1})}i.exports=a?function(U){if(N(U))return!0;if(!U||typeof U!="function"&&typeof U!="object")return!1;try{a(U,null,o)}catch(W){if(W!==d)return!1}return!f(U)&&c(U)}:function(U){if(N(U))return!0;if(!U||typeof U!="function"&&typeof U!="object")return!1;if(_)return c(U);if(f(U))return!1;var W=h.call(U);return W!==l&&W!==u&&!/^\[object HTML/.test(W)?!1:c(U)}},{}],237:[function(e,i,t){var n=Object.prototype.toString,a=Function.prototype.toString,o=/^\s*(?:function)?\*/,d=e("has-tostringtag/shams")(),s=Object.getPrototypeOf,f=function(){if(!d)return!1;try{return Function("return function*() {}")()}catch{}},c;i.exports=function(v){if(typeof v!="function")return!1;if(o.test(a.call(v)))return!0;if(!d){var l=n.call(v);return l==="[object GeneratorFunction]"}if(!s)return!1;if(typeof c>"u"){var u=f();c=u?s(u):!1}return s(v)===c}},{"has-tostringtag/shams":216}],238:[function(e,i,t){(function(n){(function(){var a=e("for-each"),o=e("available-typed-arrays"),d=e("call-bind/callBound"),s=d("Object.prototype.toString"),f=e("has-tostringtag/shams")(),c=e("gopd"),h=typeof globalThis>"u"?n:globalThis,v=o(),l=d("Array.prototype.indexOf",!0)||function(C,N){for(var P=0;P<C.length;P+=1)if(C[P]===N)return P;return-1},u=d("String.prototype.slice"),p={},m=Object.getPrototypeOf;f&&c&&m&&a(v,function(_){var C=new h[_];if(Symbol.toStringTag in C){var N=m(C),P=c(N,Symbol.toStringTag);if(!P){var M=m(N);P=c(M,Symbol.toStringTag)}p[_]=P.get}});var w=function(C){var N=!1;return a(p,function(P,M){if(!N)try{N=P.call(C)===M}catch{}}),N};i.exports=function(C){if(!C||typeof C!="object")return!1;if(!f||!(Symbol.toStringTag in C)){var N=u(s(C),8,-1);return l(v,N)>-1}return c?w(C):!1}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":137,"call-bind/callBound":172,"for-each":209,gopd:213,"has-tostringtag/shams":216}],239:[function(e,i,t){var n=e("inherits"),a=e("hash-base"),o=e("safe-buffer").Buffer,d=new Array(16);function s(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}n(s,a),s.prototype._update=function(){for(var u=d,p=0;p<16;++p)u[p]=this._block.readInt32LE(p*4);var m=this._a,w=this._b,_=this._c,C=this._d;m=c(m,w,_,C,u[0],3614090360,7),C=c(C,m,w,_,u[1],3905402710,12),_=c(_,C,m,w,u[2],606105819,17),w=c(w,_,C,m,u[3],3250441966,22),m=c(m,w,_,C,u[4],4118548399,7),C=c(C,m,w,_,u[5],1200080426,12),_=c(_,C,m,w,u[6],2821735955,17),w=c(w,_,C,m,u[7],4249261313,22),m=c(m,w,_,C,u[8],1770035416,7),C=c(C,m,w,_,u[9],2336552879,12),_=c(_,C,m,w,u[10],4294925233,17),w=c(w,_,C,m,u[11],2304563134,22),m=c(m,w,_,C,u[12],1804603682,7),C=c(C,m,w,_,u[13],4254626195,12),_=c(_,C,m,w,u[14],2792965006,17),w=c(w,_,C,m,u[15],1236535329,22),m=h(m,w,_,C,u[1],4129170786,5),C=h(C,m,w,_,u[6],3225465664,9),_=h(_,C,m,w,u[11],643717713,14),w=h(w,_,C,m,u[0],3921069994,20),m=h(m,w,_,C,u[5],3593408605,5),C=h(C,m,w,_,u[10],38016083,9),_=h(_,C,m,w,u[15],3634488961,14),w=h(w,_,C,m,u[4],3889429448,20),m=h(m,w,_,C,u[9],568446438,5),C=h(C,m,w,_,u[14],3275163606,9),_=h(_,C,m,w,u[3],4107603335,14),w=h(w,_,C,m,u[8],1163531501,20),m=h(m,w,_,C,u[13],2850285829,5),C=h(C,m,w,_,u[2],4243563512,9),_=h(_,C,m,w,u[7],1735328473,14),w=h(w,_,C,m,u[12],2368359562,20),m=v(m,w,_,C,u[5],4294588738,4),C=v(C,m,w,_,u[8],2272392833,11),_=v(_,C,m,w,u[11],1839030562,16),w=v(w,_,C,m,u[14],4259657740,23),m=v(m,w,_,C,u[1],2763975236,4),C=v(C,m,w,_,u[4],1272893353,11),_=v(_,C,m,w,u[7],4139469664,16),w=v(w,_,C,m,u[10],3200236656,23),m=v(m,w,_,C,u[13],681279174,4),C=v(C,m,w,_,u[0],3936430074,11),_=v(_,C,m,w,u[3],3572445317,16),w=v(w,_,C,m,u[6],76029189,23),m=v(m,w,_,C,u[9],3654602809,4),C=v(C,m,w,_,u[12],3873151461,11),_=v(_,C,m,w,u[15],530742520,16),w=v(w,_,C,m,u[2],3299628645,23),m=l(m,w,_,C,u[0],4096336452,6),C=l(C,m,w,_,u[7],1126891415,10),_=l(_,C,m,w,u[14],2878612391,15),w=l(w,_,C,m,u[5],4237533241,21),m=l(m,w,_,C,u[12],1700485571,6),C=l(C,m,w,_,u[3],2399980690,10),_=l(_,C,m,w,u[10],4293915773,15),w=l(w,_,C,m,u[1],2240044497,21),m=l(m,w,_,C,u[8],1873313359,6),C=l(C,m,w,_,u[15],4264355552,10),_=l(_,C,m,w,u[6],2734768916,15),w=l(w,_,C,m,u[13],1309151649,21),m=l(m,w,_,C,u[4],4149444226,6),C=l(C,m,w,_,u[11],3174756917,10),_=l(_,C,m,w,u[2],718787259,15),w=l(w,_,C,m,u[9],3951481745,21),this._a=this._a+m|0,this._b=this._b+w|0,this._c=this._c+_|0,this._d=this._d+C|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var u=o.allocUnsafe(16);return u.writeInt32LE(this._a,0),u.writeInt32LE(this._b,4),u.writeInt32LE(this._c,8),u.writeInt32LE(this._d,12),u};function f(u,p){return u<<p|u>>>32-p}function c(u,p,m,w,_,C,N){return f(u+(p&m|~p&w)+_+C|0,N)+p|0}function h(u,p,m,w,_,C,N){return f(u+(p&w|m&~w)+_+C|0,N)+p|0}function v(u,p,m,w,_,C,N){return f(u+(p^m^w)+_+C|0,N)+p|0}function l(u,p,m,w,_,C,N){return f(u+(m^(p|~w))+_+C|0,N)+p|0}i.exports=s},{"hash-base":218,inherits:233,"safe-buffer":279}],240:[function(e,i,t){var n=e("bn.js"),a=e("brorand");function o(d){this.rand=d||new a.Rand}i.exports=o,o.create=function(s){return new o(s)},o.prototype._randbelow=function(s){var f=s.bitLength(),c=Math.ceil(f/8);do var h=new n(this.rand.generate(c));while(h.cmp(s)>=0);return h},o.prototype._randrange=function(s,f){var c=f.sub(s);return s.add(this._randbelow(c))},o.prototype.test=function(s,f,c){var h=s.bitLength(),v=n.mont(s),l=new n(1).toRed(v);f||(f=Math.max(1,h/48|0));for(var u=s.subn(1),p=0;!u.testn(p);p++);for(var m=s.shrn(p),w=u.toRed(v),_=!0;f>0;f--){var C=this._randrange(new n(2),u);c&&c(C);var N=C.toRed(v).redPow(m);if(!(N.cmp(l)===0||N.cmp(w)===0)){for(var P=1;P<p;P++){if(N=N.redSqr(),N.cmp(l)===0)return!1;if(N.cmp(w)===0)break}if(P===p)return!1}}return _},o.prototype.getDivisor=function(s,f){var c=s.bitLength(),h=n.mont(s),v=new n(1).toRed(h);f||(f=Math.max(1,c/48|0));for(var l=s.subn(1),u=0;!l.testn(u);u++);for(var p=s.shrn(u),m=l.toRed(h);f>0;f--){var w=this._randrange(new n(2),l),_=s.gcd(w);if(_.cmpn(1)!==0)return _;var C=w.toRed(h).redPow(p);if(!(C.cmp(v)===0||C.cmp(m)===0)){for(var N=1;N<u;N++){if(C=C.redSqr(),C.cmp(v)===0)return C.fromRed().subn(1).gcd(s);if(C.cmp(m)===0)break}if(N===u)return C=C.redSqr(),C.fromRed().subn(1).gcd(s)}}return!1}},{"bn.js":139,brorand:141}],241:[function(e,i,t){i.exports=n;function n(a,o){if(!a)throw new Error(o||"Assertion failed")}n.equal=function(o,d,s){if(o!=d)throw new Error(s||"Assertion failed: "+o+" != "+d)}},{}],242:[function(e,i,t){var n=t;function a(s,f){if(Array.isArray(s))return s.slice();if(!s)return[];var c=[];if(typeof s!="string"){for(var h=0;h<s.length;h++)c[h]=s[h]|0;return c}if(f==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var h=0;h<s.length;h+=2)c.push(parseInt(s[h]+s[h+1],16))}else for(var h=0;h<s.length;h++){var v=s.charCodeAt(h),l=v>>8,u=v&255;l?c.push(l,u):c.push(u)}return c}n.toArray=a;function o(s){return s.length===1?"0"+s:s}n.zero2=o;function d(s){for(var f="",c=0;c<s.length;c++)f+=o(s[c].toString(16));return f}n.toHex=d,n.encode=function(f,c){return c==="hex"?d(f):f}},{}],243:[function(e,i,t){i.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],244:[function(e,i,t){var n=e("asn1.js");t.certificate=e("./certificate");var a=n.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});t.RSAPrivateKey=a;var o=n.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});t.RSAPublicKey=o;var d=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())});t.PublicKey=d;var s=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),f=n.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())});t.PrivateKey=f;var c=n.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});t.EncryptedPrivateKey=c;var h=n.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});t.DSAPrivateKey=h,t.DSAparam=n.define("DSAparam",function(){this.int()});var v=n.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(l),this.key("publicKey").optional().explicit(1).bitstr())});t.ECPrivateKey=v;var l=n.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});t.signature=n.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":245,"asn1.js":123}],245:[function(e,i,t){var n=e("asn1.js"),a=n.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),o=n.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),d=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),s=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(d),this.key("subjectPublicKey").bitstr())}),f=n.define("RelativeDistinguishedName",function(){this.setof(o)}),c=n.define("RDNSequence",function(){this.seqof(f)}),h=n.define("Name",function(){this.choice({rdnSequence:this.use(c)})}),v=n.define("Validity",function(){this.seq().obj(this.key("notBefore").use(a),this.key("notAfter").use(a))}),l=n.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),u=n.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(d),this.key("issuer").use(h),this.key("validity").use(v),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(l).optional())}),p=n.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(u),this.key("signatureAlgorithm").use(d),this.key("signatureValue").bitstr())});i.exports=p},{"asn1.js":123}],246:[function(e,i,t){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,d=e("evp_bytestokey"),s=e("browserify-aes"),f=e("safe-buffer").Buffer;i.exports=function(c,h){var v=c.toString(),l=v.match(n),u;if(l){var m="aes"+l[1],w=f.from(l[2],"hex"),_=f.from(l[3].replace(/[\r\n]/g,""),"base64"),C=d(h,w.slice(0,8),parseInt(l[1],10)).key,N=[],P=s.createDecipheriv(m,C,w);N.push(P.update(_)),N.push(P.final()),u=f.concat(N)}else{var p=v.match(o);u=f.from(p[2].replace(/[\r\n]/g,""),"base64")}var M=v.match(a)[1];return{tag:M,data:u}}},{"browserify-aes":145,evp_bytestokey:208,"safe-buffer":279}],247:[function(e,i,t){var n=e("./asn1"),a=e("./aesid.json"),o=e("./fixProc"),d=e("browserify-aes"),s=e("pbkdf2"),f=e("safe-buffer").Buffer;i.exports=c;function c(v){var l;typeof v=="object"&&!f.isBuffer(v)&&(l=v.passphrase,v=v.key),typeof v=="string"&&(v=f.from(v));var u=o(v,l),p=u.tag,m=u.data,w,_;switch(p){case"CERTIFICATE":_=n.certificate.decode(m,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(_||(_=n.PublicKey.decode(m,"der")),w=_.algorithm.algorithm.join("."),w){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(_.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return _.subjectPrivateKey=_.subjectPublicKey,{type:"ec",data:_};case"1.2.840.10040.4.1":return _.algorithm.params.pub_key=n.DSAparam.decode(_.subjectPublicKey.data,"der"),{type:"dsa",data:_.algorithm.params};default:throw new Error("unknown key id "+w)}case"ENCRYPTED PRIVATE KEY":m=n.EncryptedPrivateKey.decode(m,"der"),m=h(m,l);case"PRIVATE KEY":switch(_=n.PrivateKey.decode(m,"der"),w=_.algorithm.algorithm.join("."),w){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(_.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:_.algorithm.curve,privateKey:n.ECPrivateKey.decode(_.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return _.algorithm.params.priv_key=n.DSAparam.decode(_.subjectPrivateKey,"der"),{type:"dsa",params:_.algorithm.params};default:throw new Error("unknown key id "+w)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(m,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(m,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(m,"der")};case"EC PRIVATE KEY":return m=n.ECPrivateKey.decode(m,"der"),{curve:m.parameters.value,privateKey:m.privateKey};default:throw new Error("unknown key type "+p)}}c.signature=n.signature;function h(v,l){var u=v.algorithm.decrypt.kde.kdeparams.salt,p=parseInt(v.algorithm.decrypt.kde.kdeparams.iters.toString(),10),m=a[v.algorithm.decrypt.cipher.algo.join(".")],w=v.algorithm.decrypt.cipher.iv,_=v.subjectPrivateKey,C=parseInt(m.split("-")[1],10)/8,N=s.pbkdf2Sync(l,u,p,C,"sha1"),P=d.createDecipheriv(m,N,w),M=[];return M.push(P.update(_)),M.push(P.final()),f.concat(M)}},{"./aesid.json":243,"./asn1":244,"./fixProc":246,"browserify-aes":145,pbkdf2:248,"safe-buffer":279}],248:[function(e,i,t){t.pbkdf2=e("./lib/async"),t.pbkdf2Sync=e("./lib/sync")},{"./lib/async":249,"./lib/sync":252}],249:[function(e,i,t){(function(n){(function(){var a=e("safe-buffer").Buffer,o=e("./precondition"),d=e("./default-encoding"),s=e("./sync"),f=e("./to-buffer"),c,h=n.crypto&&n.crypto.subtle,v={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},l=[];function u(C){if(n.process&&!n.process.browser||!h||!h.importKey||!h.deriveBits)return Promise.resolve(!1);if(l[C]!==void 0)return l[C];c=c||a.alloc(8);var N=w(c,c,10,128,C).then(function(){return!0}).catch(function(){return!1});return l[C]=N,N}var p;function m(){return p||(n.process&&n.process.nextTick?p=n.process.nextTick:n.queueMicrotask?p=n.queueMicrotask:n.setImmediate?p=n.setImmediate:p=n.setTimeout,p)}function w(C,N,P,M,U){return h.importKey("raw",C,{name:"PBKDF2"},!1,["deriveBits"]).then(function(W){return h.deriveBits({name:"PBKDF2",salt:N,iterations:P,hash:{name:U}},W,M<<3)}).then(function(W){return a.from(W)})}function _(C,N){C.then(function(P){m()(function(){N(null,P)})},function(P){m()(function(){N(P)})})}i.exports=function(C,N,P,M,U,W){typeof U=="function"&&(W=U,U=void 0),U=U||"sha1";var q=v[U.toLowerCase()];if(!q||typeof n.Promise!="function"){m()(function(){var Z;try{Z=s(C,N,P,M,U)}catch(re){return W(re)}W(null,Z)});return}if(o(P,M),C=f(C,d,"Password"),N=f(N,d,"Salt"),typeof W!="function")throw new Error("No callback provided to pbkdf2");_(u(q).then(function(Z){return Z?w(C,N,P,M,q):s(C,N,P,M,U)}),W)}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":250,"./precondition":251,"./sync":252,"./to-buffer":253,"safe-buffer":279}],250:[function(e,i,t){(function(n,a){(function(){var o;if(a.process&&a.process.browser)o="utf-8";else if(a.process&&a.process.version){var d=parseInt(n.version.split(".")[0].slice(1),10);o=d>=6?"utf-8":"binary"}else o="utf-8";i.exports=o}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:254}],251:[function(e,i,t){var n=Math.pow(2,30)-1;i.exports=function(a,o){if(typeof a!="number")throw new TypeError("Iterations not a number");if(a<0)throw new TypeError("Bad iterations");if(typeof o!="number")throw new TypeError("Key length not a number");if(o<0||o>n||o!==o)throw new TypeError("Bad key length")}},{}],252:[function(e,i,t){var n=e("create-hash/md5"),a=e("ripemd160"),o=e("sha.js"),d=e("safe-buffer").Buffer,s=e("./precondition"),f=e("./default-encoding"),c=e("./to-buffer"),h=d.alloc(128),v={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function l(m,w,_){var C=u(m),N=m==="sha512"||m==="sha384"?128:64;w.length>N?w=C(w):w.length<N&&(w=d.concat([w,h],N));for(var P=d.allocUnsafe(N+v[m]),M=d.allocUnsafe(N+v[m]),U=0;U<N;U++)P[U]=w[U]^54,M[U]=w[U]^92;var W=d.allocUnsafe(N+_+4);P.copy(W,0,0,N),this.ipad1=W,this.ipad2=P,this.opad=M,this.alg=m,this.blocksize=N,this.hash=C,this.size=v[m]}l.prototype.run=function(m,w){m.copy(w,this.blocksize);var _=this.hash(w);return _.copy(this.opad,this.blocksize),this.hash(this.opad)};function u(m){function w(C){return o(m).update(C).digest()}function _(C){return new a().update(C).digest()}return m==="rmd160"||m==="ripemd160"?_:m==="md5"?n:w}function p(m,w,_,C,N){s(_,C),m=c(m,f,"Password"),w=c(w,f,"Salt"),N=N||"sha1";var P=new l(N,m,w.length),M=d.allocUnsafe(C),U=d.allocUnsafe(w.length+4);w.copy(U,0,0,w.length);for(var W=0,q=v[N],Z=Math.ceil(C/q),re=1;re<=Z;re++){U.writeUInt32BE(re,w.length);for(var Y=P.run(U,P.ipad1),O=Y,x=1;x<_;x++){O=P.run(O,P.ipad2);for(var S=0;S<q;S++)Y[S]^=O[S]}Y.copy(M,W),W+=q}return M}i.exports=p},{"./default-encoding":250,"./precondition":251,"./to-buffer":253,"create-hash/md5":177,ripemd160:278,"safe-buffer":279,"sha.js":282}],253:[function(e,i,t){var n=e("safe-buffer").Buffer;i.exports=function(a,o,d){if(n.isBuffer(a))return a;if(typeof a=="string")return n.from(a,o);if(ArrayBuffer.isView(a))return n.from(a.buffer);throw new TypeError(d+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":279}],254:[function(e,i,t){var n=i.exports={},a,o;function d(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=d}catch{a=d}try{typeof clearTimeout=="function"?o=clearTimeout:o=s}catch{o=s}})();function f(C){if(a===setTimeout)return setTimeout(C,0);if((a===d||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function c(C){if(o===clearTimeout)return clearTimeout(C);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(C);try{return o(C)}catch{try{return o.call(null,C)}catch{return o.call(this,C)}}}var h=[],v=!1,l,u=-1;function p(){!v||!l||(v=!1,l.length?h=l.concat(h):u=-1,h.length&&m())}function m(){if(!v){var C=f(p);v=!0;for(var N=h.length;N;){for(l=h,h=[];++u<N;)l&&l[u].run();u=-1,N=h.length}l=null,v=!1,c(C)}}n.nextTick=function(C){var N=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)N[P-1]=arguments[P];h.push(new w(C,N)),h.length===1&&!v&&f(m)};function w(C,N){this.fun=C,this.array=N}w.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function _(){}n.on=_,n.addListener=_,n.once=_,n.off=_,n.removeListener=_,n.removeAllListeners=_,n.emit=_,n.prependListener=_,n.prependOnceListener=_,n.listeners=function(C){return[]},n.binding=function(C){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(C){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],255:[function(e,i,t){t.publicEncrypt=e("./publicEncrypt"),t.privateDecrypt=e("./privateDecrypt"),t.privateEncrypt=function(a,o){return t.publicEncrypt(a,o,!0)},t.publicDecrypt=function(a,o){return t.privateDecrypt(a,o,!0)}},{"./privateDecrypt":257,"./publicEncrypt":258}],256:[function(e,i,t){var n=e("create-hash"),a=e("safe-buffer").Buffer;i.exports=function(d,s){for(var f=a.alloc(0),c=0,h;f.length<s;)h=o(c++),f=a.concat([f,n("sha1").update(d).update(h).digest()]);return f.slice(0,s)};function o(d){var s=a.allocUnsafe(4);return s.writeUInt32BE(d,0),s}},{"create-hash":176,"safe-buffer":279}],257:[function(e,i,t){var n=e("parse-asn1"),a=e("./mgf"),o=e("./xor"),d=e("bn.js"),s=e("browserify-rsa"),f=e("create-hash"),c=e("./withPublic"),h=e("safe-buffer").Buffer;i.exports=function(m,w,_){var C;m.padding?C=m.padding:_?C=1:C=4;var N=n(m),P=N.modulus.byteLength();if(w.length>P||new d(w).cmp(N.modulus)>=0)throw new Error("decryption error");var M;_?M=c(new d(w),N):M=s(w,N);var U=h.alloc(P-M.length);if(M=h.concat([U,M],P),C===4)return v(N,M);if(C===1)return l(N,M,_);if(C===3)return M;throw new Error("unknown padding")};function v(p,m){var w=p.modulus.byteLength(),_=f("sha1").update(h.alloc(0)).digest(),C=_.length;if(m[0]!==0)throw new Error("decryption error");var N=m.slice(1,C+1),P=m.slice(C+1),M=o(N,a(P,C)),U=o(P,a(M,w-C-1));if(u(_,U.slice(0,C)))throw new Error("decryption error");for(var W=C;U[W]===0;)W++;if(U[W++]!==1)throw new Error("decryption error");return U.slice(W)}function l(p,m,w){for(var _=m.slice(0,2),C=2,N=0;m[C++]!==0;)if(C>=m.length){N++;break}var P=m.slice(2,C-1);if((_.toString("hex")!=="0002"&&!w||_.toString("hex")!=="0001"&&w)&&N++,P.length<8&&N++,N)throw new Error("decryption error");return m.slice(C)}function u(p,m){p=h.from(p),m=h.from(m);var w=0,_=p.length;p.length!==m.length&&(w++,_=Math.min(p.length,m.length));for(var C=-1;++C<_;)w+=p[C]^m[C];return w}},{"./mgf":256,"./withPublic":259,"./xor":260,"bn.js":139,"browserify-rsa":163,"create-hash":176,"parse-asn1":247,"safe-buffer":279}],258:[function(e,i,t){var n=e("parse-asn1"),a=e("randombytes"),o=e("create-hash"),d=e("./mgf"),s=e("./xor"),f=e("bn.js"),c=e("./withPublic"),h=e("browserify-rsa"),v=e("safe-buffer").Buffer;i.exports=function(w,_,C){var N;w.padding?N=w.padding:C?N=1:N=4;var P=n(w),M;if(N===4)M=l(P,_);else if(N===1)M=u(P,_,C);else if(N===3){if(M=new f(_),M.cmp(P.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return C?h(M,P):c(M,P)};function l(m,w){var _=m.modulus.byteLength(),C=w.length,N=o("sha1").update(v.alloc(0)).digest(),P=N.length,M=2*P;if(C>_-M-2)throw new Error("message too long");var U=v.alloc(_-C-M-2),W=_-P-1,q=a(P),Z=s(v.concat([N,U,v.alloc(1,1),w],W),d(q,W)),re=s(q,d(Z,P));return new f(v.concat([v.alloc(1),re,Z],_))}function u(m,w,_){var C=w.length,N=m.modulus.byteLength();if(C>N-11)throw new Error("message too long");var P;return _?P=v.alloc(N-C-3,255):P=p(N-C-3),new f(v.concat([v.from([0,_?1:2]),P,v.alloc(1),w],N))}function p(m){for(var w=v.allocUnsafe(m),_=0,C=a(m*2),N=0,P;_<m;)N===C.length&&(C=a(m*2),N=0),P=C[N++],P&&(w[_++]=P);return w}},{"./mgf":256,"./withPublic":259,"./xor":260,"bn.js":139,"browserify-rsa":163,"create-hash":176,"parse-asn1":247,randombytes:261,"safe-buffer":279}],259:[function(e,i,t){var n=e("bn.js"),a=e("safe-buffer").Buffer;function o(d,s){return a.from(d.toRed(n.mont(s.modulus)).redPow(new n(s.publicExponent)).fromRed().toArray())}i.exports=o},{"bn.js":139,"safe-buffer":279}],260:[function(e,i,t){i.exports=function(a,o){for(var d=a.length,s=-1;++s<d;)a[s]^=o[s];return a}},{}],261:[function(e,i,t){arguments[4][102][0].apply(t,arguments)},{_process:254,dup:102,"safe-buffer":279}],262:[function(e,i,t){(function(n,a){(function(){function o(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var d=e("safe-buffer"),s=e("randombytes"),f=d.Buffer,c=d.kMaxLength,h=a.crypto||a.msCrypto,v=Math.pow(2,32)-1;function l(_,C){if(typeof _!="number"||_!==_)throw new TypeError("offset must be a number");if(_>v||_<0)throw new TypeError("offset must be a uint32");if(_>c||_>C)throw new RangeError("offset out of range")}function u(_,C,N){if(typeof _!="number"||_!==_)throw new TypeError("size must be a number");if(_>v||_<0)throw new TypeError("size must be a uint32");if(_+C>N||_>c)throw new RangeError("buffer too small")}h&&h.getRandomValues||!n.browser?(t.randomFill=p,t.randomFillSync=w):(t.randomFill=o,t.randomFillSync=o);function p(_,C,N,P){if(!f.isBuffer(_)&&!(_ instanceof a.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof C=="function")P=C,C=0,N=_.length;else if(typeof N=="function")P=N,N=_.length-C;else if(typeof P!="function")throw new TypeError('"cb" argument must be a function');return l(C,_.length),u(N,C,_.length),m(_,C,N,P)}function m(_,C,N,P){if(n.browser){var M=_.buffer,U=new Uint8Array(M,C,N);if(h.getRandomValues(U),P){n.nextTick(function(){P(null,_)});return}return _}if(P){s(N,function(q,Z){if(q)return P(q);Z.copy(_,C),P(null,_)});return}var W=s(N);return W.copy(_,C),_}function w(_,C,N){if(typeof C>"u"&&(C=0),!f.isBuffer(_)&&!(_ instanceof a.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return l(C,_.length),N===void 0&&(N=_.length-C),u(N,C,_.length),m(_,C,N)}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:254,randombytes:261,"safe-buffer":279}],263:[function(e,i,t){arguments[4][103][0].apply(t,arguments)},{dup:103}],264:[function(e,i,t){arguments[4][104][0].apply(t,arguments)},{"./_stream_readable":266,"./_stream_writable":268,_process:254,dup:104,inherits:233}],265:[function(e,i,t){arguments[4][105][0].apply(t,arguments)},{"./_stream_transform":267,dup:105,inherits:233}],266:[function(e,i,t){arguments[4][106][0].apply(t,arguments)},{"../errors":263,"./_stream_duplex":264,"./internal/streams/async_iterator":269,"./internal/streams/buffer_list":270,"./internal/streams/destroy":271,"./internal/streams/from":273,"./internal/streams/state":275,"./internal/streams/stream":276,_process:254,buffer:171,dup:106,events:207,inherits:233,"string_decoder/":290,util:142}],267:[function(e,i,t){arguments[4][107][0].apply(t,arguments)},{"../errors":263,"./_stream_duplex":264,dup:107,inherits:233}],268:[function(e,i,t){arguments[4][108][0].apply(t,arguments)},{"../errors":263,"./_stream_duplex":264,"./internal/streams/destroy":271,"./internal/streams/state":275,"./internal/streams/stream":276,_process:254,buffer:171,dup:108,inherits:233,"util-deprecate":291}],269:[function(e,i,t){arguments[4][109][0].apply(t,arguments)},{"./end-of-stream":272,_process:254,dup:109}],270:[function(e,i,t){arguments[4][110][0].apply(t,arguments)},{buffer:171,dup:110,util:142}],271:[function(e,i,t){arguments[4][111][0].apply(t,arguments)},{_process:254,dup:111}],272:[function(e,i,t){arguments[4][112][0].apply(t,arguments)},{"../../../errors":263,dup:112}],273:[function(e,i,t){arguments[4][113][0].apply(t,arguments)},{dup:113}],274:[function(e,i,t){arguments[4][114][0].apply(t,arguments)},{"../../../errors":263,"./end-of-stream":272,dup:114}],275:[function(e,i,t){arguments[4][115][0].apply(t,arguments)},{"../../../errors":263,dup:115}],276:[function(e,i,t){arguments[4][116][0].apply(t,arguments)},{dup:116,events:207}],277:[function(e,i,t){arguments[4][117][0].apply(t,arguments)},{"./lib/_stream_duplex.js":264,"./lib/_stream_passthrough.js":265,"./lib/_stream_readable.js":266,"./lib/_stream_transform.js":267,"./lib/_stream_writable.js":268,"./lib/internal/streams/end-of-stream.js":272,"./lib/internal/streams/pipeline.js":274,dup:117}],278:[function(e,i,t){var n=e("buffer").Buffer,a=e("inherits"),o=e("hash-base"),d=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],v=[0,1518500249,1859775393,2400959708,2840853838],l=[1352829926,1548603684,1836072691,2053994217,0];function u(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}a(u,o),u.prototype._update=function(){for(var P=d,M=0;M<16;++M)P[M]=this._block.readInt32LE(M*4);for(var U=this._a|0,W=this._b|0,q=this._c|0,Z=this._d|0,re=this._e|0,Y=this._a|0,O=this._b|0,x=this._c|0,S=this._d|0,k=this._e|0,g=0;g<80;g+=1){var E,T;g<16?(E=m(U,W,q,Z,re,P[s[g]],v[0],c[g]),T=N(Y,O,x,S,k,P[f[g]],l[0],h[g])):g<32?(E=w(U,W,q,Z,re,P[s[g]],v[1],c[g]),T=C(Y,O,x,S,k,P[f[g]],l[1],h[g])):g<48?(E=_(U,W,q,Z,re,P[s[g]],v[2],c[g]),T=_(Y,O,x,S,k,P[f[g]],l[2],h[g])):g<64?(E=C(U,W,q,Z,re,P[s[g]],v[3],c[g]),T=w(Y,O,x,S,k,P[f[g]],l[3],h[g])):(E=N(U,W,q,Z,re,P[s[g]],v[4],c[g]),T=m(Y,O,x,S,k,P[f[g]],l[4],h[g])),U=re,re=Z,Z=p(q,10),q=W,W=E,Y=k,k=S,S=p(x,10),x=O,O=T}var A=this._b+q+S|0;this._b=this._c+Z+k|0,this._c=this._d+re+Y|0,this._d=this._e+U+O|0,this._e=this._a+W+x|0,this._a=A},u.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var P=n.alloc?n.alloc(20):new n(20);return P.writeInt32LE(this._a,0),P.writeInt32LE(this._b,4),P.writeInt32LE(this._c,8),P.writeInt32LE(this._d,12),P.writeInt32LE(this._e,16),P};function p(P,M){return P<<M|P>>>32-M}function m(P,M,U,W,q,Z,re,Y){return p(P+(M^U^W)+Z+re|0,Y)+q|0}function w(P,M,U,W,q,Z,re,Y){return p(P+(M&U|~M&W)+Z+re|0,Y)+q|0}function _(P,M,U,W,q,Z,re,Y){return p(P+((M|~U)^W)+Z+re|0,Y)+q|0}function C(P,M,U,W,q,Z,re,Y){return p(P+(M&W|U&~W)+Z+re|0,Y)+q|0}function N(P,M,U,W,q,Z,re,Y){return p(P+(M^(U|~W))+Z+re|0,Y)+q|0}i.exports=u},{buffer:171,"hash-base":218,inherits:233}],279:[function(e,i,t){arguments[4][118][0].apply(t,arguments)},{buffer:171,dup:118}],280:[function(e,i,t){(function(n){(function(){var a=e("buffer"),o=a.Buffer,d={},s;for(s in a)a.hasOwnProperty(s)&&(s==="SlowBuffer"||s==="Buffer"||(d[s]=a[s]));var f=d.Buffer={};for(s in o)o.hasOwnProperty(s)&&(s==="allocUnsafe"||s==="allocUnsafeSlow"||(f[s]=o[s]));if(d.Buffer.prototype=o.prototype,(!f.from||f.from===Uint8Array.from)&&(f.from=function(c,h,v){if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof c);if(c&&typeof c.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);return o(c,h,v)}),f.alloc||(f.alloc=function(c,h,v){if(typeof c!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof c);if(c<0||c>=2*(1<<30))throw new RangeError('The value "'+c+'" is invalid for option "size"');var l=o(c);return!h||h.length===0?l.fill(0):typeof v=="string"?l.fill(h,v):l.fill(h),l}),!d.kStringMaxLength)try{d.kStringMaxLength=n.binding("buffer").kStringMaxLength}catch{}d.constants||(d.constants={MAX_LENGTH:d.kMaxLength},d.kStringMaxLength&&(d.constants.MAX_STRING_LENGTH=d.kStringMaxLength)),i.exports=d}).call(this)}).call(this,e("_process"))},{_process:254,buffer:171}],281:[function(e,i,t){var n=e("safe-buffer").Buffer;function a(o,d){this._block=n.alloc(o),this._finalSize=d,this._blockSize=o,this._len=0}a.prototype.update=function(o,d){typeof o=="string"&&(d=d||"utf8",o=n.from(o,d));for(var s=this._block,f=this._blockSize,c=o.length,h=this._len,v=0;v<c;){for(var l=h%f,u=Math.min(c-v,f-l),p=0;p<u;p++)s[l+p]=o[v+p];h+=u,v+=u,h%f===0&&this._update(s)}return this._len+=c,this},a.prototype.digest=function(o){var d=this._len%this._blockSize;this._block[d]=128,this._block.fill(0,d+1),d>=this._finalSize&&(this._update(this._block),this._block.fill(0));var s=this._len*8;if(s<=4294967295)this._block.writeUInt32BE(s,this._blockSize-4);else{var f=(s&4294967295)>>>0,c=(s-f)/4294967296;this._block.writeUInt32BE(c,this._blockSize-8),this._block.writeUInt32BE(f,this._blockSize-4)}this._update(this._block);var h=this._hash();return o?h.toString(o):h},a.prototype._update=function(){throw new Error("_update must be implemented by subclass")},i.exports=a},{"safe-buffer":279}],282:[function(e,i,n){var n=i.exports=function(o){o=o.toLowerCase();var d=n[o];if(!d)throw new Error(o+" is not supported (we accept pull requests)");return new d};n.sha=e("./sha"),n.sha1=e("./sha1"),n.sha224=e("./sha224"),n.sha256=e("./sha256"),n.sha384=e("./sha384"),n.sha512=e("./sha512")},{"./sha":283,"./sha1":284,"./sha224":285,"./sha256":286,"./sha384":287,"./sha512":288}],283:[function(e,i,t){var n=e("inherits"),a=e("./hash"),o=e("safe-buffer").Buffer,d=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function f(){this.init(),this._w=s,a.call(this,64,56)}n(f,a),f.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function c(l){return l<<5|l>>>27}function h(l){return l<<30|l>>>2}function v(l,u,p,m){return l===0?u&p|~u&m:l===2?u&p|u&m|p&m:u^p^m}f.prototype._update=function(l){for(var u=this._w,p=this._a|0,m=this._b|0,w=this._c|0,_=this._d|0,C=this._e|0,N=0;N<16;++N)u[N]=l.readInt32BE(N*4);for(;N<80;++N)u[N]=u[N-3]^u[N-8]^u[N-14]^u[N-16];for(var P=0;P<80;++P){var M=~~(P/20),U=c(p)+v(M,m,w,_)+C+u[P]+d[M]|0;C=_,_=w,w=h(m),m=p,p=U}this._a=p+this._a|0,this._b=m+this._b|0,this._c=w+this._c|0,this._d=_+this._d|0,this._e=C+this._e|0},f.prototype._hash=function(){var l=o.allocUnsafe(20);return l.writeInt32BE(this._a|0,0),l.writeInt32BE(this._b|0,4),l.writeInt32BE(this._c|0,8),l.writeInt32BE(this._d|0,12),l.writeInt32BE(this._e|0,16),l},i.exports=f},{"./hash":281,inherits:233,"safe-buffer":279}],284:[function(e,i,t){var n=e("inherits"),a=e("./hash"),o=e("safe-buffer").Buffer,d=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function f(){this.init(),this._w=s,a.call(this,64,56)}n(f,a),f.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function c(u){return u<<1|u>>>31}function h(u){return u<<5|u>>>27}function v(u){return u<<30|u>>>2}function l(u,p,m,w){return u===0?p&m|~p&w:u===2?p&m|p&w|m&w:p^m^w}f.prototype._update=function(u){for(var p=this._w,m=this._a|0,w=this._b|0,_=this._c|0,C=this._d|0,N=this._e|0,P=0;P<16;++P)p[P]=u.readInt32BE(P*4);for(;P<80;++P)p[P]=c(p[P-3]^p[P-8]^p[P-14]^p[P-16]);for(var M=0;M<80;++M){var U=~~(M/20),W=h(m)+l(U,w,_,C)+N+p[M]+d[U]|0;N=C,C=_,_=v(w),w=m,m=W}this._a=m+this._a|0,this._b=w+this._b|0,this._c=_+this._c|0,this._d=C+this._d|0,this._e=N+this._e|0},f.prototype._hash=function(){var u=o.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},i.exports=f},{"./hash":281,inherits:233,"safe-buffer":279}],285:[function(e,i,t){var n=e("inherits"),a=e("./sha256"),o=e("./hash"),d=e("safe-buffer").Buffer,s=new Array(64);function f(){this.init(),this._w=s,o.call(this,64,56)}n(f,a),f.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},f.prototype._hash=function(){var c=d.allocUnsafe(28);return c.writeInt32BE(this._a,0),c.writeInt32BE(this._b,4),c.writeInt32BE(this._c,8),c.writeInt32BE(this._d,12),c.writeInt32BE(this._e,16),c.writeInt32BE(this._f,20),c.writeInt32BE(this._g,24),c},i.exports=f},{"./hash":281,"./sha256":286,inherits:233,"safe-buffer":279}],286:[function(e,i,t){var n=e("inherits"),a=e("./hash"),o=e("safe-buffer").Buffer,d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function f(){this.init(),this._w=s,a.call(this,64,56)}n(f,a),f.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function c(m,w,_){return _^m&(w^_)}function h(m,w,_){return m&w|_&(m|w)}function v(m){return(m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10)}function l(m){return(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7)}function u(m){return(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3}function p(m){return(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10}f.prototype._update=function(m){for(var w=this._w,_=this._a|0,C=this._b|0,N=this._c|0,P=this._d|0,M=this._e|0,U=this._f|0,W=this._g|0,q=this._h|0,Z=0;Z<16;++Z)w[Z]=m.readInt32BE(Z*4);for(;Z<64;++Z)w[Z]=p(w[Z-2])+w[Z-7]+u(w[Z-15])+w[Z-16]|0;for(var re=0;re<64;++re){var Y=q+l(M)+c(M,U,W)+d[re]+w[re]|0,O=v(_)+h(_,C,N)|0;q=W,W=U,U=M,M=P+Y|0,P=N,N=C,C=_,_=Y+O|0}this._a=_+this._a|0,this._b=C+this._b|0,this._c=N+this._c|0,this._d=P+this._d|0,this._e=M+this._e|0,this._f=U+this._f|0,this._g=W+this._g|0,this._h=q+this._h|0},f.prototype._hash=function(){var m=o.allocUnsafe(32);return m.writeInt32BE(this._a,0),m.writeInt32BE(this._b,4),m.writeInt32BE(this._c,8),m.writeInt32BE(this._d,12),m.writeInt32BE(this._e,16),m.writeInt32BE(this._f,20),m.writeInt32BE(this._g,24),m.writeInt32BE(this._h,28),m},i.exports=f},{"./hash":281,inherits:233,"safe-buffer":279}],287:[function(e,i,t){var n=e("inherits"),a=e("./sha512"),o=e("./hash"),d=e("safe-buffer").Buffer,s=new Array(160);function f(){this.init(),this._w=s,o.call(this,128,112)}n(f,a),f.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},f.prototype._hash=function(){var c=d.allocUnsafe(48);function h(v,l,u){c.writeInt32BE(v,u),c.writeInt32BE(l,u+4)}return h(this._ah,this._al,0),h(this._bh,this._bl,8),h(this._ch,this._cl,16),h(this._dh,this._dl,24),h(this._eh,this._el,32),h(this._fh,this._fl,40),c},i.exports=f},{"./hash":281,"./sha512":288,inherits:233,"safe-buffer":279}],288:[function(e,i,t){var n=e("inherits"),a=e("./hash"),o=e("safe-buffer").Buffer,d=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function f(){this.init(),this._w=s,a.call(this,128,112)}n(f,a),f.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function c(C,N,P){return P^C&(N^P)}function h(C,N,P){return C&N|P&(C|N)}function v(C,N){return(C>>>28|N<<4)^(N>>>2|C<<30)^(N>>>7|C<<25)}function l(C,N){return(C>>>14|N<<18)^(C>>>18|N<<14)^(N>>>9|C<<23)}function u(C,N){return(C>>>1|N<<31)^(C>>>8|N<<24)^C>>>7}function p(C,N){return(C>>>1|N<<31)^(C>>>8|N<<24)^(C>>>7|N<<25)}function m(C,N){return(C>>>19|N<<13)^(N>>>29|C<<3)^C>>>6}function w(C,N){return(C>>>19|N<<13)^(N>>>29|C<<3)^(C>>>6|N<<26)}function _(C,N){return C>>>0<N>>>0?1:0}f.prototype._update=function(C){for(var N=this._w,P=this._ah|0,M=this._bh|0,U=this._ch|0,W=this._dh|0,q=this._eh|0,Z=this._fh|0,re=this._gh|0,Y=this._hh|0,O=this._al|0,x=this._bl|0,S=this._cl|0,k=this._dl|0,g=this._el|0,E=this._fl|0,T=this._gl|0,A=this._hl|0,J=0;J<32;J+=2)N[J]=C.readInt32BE(J*4),N[J+1]=C.readInt32BE(J*4+4);for(;J<160;J+=2){var G=N[J-30],I=N[J-15*2+1],V=u(G,I),B=p(I,G);G=N[J-2*2],I=N[J-2*2+1];var z=m(G,I),ie=w(I,G),de=N[J-7*2],me=N[J-7*2+1],be=N[J-16*2],we=N[J-16*2+1],oe=B+me|0,ce=V+de+_(oe,B)|0;oe=oe+ie|0,ce=ce+z+_(oe,ie)|0,oe=oe+we|0,ce=ce+be+_(oe,we)|0,N[J]=ce,N[J+1]=oe}for(var ge=0;ge<160;ge+=2){ce=N[ge],oe=N[ge+1];var ke=h(P,M,U),le=h(O,x,S),te=v(P,O),ee=v(O,P),Q=l(q,g),F=l(g,q),$=d[ge],X=d[ge+1],se=c(q,Z,re),ve=c(g,E,T),Se=A+F|0,ue=Y+Q+_(Se,A)|0;Se=Se+ve|0,ue=ue+se+_(Se,ve)|0,Se=Se+X|0,ue=ue+$+_(Se,X)|0,Se=Se+oe|0,ue=ue+ce+_(Se,oe)|0;var y=ee+le|0,L=te+ke+_(y,ee)|0;Y=re,A=T,re=Z,T=E,Z=q,E=g,g=k+Se|0,q=W+ue+_(g,k)|0,W=U,k=S,U=M,S=x,M=P,x=O,O=Se+y|0,P=ue+L+_(O,Se)|0}this._al=this._al+O|0,this._bl=this._bl+x|0,this._cl=this._cl+S|0,this._dl=this._dl+k|0,this._el=this._el+g|0,this._fl=this._fl+E|0,this._gl=this._gl+T|0,this._hl=this._hl+A|0,this._ah=this._ah+P+_(this._al,O)|0,this._bh=this._bh+M+_(this._bl,x)|0,this._ch=this._ch+U+_(this._cl,S)|0,this._dh=this._dh+W+_(this._dl,k)|0,this._eh=this._eh+q+_(this._el,g)|0,this._fh=this._fh+Z+_(this._fl,E)|0,this._gh=this._gh+re+_(this._gl,T)|0,this._hh=this._hh+Y+_(this._hl,A)|0},f.prototype._hash=function(){var C=o.allocUnsafe(64);function N(P,M,U){C.writeInt32BE(P,U),C.writeInt32BE(M,U+4)}return N(this._ah,this._al,0),N(this._bh,this._bl,8),N(this._ch,this._cl,16),N(this._dh,this._dl,24),N(this._eh,this._el,32),N(this._fh,this._fl,40),N(this._gh,this._gl,48),N(this._hh,this._hl,56),C},i.exports=f},{"./hash":281,inherits:233,"safe-buffer":279}],289:[function(e,i,t){i.exports=o;var n=e("events").EventEmitter,a=e("inherits");a(o,n),o.Readable=e("readable-stream/lib/_stream_readable.js"),o.Writable=e("readable-stream/lib/_stream_writable.js"),o.Duplex=e("readable-stream/lib/_stream_duplex.js"),o.Transform=e("readable-stream/lib/_stream_transform.js"),o.PassThrough=e("readable-stream/lib/_stream_passthrough.js"),o.finished=e("readable-stream/lib/internal/streams/end-of-stream.js"),o.pipeline=e("readable-stream/lib/internal/streams/pipeline.js"),o.Stream=o;function o(){n.call(this)}o.prototype.pipe=function(d,s){var f=this;function c(w){d.writable&&d.write(w)===!1&&f.pause&&f.pause()}f.on("data",c);function h(){f.readable&&f.resume&&f.resume()}d.on("drain",h),!d._isStdio&&(!s||s.end!==!1)&&(f.on("end",l),f.on("close",u));var v=!1;function l(){v||(v=!0,d.end())}function u(){v||(v=!0,typeof d.destroy=="function"&&d.destroy())}function p(w){if(m(),n.listenerCount(this,"error")===0)throw w}f.on("error",p),d.on("error",p);function m(){f.removeListener("data",c),d.removeListener("drain",h),f.removeListener("end",l),f.removeListener("close",u),f.removeListener("error",p),d.removeListener("error",p),f.removeListener("end",m),f.removeListener("close",m),d.removeListener("close",m)}return f.on("end",m),f.on("close",m),d.on("close",m),d.emit("pipe",f),d}},{events:207,inherits:233,"readable-stream/lib/_stream_duplex.js":264,"readable-stream/lib/_stream_passthrough.js":265,"readable-stream/lib/_stream_readable.js":266,"readable-stream/lib/_stream_transform.js":267,"readable-stream/lib/_stream_writable.js":268,"readable-stream/lib/internal/streams/end-of-stream.js":272,"readable-stream/lib/internal/streams/pipeline.js":274}],290:[function(e,i,t){arguments[4][121][0].apply(t,arguments)},{dup:121,"safe-buffer":279}],291:[function(e,i,t){arguments[4][122][0].apply(t,arguments)},{dup:122}],292:[function(e,i,t){i.exports=function(a){return a&&typeof a=="object"&&typeof a.copy=="function"&&typeof a.fill=="function"&&typeof a.readUInt8=="function"}},{}],293:[function(e,i,t){var n=e("is-arguments"),a=e("is-generator-function"),o=e("which-typed-array"),d=e("is-typed-array");function s(X){return X.call.bind(X)}var f=typeof BigInt<"u",c=typeof Symbol<"u",h=s(Object.prototype.toString),v=s(Number.prototype.valueOf),l=s(String.prototype.valueOf),u=s(Boolean.prototype.valueOf);if(f)var p=s(BigInt.prototype.valueOf);if(c)var m=s(Symbol.prototype.valueOf);function w(X,se){if(typeof X!="object")return!1;try{return se(X),!0}catch{return!1}}t.isArgumentsObject=n,t.isGeneratorFunction=a,t.isTypedArray=d;function _(X){return typeof Promise<"u"&&X instanceof Promise||X!==null&&typeof X=="object"&&typeof X.then=="function"&&typeof X.catch=="function"}t.isPromise=_;function C(X){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(X):d(X)||z(X)}t.isArrayBufferView=C;function N(X){return o(X)==="Uint8Array"}t.isUint8Array=N;function P(X){return o(X)==="Uint8ClampedArray"}t.isUint8ClampedArray=P;function M(X){return o(X)==="Uint16Array"}t.isUint16Array=M;function U(X){return o(X)==="Uint32Array"}t.isUint32Array=U;function W(X){return o(X)==="Int8Array"}t.isInt8Array=W;function q(X){return o(X)==="Int16Array"}t.isInt16Array=q;function Z(X){return o(X)==="Int32Array"}t.isInt32Array=Z;function re(X){return o(X)==="Float32Array"}t.isFloat32Array=re;function Y(X){return o(X)==="Float64Array"}t.isFloat64Array=Y;function O(X){return o(X)==="BigInt64Array"}t.isBigInt64Array=O;function x(X){return o(X)==="BigUint64Array"}t.isBigUint64Array=x;function S(X){return h(X)==="[object Map]"}S.working=typeof Map<"u"&&S(new Map);function k(X){return typeof Map>"u"?!1:S.working?S(X):X instanceof Map}t.isMap=k;function g(X){return h(X)==="[object Set]"}g.working=typeof Set<"u"&&g(new Set);function E(X){return typeof Set>"u"?!1:g.working?g(X):X instanceof Set}t.isSet=E;function T(X){return h(X)==="[object WeakMap]"}T.working=typeof WeakMap<"u"&&T(new WeakMap);function A(X){return typeof WeakMap>"u"?!1:T.working?T(X):X instanceof WeakMap}t.isWeakMap=A;function J(X){return h(X)==="[object WeakSet]"}J.working=typeof WeakSet<"u"&&J(new WeakSet);function G(X){return J(X)}t.isWeakSet=G;function I(X){return h(X)==="[object ArrayBuffer]"}I.working=typeof ArrayBuffer<"u"&&I(new ArrayBuffer);function V(X){return typeof ArrayBuffer>"u"?!1:I.working?I(X):X instanceof ArrayBuffer}t.isArrayBuffer=V;function B(X){return h(X)==="[object DataView]"}B.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&B(new DataView(new ArrayBuffer(1),0,1));function z(X){return typeof DataView>"u"?!1:B.working?B(X):X instanceof DataView}t.isDataView=z;var ie=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function de(X){return h(X)==="[object SharedArrayBuffer]"}function me(X){return typeof ie>"u"?!1:(typeof de.working>"u"&&(de.working=de(new ie)),de.working?de(X):X instanceof ie)}t.isSharedArrayBuffer=me;function be(X){return h(X)==="[object AsyncFunction]"}t.isAsyncFunction=be;function we(X){return h(X)==="[object Map Iterator]"}t.isMapIterator=we;function oe(X){return h(X)==="[object Set Iterator]"}t.isSetIterator=oe;function ce(X){return h(X)==="[object Generator]"}t.isGeneratorObject=ce;function ge(X){return h(X)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=ge;function ke(X){return w(X,v)}t.isNumberObject=ke;function le(X){return w(X,l)}t.isStringObject=le;function te(X){return w(X,u)}t.isBooleanObject=te;function ee(X){return f&&w(X,p)}t.isBigIntObject=ee;function Q(X){return c&&w(X,m)}t.isSymbolObject=Q;function F(X){return ke(X)||le(X)||te(X)||ee(X)||Q(X)}t.isBoxedPrimitive=F;function $(X){return typeof Uint8Array<"u"&&(V(X)||me(X))}t.isAnyArrayBuffer=$,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(X){Object.defineProperty(t,X,{enumerable:!1,value:function(){throw new Error(X+" is not supported in userland")}})})},{"is-arguments":234,"is-generator-function":237,"is-typed-array":238,"which-typed-array":295}],294:[function(e,i,t){(function(n){(function(){var a=Object.getOwnPropertyDescriptors||function(ie){for(var de=Object.keys(ie),me={},be=0;be<de.length;be++)me[de[be]]=Object.getOwnPropertyDescriptor(ie,de[be]);return me},o=/%[sdj%]/g;t.format=function(z){if(!q(z)){for(var ie=[],de=0;de<arguments.length;de++)ie.push(c(arguments[de]));return ie.join(" ")}for(var de=1,me=arguments,be=me.length,we=String(z).replace(o,function(ce){if(ce==="%%")return"%";if(de>=be)return ce;switch(ce){case"%s":return String(me[de++]);case"%d":return Number(me[de++]);case"%j":try{return JSON.stringify(me[de++])}catch{return"[Circular]"}default:return ce}}),oe=me[de];de<be;oe=me[++de])M(oe)||!O(oe)?we+=" "+oe:we+=" "+c(oe);return we},t.deprecate=function(z,ie){if(typeof n<"u"&&n.noDeprecation===!0)return z;if(typeof n>"u")return function(){return t.deprecate(z,ie).apply(this,arguments)};var de=!1;function me(){if(!de){if(n.throwDeprecation)throw new Error(ie);n.traceDeprecation?console.trace(ie):console.error(ie),de=!0}return z.apply(this,arguments)}return me};var d={},s=/^$/;if({}.NODE_DEBUG){var f={}.NODE_DEBUG;f=f.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+f+"$","i")}t.debuglog=function(z){if(z=z.toUpperCase(),!d[z])if(s.test(z)){var ie=n.pid;d[z]=function(){var de=t.format.apply(t,arguments);console.error("%s %d: %s",z,ie,de)}}else d[z]=function(){};return d[z]};function c(z,ie){var de={seen:[],stylize:v};return arguments.length>=3&&(de.depth=arguments[2]),arguments.length>=4&&(de.colors=arguments[3]),P(ie)?de.showHidden=ie:ie&&t._extend(de,ie),re(de.showHidden)&&(de.showHidden=!1),re(de.depth)&&(de.depth=2),re(de.colors)&&(de.colors=!1),re(de.customInspect)&&(de.customInspect=!0),de.colors&&(de.stylize=h),u(de,z,de.depth)}t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function h(z,ie){var de=c.styles[ie];return de?"\x1B["+c.colors[de][0]+"m"+z+"\x1B["+c.colors[de][1]+"m":z}function v(z,ie){return z}function l(z){var ie={};return z.forEach(function(de,me){ie[de]=!0}),ie}function u(z,ie,de){if(z.customInspect&&ie&&k(ie.inspect)&&ie.inspect!==t.inspect&&!(ie.constructor&&ie.constructor.prototype===ie)){var me=ie.inspect(de,z);return q(me)||(me=u(z,me,de)),me}var be=p(z,ie);if(be)return be;var we=Object.keys(ie),oe=l(we);if(z.showHidden&&(we=Object.getOwnPropertyNames(ie)),S(ie)&&(we.indexOf("message")>=0||we.indexOf("description")>=0))return m(ie);if(we.length===0){if(k(ie)){var ce=ie.name?": "+ie.name:"";return z.stylize("[Function"+ce+"]","special")}if(Y(ie))return z.stylize(RegExp.prototype.toString.call(ie),"regexp");if(x(ie))return z.stylize(Date.prototype.toString.call(ie),"date");if(S(ie))return m(ie)}var ge="",ke=!1,le=["{","}"];if(N(ie)&&(ke=!0,le=["[","]"]),k(ie)){var te=ie.name?": "+ie.name:"";ge=" [Function"+te+"]"}if(Y(ie)&&(ge=" "+RegExp.prototype.toString.call(ie)),x(ie)&&(ge=" "+Date.prototype.toUTCString.call(ie)),S(ie)&&(ge=" "+m(ie)),we.length===0&&(!ke||ie.length==0))return le[0]+ge+le[1];if(de<0)return Y(ie)?z.stylize(RegExp.prototype.toString.call(ie),"regexp"):z.stylize("[Object]","special");z.seen.push(ie);var ee;return ke?ee=w(z,ie,de,oe,we):ee=we.map(function(Q){return _(z,ie,de,oe,Q,ke)}),z.seen.pop(),C(ee,ge,le)}function p(z,ie){if(re(ie))return z.stylize("undefined","undefined");if(q(ie)){var de="'"+JSON.stringify(ie).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(de,"string")}if(W(ie))return z.stylize(""+ie,"number");if(P(ie))return z.stylize(""+ie,"boolean");if(M(ie))return z.stylize("null","null")}function m(z){return"["+Error.prototype.toString.call(z)+"]"}function w(z,ie,de,me,be){for(var we=[],oe=0,ce=ie.length;oe<ce;++oe)G(ie,String(oe))?we.push(_(z,ie,de,me,String(oe),!0)):we.push("");return be.forEach(function(ge){ge.match(/^\d+$/)||we.push(_(z,ie,de,me,ge,!0))}),we}function _(z,ie,de,me,be,we){var oe,ce,ge;if(ge=Object.getOwnPropertyDescriptor(ie,be)||{value:ie[be]},ge.get?ge.set?ce=z.stylize("[Getter/Setter]","special"):ce=z.stylize("[Getter]","special"):ge.set&&(ce=z.stylize("[Setter]","special")),G(me,be)||(oe="["+be+"]"),ce||(z.seen.indexOf(ge.value)<0?(M(de)?ce=u(z,ge.value,null):ce=u(z,ge.value,de-1),ce.indexOf(`
`)>-1&&(we?ce=ce.split(`
`).map(function(ke){return"  "+ke}).join(`
`).slice(2):ce=`
`+ce.split(`
`).map(function(ke){return"   "+ke}).join(`
`))):ce=z.stylize("[Circular]","special")),re(oe)){if(we&&be.match(/^\d+$/))return ce;oe=JSON.stringify(""+be),oe.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(oe=oe.slice(1,-1),oe=z.stylize(oe,"name")):(oe=oe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),oe=z.stylize(oe,"string"))}return oe+": "+ce}function C(z,ie,de){var me=z.reduce(function(be,we){return we.indexOf(`
`)>=0,be+we.replace(/\u001b\[\d\d?m/g,"").length+1},0);return me>60?de[0]+(ie===""?"":ie+`
 `)+" "+z.join(`,
  `)+" "+de[1]:de[0]+ie+" "+z.join(", ")+" "+de[1]}t.types=e("./support/types");function N(z){return Array.isArray(z)}t.isArray=N;function P(z){return typeof z=="boolean"}t.isBoolean=P;function M(z){return z===null}t.isNull=M;function U(z){return z==null}t.isNullOrUndefined=U;function W(z){return typeof z=="number"}t.isNumber=W;function q(z){return typeof z=="string"}t.isString=q;function Z(z){return typeof z=="symbol"}t.isSymbol=Z;function re(z){return z===void 0}t.isUndefined=re;function Y(z){return O(z)&&E(z)==="[object RegExp]"}t.isRegExp=Y,t.types.isRegExp=Y;function O(z){return typeof z=="object"&&z!==null}t.isObject=O;function x(z){return O(z)&&E(z)==="[object Date]"}t.isDate=x,t.types.isDate=x;function S(z){return O(z)&&(E(z)==="[object Error]"||z instanceof Error)}t.isError=S,t.types.isNativeError=S;function k(z){return typeof z=="function"}t.isFunction=k;function g(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}t.isPrimitive=g,t.isBuffer=e("./support/isBuffer");function E(z){return Object.prototype.toString.call(z)}function T(z){return z<10?"0"+z.toString(10):z.toString(10)}var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function J(){var z=new Date,ie=[T(z.getHours()),T(z.getMinutes()),T(z.getSeconds())].join(":");return[z.getDate(),A[z.getMonth()],ie].join(" ")}t.log=function(){console.log("%s - %s",J(),t.format.apply(t,arguments))},t.inherits=e("inherits"),t._extend=function(z,ie){if(!ie||!O(ie))return z;for(var de=Object.keys(ie),me=de.length;me--;)z[de[me]]=ie[de[me]];return z};function G(z,ie){return Object.prototype.hasOwnProperty.call(z,ie)}var I=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(ie){if(typeof ie!="function")throw new TypeError('The "original" argument must be of type Function');if(I&&ie[I]){var de=ie[I];if(typeof de!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(de,I,{value:de,enumerable:!1,writable:!1,configurable:!0}),de}function de(){for(var me,be,we=new Promise(function(ge,ke){me=ge,be=ke}),oe=[],ce=0;ce<arguments.length;ce++)oe.push(arguments[ce]);oe.push(function(ge,ke){ge?be(ge):me(ke)});try{ie.apply(this,oe)}catch(ge){be(ge)}return we}return Object.setPrototypeOf(de,Object.getPrototypeOf(ie)),I&&Object.defineProperty(de,I,{value:de,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(de,a(ie))},t.promisify.custom=I;function V(z,ie){if(!z){var de=new Error("Promise was rejected with a falsy value");de.reason=z,z=de}return ie(z)}function B(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');function ie(){for(var de=[],me=0;me<arguments.length;me++)de.push(arguments[me]);var be=de.pop();if(typeof be!="function")throw new TypeError("The last argument must be of type Function");var we=this,oe=function(){return be.apply(we,arguments)};z.apply(this,de).then(function(ce){n.nextTick(oe.bind(null,null,ce))},function(ce){n.nextTick(V.bind(null,ce,oe))})}return Object.setPrototypeOf(ie,Object.getPrototypeOf(z)),Object.defineProperties(ie,a(z)),ie}t.callbackify=B}).call(this)}).call(this,e("_process"))},{"./support/isBuffer":292,"./support/types":293,_process:254,inherits:233}],295:[function(e,i,t){(function(n){(function(){var a=e("for-each"),o=e("available-typed-arrays"),d=e("call-bind/callBound"),s=e("gopd"),f=d("Object.prototype.toString"),c=e("has-tostringtag/shams")(),h=typeof globalThis>"u"?n:globalThis,v=o(),l=d("String.prototype.slice"),u={},p=Object.getPrototypeOf;c&&s&&p&&a(v,function(_){if(typeof h[_]=="function"){var C=new h[_];if(Symbol.toStringTag in C){var N=p(C),P=s(N,Symbol.toStringTag);if(!P){var M=p(N);P=s(M,Symbol.toStringTag)}u[_]=P.get}}});var m=function(C){var N=!1;return a(u,function(P,M){if(!N)try{var U=P.call(C);U===M&&(N=U)}catch{}}),N},w=e("is-typed-array");i.exports=function(C){return w(C)?!c||!(Symbol.toStringTag in C)?l(f(C),8,-1):m(C):!1}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":137,"call-bind/callBound":172,"for-each":209,gopd:213,"has-tostringtag/shams":216,"is-typed-array":238}]},{},[1])(1)});const SimplePeer=globalThis.SimplePeer;class SimplePeerConnection{constructor(i,t,n){ht(this,"p");ht(this,"msgSendQueue",[]);ht(this,"onMesssageRecived");ht(this,"onConnStateChange");ht(this,"onOutgoingSignalMsg");this.onMesssageRecived=a=>i(a),this.onConnStateChange=a=>t(a),this.onOutgoingSignalMsg=a=>n(a)}async start(i){this.p=new SimplePeer(i),this.p.on("signal",t=>{console.log("SIMPLEPEER sendSignallingMsgCallback: ",t),this.onOutgoingSignalMsg(ENCODE_TXT(JSON.stringify(t)))}),this.p.on("connect",()=>{this._emptyMsgQueue()}),this.p.on("data",t=>{console.log("SIMPLEPEER: got a dc message: ",t)}),this.p.on("stream",t=>{console.info("SIMPLEPEER: got video stream: ",t);var n=document.getElementById("direct_video");"srcObject"in n?n.srcObject=t:n.src=window.URL.createObjectURL(t),n.play()})}sendMessage(i){this.msgSendQueue.push(i),this._emptyMsgQueue()}_emptyMsgQueue(){if(!this.p||!this.p.connected)return!1;const i=this.msgSendQueue.length;for(let t=0;t<i;t++)this.p.send(this.msgSendQueue[t])}handleSignalingMsg(i){let t="";try{t=DECODE_TXT(i);const n=JSON.parse(t);this.p.signal(n)}catch(n){console.warn("failed to parse signalling message: ",t,n.message)}}}export{DefaultReconnectPolicy as D,MediaDeviceFailure as M,ParticipantEvent as P,Room as R,SimplePeerConnection as S,Track as T,VideoPresets as V,RoomEvent as a,appendLog as b,DataPacket_Kind as c,getWebsocketURL as g,waitfor as w};
//# sourceMappingURL=simplePeer-35b4a08a.js.map
